(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5664],{28824:function(e,a,t){Promise.resolve().then(t.bind(t,40654))},40654:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return $}});var s=t(57437),n=t(2265),i=t(26892),r=t(95252),c=t(95805),l=t(42488),o=t(64972),d=t(96215),m=t(70525),u=t(73618),p=t(76865),h=t(82023),x=t(11239),g=t(48736),f=t(2961),y=t(31810),b=t(58896),j=t(10407),v=t(82431),N=t(48837),w=t(5526);async function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;try{let{data:a}=await w.supabase.from("financial_records").select("month, total_revenue").order("month",{ascending:!0}).limit(24);if(!a||a.length<6)return V(e);let t=a.map(e=>e.total_revenue),s=function(e){if(e.length<2)return 0;let a=e.length,t=0,s=0,n=0,i=0;for(let r=0;r<a;r++)t+=r,s+=e[r],n+=r*e[r],i+=r*r;return(a*n-t*s)/(a*i-t*t)/(s/a)}(t),n=function(e){let a=Array(12).fill(0),t=Array(12).fill(0),s=e.reduce((e,a)=>e+a,0)/e.length;return e.forEach((e,s)=>{let n=s%12;a[n]+=e,t[n]++}),a.map((e,a)=>0===t[a]?1:e/t[a]/s)}(t),i=function(e){if(e.length<2)return 0;let a=0,t=0;for(let s=1;s<e.length;s++)e[s-1]>0&&(a+=(e[s]-e[s-1])/e[s-1],t++);return t>0?a/t:0}(t),r=[],c=t[t.length-1],l=new Date;for(let a=1;a<=e;a++){let e=new Date(l);e.setMonth(e.getMonth()+a);let t=n[e.getMonth()]||1,o=c*Math.pow(1+i,a)*t*(1+s*a*.01),d=.1+.03*a;r.push({month:e.toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),predicted:Math.round(o),lowerBound:Math.round(o*(1-d)),upperBound:Math.round(o*(1+d)),confidence:Math.round((1-d)*100)})}return r}catch(a){return console.error("Erro na previs\xe3o de faturamento:",a),V(e)}}async function k(){try{let{data:e}=await w.supabase.from("clients").select("\n        id,\n        name,\n        created_at,\n        last_interaction,\n        nps_score,\n        payment_status,\n        contract_value,\n        support_tickets\n      ");if(!e)return[];let a=[];for(let t of e){let e;let s=[],n=0,i=t.last_interaction?Math.floor((Date.now()-new Date(t.last_interaction).getTime())/864e5):90;i>30&&(n+=20,s.push({name:"Baixa intera\xe7\xe3o",impact:"negative",weight:20,description:"".concat(i," dias sem intera\xe7\xe3o")})),null!==t.nps_score&&(t.nps_score<=6?(n+=30,s.push({name:"NPS Detrator",impact:"negative",weight:30,description:"NPS: ".concat(t.nps_score,"/10")})):t.nps_score>=9&&(n-=10,s.push({name:"NPS Promotor",impact:"positive",weight:-10,description:"NPS: ".concat(t.nps_score,"/10")}))),"overdue"===t.payment_status&&(n+=25,s.push({name:"Pagamento atrasado",impact:"negative",weight:25,description:"Possui faturas em atraso"})),t.support_tickets>5&&(n+=15,s.push({name:"Alto volume de suporte",impact:"negative",weight:15,description:"".concat(t.support_tickets," tickets abertos")}));let r=t.created_at?Math.floor((Date.now()-new Date(t.created_at).getTime())/2592e6):0;r<6?(n+=10,s.push({name:"Cliente recente",impact:"negative",weight:10,description:"Apenas ".concat(r," meses de contrato")})):r>24&&(n-=15,s.push({name:"Cliente fiel",impact:"positive",weight:-15,description:"".concat(r," meses de contrato")}));let c=Math.max(0,Math.min(100,n));e=c>=70?"critical":c>=50?"high":c>=30?"medium":"low";let l=function(e,a){let t=[];return e.forEach(e=>{if("negative"===e.impact)switch(e.name){case"Baixa intera\xe7\xe3o":t.push("Agendar call de acompanhamento"),t.push("Enviar relat\xf3rio de resultados");break;case"NPS Detrator":t.push("Ligar para entender insatisfa\xe7\xe3o"),t.push("Oferecer reuni\xe3o com gestor");break;case"Pagamento atrasado":t.push("Verificar situa\xe7\xe3o financeira"),t.push("Oferecer renegocia\xe7\xe3o");break;case"Alto volume de suporte":t.push("Analisar tickets recorrentes"),t.push("Agendar treinamento");break;case"Cliente recente":t.push("Intensificar onboarding"),t.push("Agendar check-ins semanais")}}),("critical"===a||"high"===a)&&t.unshift("URGENTE: Contato imediato do gestor de conta"),[...new Set(t)]}(s,e);a.push({clientId:t.id,clientName:t.name,churnProbability:c,riskLevel:e,factors:s,recommendedActions:l})}return a.sort((e,a)=>a.churnProbability-e.churnProbability)}catch(e){return console.error("Erro na previs\xe3o de churn:",e),[]}}async function _(){try{let{data:e}=await w.supabase.from("employees").select("department, created_at"),{data:a}=await w.supabase.from("kanban_tasks").select("area, created_at, status").gte("created_at",new Date(Date.now()-7776e6).toISOString());if(!e||!a)return[];let t={};return e.forEach(e=>{let a=e.department||"Geral";t[a]||(t[a]={headcount:0,taskCount:0,completedTasks:0}),t[a].headcount++}),a.forEach(e=>{let a=e.area||"Geral";t[a]||(t[a]={headcount:0,taskCount:0,completedTasks:0}),t[a].taskCount++,"done"===e.status&&t[a].completedTasks++}),Object.entries(t).map(e=>{let[a,t]=e,s=t.headcount>0?t.taskCount/t.headcount:0,n=t.taskCount>0?t.completedTasks/t.taskCount:1,i=t.headcount,r="Equipe adequada",c="low";return s>15||n<.7?(i=Math.ceil(1.3*t.headcount),r="Considerar contratar ".concat(i-t.headcount," pessoa(s)"),c=n<.5?"high":"medium"):s<5&&t.headcount>2&&(i=Math.floor(.9*t.headcount),r="Equipe possivelmente superdimensionada",c="low"),{area:a,currentHeadcount:t.headcount,predictedDemand:i,recommendation:r,urgency:c}}).sort((e,a)=>{let t={high:0,medium:1,low:2};return t[e.urgency]-t[a.urgency]})}catch(e){return console.error("Erro na previs\xe3o de contrata\xe7\xe3o:",e),[]}}function V(e){let a=[],t=new Date;for(let s=1;s<=e;s++){let e=new Date(t);e.setMonth(e.getMonth()+s);let n=5e5*(1+.05*s);a.push({month:e.toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),predicted:Math.round(n),lowerBound:Math.round(.85*n),upperBound:Math.round(1.15*n),confidence:70})}return a}function E(){let[e,a]=(0,n.useState)("revenue"),[t,l]=(0,n.useState)(!0),[d,u]=(0,n.useState)([]),[h,x]=(0,n.useState)([]),[g,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{y()},[]);let y=async()=>{l(!0);try{let[e,a,t]=await Promise.all([C(6),k(),_()]);u(e),x(a),f(t)}catch(e){console.error("Erro ao carregar previs\xf5es:",e),u(B),x(R),f(S)}finally{l(!1)}},j=e=>e>=1e6?"R$ ".concat((e/1e6).toFixed(2),"M"):e>=1e3?"R$ ".concat((e/1e3).toFixed(0),"k"):"R$ ".concat(e.toLocaleString("pt-BR")),w=e=>{switch(e){case"critical":return"#DC2626";case"high":return"#F59E0B";case"medium":return"#3B82F6";case"low":return"#10B981";default:return"#6B7280"}},V=e=>{switch(e){case"high":return"#DC2626";case"medium":return"#F59E0B";case"low":return"#10B981";default:return"#6B7280"}};return(0,s.jsxs)("div",{className:"rounded-2xl overflow-hidden",style:{background:"linear-gradient(135deg, #1E293B 0%, #0F172A 100%)",border:"1px solid rgba(255,255,255,0.1)"},children:[(0,s.jsxs)("div",{className:"p-6 border-b",style:{borderColor:"rgba(255,255,255,0.1)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)"},children:(0,s.jsx)(o.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white",children:"Previs\xf5es Inteligentes"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"An\xe1lise preditiva com Machine Learning"})]})]}),(0,s.jsx)("button",{onClick:y,disabled:t,className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:(0,s.jsx)(v.Z,{className:"w-4 h-4 text-gray-400 ".concat(t?"animate-spin":"")})})]}),(0,s.jsx)("div",{className:"flex gap-2 mt-4",children:[{id:"revenue",label:"Faturamento",icon:(0,s.jsx)(r.Z,{className:"w-4 h-4"})},{id:"churn",label:"Risco de Churn",icon:(0,s.jsx)(N.Z,{className:"w-4 h-4"})},{id:"hiring",label:"Contrata\xe7\xf5es",icon:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}].map(t=>(0,s.jsxs)("button",{onClick:()=>a(t.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:e===t.id?"rgba(139, 92, 246, 0.3)":"rgba(255,255,255,0.05)",color:e===t.id?"white":"#9CA3AF"},children:[t.icon,t.label]},t.id))})]}),(0,s.jsx)("div",{className:"p-6",children:t?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(v.Z,{className:"w-8 h-8 animate-spin text-purple-500"})}):(0,s.jsxs)(s.Fragment,{children:["revenue"===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:d.slice(0,3).map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"p-4 rounded-xl",style:{backgroundColor:"rgba(255,255,255,0.05)"},children:[(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-1 capitalize",children:e.month}),(0,s.jsx)("p",{className:"text-xl font-bold text-white",children:j(e.predicted)}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("div",{className:"h-1 flex-1 rounded-full overflow-hidden",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(e.confidence,"%"),backgroundColor:"#10B981"}})}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:[e.confidence,"%"]})]})]},e.month))}),(0,s.jsx)("div",{className:"space-y-2",children:d.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"rgba(255,255,255,0.03)"},children:[(0,s.jsx)("span",{className:"text-sm text-gray-400 capitalize",children:e.month}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[j(e.lowerBound)," - ",j(e.upperBound)]}),(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:j(e.predicted)}),(0,s.jsx)(m.Z,{className:"w-4 h-4 text-green-500"})]})]},e.month))})]}),"churn"===e&&(0,s.jsxs)("div",{className:"space-y-3",children:[h.slice(0,5).map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-4 rounded-xl",style:{backgroundColor:"rgba(255,255,255,0.05)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"".concat(w(e.riskLevel),"20")},children:(0,s.jsx)(p.Z,{className:"w-5 h-5",style:{color:w(e.riskLevel)}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-white",children:e.clientName}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:[e.factors.length," fatores de risco"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-bold",style:{color:w(e.riskLevel)},children:[e.churnProbability,"%"]}),(0,s.jsxs)("p",{className:"text-xs uppercase font-medium",style:{color:w(e.riskLevel)},children:["Risco ",e.riskLevel]})]})]}),e.recommendedActions.length>0&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t",style:{borderColor:"rgba(255,255,255,0.1)"},children:[(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"A\xe7\xf5es recomendadas:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.recommendedActions.slice(0,2).map((e,a)=>(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(139, 92, 246, 0.2)",color:"#A78BFA"},children:e},a))})]})]},e.clientId)),0===h.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(c.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Nenhum cliente em risco identificado"})]})]}),"hiring"===e&&(0,s.jsxs)("div",{className:"space-y-3",children:[g.map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-4 rounded-xl",style:{backgroundColor:"rgba(255,255,255,0.05)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"".concat(V(e.urgency),"20")},children:(0,s.jsx)(c.Z,{className:"w-5 h-5",style:{color:V(e.urgency)}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-white",children:e.area}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["Atual: ",e.currentHeadcount," → Ideal: ",e.predictedDemand]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium uppercase",style:{backgroundColor:"".concat(V(e.urgency),"20"),color:V(e.urgency)},children:"high"===e.urgency?"Urgente":"medium"===e.urgency?"M\xe9dio":"Baixo"})})]}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:e.recommendation})]},e.area)),0===g.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(b.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Equipe adequada para a demanda atual"})]})]})]})})]})}let B=[{month:"dezembro 2024",predicted:92e4,lowerBound:8e5,upperBound:104e4,confidence:85},{month:"janeiro 2025",predicted:88e4,lowerBound:75e4,upperBound:101e4,confidence:80},{month:"fevereiro 2025",predicted:95e4,lowerBound:8e5,upperBound:11e5,confidence:75},{month:"mar\xe7o 2025",predicted:102e4,lowerBound:85e4,upperBound:119e4,confidence:70},{month:"abril 2025",predicted:108e4,lowerBound:89e4,upperBound:127e4,confidence:65},{month:"maio 2025",predicted:115e4,lowerBound:94e4,upperBound:136e4,confidence:60}],R=[{clientId:"1",clientName:"Tech Corp",churnProbability:75,riskLevel:"critical",factors:[{name:"NPS Baixo",impact:"negative",weight:30,description:"NPS: 4"}],recommendedActions:["Ligar para entender insatisfa\xe7\xe3o","Oferecer reuni\xe3o com gestor"]},{clientId:"2",clientName:"Startup XYZ",churnProbability:45,riskLevel:"medium",factors:[{name:"Baixa intera\xe7\xe3o",impact:"negative",weight:20,description:"25 dias sem intera\xe7\xe3o"}],recommendedActions:["Agendar call de acompanhamento"]},{clientId:"3",clientName:"Empresa ABC",churnProbability:30,riskLevel:"low",factors:[],recommendedActions:[]}],S=[{area:"Design",currentHeadcount:4,predictedDemand:6,recommendation:"Considerar contratar 2 pessoa(s)",urgency:"high"},{area:"Tr\xe1fego Pago",currentHeadcount:3,predictedDemand:4,recommendation:"Considerar contratar 1 pessoa(s)",urgency:"medium"},{area:"Social Media",currentHeadcount:5,predictedDemand:5,recommendation:"Equipe adequada",urgency:"low"}];var P=t(57586),A=t(33276),F=t(69076),M=t(76858),Z=t(3085);let I=[{id:"price_increase",name:"Aumento de Pre\xe7o",description:"Simule o impacto de aumentar os pre\xe7os dos servi\xe7os",icon:(0,s.jsx)(r.Z,{className:"w-5 h-5"}),parameters:[{id:"price_change",label:"Varia\xe7\xe3o de Pre\xe7o",type:"percentage",min:-30,max:50,step:5,defaultValue:10},{id:"churn_sensitivity",label:"Sensibilidade ao Churn",type:"percentage",min:0,max:100,step:10,defaultValue:30}]},{id:"team_expansion",name:"Expans\xe3o de Equipe",description:"Simule o impacto de contratar novos colaboradores",icon:(0,s.jsx)(c.Z,{className:"w-5 h-5"}),parameters:[{id:"new_hires",label:"Novas Contrata\xe7\xf5es",type:"number",min:1,max:20,step:1,defaultValue:3},{id:"avg_salary",label:"Sal\xe1rio M\xe9dio (R$)",type:"currency",min:3e3,max:15e3,step:500,defaultValue:5e3},{id:"productivity_gain",label:"Ganho de Produtividade",type:"percentage",min:0,max:100,step:5,defaultValue:20}]},{id:"client_acquisition",name:"Aquisi\xe7\xe3o de Clientes",description:"Simule o impacto de aumentar a base de clientes",icon:(0,s.jsx)(b.Z,{className:"w-5 h-5"}),parameters:[{id:"new_clients",label:"Novos Clientes",type:"number",min:1,max:50,step:1,defaultValue:10},{id:"avg_ticket",label:"Ticket M\xe9dio (R$)",type:"currency",min:1e3,max:5e4,step:1e3,defaultValue:8e3},{id:"acquisition_cost",label:"CAC por Cliente (R$)",type:"currency",min:100,max:5e3,step:100,defaultValue:500}]},{id:"client_loss",name:"Perda de Clientes",description:"Simule o impacto de perder clientes importantes",icon:(0,s.jsx)(p.Z,{className:"w-5 h-5"}),parameters:[{id:"clients_lost",label:"Clientes Perdidos",type:"number",min:1,max:20,step:1,defaultValue:3},{id:"avg_revenue_lost",label:"Receita M\xe9dia/Cliente (R$)",type:"currency",min:1e3,max:5e4,step:1e3,defaultValue:1e4}]},{id:"marketing_investment",name:"Investimento em Marketing",description:"Simule o retorno de investimentos em marketing",icon:(0,s.jsx)(x.Z,{className:"w-5 h-5"}),parameters:[{id:"investment",label:"Investimento Mensal (R$)",type:"currency",min:1e3,max:1e5,step:1e3,defaultValue:1e4},{id:"expected_roi",label:"ROI Esperado",type:"percentage",min:50,max:500,step:25,defaultValue:200},{id:"conversion_rate",label:"Taxa de Convers\xe3o",type:"percentage",min:1,max:20,step:1,defaultValue:5}]}],T={monthlyRevenue:85e4,totalClients:127,avgTicket:8500,teamSize:32,monthlyCosts:52e4,churnRate:3.5};function L(){let[e,a]=(0,n.useState)(I[0].id),[t,r]=(0,n.useState)({}),[c,l]=(0,n.useState)([]),[o,d]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),g=I.find(a=>a.id===e);(0,n.useEffect)(()=>{let e={};g.parameters.forEach(a=>{e[a.id]=a.defaultValue}),r(e),x(!1)},[e]);let f=async()=>{d(!0),await new Promise(e=>setTimeout(e,1500)),l(y(e,t)),x(!0),d(!1)},y=(e,a)=>{let t=[];switch(e){case"price_increase":{let e=a.price_change/100,s=e/.1*.03*(a.churn_sensitivity/100),n=T.churnRate+100*s,i=Math.round(T.totalClients*s),r=T.totalClients-i,c=r*T.avgTicket*(1+e),l=c-T.monthlyRevenue;t.push({metric:"Receita Mensal",currentValue:T.monthlyRevenue,projectedValue:c,change:l,changePercent:l/T.monthlyRevenue*100,impact:l>0?"positive":"negative",confidence:75}),t.push({metric:"Taxa de Churn",currentValue:T.churnRate,projectedValue:n,change:n-T.churnRate,changePercent:(n-T.churnRate)/T.churnRate*100,impact:n>T.churnRate?"negative":"positive",confidence:65}),t.push({metric:"Clientes Ativos",currentValue:T.totalClients,projectedValue:r,change:-i,changePercent:-i/T.totalClients*100,impact:i>0?"negative":"neutral",confidence:70});break}case"team_expansion":{let e=a.new_hires,s=a.avg_salary,n=a.productivity_gain/100,i=e*s*1.8,r=T.monthlyCosts+i,c=T.monthlyRevenue*(e/T.teamSize)*n,l=T.monthlyRevenue+c,o=l-r,d=T.monthlyRevenue-T.monthlyCosts;t.push({metric:"Custos Mensais",currentValue:T.monthlyCosts,projectedValue:r,change:i,changePercent:i/T.monthlyCosts*100,impact:"negative",confidence:90}),t.push({metric:"Receita Mensal",currentValue:T.monthlyRevenue,projectedValue:l,change:c,changePercent:c/T.monthlyRevenue*100,impact:"positive",confidence:60}),t.push({metric:"Lucro Mensal",currentValue:d,projectedValue:o,change:o-d,changePercent:(o-d)/d*100,impact:o>d?"positive":"negative",confidence:55}),t.push({metric:"Tamanho da Equipe",currentValue:T.teamSize,projectedValue:T.teamSize+e,change:e,changePercent:e/T.teamSize*100,impact:"neutral",confidence:100});break}case"client_acquisition":{let e=a.new_clients,s=a.avg_ticket,n=a.acquisition_cost,i=e*s,r=e*n,c=i-r;t.push({metric:"Receita Mensal",currentValue:T.monthlyRevenue,projectedValue:T.monthlyRevenue+i,change:i,changePercent:i/T.monthlyRevenue*100,impact:"positive",confidence:80}),t.push({metric:"Total de Clientes",currentValue:T.totalClients,projectedValue:T.totalClients+e,change:e,changePercent:e/T.totalClients*100,impact:"positive",confidence:100}),t.push({metric:"Custo de Aquisi\xe7\xe3o Total",currentValue:0,projectedValue:r,change:r,changePercent:0,impact:"negative",confidence:95}),t.push({metric:"Ganho L\xedquido (1\xba m\xeas)",currentValue:0,projectedValue:c,change:c,changePercent:0,impact:c>0?"positive":"negative",confidence:75});break}case"client_loss":{let e=a.clients_lost,s=e*a.avg_revenue_lost,n=T.monthlyRevenue-s;t.push({metric:"Receita Mensal",currentValue:T.monthlyRevenue,projectedValue:n,change:-s,changePercent:-s/T.monthlyRevenue*100,impact:"negative",confidence:95}),t.push({metric:"Total de Clientes",currentValue:T.totalClients,projectedValue:T.totalClients-e,change:-e,changePercent:-e/T.totalClients*100,impact:"negative",confidence:100});let i=n-T.monthlyCosts,r=T.monthlyRevenue-T.monthlyCosts;t.push({metric:"Lucro Mensal",currentValue:r,projectedValue:i,change:i-r,changePercent:(i-r)/r*100,impact:"negative",confidence:90});break}case"marketing_investment":{let e=a.investment;a.expected_roi;let s=a.conversion_rate/100,n=Math.round(e/50),i=Math.round(n*s),r=i*T.avgTicket;t.push({metric:"Investimento Mensal",currentValue:0,projectedValue:e,change:e,changePercent:0,impact:"negative",confidence:100}),t.push({metric:"Leads Estimados",currentValue:0,projectedValue:n,change:n,changePercent:0,impact:"positive",confidence:70}),t.push({metric:"Novos Clientes Estimados",currentValue:0,projectedValue:i,change:i,changePercent:0,impact:"positive",confidence:55}),t.push({metric:"Retorno Estimado",currentValue:0,projectedValue:r,change:r-e,changePercent:(r-e)/e*100,impact:r>e?"positive":"negative",confidence:50})}}return t},b=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a?"".concat(e.toFixed(1),"%"):e>=1e6?"R$ ".concat((e/1e6).toFixed(2),"M"):e>=1e3?"R$ ".concat((e/1e3).toFixed(0),"k"):"R$ ".concat(e.toLocaleString("pt-BR"))};return(0,s.jsxs)("div",{className:"rounded-2xl overflow-hidden",style:{background:"linear-gradient(135deg, #1E293B 0%, #0F172A 100%)",border:"1px solid rgba(255,255,255,0.1)"},children:[(0,s.jsx)("div",{className:"p-6 border-b",style:{borderColor:"rgba(255,255,255,0.1)"},children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)"},children:(0,s.jsx)(u.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white",children:"Simulador de Cen\xe1rios"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Teste hip\xf3teses e veja o impacto em tempo real"})]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-3",children:"Selecione o cen\xe1rio"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:I.map(t=>(0,s.jsxs)("button",{onClick:()=>a(t.id),className:"flex items-center gap-2 p-3 rounded-xl text-left transition-all",style:{backgroundColor:e===t.id?"rgba(245, 158, 11, 0.2)":"rgba(255,255,255,0.05)",border:e===t.id?"1px solid rgba(245, 158, 11, 0.5)":"1px solid transparent"},children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:e===t.id?"rgba(245, 158, 11, 0.3)":"rgba(255,255,255,0.1)",color:e===t.id?"#F59E0B":"#9CA3AF"},children:t.icon}),(0,s.jsx)("span",{className:"text-sm font-medium",style:{color:e===t.id?"white":"#9CA3AF"},children:t.name})]},t.id))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-3",children:["Par\xe2metros: ",g.description]}),(0,s.jsx)("div",{className:"space-y-4",children:g.parameters.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-300",children:e.label}),(0,s.jsxs)("span",{className:"text-sm font-bold text-white",children:["percentage"===e.type&&"".concat(t[e.id]||e.defaultValue,"%"),"number"===e.type&&(t[e.id]||e.defaultValue),"currency"===e.type&&"R$ ".concat((t[e.id]||e.defaultValue).toLocaleString("pt-BR"))]})]}),(0,s.jsx)("input",{type:"range",min:e.min,max:e.max,step:e.step,value:t[e.id]||e.defaultValue,onChange:a=>r(t=>({...t,[e.id]:parseFloat(a.target.value)})),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, #F59E0B 0%, #F59E0B ".concat(((t[e.id]||e.defaultValue)-e.min)/(e.max-e.min)*100,"%, rgba(255,255,255,0.1) ").concat(((t[e.id]||e.defaultValue)-e.min)/(e.max-e.min)*100,"%, rgba(255,255,255,0.1) 100%)")}}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,s.jsxs)("span",{children:["currency"===e.type?"R$ ".concat(e.min.toLocaleString()):e.min,"percentage"===e.type?"%":""]}),(0,s.jsxs)("span",{children:["currency"===e.type?"R$ ".concat(e.max.toLocaleString()):e.max,"percentage"===e.type?"%":""]})]})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,s.jsx)("button",{onClick:f,disabled:o,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium text-white transition-all",style:{backgroundColor:"#F59E0B"},children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Simulando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.Z,{className:"w-5 h-5"}),"Simular Cen\xe1rio"]})}),(0,s.jsx)("button",{onClick:()=>{let e={};g.parameters.forEach(a=>{e[a.id]=a.defaultValue}),r(e),x(!1)},className:"px-4 py-3 rounded-xl font-medium transition-all",style:{backgroundColor:"rgba(255,255,255,0.1)",color:"#9CA3AF"},children:(0,s.jsx)(F.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)(P.M,{children:p&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 text-amber-500"}),(0,s.jsx)("span",{className:"font-medium text-white",children:"Resultados da Simula\xe7\xe3o"})]}),c.map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-4 rounded-xl",style:{backgroundColor:"rgba(255,255,255,0.05)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:e.metric}),(0,s.jsxs)("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"rgba(".concat("positive"===e.impact?"16, 185, 129":"negative"===e.impact?"239, 68, 68":"107, 114, 128",", 0.2)"),color:"positive"===e.impact?"#10B981":"negative"===e.impact?"#EF4444":"#6B7280"},children:["Confian\xe7a: ",e.confidence,"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg text-gray-500",children:b(e.currentValue,e.metric.includes("Taxa"))}),(0,s.jsx)(M.Z,{className:"w-4 h-4 text-gray-600"}),(0,s.jsx)("span",{className:"text-lg font-bold text-white",children:b(e.projectedValue,e.metric.includes("Taxa"))}),(0,s.jsxs)("span",{className:"flex items-center gap-1 text-sm font-medium",style:{color:"positive"===e.impact?"#10B981":"negative"===e.impact?"#EF4444":"#6B7280"},children:["positive"===e.impact?(0,s.jsx)(m.Z,{className:"w-4 h-4"}):"negative"===e.impact?(0,s.jsx)(Z.Z,{className:"w-4 h-4"}):null,e.changePercent>0?"+":"",e.changePercent.toFixed(1),"%"]})]})]},e.metric)),(0,s.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*c.length+.2},className:"p-4 rounded-xl mt-4",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(99, 102, 241, 0.2) 100%)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 text-purple-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-300 mb-1",children:"An\xe1lise da Val"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:function(e,a){if(a.filter(e=>"positive"===e.impact).length>a.filter(e=>"negative"===e.impact).length)switch(e){case"price_increase":return"Este cen\xe1rio mostra potencial positivo. Recomendo testar um aumento gradual de 5% primeiro e monitorar o NPS por 30 dias antes de aplicar o aumento total.";case"team_expansion":return"A expans\xe3o parece vi\xe1vel. Sugiro come\xe7ar com 1-2 contrata\xe7\xf5es e avaliar o impacto real na produtividade antes de expandir mais.";case"client_acquisition":return"Excelente oportunidade de crescimento! Foque em clientes com perfil similar aos seus melhores clientes atuais para maximizar o LTV.";case"marketing_investment":return"O investimento tem bom potencial de retorno. Recomendo dividir o or\xe7amento em 60% performance e 40% branding para resultados sustent\xe1veis.";default:return"Os resultados s\xe3o promissores. Recomendo implementar gradualmente e monitorar os KPIs semanalmente."}else switch(e){case"price_increase":return"⚠️ Cuidado: O risco de churn pode superar os ganhos. Considere aumentar o valor percebido antes de aumentar pre\xe7os.";case"client_loss":return"\uD83D\uDEA8 Alerta: Este cen\xe1rio teria impacto significativo. Priorize a\xe7\xf5es de reten\xe7\xe3o para os clientes em risco identificados.";default:return"Os riscos superam os benef\xedcios neste cen\xe1rio. Considere ajustar os par\xe2metros ou explorar alternativas."}}(e,c)})]})]})})]})})]})]})}let D=[{label:"Faturamento",value:"R$ 850k",change:12,icon:(0,s.jsx)(r.Z,{className:"w-5 h-5"}),color:"#10B981"},{label:"Clientes",value:"127",change:5,icon:(0,s.jsx)(c.Z,{className:"w-5 h-5"}),color:"#3B82F6"},{label:"Equipe",value:"32",change:2,icon:(0,s.jsx)(c.Z,{className:"w-5 h-5"}),color:"#8B5CF6"},{label:"Efici\xeancia",value:"94.2%",change:3.5,icon:(0,s.jsx)(l.Z,{className:"w-5 h-5"}),color:"#F59E0B"}],q=[{type:"danger",message:'Cliente "Tech Corp" com NPS 4 - Risco de churn alto',action:"Ver Cliente"},{type:"warning",message:"Vendedor Pedro 40% abaixo da meta",action:"Ver Detalhes"},{type:"warning",message:"5 tarefas cr\xedticas atrasadas",action:"Ver Kanban"}],O=[{priority:1,text:"Ligar para Tech Corp hoje - risco de churn alto",action:"Gerar Script"},{priority:2,text:"Reuni\xe3o com equipe comercial amanh\xe3 - meta em risco",action:"Agendar"},{priority:3,text:"Contratar 1 designer - demanda cresceu 30%",action:"Criar Vaga"}],z=[{area:"Financeiro",score:82,color:"#10B981"},{area:"Comercial",score:71,color:"#F59E0B"},{area:"Operacional",score:94,color:"#10B981"},{area:"RH",score:85,color:"#3B82F6"}];function $(){let[e,a]=(0,n.useState)("overview");return(0,s.jsx)("div",{className:"min-h-screen p-6",style:{background:"linear-gradient(180deg, #0F172A 0%, #1E293B 100%)"},children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)"},children:(0,s.jsx)(o.Z,{className:"w-7 h-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Centro de Intelig\xeancia"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Vis\xe3o 360\xb0 da Valle com IA"})]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:[{id:"overview",label:"Vis\xe3o Geral",icon:(0,s.jsx)(d.Z,{className:"w-4 h-4"})},{id:"predictions",label:"Previs\xf5es",icon:(0,s.jsx)(m.Z,{className:"w-4 h-4"})},{id:"simulator",label:"Simulador",icon:(0,s.jsx)(u.Z,{className:"w-4 h-4"})}].map(t=>(0,s.jsxs)("button",{onClick:()=>a(t.id),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:e===t.id?"rgba(139, 92, 246, 0.3)":"rgba(255,255,255,0.05)",color:e===t.id?"white":"#9CA3AF"},children:[t.icon,t.label]},t.id))})]}),"overview"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:D.map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"rounded-xl p-5",style:{backgroundColor:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3",style:{backgroundColor:"".concat(e.color,"20"),color:e.color},children:e.icon}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:e.value}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:e.label}),(0,s.jsxs)("span",{className:"text-sm font-medium",style:{color:e.change>=0?"#10B981":"#EF4444"},children:[e.change>=0?"+":"",e.change,"%"]})]})]},e.label))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"rounded-xl p-5",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[(0,s.jsxs)("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-red-500"}),"Alertas Cr\xedticos (",q.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:q.map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"rgba(0,0,0,0.2)"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("danger"===e.type?"bg-red-500":"bg-yellow-500")}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:e.message})]}),(0,s.jsx)("button",{className:"text-xs text-purple-400 hover:text-purple-300",children:e.action})]},a))})]}),(0,s.jsxs)("div",{className:"rounded-xl p-5",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(99, 102, 241, 0.1) 100%)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[(0,s.jsxs)("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 text-purple-400"}),"Insights da Val"]}),(0,s.jsx)("div",{className:"space-y-3",children:O.map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-3 rounded-lg",style:{backgroundColor:"rgba(0,0,0,0.2)"},children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",style:{backgroundColor:"rgba(139, 92, 246, 0.3)",color:"#A78BFA"},children:e.priority}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:e.text})]})}),(0,s.jsxs)("button",{className:"mt-2 w-full flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:"rgba(139, 92, 246, 0.3)",color:"#A78BFA"},children:[(0,s.jsx)(x.Z,{className:"w-3 h-3"}),e.action]})]},a))})]}),(0,s.jsxs)("div",{className:"rounded-xl p-5",style:{backgroundColor:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:[(0,s.jsxs)("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5 text-blue-400"}),"Sa\xfade da Empresa"]}),(0,s.jsx)("div",{className:"space-y-4",children:z.map((e,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*a},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:e.area}),(0,s.jsxs)("span",{className:"text-sm font-bold",style:{color:e.color},children:[e.score,"%"]})]}),(0,s.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:(0,s.jsx)(i.E.div,{initial:{width:0},animate:{width:"".concat(e.score,"%")},transition:{delay:.1*a+.3,duration:.5},className:"h-full rounded-full",style:{backgroundColor:e.color}})})]},e.area))})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Relat\xf3rios",icon:(0,s.jsx)(g.Z,{className:"w-5 h-5"}),href:"/admin/relatorios",color:"#3B82F6"},{label:"Concorr\xeancia",icon:(0,s.jsx)(f.Z,{className:"w-5 h-5"}),href:"/admin/concorrencia",color:"#EF4444"},{label:"NPS",icon:(0,s.jsx)(y.Z,{className:"w-5 h-5"}),href:"/admin/nps",color:"#8B5CF6"},{label:"Metas",icon:(0,s.jsx)(b.Z,{className:"w-5 h-5"}),href:"/admin/metas",color:"#10B981"}].map((e,a)=>(0,s.jsxs)(i.E.a,{href:e.href,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*a},whileHover:{scale:1.02},className:"flex items-center justify-between p-4 rounded-xl transition-colors",style:{backgroundColor:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"".concat(e.color,"20"),color:e.color},children:e.icon}),(0,s.jsx)("span",{className:"font-medium text-white",children:e.label})]}),(0,s.jsx)(j.Z,{className:"w-5 h-5 text-gray-500"})]},e.label))})]}),"predictions"===e&&(0,s.jsx)(E,{}),"simulator"===e&&(0,s.jsx)(L,{})]})})}},5526:function(e,a,t){"use strict";t.r(a),t.d(a,{supabase:function(){return r}});var s=t(62724);let n="https://ikjgsqtykkhqimypacro.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";n&&i||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let r=(0,s.eI)(n||"https://setup-missing.supabase.co",i||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[2882,4609,2724,1897,2971,2117,1744],function(){return e(e.s=28824)}),_N_E=e.O()}]);