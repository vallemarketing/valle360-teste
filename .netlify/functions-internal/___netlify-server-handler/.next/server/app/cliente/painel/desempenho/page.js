(()=>{var e={};e.id=32209,e.ids=[32209],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8327:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c}),a(31787),a(16193),a(49991),a(35866);var t=a(23191),i=a(88716),r=a(37922),l=a.n(r),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["cliente",{children:["painel",{children:["desempenho",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,31787)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\painel\\desempenho\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,16193)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49991)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\painel\\desempenho\\page.tsx"],m="/cliente/painel/desempenho/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/cliente/painel/desempenho/page",pathname:"/cliente/painel/desempenho",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10925:(e,s,a)=>{Promise.resolve().then(a.bind(a,80960))},66697:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},86333:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},44713:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},7507:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},69561:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},21405:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(62881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},80960:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(10326),i=a(28870),r=a(90434),l=a(17577),n=a(86333),d=a(17069),c=a(69561),o=a(37358),m=a(21405),x=a(12714),p=a(26754),h=a(53468),u=a(21066),g=a(71821),v=a(44713),j=a(7507),f=a(66697),b=a(51223),N=a(66062);function y(e,s){return s?Math.round((e-s)/s*100):0}function w(e){return Number.isFinite(e)?e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:String(Math.round(e)):"—"}function k(){let[e,s]=(0,l.useState)([]),[a,k]=(0,l.useState)(null),[A,Z]=(0,l.useState)(!1),[_,M]=(0,l.useState)(!0),[z,C]=(0,l.useState)(null),P=async()=>{M(!0),C(null);try{let e=await fetch("/api/client/social/metrics?days=365",{cache:"no-store"}),a=await e.json().catch(()=>null);if(!e.ok)throw Error(a?.error||"Falha ao carregar m\xe9tricas");s(Array.isArray(a?.daily)?a.daily:[]);try{let e=await fetch("/api/client/performance?days=30",{cache:"no-store"}),s=await e.json().catch(()=>null);e.ok&&s?.success&&s?.ads?(Z(!!s.ads.available),k(s.ads.totals||null)):(Z(!1),k(null))}catch{Z(!1),k(null)}}catch(e){s([]),C(e?.message||"Erro ao carregar m\xe9tricas")}finally{M(!1)}},E=(0,l.useMemo)(()=>{let s=e.slice(-30);return{impressions:s.reduce((e,s)=>e+(Number(s.impressions)||0),0),reach:s.reduce((e,s)=>e+(Number(s.reach)||0),0),engaged:s.reduce((e,s)=>e+(Number(s.engaged)||0),0),profile_views:s.reduce((e,s)=>e+(Number(s.profile_views)||0),0)}},[e]),S=(0,l.useMemo)(()=>{let s=e.slice(-14),a=s.slice(0,7),t=s.slice(7),i=(e,s)=>e.reduce((e,a)=>e+(Number(a[s])||0),0);return{impressions:y(i(t,"impressions"),i(a,"impressions")),reach:y(i(t,"reach"),i(a,"reach")),engaged:y(i(t,"engaged"),i(a,"engaged")),profile_views:y(i(t,"profile_views"),i(a,"profile_views"))}},[e]),q=(0,l.useMemo)(()=>{let s=new Map;for(let a of e){let e=new Date(String(a.date));if(Number.isNaN(e.getTime()))continue;let t=`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}`,i=e.toLocaleDateString("pt-BR",{month:"short"}),r=s.get(t)||{label:i,impressions:0,reach:0,engaged:0,profile_views:0};r.impressions+=Number(a.impressions||0)||0,r.reach+=Number(a.reach||0)||0,r.engaged+=Number(a.engaged||0)||0,r.profile_views+=Number(a.profile_views||0)||0,s.set(t,r)}return Array.from(s.keys()).sort().slice(-12).map(e=>({month:s.get(e).label,...s.get(e)}))},[e]),U=Math.max(1,...q.map(e=>e.impressions));return(0,t.jsxs)("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[(0,t.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(r.default,{href:"/cliente/painel",className:"p-2 rounded-lg bg-[#001533]/5 hover:bg-[#001533]/10 transition-colors",children:t.jsx(n.Z,{className:"size-5 text-[#001533] dark:text-white"})}),t.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-[#1672d6] to-[#1260b5]",children:t.jsx(d.Z,{className:"size-5 text-white"})}),t.jsx("h1",{className:"text-3xl font-bold text-[#001533] dark:text-white",children:"Desempenho"})]}),t.jsx("p",{className:"text-[#001533]/60 dark:text-white/60 ml-12",children:"M\xe9tricas de performance e ROI das suas campanhas"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-[#001533]/10 text-[#001533] dark:text-white hover:bg-[#001533]/5 transition-colors",children:[t.jsx(c.Z,{className:"size-4"}),"Filtrar"]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-[#001533]/10 text-[#001533] dark:text-white hover:bg-[#001533]/5 transition-colors",children:[t.jsx(o.Z,{className:"size-4"}),"\xdaltimos 30 dias"]}),(0,t.jsxs)("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#1672d6] text-white hover:bg-[#1672d6]/90 transition-colors",children:[t.jsx(m.Z,{className:(0,b.cn)("size-4",_?"animate-spin":"")}),"Atualizar"]})]})]}),t.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(N.oy,{children:[t.jsx(N.Ai,{title:"Impress\xf5es (30d)",value:w(E.impressions),change:S.impressions,icon:t.jsx(x.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx(N.Ai,{title:"Alcance (30d)",value:w(E.reach),change:S.reach,icon:t.jsx(p.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx(N.Ai,{title:"Engajamento (30d)",value:w(E.engaged),change:S.engaged,icon:t.jsx(h.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx(N.Ai,{title:"Visitas ao perfil (30d)",value:w(E.profile_views),change:S.profile_views,icon:t.jsx(u.Z,{className:"size-5 text-[#1672d6]"}),variant:"primary"})]})}),(0,t.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-2xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-[#1672d6]/10",children:t.jsx(g.Z,{className:"size-5 text-[#1672d6]"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#001533] dark:text-white",children:"Ads (30d)"}),t.jsx("p",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:A?"M\xe9tricas consolidadas de an\xfancios":"Integra\xe7\xe3o de Ads n\xe3o conectada (ou sem dados)"})]})]}),(0,t.jsxs)(r.default,{href:"/admin/integracoes",className:"text-sm text-[#1672d6] font-medium hover:underline flex items-center gap-1",children:["Conectar Ads ",t.jsx(v.Z,{className:"size-4"})]})]}),t.jsx("div",{className:"mt-4",children:(0,t.jsxs)(N.oy,{children:[t.jsx(N.Ai,{title:"Investimento",value:A&&a?`R$ ${a.total_spend.toFixed(0)}`:"—",change:0,icon:t.jsx(g.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx(N.Ai,{title:"Cliques",value:A&&a?w(a.total_clicks):"—",change:0,icon:t.jsx(u.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx(N.Ai,{title:"Convers\xf5es",value:A&&a?w(a.total_conversions):"—",change:0,icon:t.jsx(h.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx(N.Ai,{title:"ROAS",value:A&&a?a.avg_roas.toFixed(2):"—",change:0,icon:t.jsx(j.Z,{className:"size-5 text-[#1672d6]"}),variant:"primary"})]})})]}),(0,t.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"rounded-2xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-[#1672d6]/10",children:t.jsx(f.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx("h3",{className:"text-lg font-semibold text-[#001533] dark:text-white",children:"Evolu\xe7\xe3o (\xfaltimos 12 meses)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-[#1672d6]"}),"Impress\xf5es"]}),(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-500"}),"Alcance"]}),(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500"}),"Engajamento"]})]})]}),t.jsx("div",{className:"h-64 flex items-end gap-2",children:q.map((e,s)=>(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[t.jsx("div",{className:"w-full flex flex-col items-center gap-1",children:t.jsx(i.E.div,{initial:{height:0},animate:{height:`${e.impressions/U*100}%`},transition:{delay:.05*s,duration:.5},className:"w-full bg-[#1672d6]/20 rounded-t-md relative group cursor-pointer hover:bg-[#1672d6]/30 transition-colors",style:{minHeight:20},children:t.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-[#001533] text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:w(e.impressions)})})}),t.jsx("span",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:e.month})]},e.month))})]}),(0,t.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"rounded-2xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-[#001533]/10 dark:border-white/10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-[#1672d6]/10",children:t.jsx(p.Z,{className:"size-5 text-[#1672d6]"})}),t.jsx("h3",{className:"text-lg font-semibold text-[#001533] dark:text-white",children:"Status das m\xe9tricas"})]}),(0,t.jsxs)(r.default,{href:"/cliente/redes",className:"text-sm text-[#1672d6] font-medium hover:underline flex items-center gap-1",children:["Conectar redes ",t.jsx(v.Z,{className:"size-4"})]})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-2 text-sm text-[#001533]/70 dark:text-white/70",children:[_?t.jsx("p",{children:"Carregando m\xe9tricas..."}):z?t.jsx("p",{className:"text-red-600 dark:text-red-400",children:z}):0===e.length?(0,t.jsxs)("p",{children:["Sem dados ainda. Conecte suas redes em ",t.jsx("span",{className:"font-medium",children:"Cliente → Redes"})," para come\xe7ar a coletar m\xe9tricas."]}):t.jsx("p",{children:"M\xe9tricas carregadas com sucesso. Os n\xfameros acima s\xe3o agregados de Instagram/Facebook (quando conectados)."}),t.jsx("p",{className:"text-xs text-[#001533]/50 dark:text-white/50",children:"Observa\xe7\xe3o: dados de “campanhas/ROI” exigem integra\xe7\xf5es de Ads/Analytics. Aqui mostramos m\xe9tricas org\xe2nicas das redes conectadas."})]})]})]})}},31787:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`C:\Users\User\Downloads\valle-360-main\valle-360-main\src\app\cliente\painel\desempenho\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[89276,54267,51789,78515,46226,28870,39215,16819,72418,62198,18832,14574,79925,68001,72956,32231],()=>a(8327));module.exports=t})();