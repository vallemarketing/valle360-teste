"use strict";(()=>{var e={};e.id=60858,e.ids=[60858],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9616:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>g,serverHooks:()=>w,staticGenerationAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{GET:()=>l,POST:()=>d,dynamic:()=>u});var o=a(49303),s=a(88716),i=a(60670),n=a(87070),c=a(10277);let u="force-dynamic";async function l(e){try{let{searchParams:t}=new URL(e.url),a=t.get("action")||"reviews",r=t.get("locationId")||"loc_1";switch(a){case"reviews":{let e=await c.J.getReviews(r);return n.NextResponse.json({success:!0,data:e})}case"metrics":{let e=await c.J.getMetrics(r);return n.NextResponse.json({success:!0,data:e})}case"insights":{let e=await c.J.getInsights(r);return n.NextResponse.json({success:!0,data:e})}case"unreplied":{let e=await c.J.getUnrepliedReviews(r);return n.NextResponse.json({success:!0,data:e})}case"negative":{let e=await c.J.getNegativeReviews(r);return n.NextResponse.json({success:!0,data:e})}case"locations":{let e=await c.J.getLocations();return n.NextResponse.json({success:!0,data:e})}default:return n.NextResponse.json({success:!1,error:"A\xe7\xe3o inv\xe1lida"},{status:400})}}catch(e){return console.error("Erro ao buscar dados do Google:",e),n.NextResponse.json({success:!1,error:"Erro interno do servidor"},{status:500})}}async function d(e){try{let{action:t,locationId:a,reviewId:r,text:o}=await e.json();if("reply"===t){if(!a||!r||!o)return n.NextResponse.json({success:!1,error:"Campos obrigat\xf3rios: locationId, reviewId, text"},{status:400});let e=await c.J.replyToReview(a,r,o);return n.NextResponse.json({success:e})}return n.NextResponse.json({success:!1,error:"A\xe7\xe3o inv\xe1lida"},{status:400})}catch(e){return console.error("Erro ao processar a\xe7\xe3o do Google:",e),n.NextResponse.json({success:!1,error:"Erro interno do servidor"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/reputation/google/route",pathname:"/api/reputation/google",filename:"route",bundlePath:"app/api/reputation/google/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\reputation\\google\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:w}=g,v="/api/reputation/google/route";function h(){return(0,i.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:m})}},10277:(e,t,a)=>{a.d(t,{J:()=>o});class r{setCredentials(e,t){this.accessToken=e,this.accountId=t}async getLocations(){return[{id:"loc_1",name:"Valle 360 - Matriz",address:"Av. Paulista, 1000 - S\xe3o Paulo, SP",phone:"(11) 99999-0000",website:"https://valle360.com.br",category:"Ag\xeancia de Marketing Digital",isVerified:!0}]}async getReviews(e,t=50){return[{id:"review_1",authorName:"Jo\xe3o Silva",rating:5,text:"Excelente atendimento! A equipe \xe9 muito profissional e os resultados foram acima do esperado.",createTime:new Date(Date.now()-1728e5).toISOString(),updateTime:new Date(Date.now()-1728e5).toISOString(),reply:{text:"Obrigado pelo feedback, Jo\xe3o! Ficamos felizes em ajudar. Conte sempre conosco!",updateTime:new Date(Date.now()-864e5).toISOString()}},{id:"review_2",authorName:"Maria Santos",rating:4,text:"Muito bom o trabalho, s\xf3 achei o prazo um pouco longo para algumas entregas.",createTime:new Date(Date.now()-432e6).toISOString(),updateTime:new Date(Date.now()-432e6).toISOString()},{id:"review_3",authorName:"Pedro Costa",rating:5,text:"Profissionais incr\xedveis! Minha empresa cresceu 200% depois que comecei a trabalhar com eles.",createTime:new Date(Date.now()-864e6).toISOString(),updateTime:new Date(Date.now()-864e6).toISOString()},{id:"review_4",authorName:"Ana Oliveira",rating:3,text:"O servi\xe7o \xe9 bom, mas a comunica\xe7\xe3o poderia melhorar.",createTime:new Date(Date.now()-1296e6).toISOString(),updateTime:new Date(Date.now()-1296e6).toISOString()},{id:"review_5",authorName:"Carlos Ferreira",rating:5,text:"Recomendo demais! Atendimento personalizado e resultados reais.",createTime:new Date(Date.now()-1728e6).toISOString(),updateTime:new Date(Date.now()-1728e6).toISOString(),reply:{text:"Muito obrigado, Carlos! Sucesso sempre!",updateTime:new Date(Date.now()-16416e5).toISOString()}}]}async replyToReview(e,t,a){return console.log(`Respondendo review ${t}:`,a),!0}async getMetrics(e){let t=await this.getReviews(e),a={one:0,two:0,three:0,four:0,five:0},r=0,o=0;return t.forEach(e=>{r+=e.rating,1===e.rating?a.one++:2===e.rating?a.two++:3===e.rating?a.three++:4===e.rating?a.four++:5===e.rating&&a.five++,e.reply&&o++}),{totalReviews:t.length,averageRating:t.length>0?r/t.length:0,ratingDistribution:a,responseRate:t.length>0?o/t.length*100:0,averageResponseTime:24}}async getInsights(e){return[{metric:"Visualiza\xe7\xf5es do perfil",value:1250,change:15,period:"\xfaltimos 30 dias"},{metric:"Cliques no site",value:89,change:8,period:"\xfaltimos 30 dias"},{metric:"Liga\xe7\xf5es",value:34,change:-5,period:"\xfaltimos 30 dias"},{metric:"Solicita\xe7\xf5es de rota",value:56,change:12,period:"\xfaltimos 30 dias"},{metric:"Buscas diretas",value:780,change:20,period:"\xfaltimos 30 dias"},{metric:"Buscas indiretas",value:470,change:10,period:"\xfaltimos 30 dias"}]}async getUnrepliedReviews(e){return(await this.getReviews(e)).filter(e=>!e.reply)}async getNegativeReviews(e){return(await this.getReviews(e)).filter(e=>e.rating<=3)}constructor(){this.accessToken=null,this.accountId=null}}let o=new r}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[89276,55972],()=>a(9616));module.exports=r})();