"use strict";(()=>{var e={};e.id=12345,e.ids=[12345],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},32694:e=>{e.exports=require("http2")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},35816:e=>{e.exports=require("process")},86624:e=>{e.exports=require("querystring")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},6162:e=>{e.exports=require("worker_threads")},71568:e=>{e.exports=require("zlib")},72254:e=>{e.exports=require("node:buffer")},87561:e=>{e.exports=require("node:fs")},83074:e=>{e.exports=require("node:http")},22286:e=>{e.exports=require("node:https")},87503:e=>{e.exports=require("node:net")},49411:e=>{e.exports=require("node:path")},97742:e=>{e.exports=require("node:process")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},41041:e=>{e.exports=require("node:url")},47261:e=>{e.exports=require("node:util")},65628:e=>{e.exports=require("node:zlib")},11696:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>E,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>_,staticGenerationAsyncStorage:()=>q});var o={};t.r(o),t.d(o,{GET:()=>d,POST:()=>x,dynamic:()=>p});var s=t(49303),n=t(88716),i=t(60670),a=t(87070),u=t(97816);let p="force-dynamic",c=["https://www.googleapis.com/auth/gmail.send"];function l(){let e=process.env.GOOGLE_CLIENT_ID,r=process.env.GOOGLE_CLIENT_SECRET,t=process.env.GOOGLE_REDIRECT_URI||`${process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000"}/api/auth/google/gmail/callback`;if(!e||!r)throw Error("GOOGLE_CLIENT_ID e GOOGLE_CLIENT_SECRET n\xe3o configurados");return new u.lkr.auth.OAuth2(e,r,t)}async function d(e){try{let e=l().generateAuthUrl({access_type:"offline",scope:c,prompt:"consent"});return a.NextResponse.redirect(e)}catch(e){return a.NextResponse.json({error:e.message,help:"Configure GOOGLE_CLIENT_ID e GOOGLE_CLIENT_SECRET no Vercel"},{status:500})}}async function x(e){try{let{code:r}=await e.json();if(!r)return a.NextResponse.json({error:"C\xf3digo de autoriza\xe7\xe3o n\xe3o fornecido"},{status:400});let t=l(),{tokens:o}=await t.getToken(r);return console.log("âœ… Tokens obtidos:",{access_token:o.access_token?"***":null,refresh_token:o.refresh_token?"***":null,expiry_date:o.expiry_date}),a.NextResponse.json({success:!0,message:"Tokens gerados com sucesso!",tokens:{access_token:o.access_token,refresh_token:o.refresh_token,expiry_date:o.expiry_date},instructions:"Adicione GOOGLE_REFRESH_TOKEN no Vercel com o valor do refresh_token acima"})}catch(e){return console.error("Erro ao trocar c\xf3digo por tokens:",e),a.NextResponse.json({error:e.message},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/google/gmail/route",pathname:"/api/auth/google/gmail",filename:"route",bundlePath:"app/api/auth/google/gmail/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\auth\\google\\gmail\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:q,serverHooks:_}=g,m="/api/auth/google/gmail/route";function E(){return(0,i.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:q})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[89276,55972,2749,6684,80843,97816],()=>t(11696));module.exports=o})();