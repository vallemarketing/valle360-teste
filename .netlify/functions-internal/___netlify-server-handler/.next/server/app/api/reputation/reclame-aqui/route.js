"use strict";(()=>{var e={};e.id=26319,e.ids=[26319],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},62601:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>S,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>w});var o={};a.r(o),a.d(o,{GET:()=>g,dynamic:()=>c,fetchCache:()=>d,revalidate:()=>p,runtime:()=>u});var r=a(49303),n=a(88716),s=a(60670),i=a(87070),l=a(95068);let c="force-dynamic",u="nodejs",d="force-no-store",p=0;async function g(e){try{let{searchParams:t}=new URL(e.url),a=t.get("action")||"complaints",o=parseInt(t.get("page")||"1"),r=parseInt(t.get("limit")||"20");switch(a){case"complaints":{let e=await l.J.getComplaints(o,r);return i.NextResponse.json({success:!0,data:e})}case"metrics":{let e=await l.J.getMetrics();return i.NextResponse.json({success:!0,data:e})}case"profile":{let e=await l.J.getCompanyProfile();return i.NextResponse.json({success:!0,data:e})}case"pending":{let e=await l.J.getPendingComplaints();return i.NextResponse.json({success:!0,data:e})}case"categories":{let e=await l.J.getComplaintsByCategory();return i.NextResponse.json({success:!0,data:e})}case"health":{let e=await l.J.calculateHealthScore();return i.NextResponse.json({success:!0,data:e})}default:return i.NextResponse.json({success:!1,error:"A\xe7\xe3o inv\xe1lida"},{status:400})}}catch(e){return console.error("Erro ao buscar dados do Reclame Aqui:",e),i.NextResponse.json({success:!1,error:"Erro interno do servidor"},{status:500})}}let m=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/reputation/reclame-aqui/route",pathname:"/api/reputation/reclame-aqui",filename:"route",bundlePath:"app/api/reputation/reclame-aqui/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\reputation\\reclame-aqui\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:w,serverHooks:y}=m,f="/api/reputation/reclame-aqui/route";function S(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:w})}},95068:(e,t,a)=>{a.d(t,{J:()=>r});class o{setCredentials(e,t){this.companySlug=e,this.apiKey=t||null}async getCompanyProfile(){return{id:"ra_1",name:"Valle 360 Marketing Digital",slug:"valle-360",category:"Marketing e Publicidade",isVerified:!0,metrics:await this.getMetrics()}}async getComplaints(e=1,t=20){return[{id:"complaint_1",title:"Atraso na entrega do projeto",description:"Contratei a empresa para criar meu site e o prazo foi estendido duas vezes.",status:"solved",rating:8,createdAt:new Date(Date.now()-1296e6).toISOString(),answeredAt:new Date(Date.now()-12096e5).toISOString(),solvedAt:new Date(Date.now()-864e6).toISOString(),author:{name:"Roberto A.",city:"S\xe3o Paulo",state:"SP"},company:{response:"Ol\xe1 Roberto, pedimos desculpas pelo atraso. Devido a ajustes solicitados, o prazo foi estendido. Ficamos felizes que ficou satisfeito com o resultado final.",responseDate:new Date(Date.now()-12096e5).toISOString()},category:"Prazo de Entrega"},{id:"complaint_2",title:"Problemas com campanha de tr\xe1fego pago",description:"A campanha n\xe3o gerou os resultados prometidos na proposta.",status:"answered",createdAt:new Date(Date.now()-432e6).toISOString(),answeredAt:new Date(Date.now()-3456e5).toISOString(),author:{name:"Carla M.",city:"Rio de Janeiro",state:"RJ"},company:{response:"Ol\xe1 Carla, gostar\xedamos de agendar uma reuni\xe3o para analisar juntos os dados da campanha e entender os pontos de melhoria.",responseDate:new Date(Date.now()-3456e5).toISOString()},category:"Qualidade do Servi\xe7o"},{id:"complaint_3",title:"Falta de comunica\xe7\xe3o",description:"Demora para responder mensagens e dar retorno sobre o andamento.",status:"pending",createdAt:new Date(Date.now()-1728e5).toISOString(),author:{name:"Fernando S.",city:"Belo Horizonte",state:"MG"},company:{},category:"Atendimento"}]}async getMetrics(){let e=await this.getComplaints(1,100),t=e.filter(e=>"solved"===e.status).length,a=e.filter(e=>"pending"===e.status).length;e.filter(e=>"answered"===e.status).length;let o=e.filter(e=>e.rating).reduce((e,t)=>e+(t.rating||0),0),r=e.filter(e=>e.rating).length,n=e.length>0?t/e.length*100:0,s=r>0?o/r:0,i="regular",l=7.5;return n>=90&&s>=8?(i="otimo",l=9.2):n>=70&&s>=7?(i="bom",l=7.8):n>=50?(i="regular",l=6):n>=30?(i="ruim",l=4):(i="nao_recomendado",l=2),{totalComplaints:e.length,solvedComplaints:t,pendingComplaints:a,solutionRate:Math.round(n),averageRating:Number(s.toFixed(1)),responseTime:24,reputation:i,reputationScore:l,wouldBuyAgain:85,complaintsLast30Days:e.filter(e=>new Date(e.createdAt)>=new Date(Date.now()-2592e6)).length,trend:"up"}}async getPendingComplaints(){return(await this.getComplaints()).filter(e=>"pending"===e.status)}async getComplaintsByCategory(){let e=await this.getComplaints(),t={};return e.forEach(e=>{let a=e.category||"Outros";t[a]=(t[a]||0)+1}),t}async calculateHealthScore(){let e=await this.getMetrics(),t=[{name:"Taxa de Solu\xe7\xe3o",score:e.solutionRate,weight:.35},{name:"Nota dos Consumidores",score:10*e.averageRating,weight:.3},{name:"Voltaria a Comprar",score:e.wouldBuyAgain,weight:.2},{name:"Tempo de Resposta",score:e.responseTime<=24?100:Math.max(0,100-(e.responseTime-24)*2),weight:.15}],a=t.reduce((e,t)=>e+t.score*t.weight,0),o="good";return o=a>=85?"excellent":a>=70?"good":a>=50?"attention":"critical",{score:Math.round(a),status:o,factors:t}}constructor(){this.companySlug=null,this.apiKey=null}}let r=new o}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),o=t.X(0,[89276,55972],()=>a(62601));module.exports=o})();