(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4692],{47711:function(e,t,a){Promise.resolve().then(a.bind(a,2199))},2199:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var r=a(57437),s=a(2265),n=a(26892),l=a(57586),i=a(79820),o=a(12381),d=a(69174),c=a(51817),m=a(99397),p=a(64935),u=a(48736),x=a(15868),h=a(78867),v=a(18930),f=a(71947),b=a(32489),N=a(82023),g=a(83229),j=a(14438);let _=["{{CLIENTE_NOME}}","{{CLIENTE_EMPRESA}}","{{CLIENTE_CNPJ}}","{{CLIENTE_ENDERECO}}","{{VALOR_MENSAL}}","{{VALOR_EXTENSO}}","{{DURACAO_MESES}}","{{DATA_INICIO}}","{{DATA_FIM}}","{{DIA_VENCIMENTO}}","{{SERVICOS}}","{{MULTA_RESCISAO}}","{{DIAS_NOTIFICACAO}}"];function y(){let[e,t]=(0,s.useState)([]),[a,y]=(0,s.useState)(!0),[w,E]=(0,s.useState)(!1),[A,T]=(0,s.useState)(null),[O,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{I()},[]);let I=async()=>{y(!0);try{let e=await fetch("/api/admin/contract-templates");if(e.ok){let a=await e.json();t(a.templates||[])}}catch(e){console.error("Failed to fetch templates:",e),t([{id:"1",name:"Contrato Padr\xe3o",type:"standard",description:"Template padr\xe3o para presta\xe7\xe3o de servi\xe7os de marketing digital",content:C(),variables:_,is_active:!0,created_at:"2024-01-01",updated_at:"2024-12-01"},{id:"2",name:"Contrato Premium",type:"premium",description:"Template com cl\xe1usulas adicionais para clientes premium",content:C(),variables:_,is_active:!0,created_at:"2024-02-01",updated_at:"2024-11-15"}])}finally{y(!1)}},R=async()=>{if(A){S(!0);try{(await fetch("/api/admin/contract-templates",{method:A.id.startsWith("new")?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)})).ok?(j.Am.success("Template salvo com sucesso!"),E(!1),T(null),I()):j.Am.error("Falha ao salvar template")}catch(e){j.Am.error("Erro ao salvar template")}finally{S(!1)}}},D=async a=>{if(confirm("Tem certeza que deseja excluir este template?"))try{await fetch("/api/admin/contract-templates/".concat(a),{method:"DELETE"}),t(e.filter(e=>e.id!==a)),j.Am.success("Template exclu\xeddo")}catch(e){j.Am.error("Falha ao excluir template")}},k=e=>{T({...e,id:"new-".concat(Date.now()),name:"".concat(e.name," (C\xf3pia)"),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),E(!0)},L=()=>{T({id:"new-".concat(Date.now()),name:"Novo Template",type:"custom",description:"",content:C(),variables:_,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),E(!0)},M=e=>(0,r.jsx)(d.C,{variant:"outline",className:{standard:"bg-blue-500/10 text-blue-600 border-blue-500/30",premium:"bg-purple-500/10 text-purple-600 border-purple-500/30",enterprise:"bg-amber-500/10 text-amber-600 border-amber-500/30",custom:"bg-gray-500/10 text-gray-600 border-gray-500/30"}[e],children:e});return a?(0,r.jsx)("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:(0,r.jsx)(c.Z,{className:"w-8 h-8 animate-spin text-[#1672d6]"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-white dark:bg-[#0a0f1a] p-6",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-[#001533] dark:text-white mb-2",children:"Templates de Contrato"}),(0,r.jsx)("p",{className:"text-[#001533]/60 dark:text-white/60",children:"Gerencie os modelos de contrato com placeholders din\xe2micos"})]}),(0,r.jsxs)(o.z,{onClick:L,className:"bg-[#1672d6] hover:bg-[#1260b5]",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Novo Template"]})]}),(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6 p-4 rounded-xl bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4 text-purple-600"}),(0,r.jsx)("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Vari\xe1veis Dispon\xedveis"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:_.map(e=>(0,r.jsx)("code",{className:"px-2 py-1 text-xs rounded bg-purple-100 dark:bg-purple-800 text-purple-600 dark:text-purple-200 cursor-pointer hover:bg-purple-200",onClick:()=>{navigator.clipboard.writeText(e),j.Am.success("Copiado!")},children:e},e))})]}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map((e,t)=>(0,r.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+.1*t},children:(0,r.jsxs)(i.Zb,{className:"border-[#001533]/10 dark:border-white/10 hover:border-[#1672d6]/30 transition-all",children:[(0,r.jsx)(i.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.ll,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 text-[#1672d6]"}),e.name]}),(0,r.jsx)("p",{className:"text-sm text-[#001533]/60 dark:text-white/60 mt-1",children:e.description||"Sem descri\xe7\xe3o"})]}),M(e.type)]})}),(0,r.jsxs)(i.aY,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-[#001533]/50 dark:text-white/50 mb-4",children:[(0,r.jsxs)("span",{children:[e.variables.length," vari\xe1veis"]}),(0,r.jsxs)("span",{children:["Atualizado: ",new Date(e.updated_at).toLocaleDateString("pt-BR")]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(o.z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{T(e),E(!0)},children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),"Editar"]}),(0,r.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>k(e),children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})}),(0,r.jsx)(o.z,{variant:"outline",size:"sm",className:"text-red-600 border-red-600/30 hover:bg-red-50",onClick:()=>D(e.id),children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})})]})]})]})},e.id))}),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(f.Z,{className:"w-12 h-12 mx-auto text-[#001533]/20 mb-4"}),(0,r.jsx)("p",{className:"text-[#001533]/60 dark:text-white/60",children:"Nenhum template encontrado"}),(0,r.jsx)(o.z,{onClick:L,className:"mt-4",children:"Criar primeiro template"})]})]}),(0,r.jsx)(l.M,{children:w&&A&&(0,r.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>E(!1),children:(0,r.jsxs)(n.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-[#0a0f1a] rounded-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden shadow-2xl",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-[#001533]/10 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.Z,{className:"w-6 h-6 text-[#1672d6]"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"text",value:A.name,onChange:e=>T({...A,name:e.target.value}),className:"text-xl font-bold bg-transparent border-none outline-none",placeholder:"Nome do template"}),(0,r.jsx)("input",{type:"text",value:A.description||"",onChange:e=>T({...A,description:e.target.value}),className:"text-sm text-[#001533]/60 bg-transparent border-none outline-none w-full",placeholder:"Descri\xe7\xe3o"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{value:A.type,onChange:e=>T({...A,type:e.target.value}),className:"px-3 py-1 rounded-lg border border-[#001533]/20 text-sm",children:[(0,r.jsx)("option",{value:"standard",children:"Padr\xe3o"}),(0,r.jsx)("option",{value:"premium",children:"Premium"}),(0,r.jsx)("option",{value:"enterprise",children:"Enterprise"}),(0,r.jsx)("option",{value:"custom",children:"Custom"})]}),(0,r.jsx)("button",{onClick:()=>E(!1),className:"p-2 hover:bg-[#001533]/5 rounded-lg",children:(0,r.jsx)(b.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 180px)"},children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 text-purple-500"}),(0,r.jsx)("span",{className:"text-sm text-[#001533]/60",children:"Use as vari\xe1veis acima para criar campos din\xe2micos. Elas ser\xe3o substitu\xeddas pelos dados do cliente."})]}),(0,r.jsx)("textarea",{value:A.content,onChange:e=>T({...A,content:e.target.value}),className:"w-full h-[500px] p-4 font-mono text-sm border border-[#001533]/20 rounded-xl focus:ring-2 focus:ring-[#1672d6] focus:border-transparent",placeholder:"Conte\xfado do contrato em HTML..."})]}),(0,r.jsxs)("div",{className:"p-6 border-t border-[#001533]/10 flex justify-between",children:[(0,r.jsx)(o.z,{variant:"outline",onClick:()=>E(!1),children:"Cancelar"}),(0,r.jsxs)(o.z,{onClick:R,disabled:O,className:"bg-[#1672d6] hover:bg-[#1260b5]",children:[O?(0,r.jsx)(c.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,r.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Salvar Template"]})]})]})})})]})}function C(){return'<!DOCTYPE html>\n<html lang="pt-BR">\n<head>\n  <meta charset="UTF-8">\n  <title>Contrato de Presta\xe7\xe3o de Servi\xe7os</title>\n</head>\n<body>\n  <h1>CONTRATO DE PRESTA\xc7\xc3O DE SERVI\xc7OS</h1>\n  \n  <h2>PARTES</h2>\n  <p><strong>CONTRATANTE:</strong> {{CLIENTE_EMPRESA}}, inscrita no CNPJ {{CLIENTE_CNPJ}}, com sede em {{CLIENTE_ENDERECO}}, representada por {{CLIENTE_NOME}}.</p>\n  <p><strong>CONTRATADA:</strong> Valle Group Marketing Digital LTDA...</p>\n  \n  <h2>CL\xc1USULA 1\xaa - DO OBJETO</h2>\n  <p>O presente contrato tem por objeto a presta\xe7\xe3o dos seguintes servi\xe7os:</p>\n  <p>{{SERVICOS}}</p>\n  \n  <h2>CL\xc1USULA 2\xaa - DO VALOR</h2>\n  <p>O valor mensal \xe9 de R$ {{VALOR_MENSAL}} ({{VALOR_EXTENSO}}), com vencimento todo dia {{DIA_VENCIMENTO}}.</p>\n  \n  <h2>CL\xc1USULA 3\xaa - DO PRAZO</h2>\n  <p>Vig\xeancia de {{DURACAO_MESES}} meses, de {{DATA_INICIO}} a {{DATA_FIM}}.</p>\n  \n  <h2>CL\xc1USULA 4\xaa - DA RESCIS\xc3O</h2>\n  <p>Multa de {{MULTA_RESCISAO}}% mediante aviso pr\xe9vio de {{DIAS_NOTIFICACAO}} dias.</p>\n  \n  <div class="signatures">\n    <div>___________________<br>CONTRATANTE</div>\n    <div>___________________<br>CONTRATADA</div>\n  </div>\n</body>\n</html>'}},69174:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var r=a(57437);a(2265);var s=a(90535),n=a(93448);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-valle-blue-600 text-white",secondary:"border-transparent bg-valle-silver-300 text-valle-navy-800",outline:"text-valle-navy-700 border-valle-silver-400",success:"border-transparent bg-green-600 text-white",warning:"border-transparent bg-yellow-600 text-white",danger:"border-transparent bg-red-600 text-white"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},12381:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var r=a(57437),s=a(2265),n=a(90535),l=a(93448);let i=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-valle-blue-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gradient-to-r from-valle-blue-600 to-valle-blue-700 text-white hover:from-valle-blue-700 hover:to-valle-blue-800 shadow-lg",secondary:"bg-valle-silver-200 text-valle-navy-800 hover:bg-valle-silver-300",outline:"border-2 border-valle-blue-600 text-valle-blue-600 hover:bg-valle-blue-50",ghost:"hover:bg-valle-blue-50 hover:text-valle-blue-600",danger:"bg-red-600 text-white hover:bg-red-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,...o}=e;return(0,r.jsx)("button",{className:(0,l.cn)(i({variant:s,size:n,className:a})),ref:t,...o})});o.displayName="Button"},79820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var r=a(57437),s=a(2265),n=a(93448);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border-2 border-valle-silver-200 bg-white shadow-md",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight text-lg",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-foreground/70",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},93448:function(e,t,a){"use strict";a.d(t,{cn:function(){return n},x:function(){return l}});var r=a(61994),s=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}function l(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[2882,6137,4438,460,2971,2117,1744],function(){return e(e.s=47711)}),_N_E=e.O()}]);