(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7744],{89163:function(e,a,r){Promise.resolve().then(r.bind(r,64800))},64800:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return j}});var s=r(57437),t=r(2265),l=r(57586),o=r(26892),i=r(23628),c=r(99397),n=r(42488),d=r(41671),m=r(32489),u=r(18930),x=r(87769),v=r(42208),p=r(78867),h=r(91723),b=r(76865);let y=[{value:"client.created",label:"Cliente Criado"},{value:"client.updated",label:"Cliente Atualizado"},{value:"task.created",label:"Tarefa Criada"},{value:"task.completed",label:"Tarefa Conclu\xedda"},{value:"payment.received",label:"Pagamento Recebido"},{value:"invoice.paid",label:"Fatura Paga"},{value:"invoice.overdue",label:"Fatura Vencida"},{value:"approval.requested",label:"Aprova\xe7\xe3o Solicitada"},{value:"approval.approved",label:"Aprova\xe7\xe3o Concedida"},{value:"nps.submitted",label:"NPS Enviado"},{value:"nps.low_score",label:"NPS Baixo"}],g=[{id:"wh_1",url:"https://api.exemplo.com/webhooks/valle360",events:["client.created","payment.received"],secret:"whsec_abc123def456",active:!0,createdAt:new Date(Date.now()-6048e5).toISOString(),lastTriggered:new Date(Date.now()-18e5).toISOString(),failureCount:0},{id:"wh_2",url:"https://n8n.exemplo.com/webhook/valle360",events:["task.created","task.completed"],secret:"whsec_xyz789ghi012",active:!0,createdAt:new Date(Date.now()-2592e5).toISOString(),lastTriggered:new Date(Date.now()-72e5).toISOString(),failureCount:0},{id:"wh_3",url:"https://zapier.com/hooks/catch/123456",events:["nps.submitted","nps.low_score"],secret:"whsec_jkl345mno678",active:!1,createdAt:new Date(Date.now()-12096e5).toISOString(),failureCount:5}];function j(){let[e,a]=(0,t.useState)(g),[r,j]=(0,t.useState)(!1),[N,f]=(0,t.useState)(null),[w,k]=(0,t.useState)(null),[C,S]=(0,t.useState)(""),[_,D]=(0,t.useState)([]),Z=r=>{a(e.filter(e=>e.id!==r))},T=r=>{a(e.map(e=>e.id===r?{...e,active:!e.active}:e))},A=e=>{navigator.clipboard.writeText(e)},E=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[(0,s.jsx)(i.Z,{className:"w-7 h-7",style:{color:"var(--primary-500)"}}),"Webhooks"]}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Configure webhooks para integrar com sistemas externos"})]}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium",style:{backgroundColor:"var(--primary-500)",color:"white"},children:[(0,s.jsx)(c.Z,{className:"w-5 h-5"}),"Novo Webhook"]})]}),(0,s.jsx)("div",{className:"p-4 rounded-xl mb-6",style:{backgroundColor:"var(--info-100)",border:"1px solid var(--info-200)"},children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(n.Z,{className:"w-5 h-5 mt-0.5",style:{color:"var(--info-600)"}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",style:{color:"var(--info-700)"},children:"Como funcionam os Webhooks"}),(0,s.jsx)("p",{className:"text-sm",style:{color:"var(--info-600)"},children:"Webhooks enviam notifica\xe7\xf5es HTTP POST em tempo real quando eventos ocorrem no sistema. Use para integrar com Zapier, N8N, Make, ou seu pr\xf3prio sistema."})]})]})}),(0,s.jsx)(l.M,{children:r&&(0,s.jsx)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-light)"},children:[(0,s.jsx)("h3",{className:"font-medium mb-4",style:{color:"var(--text-primary)"},children:"Novo Webhook"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"URL do Endpoint"}),(0,s.jsx)("input",{type:"url",value:C,onChange:e=>S(e.target.value),placeholder:"https://api.exemplo.com/webhook",className:"w-full px-4 py-2 rounded-xl",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-light)"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Eventos"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:y.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-2 rounded-lg cursor-pointer",style:{backgroundColor:_.includes(e.value)?"var(--primary-100)":"var(--bg-secondary)",border:"1px solid ".concat(_.includes(e.value)?"var(--primary-500)":"var(--border-light)")},children:[(0,s.jsx)("input",{type:"checkbox",checked:_.includes(e.value),onChange:a=>{a.target.checked?D([..._,e.value]):D(_.filter(a=>a!==e.value))},className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>{j(!1),S(""),D([])},className:"px-4 py-2 rounded-xl",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{C&&0!==_.length&&(a([...e,{id:"wh_".concat(Date.now()),url:C,events:_,secret:"whsec_".concat(Math.random().toString(36).substring(2)),active:!0,createdAt:new Date().toISOString(),failureCount:0}]),S(""),D([]),j(!1))},disabled:!C||0===_.length,className:"px-4 py-2 rounded-xl font-medium disabled:opacity-50",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"Criar Webhook"})]})]})]})})}),(0,s.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,s.jsxs)(o.E.div,{layout:!0,className:"p-6 rounded-xl",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-light)"},children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.active?"var(--success-500)":"var(--neutral-400)"}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-sm",style:{color:"var(--text-primary)"},children:e.url}),(0,s.jsxs)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:["Criado em ",E(e.createdAt)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>T(e.id),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-secondary)"},title:e.active?"Desativar":"Ativar",children:e.active?(0,s.jsx)(d.Z,{className:"w-5 h-5",style:{color:"var(--success-500)"}}):(0,s.jsx)(m.Z,{className:"w-5 h-5",style:{color:"var(--neutral-400)"}})}),(0,s.jsx)("button",{onClick:()=>Z(e.id),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-secondary)"},title:"Excluir",children:(0,s.jsx)(u.Z,{className:"w-5 h-5",style:{color:"var(--error-500)"}})})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.events.map(e=>{var a;return(0,s.jsx)("span",{className:"px-2 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"var(--primary-100)",color:"var(--primary-700)"},children:(null===(a=y.find(a=>a.value===e))||void 0===a?void 0:a.label)||e},e)})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("span",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:"Secret:"}),(0,s.jsx)("code",{className:"px-2 py-1 rounded text-sm font-mono",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:w===e.id?e.secret:"••••••••••••••••"}),(0,s.jsx)("button",{onClick:()=>k(w===e.id?null:e.id),className:"p-1 rounded",style:{color:"var(--text-tertiary)"},children:w===e.id?(0,s.jsx)(x.Z,{className:"w-4 h-4"}):(0,s.jsx)(v.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>A(e.secret),className:"p-1 rounded",style:{color:"var(--text-tertiary)"},title:"Copiar",children:(0,s.jsx)(p.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[e.lastTriggered&&(0,s.jsxs)("div",{className:"flex items-center gap-1",style:{color:"var(--text-tertiary)"},children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"\xdaltimo disparo: ",E(e.lastTriggered)]}),e.failureCount>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",style:{color:"var(--warning-500)"},children:[(0,s.jsx)(b.Z,{className:"w-4 h-4"}),e.failureCount," falhas"]})]})]},e.id)),0===e.length&&(0,s.jsxs)("div",{className:"p-12 text-center rounded-xl",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-light)"},children:[(0,s.jsx)(i.Z,{className:"w-12 h-12 mx-auto mb-4",style:{color:"var(--text-tertiary)"}}),(0,s.jsx)("p",{className:"font-medium mb-2",style:{color:"var(--text-primary)"},children:"Nenhum webhook configurado"}),(0,s.jsx)("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:"Crie seu primeiro webhook para integrar com sistemas externos"}),(0,s.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 rounded-xl font-medium",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"Criar Webhook"})]})]})]})})}}},function(e){e.O(0,[2882,430,2971,2117,1744],function(){return e(e.s=89163)}),_N_E=e.O()}]);