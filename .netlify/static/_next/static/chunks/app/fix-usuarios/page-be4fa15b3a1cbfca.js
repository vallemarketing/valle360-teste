(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5065],{49668:function(e,t,r){Promise.resolve().then(r.bind(r,33322))},79205:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var a=r(2265);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:m="",children:d,iconNode:u,...p}=e;return(0,a.createElement)("svg",{ref:t,...c,width:i,height:i,stroke:r,strokeWidth:o?24*Number(s)/Number(i):s,className:n("lucide",m),...!d&&!l(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:l,...c}=r;return(0,a.createElement)(m,{ref:s,iconNode:t,className:n("lucide-".concat(i(o(e))),"lucide-".concat(e),l),...c})});return r.displayName=o(e),r}},49322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},88906:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},33322:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(57437),i=r(2265),s=r(5526),o=r(88906),n=r(41671),l=r(49322),c=r(51817);function m(){let[e,t]=(0,i.useState)(!1),[r,m]=(0,i.useState)([]),[d,u]=(0,i.useState)([]),p=async()=>{for(let e of(t(!0),m([]),u([]),[{email:"cliente@teste.com.br",nome:"Cliente Teste",tipo:"client",area:null},{email:"joao.comercial@valle360.com.br",nome:"Jo\xe3o Comercial",tipo:"employee",area:"commercial"},{email:"maria.trafego@valle360.com.br",nome:"Maria Tr\xe1fego",tipo:"employee",area:"paid_traffic"},{email:"carlos.designer@valle360.com.br",nome:"Carlos Designer",tipo:"employee",area:"design"},{email:"ana.head@valle360.com.br",nome:"Ana Head Marketing",tipo:"employee",area:"marketing"},{email:"paula.rh@valle360.com.br",nome:"Paula RH",tipo:"employee",area:"hr"},{email:"roberto.financeiro@valle360.com.br",nome:"Roberto Financeiro",tipo:"employee",area:"finance"}]))try{let{data:{users:t},error:r}=await s.supabase.auth.admin.listUsers();if(r){let{data:t}=await s.supabase.auth.signInWithPassword({email:e.email,password:"Valle@Teste2024"});if(!t.user){u(t=>[...t,"".concat(e.nome,": N\xe3o encontrado no auth")]);continue}let r=t.user.id;await s.supabase.from("user_profiles").upsert({user_id:r,full_name:e.nome,email:e.email,role:"client"===e.tipo?"cliente":"colaborador",user_type:e.tipo,is_active:!0},{onConflict:"user_id"}),"employee"===e.tipo&&e.area&&await s.supabase.from("employees").upsert({user_id:r,full_name:e.nome,email:e.email,department:e.area,position:e.nome.split(" ")[1],is_active:!0},{onConflict:"user_id"}),await s.supabase.auth.signOut(),m(t=>[...t,"✅ ".concat(e.nome," corrigido!")])}else{let r=null==t?void 0:t.find(t=>t.email===e.email);if(!r){u(t=>[...t,"".concat(e.nome,": N\xe3o encontrado")]);continue}await s.supabase.from("user_profiles").upsert({user_id:r.id,full_name:e.nome,email:e.email,role:"client"===e.tipo?"cliente":"colaborador",user_type:e.tipo,is_active:!0},{onConflict:"user_id"}),"employee"===e.tipo&&e.area&&await s.supabase.from("employees").upsert({user_id:r.id,full_name:e.nome,email:e.email,department:e.area,position:e.nome.split(" ")[1],is_active:!0},{onConflict:"user_id"}),m(t=>[...t,"✅ ".concat(e.nome," corrigido!")])}}catch(t){u(r=>[...r,"".concat(e.nome,": ").concat(t.message)])}t(!1)};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#0f1b35] to-[#1a2642] flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(o.Z,{className:"w-20 h-20 mx-auto text-[#4370d1] mb-4"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-[#0f1b35] mb-2",children:"Corrigir Perfis de Usu\xe1rios"}),(0,a.jsx)("p",{className:"text-[#0f1b35]/60",children:"Criar perfis para usu\xe1rios j\xe1 existentes no Auth"})]}),(0,a.jsx)("div",{className:"bg-[#4370d1]/10 border-2 border-[#4370d1] rounded-xl p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-center font-semibold text-[#0f1b35]",children:["\uD83D\uDD10 Senha de todos: ",(0,a.jsx)("span",{className:"font-mono text-[#4370d1]",children:"Valle@Teste2024"})]})}),r.length>0&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6 max-h-60 overflow-y-auto",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 text-green-700 text-sm mb-2",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:e})]},t))}),d.length>0&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 max-h-60 overflow-y-auto",children:d.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 text-red-700 text-sm mb-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:e})]},t))}),!e&&0===r.length&&(0,a.jsx)("button",{onClick:p,disabled:e,className:"w-full bg-gradient-to-r from-[#4370d1] to-[#0f1b35] hover:from-[#0f1b35] hover:to-[#4370d1] text-white font-bold py-4 rounded-xl transition-all transform hover:scale-[1.02] hover:shadow-xl active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}),"Corrigindo..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"Corrigir Todos os Perfis Agora"]})}),r.length>0&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4",children:(0,a.jsx)(n.Z,{className:"w-12 h-12 text-green-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-green-700 mb-2",children:"✅ Perfis Corrigidos!"}),(0,a.jsx)("p",{className:"text-[#0f1b35]/60 mb-6",children:"Agora voc\xea pode fazer login com todos os usu\xe1rios"}),(0,a.jsx)("a",{href:"/login",className:"inline-block bg-[#4370d1] hover:bg-[#0f1b35] text-white font-semibold py-3 px-8 rounded-xl transition-colors",children:"Ir para Login"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("a",{href:"/login",className:"text-sm text-[#4370d1] hover:text-[#0f1b35] font-medium",children:"← Voltar para Login"})})]})})}},5526:function(e,t,r){"use strict";r.r(t),r.d(t,{supabase:function(){return o}});var a=r(62724);let i="https://ikjgsqtykkhqimypacro.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";i&&s||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let o=(0,a.eI)(i||"https://setup-missing.supabase.co",s||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[4609,2724,2971,2117,1744],function(){return e(e.s=49668)}),_N_E=e.O()}]);