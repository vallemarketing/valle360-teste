"use strict";exports.id=53919,exports.ids=[53919],exports.modules={64470:(e,t,a)=>{a.d(t,{i:()=>d});class d{constructor(e){this.id=e.id,this.description=e.description,this.expectedOutput=e.expectedOutput,this.agentId=e.agentId,this.context=e.context,this.dependencies=e.dependencies}assignAgent(e){this.agent=e,this.agentId=e.id}async execute(e){if(!this.agent)throw Error(`Task ${this.id} has no assigned agent`);let t=[this.context,e,`OUTPUT ESPERADO: ${this.expectedOutput}`].filter(Boolean).join("\n\n");if(this.result=await this.agent.execute(this.description,t),!this.result)throw Error(`Task ${this.id} execution returned undefined result`);return this.result}getResult(){return this.result}}},83387:(e,t,a)=>{a.d(t,{wS:()=>l,kC:()=>p,J8:()=>g,Je:()=>u});var d=a(93916),i=a(64470),s=a(70685),o=a(20928),n=a(9846),r=a(11567),c=a(35550);async function p(e){let{clientId:t,topic:a,platform:p,contentType:u,objective:g,additionalContext:l}=e,x=new d.c({id:`organic_content_${Date.now()}`,name:"Organic Content Crew",description:`Cria\xe7\xe3o de conte\xfado org\xe2nico: ${a}`,agents:[],tasks:[],process:"sequential"}),m=(0,s.D0)(t),h=(0,s.Y1)(),v=(0,o.C0)(),k=(0,o.du)(),_=(0,c.Ke)(t);if(x.addAgent(m),x.addAgent(h),x.addAgent(v),x.addAgent(k),x.addAgent(_),"instagram"===p||"both"===p){let e=(0,o.zk)(t);x.addAgent(e)}if("linkedin"===p||"both"===p){let e=(0,o.jN)(t);x.addAgent(e)}if("carousel"===u){let e=(0,n.Bl)(t);x.addAgent(e)}else{let e=(0,n.xm)(t);x.addAgent(e)}let f=(0,r.hJ)();x.addAgent(f);let O=new i.i({id:"strategy",description:`Crie um briefing estrat\xe9gico para o seguinte tema: "${a}"
    
Plataforma: ${p}
Tipo de conte\xfado: ${u}
${g?`Objetivo: ${g}`:""}
${l?`Contexto adicional: ${l}`:""}`,expectedOutput:"Briefing completo com \xe2ngulo, tom de voz e mensagens-chave",agentId:m.id}),I=new i.i({id:"trends",description:`Pesquise tend\xeancias relacionadas ao tema "${a}" para ${p}`,expectedOutput:"3-5 tend\xeancias aplic\xe1veis com sugest\xf5es de uso",agentId:h.id,dependencies:["strategy"]}),$=new i.i({id:"hooks",description:`Crie hooks poderosos para o conte\xfado sobre "${a}"`,expectedOutput:"5-7 op\xe7\xf5es de hook ranqueadas",agentId:v.id,dependencies:["strategy","trends"]}),T="linkedin"===p?"copy_linkedin_expert":"copy_instagram_expert",w=new i.i({id:"copy",description:`Crie o copy completo para ${p} sobre "${a}"`,expectedOutput:"Copy com varia\xe7\xf5es, hashtags e CTA",agentId:T,dependencies:["strategy","hooks"]}),A=new i.i({id:"cta",description:`Otimize o CTA para o conte\xfado sobre "${a}"`,expectedOutput:"CTAs otimizados para convers\xe3o",agentId:k.id,dependencies:["copy"]}),C=new i.i({id:"design",description:`Crie a dire\xe7\xe3o de arte para o ${u} sobre "${a}"`,expectedOutput:"Prompt detalhado para criativo com especifica\xe7\xf5es visuais",agentId:"carousel"===u?"graphic_designer_carousels":"graphic_designer_posts",dependencies:["strategy","copy"]}),b=new i.i({id:"brand_review",description:`Valide o conte\xfado criado contra as diretrizes da marca`,expectedOutput:"Aprova\xe7\xe3o ou lista de ajustes",agentId:_.id,dependencies:["copy","design"]}),y=new i.i({id:"schedule",description:`Defina melhor hor\xe1rio e frequ\xeancia para publica\xe7\xe3o`,expectedOutput:"Recomenda\xe7\xe3o de agendamento",agentId:f.id,dependencies:["brand_review"]});return x.addTask(O),x.addTask(I),x.addTask($),x.addTask(w),x.addTask(A),x.addTask(C),x.addTask(b),x.addTask(y),x.kickoff()}async function u(e){let{clientId:t,topic:a,platform:r,videoLength:p,objective:u,additionalContext:g}=e,l=new d.c({id:`video_content_${Date.now()}`,name:"Video Content Crew",description:`Cria\xe7\xe3o de conte\xfado de v\xeddeo: ${a}`,agents:[],tasks:[],process:"sequential"}),x=(0,s.D0)(t),m=(0,s.Y1)(),h=(0,n.xQ)(),v=(0,c.Ke)(t),k=(0,n.xm)(t);if(l.addAgent(x),l.addAgent(m),l.addAgent(h),l.addAgent(v),l.addAgent(k),"youtube"===r){let e=(0,o.f6)(t),a=(0,n.zp)(t);l.addAgent(e),l.addAgent(a)}else{let e=(0,n.PB)(),a=(0,o.zk)(t);l.addAgent(e),l.addAgent(a)}let _=new i.i({id:"strategy",description:`Crie um briefing estrat\xe9gico para v\xeddeo sobre: "${a}"
    
Plataforma: ${r}
Dura\xe7\xe3o: ${p}
${u?`Objetivo: ${u}`:""}
${g?`Contexto adicional: ${g}`:""}`,expectedOutput:"Briefing com \xe2ngulo, tom e estrutura sugerida",agentId:x.id}),f=new i.i({id:"trends",description:`Pesquise tend\xeancias de v\xeddeo para "${a}" em ${r}`,expectedOutput:"Tend\xeancias, formatos e sons em alta",agentId:m.id,dependencies:["strategy"]}),O=new i.i({id:"video_hooks",description:`Crie hooks poderosos para os primeiros segundos do v\xeddeo sobre "${a}"`,expectedOutput:"5 op\xe7\xf5es de hook com FALA + VISUAL + TEXTO",agentId:h.id,dependencies:["strategy","trends"]});if("youtube"===r){let e=new i.i({id:"titles_seo",description:`Crie t\xedtulos e descri\xe7\xe3o SEO para v\xeddeo YouTube sobre "${a}"`,expectedOutput:"5 t\xedtulos, descri\xe7\xe3o otimizada, 15-20 tags",agentId:"copy_youtube_expert",dependencies:["strategy"]}),t=new i.i({id:"script",description:`Escreva o roteiro completo para v\xeddeo ${p} sobre "${a}"`,expectedOutput:"Roteiro com NARRA\xc7\xc3O, VISUAL, TEXTO, TIMING",agentId:"video_script_writer",dependencies:["strategy","video_hooks"]});l.addTask(_),l.addTask(f),l.addTask(O),l.addTask(e),l.addTask(t)}else{let e=new i.i({id:"reels_script",description:`Crie roteiro segundo-a-segundo para ${r} sobre "${a}"`,expectedOutput:"Roteiro com timing, texto overlay, transi\xe7\xf5es",agentId:"reels_specialist",dependencies:["strategy","video_hooks","trends"]}),t=new i.i({id:"caption",description:`Crie legenda e hashtags para o ${r} sobre "${a}"`,expectedOutput:"Legenda engajante com hashtags estrat\xe9gicas",agentId:"copy_instagram_expert",dependencies:["reels_script"]});l.addTask(_),l.addTask(f),l.addTask(O),l.addTask(e),l.addTask(t)}let I=new i.i({id:"thumbnail",description:`Crie conceito de thumbnail/capa para o v\xeddeo sobre "${a}"`,expectedOutput:"Prompt detalhado para thumbnail com texto, cores, estilo",agentId:k.id,dependencies:["strategy"]}),$=new i.i({id:"brand_review",description:`Valide todo o conte\xfado contra as diretrizes da marca`,expectedOutput:"Aprova\xe7\xe3o ou lista de ajustes",agentId:v.id});return l.addTask(I),l.addTask($),l.kickoff()}async function g(e){let{clientId:t,campaignObjective:a,product:p,targetAudience:u,budget:g,platform:l,additionalContext:x}=e,m=new d.c({id:`paid_content_${Date.now()}`,name:"Paid Content Crew",description:`Campanha de m\xeddia paga: ${p}`,agents:[],tasks:[],process:"sequential"}),h=(0,s.D0)(t),v=(0,s.u7)(t),k=(0,o.hH)(t),_=(0,o.du)(),f=(0,o.C0)(),O=(0,n.xm)(t),I=(0,n.xQ)(),$=(0,r.Qs)(),T=(0,r.UG)(),w=(0,c.Ke)(t);m.addAgent(h),m.addAgent(v),m.addAgent(k),m.addAgent(_),m.addAgent(f),m.addAgent(O),m.addAgent(I),m.addAgent($),m.addAgent(T),m.addAgent(w);let A=new i.i({id:"campaign_strategy",description:`Defina estrat\xe9gia para campanha de ${a}

Produto/Servi\xe7o: ${p}
P\xfablico-alvo: ${u}
${g?`Budget: ${g}`:""}
Plataforma: ${l}
${x?`Contexto: ${x}`:""}`,expectedOutput:"Estrat\xe9gia com objetivos, KPIs e approach",agentId:h.id}),C=new i.i({id:"campaign_plan",description:`Crie plano de campanha detalhado para ${p}`,expectedOutput:"Plano com estrutura, p\xfablicos, fases e cronograma",agentId:v.id,dependencies:["campaign_strategy"]}),b=new i.i({id:"ad_copies",description:`Crie copies para an\xfancios de ${p}

Objetivo: ${a}
P\xfablico: ${u}`,expectedOutput:"Varia\xe7\xf5es de primary text, headline, description",agentId:k.id,dependencies:["campaign_strategy"]}),y=new i.i({id:"hooks_ads",description:`Crie hooks para os an\xfancios de ${p}`,expectedOutput:"5 hooks para diferentes abordagens",agentId:f.id,dependencies:["ad_copies"]}),j=new i.i({id:"ctas_ads",description:`Otimize CTAs para an\xfancios de ${p}`,expectedOutput:"CTAs por est\xe1gio do funil",agentId:_.id,dependencies:["ad_copies"]}),N=new i.i({id:"ad_creatives",description:`Crie dire\xe7\xe3o de arte para an\xfancios de ${p}`,expectedOutput:"Prompts para criativos est\xe1ticos e v\xeddeo",agentId:O.id,dependencies:["campaign_strategy","ad_copies"]}),S=new i.i({id:"video_hooks_ads",description:`Crie hooks de v\xeddeo para an\xfancios de ${p}`,expectedOutput:"Scripts de 3-5 segundos para v\xeddeo ads",agentId:I.id,dependencies:["campaign_strategy"]}),z=new i.i({id:"campaign_structure",description:`Defina estrutura t\xe9cnica da campanha no ${l}`,expectedOutput:"Estrutura de campanha, ad sets, p\xfablicos",agentId:$.id,dependencies:["campaign_plan"]}),E=new i.i({id:"meta_config",description:`Configure detalhes espec\xedficos para Meta Ads`,expectedOutput:"Configura\xe7\xf5es de p\xfablicos, objetivos, otimiza\xe7\xe3o",agentId:T.id,dependencies:["campaign_structure"]}),J=new i.i({id:"brand_review",description:"Valide toda a campanha contra diretrizes da marca",expectedOutput:"Aprova\xe7\xe3o ou ajustes necess\xe1rios",agentId:w.id,dependencies:["ad_copies","ad_creatives"]});return m.addTask(A),m.addTask(C),m.addTask(b),m.addTask(y),m.addTask(j),m.addTask(N),m.addTask(S),m.addTask(z),m.addTask(E),m.addTask(J),m.kickoff()}async function l(e){let{clientId:t,contentToEvaluate:a,contentType:s,minScore:o=7,maxIterations:n=3}=e,r=new d.c({id:`focus_group_${Date.now()}`,name:"Focus Group Sint\xe9tico",description:`Valida\xe7\xe3o de ${s}`,agents:[],tasks:[],process:"sequential"}),p=(0,c.Ke)(t),u=(0,c.Pj)(),g=(0,c.ud)(),l=(0,c._o)();r.addAgent(p),r.addAgent(u),r.addAgent(g),r.addAgent(l);let x=new i.i({id:"brand_validation",description:`Valide o seguinte conte\xfado contra as diretrizes da marca:

CONTE\xdaDO:
${a}

Verifique: tom de voz, vocabul\xe1rio, valores, identidade visual.
Se houver problemas, liste especificamente o que precisa ser ajustado.`,expectedOutput:"Aprovado ou lista de ajustes com sugest\xf5es espec\xedficas",agentId:p.id}),m=new i.i({id:"skeptic_evaluation",description:`Como O C\xc9TICO, avalie o seguinte conte\xfado:

CONTE\xdaDO:
${a}

Responda em JSON:
{
  "nota": 0-10,
  "pontos_positivos": ["..."],
  "pontos_negativos": ["..."],
  "sugestoes": ["..."],
  "veredicto": "aprovado|reprovado|precisa_ajustes"
}`,expectedOutput:"JSON com avalia\xe7\xe3o do c\xe9tico",agentId:u.id,dependencies:["brand_validation"]}),h=new i.i({id:"enthusiast_evaluation",description:`Como O ENTUSIASTA, avalie o seguinte conte\xfado:

CONTE\xdaDO:
${a}

Responda em JSON:
{
  "nota": 0-10,
  "pontos_positivos": ["..."],
  "pontos_negativos": ["..."],
  "sugestoes": ["..."],
  "veredicto": "aprovado|reprovado|precisa_ajustes"
}`,expectedOutput:"JSON com avalia\xe7\xe3o do entusiasta",agentId:g.id,dependencies:["brand_validation"]}),v=new i.i({id:"executive_evaluation",description:`Como O EXECUTIVO OCUPADO, avalie o seguinte conte\xfado:

CONTE\xdaDO:
${a}

Responda em JSON:
{
  "nota": 0-10,
  "pontos_positivos": ["..."],
  "pontos_negativos": ["..."],
  "sugestoes": ["..."],
  "veredicto": "aprovado|reprovado|precisa_ajustes"
}`,expectedOutput:"JSON com avalia\xe7\xe3o do executivo",agentId:l.id,dependencies:["brand_validation"]});r.addTask(x),r.addTask(m),r.addTask(h),r.addTask(v);let k=await r.kickoff(),_=function(e){let t=[];for(let a of e)if("brand_guardian"!==a.agentId)try{let e=a.output.match(/\{[\s\S]*\}/);if(e){let d=JSON.parse(e[0]);t.push({personaId:a.agentId,personaName:a.agentName,score:d.nota||5,positives:d.pontos_positivos||[],negatives:d.pontos_negativos||[],suggestions:d.sugestoes||[],verdict:d.veredicto||"precisa_ajustes"})}}catch{let e=a.output.match(/nota[:\s]+(\d+)/i);t.push({personaId:a.agentId,personaName:a.agentName,score:e?parseInt(e[1]):5,positives:[],negatives:[],suggestions:[],verdict:"precisa_ajustes"})}return t}(k.taskResults),f=0===_.length?0:Math.round(_.reduce((e,t)=>e+t.score,0)/_.length*10)/10;return{...k,focusGroupResult:{averageScore:f,passed:f>=o,iterations:1,evaluations:_}}}},17478:(e,t,a)=>{a.d(t,{k:()=>n});var d=a(87070),i=a(20344),s=a(71615),o=a(54128);async function n(e){let t=(0,s.cookies)(),a=(0,i.createRouteHandlerClient)({cookies:()=>t}),n=e.headers.get("authorization")||"",r=n.toLowerCase().startsWith("bearer ")?n.slice(7).trim():null,c=r?(0,o.eI)("https://ikjgsqtykkhqimypacro.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI",{global:{headers:{Authorization:`Bearer ${r}`}},auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}):a,{data:p}=await c.auth.getUser();if(!p.user?.id)return{ok:!1,res:d.NextResponse.json({error:"N\xe3o autorizado"},{status:401})};let{data:u,error:g}=await c.rpc("is_admin");return g||!u?{ok:!1,res:d.NextResponse.json({error:"Acesso negado (admin)"},{status:403})}:{ok:!0,userId:p.user.id}}}};