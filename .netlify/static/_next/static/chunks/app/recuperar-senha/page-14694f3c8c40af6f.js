(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6954],{32987:function(e,t,r){Promise.resolve().then(r.bind(r,19109))},79205:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:r,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",d),...!u&&!o(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:o,...c}=r;return(0,a.createElement)(d,{ref:l,iconNode:t,className:n("lucide-".concat(s(i(e))),"lucide-".concat(e),o),...c})});return r.displayName=i(e),r}},32660:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},89345:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},82718:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},88906:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},19109:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(57437),s=r(2265),l=r(99376),i=r(5526),n=r(32660),o=r(88906),c=r(89345),d=r(41671),u=r(82718);function m(){let e=(0,l.useRouter)(),[t,r]=(0,s.useState)("email"),[m,h]=(0,s.useState)(""),[p,x]=(0,s.useState)("email"),[f,b]=(0,s.useState)(!1),[g,w]=(0,s.useState)(""),y=async e=>{e.preventDefault(),b(!0),w("");try{let{data:e}=await i.supabase.from("users").select("id, email, phone").eq("email",m).single();if(!e){w("Email n\xe3o encontrado no sistema"),b(!1);return}r("method")}catch(e){w("Erro ao buscar usu\xe1rio")}finally{b(!1)}},j=async()=>{b(!0),w("");try{if("email"===p){let{error:e}=await i.supabase.auth.resetPasswordForEmail(m,{redirectTo:"".concat(window.location.origin,"/redefinir-senha")});if(e)throw e;await i.supabase.from("user_access_logs").insert({action:"password_reset_requested",action_details:{method:"email",email:m}})}else{let e=Math.floor(1e5+9e5*Math.random()).toString();await i.supabase.from("password_reset_tokens").insert({email:m,token:e,method:"whatsapp",expires_at:new Date(Date.now()+9e5).toISOString()}),await i.supabase.from("user_access_logs").insert({action:"password_reset_requested",action_details:{method:"whatsapp",email:m}})}r("sent")}catch(e){w("Erro ao enviar c\xf3digo de recupera\xe7\xe3o")}finally{b(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:[(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500 rounded-full blur-3xl opacity-20 animate-pulse"}),(0,a.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500 rounded-full blur-3xl opacity-20 animate-pulse delay-1000"})]}),(0,a.jsxs)("div",{className:"w-full max-w-md bg-gray-800 rounded-2xl shadow-2xl p-8 relative z-10",children:[(0,a.jsxs)("button",{onClick:()=>"email"===t?e.push("/login"):r("email"),className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Voltar"})]}),"email"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-8 h-8 text-blue-400"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Recuperar Senha"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Digite seu email para recuperar o acesso"})]}),g&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-400 text-sm text-center",children:g})}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),(0,a.jsx)("input",{type:"email",value:m,onChange:e=>h(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500",placeholder:"seu@email.com",required:!0})]})]}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition-all transform hover:scale-[1.02] disabled:opacity-50",children:f?"Verificando...":"Continuar"})]})]}),"method"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Escolha o M\xe9todo"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Como deseja receber o c\xf3digo de recupera\xe7\xe3o?"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:()=>x("email"),className:"w-full p-6 rounded-xl border-2 transition-all ".concat("email"===p?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-gray-700/50 hover:border-gray-600"),children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("email"===p?"bg-blue-500/20":"bg-gray-600"),children:(0,a.jsx)(c.Z,{className:"w-6 h-6 ".concat("email"===p?"text-blue-400":"text-gray-400")})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("h3",{className:"font-semibold text-white mb-1",children:"Email"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Receber link de recupera\xe7\xe3o por email"})]}),"email"===p&&(0,a.jsx)(d.Z,{className:"w-6 h-6 text-blue-400"})]})}),(0,a.jsx)("button",{onClick:()=>x("whatsapp"),className:"w-full p-6 rounded-xl border-2 transition-all ".concat("whatsapp"===p?"border-green-500 bg-green-500/10":"border-gray-700 bg-gray-700/50 hover:border-gray-600"),children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("whatsapp"===p?"bg-green-500/20":"bg-gray-600"),children:(0,a.jsx)(u.Z,{className:"w-6 h-6 ".concat("whatsapp"===p?"text-green-400":"text-gray-400")})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("h3",{className:"font-semibold text-white mb-1",children:"WhatsApp"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Receber c\xf3digo via WhatsApp (mais r\xe1pido)"})]}),"whatsapp"===p&&(0,a.jsx)(d.Z,{className:"w-6 h-6 text-green-400"})]})})]}),(0,a.jsx)("button",{onClick:j,disabled:f,className:"w-full mt-6 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition-all transform hover:scale-[1.02] disabled:opacity-50",children:f?"Enviando...":"Enviar C\xf3digo"})]}),"sent"===t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-10 h-10 text-green-400"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"C\xf3digo Enviado!"}),(0,a.jsx)("p",{className:"text-gray-400 mb-8",children:"email"===p?"Enviamos um link de recupera\xe7\xe3o para ".concat(m,". Verifique sua caixa de entrada (e spam)."):"Enviamos um c\xf3digo de 6 d\xedgitos via WhatsApp. O c\xf3digo expira em 15 minutos."}),"email"===p?(0,a.jsx)("button",{onClick:()=>e.push("/login"),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition-all",children:"Voltar para Login"}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("/verificar-codigo"),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition-all",children:"Inserir C\xf3digo"}),(0,a.jsx)("button",{onClick:j,className:"w-full text-gray-400 hover:text-white text-sm transition-colors",children:"N\xe3o recebeu? Reenviar c\xf3digo"})]})]})})]})]})}},5526:function(e,t,r){"use strict";r.r(t),r.d(t,{supabase:function(){return i}});var a=r(62724);let s="https://ikjgsqtykkhqimypacro.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";s&&l||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let i=(0,a.eI)(s||"https://setup-missing.supabase.co",l||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[4609,2724,2971,2117,1744],function(){return e(e.s=32987)}),_N_E=e.O()}]);