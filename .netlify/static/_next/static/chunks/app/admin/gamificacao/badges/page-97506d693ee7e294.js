(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6370],{17868:function(e,a,r){Promise.resolve().then(r.bind(r,98230))},98230:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return _}});var s=r(57437),t=r(2265),l=r(5526),o=r(14438),i=r(26892),c=r(57586),n=r(86595),d=r(49474),m=r(66142),x=r(33327),u=r(58896),p=r(11239),v=r(88997),b=r(70525),g=r(95805),h=r(92934),y=r(99397),j=r(15868),f=r(18930),N=r(32489);let C=[{value:"Star",label:"Estrela",component:n.Z},{value:"Trophy",label:"Trof\xe9u",component:d.Z},{value:"Medal",label:"Medalha",component:m.Z},{value:"Award",label:"Pr\xeamio",component:x.Z},{value:"Target",label:"Alvo",component:u.Z},{value:"Zap",label:"Raio",component:p.Z},{value:"Heart",label:"Cora\xe7\xe3o",component:v.Z},{value:"TrendingUp",label:"Crescimento",component:b.Z},{value:"Users",label:"Equipe",component:g.Z},{value:"CheckCircle2",label:"Check",component:h.Z}],w=["#FFD700","#C0C0C0","#CD7F32","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#A06CD5","#F7DC6F"];function _(){let[e,a]=(0,t.useState)([]),[r,d]=(0,t.useState)(!0),[m,u]=(0,t.useState)(!1),[p,v]=(0,t.useState)(null),[b,g]=(0,t.useState)({name:"",description:"",icon:"Star",color:"#FFD700",criteria_type:"points",criteria_value:0,is_active:!0});(0,t.useEffect)(()=>{h()},[]);let h=async()=>{try{let{data:e,error:r}=await l.supabase.from("gamification_badges").select("*").order("created_at",{ascending:!1});if(r)throw r;a(e||[])}catch(e){console.error("Erro ao carregar badges:",e)}finally{d(!1)}},_=e=>{v(e),g({name:e.name,description:e.description,icon:e.icon,color:e.color,criteria_type:e.criteria_type,criteria_value:e.criteria_value,is_active:e.is_active}),u(!0)},k=async()=>{try{if(p){let{error:e}=await l.supabase.from("gamification_badges").update(b).eq("id",p.id);if(e)throw e}else{let{error:e}=await l.supabase.from("gamification_badges").insert([b]);if(e)throw e}u(!1),h(),o.Am.success(p?"Badge atualizada!":"Badge criada!")}catch(e){console.error("Erro ao salvar badge:",e),o.Am.error((null==e?void 0:e.message)||"Erro ao salvar badge")}},E=async e=>{if(confirm("Tem certeza que deseja excluir esta badge?"))try{let{error:a}=await l.supabase.from("gamification_badges").delete().eq("id",e);if(a)throw a;h(),o.Am.success("Badge exclu\xedda!")}catch(e){console.error("Erro ao excluir badge:",e),o.Am.error((null==e?void 0:e.message)||"Erro ao excluir badge")}},I=async e=>{try{let{error:a}=await l.supabase.from("gamification_badges").update({is_active:!e.is_active}).eq("id",e.id);if(a)throw a;h()}catch(e){console.error("Erro ao atualizar status:",e)}},B=e=>{let a=C.find(a=>a.value===e);return(null==a?void 0:a.component)||n.Z};return r?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto",style:{borderColor:"var(--primary-500)"}}),(0,s.jsx)("p",{className:"mt-4",style:{color:"var(--text-secondary)"},children:"Carregando badges..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen p-8",style:{backgroundColor:"var(--bg-secondary)"},children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:"\uD83C\uDFC6 Gerenciar Badges"}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Crie e gerencie as badges de gamifica\xe7\xe3o do sistema"})]}),(0,s.jsxs)("button",{onClick:()=>{v(null),g({name:"",description:"",icon:"Star",color:"#FFD700",criteria_type:"points",criteria_value:0,is_active:!0}),u(!0)},className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium text-white transition-all hover:scale-105",style:{backgroundColor:"var(--primary-500)"},children:[(0,s.jsx)(y.Z,{className:"w-5 h-5"}),"Nova Badge"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total de Badges"}),(0,s.jsx)("p",{className:"text-3xl font-bold",style:{color:"var(--primary-600)"},children:e.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Badges Ativas"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:e.filter(e=>e.is_active).length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Badges Inativas"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-400",children:e.filter(e=>!e.is_active).length})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,a)=>{let r=B(e.icon);return(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"bg-white rounded-xl shadow-sm p-6 border-2 transition-all hover:shadow-lg ".concat(e.is_active?"":"opacity-60"),style:{borderColor:e.is_active?e.color:"#E5E7EB"},children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{backgroundColor:"".concat(e.color,"20")},children:(0,s.jsx)(r,{className:"w-7 h-7",style:{color:e.color}})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>_(e),className:"p-2 rounded-lg hover:bg-gray-100 transition-all",children:(0,s.jsx)(j.Z,{className:"w-4 h-4 text-gray-600"})}),(0,s.jsx)("button",{onClick:()=>E(e.id),className:"p-2 rounded-lg hover:bg-red-50 transition-all",children:(0,s.jsx)(f.Z,{className:"w-4 h-4 text-red-500"})})]})]}),(0,s.jsx)("h3",{className:"text-lg font-bold mb-2",style:{color:"var(--text-primary)"},children:e.name}),(0,s.jsx)("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:e.description}),(0,s.jsxs)("div",{className:"px-3 py-2 rounded-lg mb-4 text-sm",style:{backgroundColor:"var(--bg-secondary)"},children:[(0,s.jsxs)("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:["Crit\xe9rio: "," "]}),(0,s.jsxs)("span",{style:{color:"var(--text-tertiary)"},children:["points"===e.criteria_type&&"".concat(e.criteria_value," pontos"),"tasks"===e.criteria_type&&"".concat(e.criteria_value," tarefas"),"streak"===e.criteria_type&&"".concat(e.criteria_value," dias consecutivos"),"custom"===e.criteria_type&&"Personalizado"]})]}),(0,s.jsx)("button",{onClick:()=>I(e),className:"w-full px-4 py-2 rounded-lg font-medium transition-all ".concat(e.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.is_active?"Ativa":"Inativa"})]},e.id)})}),0===e.length&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)(x.Z,{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--text-tertiary)"}}),(0,s.jsx)("p",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Nenhuma badge criada ainda"}),(0,s.jsx)("p",{className:"text-sm mb-6",style:{color:"var(--text-secondary)"},children:'Clique em "Nova Badge" para criar sua primeira badge'})]})]}),(0,s.jsx)(c.M,{children:m&&(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>u(!1),children:(0,s.jsxs)(i.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:p?"Editar Badge":"Nova Badge"}),(0,s.jsx)("button",{onClick:()=>u(!1),className:"p-2 rounded-lg hover:bg-gray-100 transition-all",children:(0,s.jsx)(N.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Nome da Badge *"}),(0,s.jsx)("input",{type:"text",value:b.name,onChange:e=>g({...b,name:e.target.value}),placeholder:"Ex: Primeira Conquista",className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Descri\xe7\xe3o *"}),(0,s.jsx)("textarea",{value:b.description,onChange:e=>g({...b,description:e.target.value}),placeholder:"Descreva como conquistar esta badge...",rows:3,className:"w-full px-4 py-3 rounded-xl border resize-none focus:outline-none focus:ring-2",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"\xcdcone *"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-3",children:C.map(e=>{let a=e.component;return(0,s.jsxs)("button",{onClick:()=>g({...b,icon:e.value}),className:"p-4 rounded-xl border-2 transition-all ".concat(b.icon===e.value?"ring-2":""),style:{borderColor:b.icon===e.value?b.color:"var(--border-light)",backgroundColor:b.icon===e.value?"".concat(b.color,"20"):"var(--bg-secondary)"},children:[(0,s.jsx)(a,{className:"w-6 h-6 mx-auto",style:{color:b.icon===e.value?b.color:"var(--text-tertiary)"}}),(0,s.jsx)("p",{className:"text-xs mt-1",style:{color:"var(--text-tertiary)"},children:e.label})]},e.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Cor *"}),(0,s.jsx)("div",{className:"flex gap-3",children:w.map(e=>(0,s.jsx)("button",{onClick:()=>g({...b,color:e}),className:"w-10 h-10 rounded-lg border-2 transition-all ".concat(b.color===e?"ring-2 ring-offset-2":""),style:{backgroundColor:e,borderColor:b.color===e?e:"transparent"}},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Tipo de Crit\xe9rio *"}),(0,s.jsxs)("select",{value:b.criteria_type,onChange:e=>g({...b,criteria_type:e.target.value}),className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},children:[(0,s.jsx)("option",{value:"points",children:"Pontos Totais"}),(0,s.jsx)("option",{value:"tasks",children:"Tarefas Conclu\xeddas"}),(0,s.jsx)("option",{value:"streak",children:"Dias Consecutivos"}),(0,s.jsx)("option",{value:"custom",children:"Personalizado"})]})]}),"custom"!==b.criteria_type&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Valor do Crit\xe9rio *"}),(0,s.jsx)("input",{type:"number",value:b.criteria_value,onChange:e=>g({...b,criteria_value:parseInt(e.target.value)}),placeholder:"Ex: 100",className:"w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,s.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:"var(--bg-secondary)",borderColor:b.color},children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-3",style:{color:"var(--text-primary)"},children:"Pr\xe9-visualiza\xe7\xe3o:"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center",style:{backgroundColor:"".concat(b.color,"20")},children:(()=>{let e=B(b.icon);return(0,s.jsx)(e,{className:"w-8 h-8",style:{color:b.color}})})()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-lg",style:{color:"var(--text-primary)"},children:b.name||"Nome da Badge"}),(0,s.jsx)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:b.description||"Descri\xe7\xe3o da badge"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t",children:[(0,s.jsx)("button",{onClick:()=>u(!1),className:"px-6 py-3 rounded-xl font-medium transition-all",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:"Cancelar"}),(0,s.jsx)("button",{onClick:k,className:"px-6 py-3 rounded-xl font-medium text-white transition-all hover:scale-105",style:{backgroundColor:"var(--primary-500)"},children:p?"Salvar Altera\xe7\xf5es":"Criar Badge"})]})]})})})]})}},5526:function(e,a,r){"use strict";r.r(a),r.d(a,{supabase:function(){return o}});var s=r(62724);let t="https://ikjgsqtykkhqimypacro.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";t&&l||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let o=(0,s.eI)(t||"https://setup-missing.supabase.co",l||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[2882,4609,2724,4438,1577,2971,2117,1744],function(){return e(e.s=17868)}),_N_E=e.O()}]);