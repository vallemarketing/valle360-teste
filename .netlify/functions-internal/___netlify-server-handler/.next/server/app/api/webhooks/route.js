"use strict";(()=>{var e={};e.id=78877,e.ids=[78877],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},71267:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>v,requestAsyncStorage:()=>b,routeModule:()=>R,serverHooks:()=>j,staticGenerationAsyncStorage:()=>y});var o={};r.r(o),r.d(o,{DELETE:()=>f,GET:()=>h,PATCH:()=>w,POST:()=>x,dynamic:()=>d});var s=r(49303),n=r(88716),a=r(60670),u=r(87070),i=r(84770),c=r.n(i);let l=new Map,p=[],d="force-dynamic";async function h(e){try{let{searchParams:t}=new URL(e.url),r=t.get("type");if("events"===r){let e=parseInt(t.get("limit")||"100"),r=function(e=100){return p.slice(-e)}(e);return u.NextResponse.json({events:r})}let o=Array.from(l.values());return u.NextResponse.json({subscriptions:o})}catch(e){return console.error("Error listing webhooks:",e),u.NextResponse.json({error:"Failed to list webhooks"},{status:500})}}async function x(e){try{let{url:t,events:r}=await e.json();if(!t||!r||!Array.isArray(r))return u.NextResponse.json({error:"URL and events array are required"},{status:400});try{new URL(t)}catch{return u.NextResponse.json({error:"Invalid URL"},{status:400})}let o=function(e,t){let r=`wh_${Date.now().toString(36)}_${c().randomBytes(8).toString("hex")}`,o={id:r,url:e,events:t,secret:`whsec_${c().randomBytes(32).toString("hex")}`,active:!0,createdAt:new Date,failureCount:0};return l.set(r,o),o}(t,r);return u.NextResponse.json({success:!0,subscription:{id:o.id,url:o.url,events:o.events,secret:o.secret,active:o.active,createdAt:o.createdAt}},{status:201})}catch(e){return console.error("Error creating webhook:",e),u.NextResponse.json({error:"Failed to create webhook"},{status:500})}}async function w(e){try{let{id:t,url:r,events:o,active:s}=await e.json();if(!t)return u.NextResponse.json({error:"Webhook ID is required"},{status:400});let n=function(e,t){let r=l.get(e);if(!r)return null;let o={...r,...t};return l.set(e,o),o}(t,{url:r,events:o,active:s});if(!n)return u.NextResponse.json({error:"Webhook not found"},{status:404});return u.NextResponse.json({success:!0,subscription:n})}catch(e){return console.error("Error updating webhook:",e),u.NextResponse.json({error:"Failed to update webhook"},{status:500})}}async function f(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return u.NextResponse.json({error:"Webhook ID is required"},{status:400});if(!l.delete(r))return u.NextResponse.json({error:"Webhook not found"},{status:404});return u.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting webhook:",e),u.NextResponse.json({error:"Failed to delete webhook"},{status:500})}}let R=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/webhooks/route",pathname:"/api/webhooks",filename:"route",bundlePath:"app/api/webhooks/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\webhooks\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:b,staticGenerationAsyncStorage:y,serverHooks:j}=R,k="/api/webhooks/route";function v(){return(0,a.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:y})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[89276,55972],()=>r(71267));module.exports=o})();