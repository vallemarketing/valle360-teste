(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6567],{82866:function(e,a,r){Promise.resolve().then(r.bind(r,69034))},79205:function(e,a,r){"use strict";r.d(a,{Z:function(){return u}});var t=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),l=e=>{let a=n(e);return a.charAt(0).toUpperCase()+a.slice(1)},i=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()},c=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,t.forwardRef)((e,a)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:m,...p}=e;return(0,t.createElement)("svg",{ref:a,...o,width:s,height:s,stroke:r,strokeWidth:l?24*Number(n)/Number(s):n,className:i("lucide",d),...!u&&!c(p)&&{"aria-hidden":"true"},...p},[...m.map(e=>{let[a,r]=e;return(0,t.createElement)(a,r)}),...Array.isArray(u)?u:[u]])}),u=(e,a)=>{let r=(0,t.forwardRef)((r,n)=>{let{className:c,...o}=r;return(0,t.createElement)(d,{ref:n,iconNode:a,className:i("lucide-".concat(s(l(e))),"lucide-".concat(e),c),...o})});return r.displayName=l(e),r}},32660:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},98420:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},29202:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},51817:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},89345:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},13041:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},83229:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},88906:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},99376:function(e,a,r){"use strict";var t=r(35475);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},69034:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return x}});var t=r(57437),s=r(2265),n=r(99376),l=r(5526),i=r(51817),c=r(32660),o=r(98420),d=r(89345),u=r(13041),m=r(29202),p=r(88906),h=r(83229),g=r(79820),f=r(14438);function x(){let e=(0,n.useParams)(),a=null==e?void 0:e.clientId,r=(0,n.useRouter)(),[x,b]=(0,s.useState)(!0),[y,v]=(0,s.useState)(!1),[j,N]=(0,s.useState)({company_name:"",contact_name:"",email:"",phone:"",whatsapp:"",industry:"",website:"",address:"",city:"",state:"",cpf_cnpj:"",status:"active",nova_senha:""}),k=async()=>{var e;let{data:a}=await l.supabase.auth.getSession(),r=null===(e=a.session)||void 0===e?void 0:e.access_token;return r?{Authorization:"Bearer ".concat(r)}:{}},w=async()=>{try{if(!a){f.Am.error("Cliente inv\xe1lido"),r.push("/admin/clientes");return}let e=await k(),t=await fetch("/api/admin/clients/".concat(a),{headers:e}),s=await t.json().catch(()=>null);if(!t.ok)throw Error((null==s?void 0:s.error)||"Falha ao carregar cliente");let n=(null==s?void 0:s.client)||{},l=(null==s?void 0:s.user)||{};N({company_name:n.company_name||n.nome_fantasia||n.razao_social||"",contact_name:n.contact_name||l.full_name||l.name||"",email:n.contact_email||l.email||n.email||"",phone:n.contact_phone||l.phone||"",whatsapp:n.whatsapp||"",industry:n.industry||n.area_atuacao||"",website:n.website||n.site||"",address:n.address||n.logradouro||"",city:n.city||n.cidade||"",state:n.state||n.estado||"",cpf_cnpj:n.cpf_cnpj||"",status:n.status||"active",nova_senha:""})}catch(e){console.error("Erro ao carregar cliente:",e),f.Am.error((null==e?void 0:e.message)||"Erro ao carregar dados do cliente")}finally{b(!1)}};(0,s.useEffect)(()=>{w()},[a]);let C=(e,a)=>{N(r=>({...r,[e]:a}))},_=async e=>{e.preventDefault(),v(!0);try{if(!a)throw Error("Cliente inv\xe1lido");let e=await k(),t={company_name:j.company_name,contact_name:j.contact_name,full_name:j.contact_name,email:j.email,phone:j.phone,whatsapp:j.whatsapp,industry:j.industry,website:j.website,address:j.address,city:j.city,state:j.state,cpf_cnpj:j.cpf_cnpj,status:j.status,password:j.nova_senha||void 0},s=await fetch("/api/admin/clients/".concat(a),{method:"PATCH",headers:{"Content-Type":"application/json",...e},body:JSON.stringify(t)}),n=await s.json().catch(()=>null);if(!s.ok)throw Error((null==n?void 0:n.error)||"Falha ao atualizar cliente");f.Am.success("Cliente atualizado com sucesso!"),r.push("/admin/clientes")}catch(e){console.error("Erro ao atualizar cliente:",e),f.Am.error((null==e?void 0:e.message)||"Erro ao atualizar cliente")}finally{v(!1)}};return x?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(i.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando dados do cliente..."})]})}):(0,t.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>r.back(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:(0,t.jsx)(c.Z,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Editar Cliente"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:j.company_name})]})]})}),(0,t.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Ol,{children:(0,t.jsxs)(g.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5"}),"Dados do Cliente"]})}),(0,t.jsxs)(g.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Empresa"}),(0,t.jsx)("input",{type:"text",value:j.company_name,onChange:e=>C("company_name",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Contato"}),(0,t.jsx)("input",{type:"text",value:j.contact_name,onChange:e=>C("contact_name",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4"}),"Email"]}),(0,t.jsx)("input",{type:"email",value:j.email,onChange:e=>C("email",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4"}),"Telefone"]}),(0,t.jsx)("input",{type:"tel",value:j.phone,onChange:e=>C("phone",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"WhatsApp"}),(0,t.jsx)("input",{type:"tel",value:j.whatsapp,onChange:e=>C("whatsapp",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Segmento"}),(0,t.jsx)("input",{type:"text",value:j.industry,onChange:e=>C("industry",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),"Site"]}),(0,t.jsx)("input",{type:"text",value:j.website,onChange:e=>C("website",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"CPF/CNPJ"}),(0,t.jsx)("input",{type:"text",value:j.cpf_cnpj,onChange:e=>C("cpf_cnpj",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Endere\xe7o"}),(0,t.jsx)("input",{type:"text",value:j.address,onChange:e=>C("address",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cidade"}),(0,t.jsx)("input",{type:"text",value:j.city,onChange:e=>C("city",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Estado"}),(0,t.jsx)("input",{type:"text",value:j.state,onChange:e=>C("state",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700"})]})]})]})]}),(0,t.jsxs)(g.Zb,{className:"border-yellow-300 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-900/20",children:[(0,t.jsxs)(g.Ol,{children:[(0,t.jsxs)(g.ll,{className:"flex items-center gap-2 text-yellow-900 dark:text-yellow-400",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5"}),"Acesso e Seguran\xe7a"]}),(0,t.jsx)(g.SZ,{className:"text-yellow-800 dark:text-yellow-500",children:"Altere credenciais do cliente"})]}),(0,t.jsx)(g.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Nova Senha"}),(0,t.jsx)("input",{type:"password",value:j.nova_senha,onChange:e=>C("nova_senha",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",placeholder:"Deixe em branco para manter"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Status"}),(0,t.jsxs)("select",{value:j.status,onChange:e=>C("status",e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsx)("option",{value:"active",children:"Ativo"}),(0,t.jsx)("option",{value:"inactive",children:"Inativo"}),(0,t.jsx)("option",{value:"pending",children:"Pendente"})]})]})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>r.back(),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:y,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 animate-spin"}),"Salvando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{className:"w-5 h-5"}),"Salvar Altera\xe7\xf5es"]})})]})]})]})}},79820:function(e,a,r){"use strict";r.d(a,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var t=r(57437),s=r(2265),n=r(93448);let l=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-xl border-2 border-valle-silver-200 bg-white shadow-md",r),...s})});l.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("h3",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight text-lg",r),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-foreground/70",r),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},5526:function(e,a,r){"use strict";r.r(a),r.d(a,{supabase:function(){return l}});var t=r(62724);let s="https://ikjgsqtykkhqimypacro.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";s&&n||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let l=(0,t.eI)(s||"https://setup-missing.supabase.co",n||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},93448:function(e,a,r){"use strict";r.d(a,{cn:function(){return n},x:function(){return l}});var t=r(61994),s=r(53335);function n(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.m6)((0,t.W)(a))}function l(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[6137,4609,2724,4438,2971,2117,1744],function(){return e(e.s=82866)}),_N_E=e.O()}]);