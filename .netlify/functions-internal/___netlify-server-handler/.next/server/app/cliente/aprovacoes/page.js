(()=>{var e={};e.id=88376,e.ids=[88376],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(11644),a(16193),a(49991),a(35866);var r=a(23191),s=a(88716),i=a(37922),l=a.n(i),n=a(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d=["",{children:["cliente",{children:["aprovacoes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,11644)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\aprovacoes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,16193)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49991)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\aprovacoes\\page.tsx"],x="/cliente/aprovacoes/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/cliente/aprovacoes/page",pathname:"/cliente/aprovacoes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12416:(e,t,a)=>{Promise.resolve().then(a.bind(a,68885))},34391:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(62881).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},68885:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(10326),s=a(17577),i=a(40617),l=a(48998),n=a(34391),o=a(941),d=a(94019),c=a(32933),x=a(28870),h=a(9086),m=a(51223),p=a(91664),u=a(38443),v=a(91119),b=a(85999);function g(){let[e,t]=(0,s.useState)([]),[a,g]=(0,s.useState)(null),[w,f]=(0,s.useState)(""),[j,N]=(0,s.useState)(null),[y,k]=(0,s.useState)(!0),[C,_]=(0,s.useState)(!1),P=(0,s.useMemo)(()=>e,[e]);(0,s.useMemo)(()=>[],[]);let S=(0,s.useMemo)(()=>new Map(v.Nd.map(e=>[String(e.areaKey),String(e.label)])),[]),D=async(e,a)=>{if("request_changes"!==a||w.trim()){_(!0);try{let r=await fetch("/api/client/approvals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:e,action:a,comment:w.trim()||void 0})}),s=await r.json().catch(()=>null);if(!r.ok||!s?.success)throw Error(s?.error||"Falha ao enviar aprova\xe7\xe3o");t(t=>t.filter(t=>t.id!==e)),g(null),f("")}catch(e){console.error(e),b.Am.error(e instanceof Error?e.message:"Falha ao enviar")}finally{_(!1)}}},q=e=>{N(j===e?null:e)};return(0,r.jsxs)("div",{className:"p-4 lg:p-6 max-w-4xl mx-auto",children:[(0,r.jsxs)("header",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:"Aprova\xe7\xf5es"}),r.jsx("p",{className:"text-[#001533]/60 dark:text-white/60 mt-1",children:y?"Carregando...":`${P.length} itens aguardando sua aprova\xe7\xe3o`})]}),r.jsx("div",{className:"space-y-3",children:0===P.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-[#001533]/50 rounded-xl border-2 border-[#001533]/10 dark:border-white/10",children:[r.jsx("div",{className:"text-4xl mb-3",children:"\uD83C\uDF89"}),r.jsx("p",{className:"text-[#001533]/60 dark:text-white/60",children:"Todas as aprova\xe7\xf5es foram processadas!"})]}):P.map(e=>(()=>{let t=!e.overdue&&function(e){let t=new Date(e).getTime()-Date.now();return t>0&&t<=432e5}(e.due_at),a=e.overdue?"Atrasado":t?"Em risco":"Dentro do prazo",s=e.overdue?"text-red-600":t?"text-primary":"text-emerald-700";return(0,r.jsxs)(x.E.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-[#001533]/50 rounded-xl border-2 border-[#001533]/10 dark:border-white/10 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-4 flex items-center gap-4 cursor-pointer hover:bg-[#001533]/5 dark:hover:bg-white/5 transition-colors",onClick:()=>q(e.id),children:[r.jsx("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden flex-shrink-0 cursor-pointer group",onClick:t=>{t.stopPropagation(),g(e)},children:r.jsx("div",{className:"w-full h-full bg-[#001533]/5 dark:bg-white/5 flex items-center justify-center",children:r.jsx(i.Z,{className:"w-6 h-6 text-[#001533]/40 dark:text-white/40"})})}),r.jsx("div",{className:"flex-1 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-[#001533] dark:text-white truncate",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(u.C,{variant:"secondary",className:"text-xs bg-[#1672d6]/10 text-[#1672d6]",children:S.get(String(e.board?.area_key||""))||"Equipe"}),r.jsx("span",{className:(0,m.cn)("text-xs",s),children:a})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-xs text-[#001533]/50 dark:text-white/50 flex items-center gap-1",children:[r.jsx(l.Z,{className:"w-3 h-3"}),"vence ",new Date(e.due_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})]}),j===e.id?r.jsx(n.Z,{className:"w-5 h-5 text-[#001533]/40"}):r.jsx(o.Z,{className:"w-5 h-5 text-[#001533]/40"})]})]})})]}),r.jsx(h.M,{children:j===e.id&&r.jsx(x.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,r.jsxs)("div",{className:"px-4 pb-4 pt-2 border-t border-[#001533]/10 dark:border-white/10",children:[e.description&&r.jsx("p",{className:"text-sm text-[#001533]/70 dark:text-white/70 mb-4",children:e.description}),r.jsx("textarea",{value:w,onChange:e=>f(e.target.value),rows:2,className:"w-full p-3 text-sm border-2 border-[#001533]/10 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-[#1672d6] focus:border-transparent resize-none bg-[#001533]/5 dark:bg-white/5 text-[#001533] dark:text-white placeholder:text-[#001533]/40",placeholder:"Coment\xe1rios ou ajustes necess\xe1rios..."}),(0,r.jsxs)("div",{className:"flex gap-3 mt-3",children:[(0,r.jsxs)(p.z,{onClick:()=>D(e.id,"request_changes"),variant:"outline",className:"flex-1 border-red-200 text-red-600 hover:bg-red-50",disabled:C,children:[r.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Solicitar Ajustes"]}),(0,r.jsxs)(p.z,{onClick:()=>D(e.id,"approve"),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white",disabled:C,children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Aprovar"]})]})]})})})]},e.id)})())}),r.jsx(h.M,{children:a&&(0,r.jsxs)(x.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black flex",children:[(0,r.jsxs)("div",{className:"flex-1 relative flex items-center justify-center bg-black",children:[r.jsx("button",{onClick:()=>g(null),className:"absolute top-4 left-4 z-10 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm",children:r.jsx(d.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"text-white/70 text-center px-8",children:[r.jsx("div",{className:"flex items-center justify-center mb-3",children:r.jsx(i.Z,{className:"w-10 h-10"})}),r.jsx("p",{className:"text-sm",children:"Preview do arquivo ser\xe1 integrado via anexos (pr\xf3ximo passo)."})]})]}),(0,r.jsxs)(x.E.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},className:"w-[380px] bg-white dark:bg-[#0a0f1a] flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-[#001533]/10 dark:border-white/10",children:[r.jsx(u.C,{className:"bg-[#1672d6]/10 text-[#1672d6] mb-3",children:a.board?.area_key&&S.get(String(a.board.area_key))||"Kanban"}),r.jsx("h2",{className:"text-xl font-bold text-[#001533] dark:text-white mb-2",children:a.title}),r.jsx("p",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:a.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-3 text-xs text-[#001533]/50 dark:text-white/50",children:[r.jsx("span",{children:a.overdue?"Atrasado":"Dentro do prazo"}),r.jsx("span",{children:"â€¢"}),(0,r.jsxs)("span",{children:["Vence ",new Date(a.due_at).toLocaleDateString("pt-BR")]})]})]}),(0,r.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:[r.jsx("label",{className:"block text-sm font-medium text-[#001533] dark:text-white mb-2",children:"Coment\xe1rios ou Ajustes"}),r.jsx("textarea",{value:w,onChange:e=>f(e.target.value),rows:6,className:"w-full p-4 text-sm border-2 border-[#001533]/10 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-[#1672d6] focus:border-transparent resize-none bg-[#001533]/5 dark:bg-white/5 text-[#001533] dark:text-white placeholder:text-[#001533]/40",placeholder:"Descreva aqui os ajustes necess\xe1rios ou deixe em branco para aprovar..."})]}),(0,r.jsxs)("div",{className:"p-6 border-t border-[#001533]/10 dark:border-white/10 space-y-3",children:[(0,r.jsxs)(p.z,{onClick:()=>D(a.id,"approve"),size:"lg",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white h-12",disabled:C,children:[r.jsx(c.Z,{className:"w-5 h-5 mr-2"}),"Aprovar Material"]}),(0,r.jsxs)(p.z,{onClick:()=>D(a.id,"request_changes"),variant:"outline",size:"lg",className:"w-full border-red-200 text-red-600 hover:bg-red-50 h-12",disabled:C,children:[r.jsx(d.Z,{className:"w-5 h-5 mr-2"}),"Solicitar Ajustes"]})]})]})]})})]})}},38443:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var r=a(10326);a(17577);var s=a(79360),i=a(51223);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-valle-blue-600 text-white",secondary:"border-transparent bg-valle-silver-300 text-valle-navy-800",outline:"text-valle-navy-700 border-valle-silver-400",success:"border-transparent bg-green-600 text-white",warning:"border-transparent bg-yellow-600 text-white",danger:"border-transparent bg-red-600 text-white"}},defaultVariants:{variant:"default"}});function n({className:e,variant:t,...a}){return r.jsx("div",{className:(0,i.cn)(l({variant:t}),e),...a})}},11644:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\User\Downloads\valle-360-main\valle-360-main\src\app\cliente\aprovacoes\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[89276,54267,51789,78515,46226,28870,39215,16819,72418,62198,18832,14574,91119,79925],()=>a(57347));module.exports=r})();