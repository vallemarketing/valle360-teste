(()=>{var e={};e.id=53639,e.ids=[53639],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},90515:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(85249),s(9457),s(49991),s(35866);var t=s(23191),a=s(88716),l=s(37922),i=s.n(l),n=s(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(r,o);let d=["",{children:["admin",{children:["predictions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85249)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\predictions\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,49991)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\predictions\\page.tsx"],m="/admin/predictions/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/predictions/page",pathname:"/admin/predictions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},80183:(e,r,s)=>{Promise.resolve().then(s.bind(s,41666))},44713:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},74975:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},41666:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h});var t=s(10326),a=s(17577),l=s(1572),i=s(50949),n=s(44713),o=s(17069),d=s(71821),c=s(29163),m=s(74975),x=s(90434),p=s(90201);function h(){let[e,r]=(0,a.useState)(null),[s,h]=(0,a.useState)(!0),[u,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[g,j]=(0,a.useState)(!1),f=async()=>{try{let e=await fetch("/api/admin/predictions/dashboard"),s=await e.json();s.success&&r(s.dashboard)}catch(e){console.error("Error fetching dashboard:",e)}finally{h(!1)}},N=async()=>{if(confirm("Deseja calcular predi\xe7\xf5es para todos os clientes? Isso pode demorar alguns segundos.")){v(!0);try{let e=await fetch("/api/admin/predictions/calculate-all",{method:"POST"}),r=await e.json();r.success?(alert(`✅ Sucesso! ${r.stats?.total||0} predi\xe7\xf5es calculadas.`),f()):alert(`❌ Erro: ${r.error}`)}catch(e){console.error("Error calculating predictions:",e),alert("❌ Erro ao calcular predi\xe7\xf5es")}finally{v(!1)}}};return s?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{style:{color:"var(--text-secondary)"},children:"Carregando predi\xe7\xf5es..."})]})}):e?(0,t.jsxs)("div",{className:"min-h-screen p-8",style:{backgroundColor:"var(--bg-primary)"},children:[(0,t.jsxs)("div",{className:"mb-8 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:"\uD83D\uDD2E Predi\xe7\xf5es & Intelig\xeancia de Neg\xf3cio"}),t.jsx("p",{style:{color:"var(--text-secondary)"},children:"An\xe1lises preditivas para tomada de decis\xe3o estrat\xe9gica"})]}),t.jsx("button",{onClick:N,disabled:u,className:"px-6 py-3 rounded-lg font-bold flex items-center gap-2 hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--primary-500)",color:"white"},children:u?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Calculando..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(l.Z,{className:"w-5 h-5"}),"Calcular Predi\xe7\xf5es"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg bg-red-500/10",children:t.jsx(i.Z,{className:"w-6 h-6 text-red-500"})}),e.churn.high_risk_count>0&&t.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-red-500 text-white",children:"ATEN\xc7\xc3O"})]}),t.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"Risco de Churn"}),t.jsx("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:e.churn.high_risk_count}),t.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"clientes em alto risco"}),(0,t.jsxs)("p",{className:"text-xs mt-2 text-red-500",children:["R$ ",(e.churn.total_revenue_at_risk/1e3).toFixed(0),"k em risco"]}),(0,t.jsxs)(x.default,{href:"/admin/predictions/churn",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver detalhes ",t.jsx(n.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg bg-green-500/10",children:t.jsx(o.Z,{className:"w-6 h-6 text-green-500"})}),e.ltv.upsell_opportunities>0&&t.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-green-500 text-white",children:e.ltv.upsell_opportunities})]}),t.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"Oportunidades de Upsell"}),t.jsx("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:e.ltv.upsell_opportunities}),t.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"clientes prontos para upgrade"}),(0,t.jsxs)("p",{className:"text-xs mt-2 text-green-500",children:["Potencial: R$ ",(e.ltv.total_upsell_potential/1e3).toFixed(0),"k"]}),(0,t.jsxs)(x.default,{href:"/admin/predictions/ltv",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver oportunidades ",t.jsx(n.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10",children:t.jsx(d.Z,{className:"w-6 h-6 text-blue-500"})}),(0,t.jsxs)("div",{className:"flex items-center text-xs",children:["upward"===e.revenue.trend?t.jsx(o.Z,{className:"w-4 h-4 text-green-500 mr-1"}):"downward"===e.revenue.trend?t.jsx(c.Z,{className:"w-4 h-4 text-red-500 mr-1"}):t.jsx("span",{className:"w-4 h-4 mr-1",children:"→"}),(0,t.jsxs)("span",{style:{color:"upward"===e.revenue.trend?"#10b981":"downward"===e.revenue.trend?"#ef4444":"var(--text-secondary)"},children:[e.revenue.growth_rate>0?"+":"",e.revenue.growth_rate.toFixed(1),"%"]})]})]}),t.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"MRR Previsto"}),(0,t.jsxs)("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:["R$ ",(e.revenue.predicted_mrr/1e3).toFixed(0),"k"]}),(0,t.jsxs)("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:["ARR: R$ ",(e.revenue.predicted_arr/1e3).toFixed(0),"k"]}),(0,t.jsxs)("p",{className:"text-xs mt-2",style:{color:"var(--text-tertiary)"},children:["Confian\xe7a: ",e.revenue.confidence,"%"]}),(0,t.jsxs)(x.default,{href:"/admin/predictions/revenue",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver detalhes ",t.jsx(n.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg bg-purple-500/10",children:t.jsx(m.Z,{className:"w-6 h-6 text-purple-500"})}),"urgent"===e.hiring.priority_level||"high"===e.hiring.priority_level?t.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-orange-500 text-white",children:"URGENTE"}):null]}),t.jsx("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"Necessidade de Contrata\xe7\xe3o"}),t.jsx("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:e.hiring.recommended_hires}),t.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:0===e.hiring.recommended_hires?"equipe adequada":"contrata\xe7\xf5es recomendadas"}),(0,t.jsxs)("p",{className:"text-xs mt-2",style:{color:"var(--text-tertiary)"},children:["Capacidade: ",e.hiring.capacity_utilization.toFixed(0),"%"]}),(0,t.jsxs)(x.default,{href:"/admin/predictions/hiring",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver an\xe1lise ",t.jsx(n.Z,{className:"w-4 h-4 ml-1"})]})]})]}),e.churn.clients.length>0&&(0,t.jsxs)("div",{className:"p-6 rounded-xl border mb-8",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"⚠️ Clientes em Alto Risco de Churn"}),t.jsx(x.default,{href:"/admin/predictions/churn",className:"text-sm hover:underline",style:{color:"var(--primary-500)"},children:"Ver todos"})]}),t.jsx("div",{className:"space-y-3",children:e.churn.clients.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border flex items-center justify-between",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-medium",style:{color:"var(--text-primary)"},children:e.clients?.company_name||"Cliente"}),(0,t.jsxs)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Probabilidade de churn: ",e.churn_probability,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${"critical"===e.risk_level?"bg-red-500 text-white":"bg-orange-500 text-white"}`,children:"critical"===e.risk_level?"CR\xcdTICO":"ALTO RISCO"}),t.jsx("button",{onClick:()=>{b(e),j(!0)},className:"px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"Tomar A\xe7\xe3o"})]})]},e.id))})]}),e.ltv.clients.length>0&&(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"\uD83D\uDCB0 Top Oportunidades de Upsell"}),t.jsx(x.default,{href:"/admin/predictions/ltv",className:"text-sm hover:underline",style:{color:"var(--primary-500)"},children:"Ver todas"})]}),t.jsx("div",{className:"space-y-3",children:e.ltv.clients.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border flex items-center justify-between",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-medium",style:{color:"var(--text-primary)"},children:e.clients?.company_name||"Cliente"}),(0,t.jsxs)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Probabilidade: ",e.upsell_probability,"% • Valor atual: R$ ",e.clients?.monthly_value||0]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-green-500",children:["+R$ ",e.estimated_upsell_value||0]}),t.jsx("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:"potencial"})]}),t.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"Propor Upgrade"})]})]},e.id))})]}),t.jsx(p.h,{clientId:y?.client_id||null,churnData:y,isOpen:g,onClose:()=>{j(!1),b(null),f()}})]}):t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("p",{style:{color:"var(--text-secondary)"},children:"Erro ao carregar dashboard"})})}},85249:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\Users\User\Downloads\valle-360-main\valle-360-main\src\app\admin\predictions\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[89276,54267,51789,78515,46226,28870,39215,16819,72418,86148,61288,36499,18832,14574,92237,67884],()=>s(90515));module.exports=t})();