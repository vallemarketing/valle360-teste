(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6142],{46323:function(e,r,a){Promise.resolve().then(a.bind(a,95889))},27648:function(e,r,a){"use strict";a.d(r,{default:function(){return l.a}});var s=a(72972),l=a.n(s)},95889:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return n}});var s=a(57437),l=a(2265),o=a(27648),t=a(64319);function n(){let[e,r]=(0,l.useState)(""),[a,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[d,u]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[p,h]=(0,l.useState)(null),[b,v]=(0,l.useState)(null),y=(0,l.useMemo)(()=>t.Nd.map(e=>({key:e.areaKey,label:e.label})),[]);async function g(r){r.preventDefault(),v(null),h(null),x(!0);try{let r=await fetch("/api/admin/link-employee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,fullName:a||void 0,phone:i||void 0,areas:d})}),s=await r.json();if(!r.ok)throw Error((null==s?void 0:s.error)||"Falha ao vincular");h(s)}catch(e){v((null==e?void 0:e.message)||"Erro")}finally{x(!1)}}return(0,s.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Vincular colaborador existente"}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Use quando o usu\xe1rio j\xe1 existe no Supabase (login/senha). Isso N\xc3O cria usu\xe1rio novo no Auth."})]}),(0,s.jsx)(o.default,{className:"text-sm underline",href:"/admin/colaboradores",children:"Voltar"})]}),(0,s.jsx)("div",{className:"p-5 rounded-xl border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Email (login existente)"}),(0,s.jsx)("input",{value:e,onChange:e=>r(e.target.value),placeholder:"email@dominio.com",className:"mt-1 w-full px-3 py-2 rounded-lg border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Nome completo (opcional)"}),(0,s.jsx)("input",{value:a,onChange:e=>n(e.target.value),placeholder:"Ex: Ana Silva",className:"mt-1 w-full px-3 py-2 rounded-lg border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Telefone/WhatsApp (opcional)"}),(0,s.jsx)("input",{value:i,onChange:e=>c(e.target.value),placeholder:"Ex: +55 11 99999-9999",className:"mt-1 w-full px-3 py-2 rounded-lg border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"\xc1reas (define quais boards o colaborador acessa)"}),(0,s.jsx)("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:"Dica: para Financeiro selecione “Contas a Pagar” e/ou “Contas a Receber” (n\xe3o use “Financeiro” gen\xe9rico)."}),(0,s.jsx)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:y.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-3 rounded-lg border cursor-pointer",style:{borderColor:"var(--border-light)"},children:[(0,s.jsx)("input",{type:"checkbox",checked:d.includes(e.key),onChange:()=>{var r;return r=e.key,void u(e=>e.includes(r)?e.filter(e=>e!==r):[...e,r])}}),(0,s.jsx)("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:e.label}),(0,s.jsx)("span",{className:"ml-auto text-xs",style:{color:"var(--text-secondary)"},children:e.key})]},e.key))})]}),b&&(0,s.jsx)("div",{className:"p-3 rounded-lg border",style:{borderColor:"var(--error-200)",backgroundColor:"var(--error-50)"},children:(0,s.jsx)("p",{className:"text-sm",style:{color:"var(--error-700)"},children:b})}),p&&(0,s.jsxs)("div",{className:"p-3 rounded-lg border",style:{borderColor:"var(--success-200)",backgroundColor:"var(--success-50)"},children:[(0,s.jsx)("p",{className:"text-sm font-medium",style:{color:"var(--success-700)"},children:"Vinculado com sucesso"}),(0,s.jsxs)("p",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:["userId: ",p.userId," • \xe1reas: ",(p.areas||[]).join(", ")]}),(0,s.jsxs)("p",{className:"text-xs mt-2",style:{color:"var(--text-secondary)"},children:["Pr\xf3ximo passo: logar com esse usu\xe1rio e abrir ",(0,s.jsx)("code",{children:"/colaborador/kanban"}),"."]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{type:"submit",disabled:m||0===d.length,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:m?"Vinculando…":"Vincular"}),(0,s.jsx)(o.default,{className:"text-sm underline",href:"/admin/colaboradores/novo",children:"Criar novo colaborador (gera usu\xe1rio no Auth)"})]})]})})]})})}}},function(e){e.O(0,[2972,2768,2971,2117,1744],function(){return e(e.s=46323)}),_N_E=e.O()}]);