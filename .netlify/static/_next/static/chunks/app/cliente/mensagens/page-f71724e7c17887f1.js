(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5564],{79438:function(e,t,s){Promise.resolve().then(s.bind(s,61759))},61759:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(57437),a=s(2265),l=s(5526),n=s(79820),o=s(53417),i=s(95805),d=s(82718),c=s(93448),u=s(76862),x=s(96342),h=s(19671),m=s(99851),p=s(67172),f=s(13486);function v(){let[e,t]=(0,a.useState)("team"),[s,v]=(0,a.useState)(null),[j,b]=(0,a.useState)(null),[g,w]=(0,a.useState)(""),[N,k]=(0,a.useState)(!1),[y,C]=(0,a.useState)([]),[S,E]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/client/team-members"),t=await e.json();if(t.success&&t.teamMembers){let e=t.teamMembers.map(e=>e.userId);C(e)}}catch(e){console.error("Erro ao carregar equipe do projeto:",e)}finally{E(!1)}})()},[]),(0,a.useEffect)(()=>{let e=!0;return(async()=>{let{data:{user:t}}=await l.supabase.auth.getUser();e&&t&&w(t.id)})(),()=>{e=!1}},[]),(0,u.o)({userId:g});let I=e=>{t(e),v(null),b(null)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-[#001533] dark:text-white",children:"Mensagens"}),(0,r.jsx)("p",{className:"text-[#001533]/60 dark:text-white/60 mt-2",children:"Converse com a equipe em tempo real e acompanhe grupos de projeto"})]}),(0,r.jsx)("div",{className:"h-[calc(100vh-250px)] min-h-[600px]",children:(0,r.jsxs)(n.Zb,{className:"h-full overflow-hidden flex flex-col",children:[(0,r.jsx)("div",{className:"flex-shrink-0 border-b border-[#001533]/10 dark:border-white/10",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("button",{onClick:()=>I("team"),className:(0,c.cn)("flex-1 px-4 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2","team"===e?"border-b-2 border-[#1672d6] text-[#1672d6] bg-[#1672d6]/10":"text-[#001533]/60 dark:text-white/60 hover:text-[#001533] dark:hover:text-white"),children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"Equipe"]}),(0,r.jsxs)("button",{onClick:()=>I("groups"),className:(0,c.cn)("flex-1 px-4 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2","groups"===e?"border-b-2 border-[#1672d6] text-[#1672d6] bg-[#1672d6]/10":"text-[#001533]/60 dark:text-white/60 hover:text-[#001533] dark:hover:text-white"),children:[(0,r.jsx)(i.Z,{className:"w-4 h-4"}),"Grupos"]})]})}),(0,r.jsxs)("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 overflow-hidden",children:[(0,r.jsxs)("div",{className:"lg:col-span-1 border-r border-[#001533]/10 dark:border-white/10 overflow-hidden",children:[g&&"groups"===e&&(0,r.jsx)(x.c,{onSelectGroup:e=>{v(e),b(null)},selectedGroupId:null==s?void 0:s.id,currentUserId:g}),g&&"team"===e&&(0,r.jsx)(m.f,{onSelectConversation:e=>{b(e),v(null)},selectedConversationId:null==j?void 0:j.id,onNewConversation:()=>k(!0),currentUserId:g,filterType:"all",peerTypeFilter:"non_client",titleOverride:"Equipe do Projeto",allowedUserIds:y.length>0?y:void 0})]}),(0,r.jsx)("div",{className:"lg:col-span-2 overflow-hidden",children:"groups"===e&&s&&g?(0,r.jsx)(h.r,{group:s,currentUserId:g}):"team"===e&&j&&g?(0,r.jsx)(p.l,{conversation:j,currentUserId:g}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center bg-[#001533]/5 dark:bg-white/5",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(d.Z,{className:"w-16 h-16 text-[#001533]/20 dark:text-white/20 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-[#001533] dark:text-white mb-2",children:"groups"===e?"Selecione um grupo":"Selecione uma conversa"}),(0,r.jsx)("p",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"groups"===e?"Escolha um grupo da lista ao lado":"Escolha uma conversa ou inicie uma nova"})]})})})]})]})}),g&&(0,r.jsx)(f.y,{isOpen:N,onClose:()=>k(!1),onConversationCreated:()=>k(!1),currentUserId:g,filterType:"team"})]})}}},function(e){e.O(0,[2882,6137,4609,2724,6654,6987,8581,3709,2971,2117,1744],function(){return e(e.s=79438)}),_N_E=e.O()}]);