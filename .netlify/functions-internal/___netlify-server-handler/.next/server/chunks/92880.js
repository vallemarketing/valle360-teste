"use strict";exports.id=92880,exports.ids=[92880],exports.modules={36066:(e,t,a)=>{a.d(t,{O:()=>u,Q:()=>l});var s=a(93916),i=a(64470),o=a(70685),n=a(20928),r=a(9846),c=a(11567),d=a(35550);let p={head_strategist:o.D0,trend_hunter:o.Y1,competitor_analyst:o.gr,campaign_planner:o.u7,copy_instagram_expert:n.zk,copy_linkedin_expert:n.jN,copy_youtube_expert:n.f6,copy_ads_expert:n.hH,cta_specialist:n.du,hook_specialist:n.C0,graphic_designer_posts:r.xm,graphic_designer_carousels:r.Bl,video_script_writer:r.zp,video_hook_specialist:r.xQ,reels_specialist:r.PB,social_media_manager:c.hJ,scheduler_agent:c.sX,traffic_manager:c.Qs,meta_ads_specialist:c.UG,brand_guardian:d.Ke,persona_skeptic:d.Pj,persona_enthusiast:d.ud,persona_busy_executive:d._o};function u(e,t,a,o){let n=new s.c({id:`${e.crewRecommended}_${Date.now()}`,name:e.crewRecommended,description:`Crew para ${e.demandType}: ${a}`,agents:e.agentsNeeded,tasks:[],process:"sequential"}),r=[];for(let a of e.agentsNeeded){let e=p[a];if(e){let a=e(t);r.push(a),n.addAgent(a)}}let c=[];for(let t=0;t<e.suggestedTasks.length;t++){let s=e.suggestedTasks[t],r=e.agentsNeeded[t%e.agentsNeeded.length],d=new i.i({id:`task_${t+1}`,description:`${s}

Tema: ${a}${o?`
Objetivo: ${o}`:""}`,expectedOutput:function(e){let t={"An\xe1lise estrat\xe9gica":"Briefing estrat\xe9gico com \xe2ngulo, tom e mensagens-chave","Pesquisa de tend\xeancias":"Lista de 3-5 tend\xeancias aplic\xe1veis com sugest\xf5es","Cria\xe7\xe3o do copy":"Copy completo com varia\xe7\xf5es, hashtags e CTA","Dire\xe7\xe3o de arte":"Prompt detalhado para criativo com cores, tipografia e estilo","Otimiza\xe7\xe3o de hook":"5 op\xe7\xf5es de hook ranqueadas por potencial",default:"Entreg\xe1vel completo e pronto para uso"};for(let[a,s]of Object.entries(t))if(e.toLowerCase().includes(a.toLowerCase()))return s;return t.default}(s),agentId:r,dependencies:t>0?[`task_${t}`]:void 0});c.push(d),n.addTask(d)}return{crew:n,agents:r,tasks:c}}function l(e){let t=new s.c({id:`focus_group_${Date.now()}`,name:"focus_group_crew",description:"Focus Group Sint\xe9tico para valida\xe7\xe3o de conte\xfado",agents:["brand_guardian","persona_skeptic","persona_enthusiast","persona_busy_executive"],tasks:[],process:"sequential"}),a=[(0,d.Ke)(e),(0,d.Pj)(),(0,d.ud)(),(0,d._o)()];a.forEach(e=>t.addAgent(e));let o=[new i.i({id:"brand_validation",description:"Valide o conte\xfado contra as diretrizes da marca",expectedOutput:"Aprovado ou lista de ajustes necess\xe1rios",agentId:"brand_guardian"}),new i.i({id:"skeptic_review",description:"Avalie o conte\xfado com olhar cr\xedtico",expectedOutput:"Nota 0-10, positivos, negativos, sugest\xf5es",agentId:"persona_skeptic",dependencies:["brand_validation"]}),new i.i({id:"enthusiast_review",description:"Avalie o conte\xfado com olhar de entusiasta",expectedOutput:"Nota 0-10, positivos, negativos, sugest\xf5es",agentId:"persona_enthusiast",dependencies:["brand_validation"]}),new i.i({id:"executive_review",description:"Avalie o conte\xfado com olhar de executivo ocupado",expectedOutput:"Nota 0-10, positivos, negativos, sugest\xf5es",agentId:"persona_busy_executive",dependencies:["brand_validation"]})];return o.forEach(e=>t.addTask(e)),{crew:t,agents:a,tasks:o}}},92880:(e,t,a)=>{a.d(t,{_:()=>n,executeCrew:()=>r});var s=a(36066),i=a(14065);class o{constructor(e){this.clientId=e}async orchestrate(e){let t=Date.now(),a=`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{let o;let n=await (0,i.$y)(this.clientId),r=function(e){let{demandType:t,topic:a,objective:s,useFocusGroup:i}=e,o={instagram_post:{crewRecommended:"organic_content_crew",agentsNeeded:["head_strategist","trend_hunter","copy_instagram_expert","graphic_designer_posts","hook_specialist","cta_specialist"],complexity:"medium",estimatedTime:45,suggestedTasks:["An\xe1lise estrat\xe9gica e briefing","Pesquisa de tend\xeancias","Cria\xe7\xe3o do copy","Dire\xe7\xe3o de arte","Otimiza\xe7\xe3o de hook e CTA"]},linkedin_post:{crewRecommended:"organic_content_crew",agentsNeeded:["head_strategist","copy_linkedin_expert","graphic_designer_posts","hook_specialist"],complexity:"medium",estimatedTime:40,suggestedTasks:["An\xe1lise estrat\xe9gica","Cria\xe7\xe3o do copy","Dire\xe7\xe3o de arte","Otimiza\xe7\xe3o de hook"]},youtube_video:{crewRecommended:"video_content_crew",agentsNeeded:["head_strategist","trend_hunter","copy_youtube_expert","video_script_writer","video_hook_specialist","graphic_designer_posts"],complexity:"complex",estimatedTime:120,suggestedTasks:["An\xe1lise estrat\xe9gica","Pesquisa de tend\xeancias","Cria\xe7\xe3o de t\xedtulos e descri\xe7\xf5es","Roteiro completo","Hooks para reten\xe7\xe3o","Thumbnail"]},reels:{crewRecommended:"video_content_crew",agentsNeeded:["trend_hunter","copy_instagram_expert","reels_specialist","video_hook_specialist"],complexity:"medium",estimatedTime:35,suggestedTasks:["Pesquisa de trends","Copy e legenda","Roteiro do Reels","Hook de abertura"]},carousel:{crewRecommended:"organic_content_crew",agentsNeeded:["head_strategist","copy_instagram_expert","graphic_designer_carousels","hook_specialist","cta_specialist"],complexity:"medium",estimatedTime:60,suggestedTasks:["Estrutura narrativa","Copy por slide","Design do carrossel","Hook inicial","CTA final"]},meta_ads_campaign:{crewRecommended:"paid_content_crew",agentsNeeded:["head_strategist","campaign_planner","copy_ads_expert","traffic_manager","meta_ads_specialist","graphic_designer_posts"],complexity:"complex",estimatedTime:90,suggestedTasks:["Estrat\xe9gia de campanha","Planejamento de funil","Copies para ads","Estrutura de campanha","Configura\xe7\xe3o Meta Ads","Criativos"]},full_campaign:{crewRecommended:"campaign_crew",agentsNeeded:["head_strategist","campaign_planner","trend_hunter","competitor_analyst","copy_instagram_expert","copy_linkedin_expert","copy_ads_expert","graphic_designer_posts","graphic_designer_carousels","video_script_writer","traffic_manager","social_media_manager"],complexity:"complex",estimatedTime:300,suggestedTasks:["Estrat\xe9gia geral","Planejamento de campanha","An\xe1lise de tend\xeancias","An\xe1lise competitiva","Conte\xfado org\xe2nico","Conte\xfado pago","Criativos visuais","V\xeddeos","Gest\xe3o de tr\xe1fego","Calend\xe1rio"]}},n=o[t]||o.instagram_post;return{demandType:t,crewRecommended:n.crewRecommended,agentsNeeded:n.agentsNeeded,complexity:n.complexity,estimatedTime:n.estimatedTime,requiresFocusGroup:i??"complex"===n.complexity,suggestedTasks:n.suggestedTasks}}(e),{crew:c,agents:d}=(0,s.O)(r,this.clientId,e.topic,e.objective),p=await c.kickoff(n||"");if(!p.success)throw Error(p.error||"Crew execution failed");let u=this.parseOutputs(p.finalOutput,e.demandType);return(r.requiresFocusGroup||e.useFocusGroup)&&(o=await this.runFocusGroup(u,e.minFocusGroupScore??7)),{success:!0,requestId:a,demandType:e.demandType,crewUsed:r.crewRecommended,agentsInvolved:d.map(e=>e.name),outputs:u,focusGroupResult:o,executionTime:Date.now()-t,tokenUsage:p.totalTokens}}catch(s){return{success:!1,requestId:a,demandType:e.demandType,crewUsed:"",agentsInvolved:[],outputs:{},executionTime:Date.now()-t,tokenUsage:0}}}async runFocusGroup(e,t){let a=0,i=[],o=0;for(;a<3;){a++;let{crew:n}=(0,s.Q)(this.clientId),r=this.formatOutputsForReview(e),c=await n.kickoff(r);if(i=this.parseEvaluations(c.finalOutput),(o=this.calculateAverageScore(i))>=t)return{averageScore:o,passed:!0,iterations:a,evaluations:i};console.log(`Focus group iteration ${a}: Score ${o} < ${t}`)}return{averageScore:o,passed:o>=t,iterations:a,evaluations:i}}parseOutputs(e,t){let a={},s=e.match(/(?:estratég|briefing|análise)[^]*?(?=\n\n---|\n\n\[|$)/i);s&&(a.strategy=s[0].trim());let i=e.match(/(?:copy|legenda|texto|post)[^]*?(?=\n\n---|\n\n\[|$)/i);i&&(a.copy=i[0].trim());let o=e.match(/#[^\s#]+/g);o&&(a.hashtags=o.slice(0,15));let n=e.match(/(?:prompt|visual|arte|design)[^]*?(?=\n\n---|\n\n\[|$)/i);n&&(a.visualPrompt=n[0].trim());let r=e.match(/(?:cta|call.to.action|chamada)[^]*?(?=\n\n---|\n\n\[|$)/i);return r&&(a.cta=r[0].trim()),0===Object.keys(a).length&&(a.copy=e),a}formatOutputsForReview(e){let t=[];return e.strategy&&t.push(`ESTRAT\xc9GIA:
${e.strategy}`),e.copy&&t.push(`COPY:
${e.copy}`),e.hashtags?.length&&t.push(`HASHTAGS:
${e.hashtags.join(" ")}`),e.visualPrompt&&t.push(`VISUAL:
${e.visualPrompt}`),e.cta&&t.push(`CTA:
${e.cta}`),t.join("\n\n---\n\n")}parseEvaluations(e){let t=[],a=e.match(/\{[^{}]*"nota"[^{}]*\}/g);if(a)for(let e of a)try{let a=JSON.parse(e);t.push({personaId:a.persona_id||"unknown",personaName:a.persona_name||"Unknown",score:a.nota||5,positives:a.pontos_positivos||[],negatives:a.pontos_negativos||[],suggestions:a.sugestoes||[],verdict:a.veredicto||"precisa_ajustes"})}catch{let a=e.match(/"nota"\s*:\s*(\d+)/);a&&t.push({personaId:"unknown",personaName:"Unknown",score:parseInt(a[1]),positives:[],negatives:[],suggestions:[],verdict:"precisa_ajustes"})}return t}calculateAverageScore(e){return 0===e.length?0:e.reduce((e,t)=>e+t.score,0)/e.length}}function n(e){return new o(e)}async function r(e,t,a,s){let i=n(t),o={clientId:t,demandType:"test_campaign"===e?"marketing_campaign":a.demandType||"social_media_post",topic:a.topic||a.campaignName||"Conte\xfado de teste",tone:a.tone||"profissional",targetAudience:a.targetAudience||"p\xfablico geral",additionalContext:a.additionalContext||""};return await i.orchestrate(o)}}};