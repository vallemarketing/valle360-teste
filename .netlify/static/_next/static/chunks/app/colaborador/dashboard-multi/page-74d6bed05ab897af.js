(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8159],{26853:function(e,s,i){Promise.resolve().then(i.bind(i,29763))},40875:function(e,s,i){"use strict";i.d(s,{Z:function(){return r}});let r=(0,i(79205).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},29763:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return d}});var r=i(57437),n=i(2265),a=i(91230),t=i(5526),o=i(15291),c=i(73795);function l(){return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,r.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"},e))}),(0,r.jsx)("div",{className:"h-96 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]})}function d(){let[e,s]=(0,n.useState)(null),[i,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(null),[g,f]=(0,n.useState)(!0);async function p(){try{let{data:{user:e}}=await t.supabase.auth.getUser();if(!e){window.location.href="/login";return}let{data:i,error:r}=await t.supabase.from("user_profiles").select("*").eq("id",e.id).maybeSingle();if(r)throw r;m(i);let n=(0,a.Jm)(i);if(d(n),0===n.length)d(["social"]),s("social");else{let e=(0,a.eZ)();if(e&&n.includes(e))s(e);else{let e=(0,a.sH)(n);s(e)}}}catch(e){console.error("Erro ao carregar perfil:",e),d(["social"]),s("social")}finally{f(!1)}}if((0,n.useEffect)(()=>{p()},[]),g||!e)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:(0,r.jsx)(l,{})});let _=a.se[e];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"sticky top-0 z-40 bg-white dark:bg-gray-900 border-b shadow-sm",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Dashboard Corporativo"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(null==u?void 0:u.full_name)||"Usu\xe1rio"})]})}),(0,r.jsxs)(o.Ph,{value:e,onValueChange:function(e){s(e),(0,a.Iu)(e)},children:[(0,r.jsx)(o.i4,{className:"w-[220px]",children:(0,r.jsx)(o.ki,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),(0,r.jsx)("span",{children:_.label})]})})}),(0,r.jsx)(o.Bw,{children:i.map(e=>{let s=a.se[e];return(0,r.jsx)(o.Ql,{value:e,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),(0,r.jsx)("span",{children:s.label})]})},e)})})]})]})})}),(0,r.jsxs)("main",{className:"container mx-auto p-6",children:["social"===e&&(0,r.jsx)(c.tL,{}),"video"===e&&(0,r.jsx)(c.QG,{}),"design"===e&&(0,r.jsx)(c.yC,{}),"web"===e&&(0,r.jsx)(c.Tk,{}),"sales"===e&&(0,r.jsx)(c.iC,{}),"finance"===e&&(0,r.jsx)(c.cV,{}),"hr"===e&&(0,r.jsx)(c.EM,{}),"head_marketing"===e&&(0,r.jsx)(c.rx,{}),"admin"===e&&(0,r.jsx)(c._N,{})]})]})}},15291:function(e,s,i){"use strict";i.d(s,{Bw:function(){return m},Ph:function(){return l},Ql:function(){return g},i4:function(){return d},ki:function(){return u}});var r=i(57437),n=i(2265),a=i(93448),t=i(40875);let o=n.createContext(null);function c(){let e=n.useContext(o);if(!e)throw Error("Select components must be used within Select");return e}function l(e){let{value:s,defaultValue:i="",onValueChange:a,children:t}=e,[c,l]=n.useState(!1),[d,u]=n.useState(i);return(0,r.jsx)(o.Provider,{value:{value:void 0!==s?s:d,onValueChange:e=>{void 0===s&&u(e),null==a||a(e)},open:c,setOpen:l},children:(0,r.jsx)("div",{className:"relative",children:t})})}function d(e){let{className:s,children:i,...n}=e,{open:o,setOpen:l}=c();return(0,r.jsxs)("button",{type:"button",className:(0,a.cn)("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm","ring-offset-white placeholder:text-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","dark:border-gray-700 dark:bg-gray-900 dark:ring-offset-gray-950",s),onClick:()=>l(!o),...n,children:[i,(0,r.jsx)(t.Z,{className:"h-4 w-4 opacity-50"})]})}function u(e){let{children:s,placeholder:i}=e,{value:n}=c();return!n&&i?(0,r.jsx)("span",{className:"text-gray-500",children:i}):(0,r.jsx)(r.Fragment,{children:s})}function m(e){let{children:s}=e,{open:i,setOpen:t}=c(),o=n.useRef(null);return(n.useEffect(()=>{function e(e){o.current&&!o.current.contains(e.target)&&t(!1)}if(i)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i,t]),i)?(0,r.jsx)("div",{ref:o,className:(0,a.cn)("absolute z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white","text-gray-950 shadow-md animate-in fade-in-80 mt-1 w-full","dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50"),children:(0,r.jsx)("div",{className:"p-1 max-h-96 overflow-auto",children:s})}):null}function g(e){let{value:s,children:i}=e,{value:n,onValueChange:t,setOpen:o}=c();return(0,r.jsx)("div",{className:(0,a.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none","hover:bg-gray-100 focus:bg-gray-100 dark:hover:bg-gray-800 dark:focus:bg-gray-800",n===s&&"bg-gray-100 dark:bg-gray-800"),onClick:()=>{t(s),o(!1)},children:i})}},91230:function(e,s,i){"use strict";i.d(s,{Iu:function(){return t},Jm:function(){return n},eZ:function(){return o},sH:function(){return a},se:function(){return r}});let r={social:{id:"social",label:"Social Media",icon:"Instagram",color:"#E1306C",description:"Gerenciamento de redes sociais, posts e engajamento",permissions:["view_social_posts","create_social_posts","edit_social_posts","delete_social_posts","view_social_metrics"]},video:{id:"video",label:"Videomaker",icon:"Video",color:"#FF0000",description:"Produ\xe7\xe3o de v\xeddeos, grava\xe7\xf5es e edi\xe7\xf5es",permissions:["view_video_projects","create_video_projects","edit_video_projects","view_recording_requests","approve_recording_requests"]},design:{id:"design",label:"Designer Gr\xe1fico",icon:"Palette",color:"#7B68EE",description:"Cria\xe7\xe3o de pe\xe7as gr\xe1ficas, briefings e aprova\xe7\xf5es",permissions:["view_design_briefings","create_design_briefings","edit_design_briefings","view_design_assets","create_design_assets","approve_design_assets"]},web:{id:"web",label:"Web Designer",icon:"Globe",color:"#4169E1",description:"Desenvolvimento web, manuten\xe7\xe3o de sites e performance",permissions:["view_web_projects","create_web_projects","edit_web_projects","view_web_tickets","create_web_tickets","resolve_web_tickets","view_web_metrics"]},sales:{id:"sales",label:"Comercial",icon:"TrendingUp",color:"#32CD32",description:"Pipeline de vendas, leads e negocia\xe7\xf5es",permissions:["view_leads","create_leads","edit_leads","view_deals","create_deals","edit_deals","view_contracts","create_contracts"]},finance:{id:"finance",label:"Financeiro",icon:"DollarSign",color:"#FFD700",description:"Gest\xe3o financeira, cobran\xe7as e pagamentos",permissions:["view_invoices","create_invoices","edit_invoices","view_payments","register_payments","send_billing_notifications"]},hr:{id:"hr",label:"RH",icon:"Users",color:"#FF6347",description:"Recursos humanos, solicita\xe7\xf5es e performance da equipe",permissions:["view_employees","create_employees","edit_employees","view_requests","approve_requests","view_performance"]},head_marketing:{id:"head_marketing",label:"Head de Marketing",icon:"BarChart3",color:"#9370DB",description:"Vis\xe3o estrat\xe9gica consolidada de todos os setores",permissions:["view_all_dashboards","view_strategic_metrics","view_team_performance","view_client_overview"]},admin:{id:"admin",label:"Administrador",icon:"Shield",color:"#1E90FF",description:"Acesso completo a todas as funcionalidades",permissions:["*"]}};function n(e){return({super_admin:["head_marketing","admin","sales","social","video","design","web","finance","hr"],admin:["head_marketing","admin","sales","social","video","design","web","finance","hr"],social_media:["social"],videomaker:["video"],designer:["design"],web_designer:["web"],comercial:["sales"],financeiro:["finance"],rh:["hr"],head_marketing:["head_marketing","sales","social","video","design","web"]})[null==e?void 0:e.user_type]||["head_marketing","sales","social","video","design","web","finance","hr"]}function a(e){for(let s of["head_marketing","admin","sales","social","finance"])if(e.includes(s))return s;return e[0]||"social"}function t(e){localStorage.setItem("preferred_dashboard_role",e)}function o(){return localStorage.getItem("preferred_dashboard_role")}},5526:function(e,s,i){"use strict";i.r(s),i.d(s,{supabase:function(){return t}});var r=i(62724);let n="https://ikjgsqtykkhqimypacro.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";n&&a||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let t=(0,r.eI)(n||"https://setup-missing.supabase.co",a||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[6137,4609,2724,9045,3795,2971,2117,1744],function(){return e(e.s=26853)}),_N_E=e.O()}]);