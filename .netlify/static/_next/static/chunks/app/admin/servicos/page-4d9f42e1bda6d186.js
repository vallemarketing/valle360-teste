(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1742],{79813:function(e,s,a){Promise.resolve().then(a.bind(a,82014))},82014:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var r=a(57437),t=a(2265),i=a(26892),l=a(57586),c=a(44794),n=a(99397),o=a(73247),d=a(88893),u=a(18930),x=a(30401),m=a(32489),g=a(83229),p=a(93448),h=a(95452),v=a(14438);let b=["Marketing Digital","Desenvolvimento Web","Design","Produ\xe7\xe3o de V\xeddeo","Tr\xe1fego Pago","Social Media","Consultoria","Outros"],f=[{value:"fixed",label:"Valor Fixo"},{value:"monthly",label:"Mensal"},{value:"hourly",label:"Por Hora"},{value:"per_unit",label:"Por Unidade"}];function y(){let[e,s]=(0,t.useState)([]),[a,y]=(0,t.useState)(!0),[j,N]=(0,t.useState)(""),[w,_]=(0,t.useState)("all"),[C,k]=(0,t.useState)(!1),[S,E]=(0,t.useState)(null),[A,D]=(0,t.useState)(!1),Z=(0,h.createClientComponentClient)(),[P,M]=(0,t.useState)({name:"",description:"",category:"Marketing Digital",base_price:0,price_type:"fixed",is_active:!0,features:[""]});(0,t.useEffect)(()=>{z()},[]);let z=async()=>{try{let{data:e,error:a}=await Z.from("configurable_services").select("*").order("created_at",{ascending:!1});if(a)throw a;s(e||[])}catch(e){console.error("Erro ao buscar servi\xe7os:",e),v.Am.error("Erro ao carregar servi\xe7os")}finally{y(!1)}},B=e=>{if(e){var s;E(e),M({name:e.name,description:e.description||"",category:e.category||"Marketing Digital",base_price:e.base_price,price_type:e.price_type,is_active:e.is_active,features:(null===(s=e.features)||void 0===s?void 0:s.length)?e.features:[""]})}else E(null),M({name:"",description:"",category:"Marketing Digital",base_price:0,price_type:"fixed",is_active:!0,features:[""]});k(!0)},F=async()=>{if(!P.name||P.base_price<=0){v.Am.error("Preencha nome e pre\xe7o do servi\xe7o");return}D(!0);try{let e=P.features.filter(e=>e.trim());if(S){let{error:s}=await Z.from("configurable_services").update({name:P.name,description:P.description,category:P.category,base_price:P.base_price,price_type:P.price_type,is_active:P.is_active,features:e,updated_at:new Date().toISOString()}).eq("id",S.id);if(s)throw s;v.Am.success("Servi\xe7o atualizado!")}else{let{error:s}=await Z.from("configurable_services").insert({name:P.name,description:P.description,category:P.category,base_price:P.base_price,price_type:P.price_type,is_active:P.is_active,features:e});if(s)throw s;v.Am.success("Servi\xe7o criado!")}k(!1),z()}catch(e){console.error("Erro ao salvar:",e),v.Am.error("Erro ao salvar servi\xe7o")}finally{D(!1)}},R=async e=>{if(confirm("Tem certeza que deseja excluir este servi\xe7o?"))try{let{error:s}=await Z.from("configurable_services").delete().eq("id",e);if(s)throw s;v.Am.success("Servi\xe7o exclu\xeddo!"),z()}catch(e){console.error("Erro ao excluir:",e),v.Am.error("Erro ao excluir servi\xe7o")}},L=async e=>{try{let{error:s}=await Z.from("configurable_services").update({is_active:!e.is_active}).eq("id",e.id);if(s)throw s;v.Am.success(e.is_active?"Servi\xe7o desativado":"Servi\xe7o ativado"),z()}catch(e){console.error("Erro ao atualizar:",e),v.Am.error("Erro ao atualizar servi\xe7o")}},T=e=>{let s=P.features.filter((s,a)=>a!==e);M({...P,features:s.length?s:[""]})},q=(e,s)=>{let a=[...P.features];a[e]=s,M({...P,features:a})},I=e.filter(e=>{let s=e.name.toLowerCase().includes(j.toLowerCase()),a="all"===w||e.category===w;return s&&a}),O=(e,s)=>{let a=e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});switch(s){case"hourly":return"".concat(a,"/hora");case"monthly":return"".concat(a,"/m\xeas");case"per_unit":return"".concat(a,"/un");default:return a}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Configura\xe7\xe3o de Servi\xe7os"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Gerencie os servi\xe7os dispon\xedveis para propostas"})]})]}),(0,r.jsxs)("button",{onClick:()=>B(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),"Novo Servi\xe7o"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar servi\xe7os...",value:j,onChange:e=>N(e.target.value),className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("select",{value:w,onChange:e=>_(e.target.value),className:"px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"Todas as categorias"}),b.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total de Servi\xe7os"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Servi\xe7os Ativos"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.is_active).length})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Servi\xe7os Inativos"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-400",children:e.filter(e=>!e.is_active).length})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Categorias"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:new Set(e.map(e=>e.category)).size})]})]}),a?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Carregando servi\xe7os..."})]}):0===I.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl border",children:[(0,r.jsx)(c.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Nenhum servi\xe7o encontrado"}),(0,r.jsx)("button",{onClick:()=>B(),className:"mt-4 text-blue-600 hover:text-blue-700",children:"Criar primeiro servi\xe7o"})]}):(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4",children:I.map((e,s)=>{var a;return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*s},className:(0,p.cn)("bg-white rounded-xl border shadow-sm p-4 hover:shadow-md transition-all",!e.is_active&&"opacity-60"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),!e.is_active&&(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-500 rounded",children:"Inativo"})]}),(0,r.jsx)("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full",children:e.category})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>B(e),className:"p-1.5 hover:bg-gray-100 rounded-lg",children:(0,r.jsx)(d.Z,{className:"w-4 h-4 text-gray-500"})}),(0,r.jsx)("button",{onClick:()=>R(e.id),className:"p-1.5 hover:bg-red-50 rounded-lg",children:(0,r.jsx)(u.Z,{className:"w-4 h-4 text-red-500"})})]})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-3 line-clamp-2",children:e.description}),(0,r.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,r.jsx)("span",{className:"text-xl font-bold text-gray-800",children:O(e.base_price,e.price_type)})}),(null===(a=e.features)||void 0===a?void 0:a.length)>0&&(0,r.jsxs)("div",{className:"space-y-1 mb-3",children:[e.features.slice(0,3).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3 text-green-500"}),(0,r.jsx)("span",{className:"truncate",children:e})]},s)),e.features.length>3&&(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["+",e.features.length-3," mais"]})]}),(0,r.jsx)("button",{onClick:()=>L(e),className:(0,p.cn)("w-full py-2 rounded-lg text-sm font-medium transition-colors",e.is_active?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.is_active?"Desativar":"Ativar"})]},e.id)})}),(0,r.jsx)(l.M,{children:C&&(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>k(!1),children:(0,r.jsxs)(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:e=>e.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:S?"Editar Servi\xe7o":"Novo Servi\xe7o"}),(0,r.jsx)("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,r.jsx)(m.Z,{className:"w-5 h-5"})})]})}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Servi\xe7o *"}),(0,r.jsx)("input",{type:"text",value:P.name,onChange:e=>M({...P,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Gest\xe3o de Redes Sociais"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{value:P.description,onChange:e=>M({...P,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descreva o servi\xe7o..."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),(0,r.jsx)("select",{value:P.category,onChange:e=>M({...P,category:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:b.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Pre\xe7o"}),(0,r.jsx)("select",{value:P.price_type,onChange:e=>M({...P,price_type:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:f.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pre\xe7o Base (R$) *"}),(0,r.jsx)("input",{type:"number",value:P.base_price,onChange:e=>M({...P,base_price:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0,00",min:"0",step:"0.01"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caracter\xedsticas"}),(0,r.jsxs)("div",{className:"space-y-2",children:[P.features.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>q(s,e.target.value),className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 30 posts por m\xeas"}),P.features.length>1&&(0,r.jsx)("button",{onClick:()=>T(s),className:"p-2 hover:bg-red-50 rounded-lg",children:(0,r.jsx)(m.Z,{className:"w-4 h-4 text-red-500"})})]},s)),(0,r.jsx)("button",{onClick:()=>{M({...P,features:[...P.features,""]})},className:"text-sm text-blue-600 hover:text-blue-700",children:"+ Adicionar caracter\xedstica"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_active",checked:P.is_active,onChange:e=>M({...P,is_active:e.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"is_active",className:"text-sm text-gray-700",children:"Servi\xe7o ativo"})]})]}),(0,r.jsxs)("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,r.jsx)("button",{onClick:F,disabled:A,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"w-4 h-4"}),"Salvar"]})})]})]})})})]})}},93448:function(e,s,a){"use strict";a.d(s,{cn:function(){return i},x:function(){return l}});var r=a(61994),t=a(53335);function i(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,t.m6)((0,r.W)(s))}function l(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[2882,6137,4609,2724,4438,5452,1619,2971,2117,1744],function(){return e(e.s=79813)}),_N_E=e.O()}]);