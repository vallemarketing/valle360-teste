(()=>{var e={};e.id=52204,e.ids=[52204],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},70248:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(41602),s(16193),s(49991),s(35866);var t=s(23191),r=s(88716),n=s(37922),i=s.n(n),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(a,l);let c=["",{children:["cliente",{children:["redes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,41602)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\redes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,16193)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,49991)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\redes\\page.tsx"],m="/cliente/redes/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cliente/redes/page",pathname:"/cliente/redes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},11193:(e,a,s)=>{Promise.resolve().then(s.bind(s,9735))},7027:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},71806:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},34738:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},32019:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},21405:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},58038:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},74857:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},68466:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]])},81109:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},9735:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>w});var t=s(10326),r=s(17577),n=s(35047),i=s(28870),o=s(9086),l=s(34738),c=s(71806),d=s(32019),m=s(74857),u=s(81109),x=s(58038),p=s(50949),h=s(21405),g=s(88378),f=s(68466),b=s(7027),y=s(32933);let v=[{id:"instagram",name:"Instagram",icon:t.jsx(l.Z,{className:"w-6 h-6"}),color:"#E4405F",gradient:"from-purple-500 via-pink-500 to-amber-400",permissions:["Publicar posts","Agendar stories","Acessar m\xe9tricas"],oauthUrl:"/api/oauth/instagram"},{id:"facebook",name:"Facebook",icon:t.jsx(c.Z,{className:"w-6 h-6"}),color:"#1877F2",gradient:"from-blue-600 to-blue-500",permissions:["Publicar na p\xe1gina","Acessar insights","Gerenciar coment\xe1rios"],oauthUrl:"/api/oauth/facebook"},{id:"linkedin",name:"LinkedIn",icon:t.jsx(d.Z,{className:"w-6 h-6"}),color:"#0A66C2",gradient:"from-blue-700 to-blue-600",permissions:["Publicar posts","Compartilhar artigos"],oauthUrl:"/api/oauth/linkedin"},{id:"twitter",name:"Twitter/X",icon:t.jsx(m.Z,{className:"w-6 h-6"}),color:"#1DA1F2",gradient:"from-sky-500 to-sky-400",permissions:["Publicar tweets","Acessar timeline"],oauthUrl:"/api/oauth/twitter"},{id:"youtube",name:"YouTube",icon:t.jsx(u.Z,{className:"w-6 h-6"}),color:"#FF0000",gradient:"from-red-600 to-red-500",permissions:["Publicar v\xeddeos","Acessar analytics"],oauthUrl:"/api/oauth/youtube"},{id:"tiktok",name:"TikTok",icon:t.jsx("span",{className:"text-xl",children:"\uD83D\uDCF1"}),color:"#000000",gradient:"from-gray-900 to-gray-800",permissions:["Publicar v\xeddeos"],oauthUrl:"/api/oauth/tiktok"}],j=function({clientId:e,accounts:a=[],onConnect:s,onDisconnect:n,onRefresh:l,isClientView:c=!1}){let[d,m]=(0,r.useState)(null),[u,j]=(0,r.useState)(!1),N=e=>a.find(a=>a.platform===e),w=e=>{v.find(a=>a.id===e)&&(m(e),j(!0))},k=()=>{d&&s?.(d),j(!1),m(null)},C=e=>{switch(e){case"active":return{label:"Conectado",className:"bg-success-50 text-success-700 border-success-200"};case"expired":return{label:"Expirado",className:"bg-danger-50 text-danger-700 border-danger-200"};case"error":return{label:"Erro",className:"bg-warning-50 text-warning-800 border-warning-200"};default:return{label:"Desconectado",className:"bg-muted text-muted-foreground border-border"}}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-foreground",children:c?"Minhas Redes Sociais":"Redes Sociais do Cliente"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Conecte suas contas para agendar publica\xe7\xf5es"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs bg-primary/10 text-primary border border-primary/20",children:[t.jsx(x.Z,{className:"w-4 h-4"}),"Conex\xe3o segura via OAuth"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>{let a=N(e.id),s=a?C(a.status):null;return(0,t.jsxs)(i.E.div,{whileHover:{y:-4},className:"rounded-xl border border-border overflow-hidden bg-card",children:[t.jsx("div",{className:`p-4 bg-gradient-to-r ${e.gradient}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center text-white",children:e.icon}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-semibold text-white",children:e.name}),a?.connected&&t.jsx("p",{className:"text-xs text-white/80",children:a.username})]})]}),s&&t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${s.className}`,children:s.label})]})}),t.jsx("div",{className:"p-4",children:a?.connected?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[a.profileImage&&t.jsx("img",{src:a.profileImage,alt:a.displayName,className:"w-10 h-10 rounded-full"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium text-sm text-foreground",children:a.displayName}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Conectado em ",a.connectedAt?.toLocaleDateString("pt-BR")]})]})]}),"expired"===a.status&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg text-xs bg-danger-50 text-danger-700 border border-danger-200",children:[t.jsx(p.Z,{className:"w-4 h-4"}),"Token expirado. Reconecte para continuar."]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["expired"===a.status?(0,t.jsxs)("button",{onClick:()=>l?.(a.id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-white bg-valle-primary hover:bg-valle-primary-dark transition-colors",children:[t.jsx(h.Z,{className:"w-4 h-4"}),"Reconectar"]}):(0,t.jsxs)("button",{className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-muted text-muted-foreground hover:text-foreground transition-colors",children:[t.jsx(g.Z,{className:"w-4 h-4"}),"Configurar"]}),t.jsx("button",{onClick:()=>n?.(a.id),className:"p-2 rounded-lg bg-danger-50 text-danger-700 hover:bg-danger-100 transition-colors",children:t.jsx(f.Z,{className:"w-4 h-4"})})]})]}):(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Conecte sua conta para agendar publica\xe7\xf5es automaticamente."}),(0,t.jsxs)("button",{onClick:()=>w(e.id),className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors",style:{backgroundColor:e.color},children:["Conectar ",e.name,t.jsx(b.Z,{className:"w-4 h-4"})]})]})})]},e.id)})}),t.jsx(o.M,{children:u&&d&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>j(!1),className:"fixed inset-0 bg-black/50 z-50"}),t.jsx(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md p-6 rounded-2xl z-50 bg-card border border-border text-foreground shadow-2xl",children:(()=>{let e=v.find(e=>e.id===d);return e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[t.jsx("div",{className:`w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center bg-gradient-to-r ${e.gradient}`,children:t.jsx("div",{className:"text-white",children:e.icon})}),(0,t.jsxs)("h3",{className:"text-lg font-bold text-foreground",children:["Conectar ",e.name]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"A Valle 360 solicita as seguintes permiss\xf5es:"})]}),t.jsx("div",{className:"space-y-2 mb-6",children:e.permissions.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{},children:[t.jsx(y.Z,{className:"w-5 h-5 text-success-600"}),t.jsx("span",{className:"text-sm text-foreground",children:e})]},a))}),(0,t.jsxs)("div",{className:"flex items-start gap-2 p-3 rounded-lg mb-6",style:{backgroundColor:"var(--info-100)"},children:[t.jsx(x.Z,{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--info-600)"}}),t.jsx("p",{className:"text-xs",style:{color:"var(--info-700)"},children:"Sua senha nunca \xe9 compartilhada conosco. A conex\xe3o \xe9 feita de forma segura via OAuth. Voc\xea pode revogar o acesso a qualquer momento."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 rounded-xl font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:"Cancelar"}),t.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 rounded-xl font-medium text-white",style:{backgroundColor:e.color},children:"Conectar"})]})]}):null})()})]})})]})};var N=s(2777);function w(){let[e,a]=(0,r.useState)(null),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);(0,n.useRouter)();let m=(process.env.NEXT_PUBLIC_APP_URL||"").replace(/\/+$/,"");async function u(){l(!0),d(null);try{let{data:e}=await N.O.auth.getSession(),s=e.session?.access_token||null,t=s?{Authorization:`Bearer ${s}`}:{},r=await fetch("/api/client/me",{cache:"no-store",headers:t}),n=await r.json();if(!r.ok)throw Error(n?.error||"Falha ao carregar cliente");a(String(n?.client?.id));let o=await fetch("/api/client/social/accounts",{cache:"no-store",headers:t}),l=await o.json();if(!o.ok)throw Error(l?.error||"Falha ao carregar contas");i(l?.accounts||[])}catch(e){d(e?.message||"Erro")}finally{l(!1)}}(()=>{try{return m?new URL(m).origin:""}catch{return""}})();let x=(0,r.useMemo)(()=>s.map(e=>({id:e.id,platform:e.platform,username:e.username?e.username.startsWith("@")?e.username:`@${e.username}`:e.display_name||e.external_account_id,displayName:e.display_name||e.username||e.external_account_id,profileImage:e.profile_picture_url||void 0,connected:!0,connectedAt:void 0,expiresAt:void 0,permissions:[],status:e.status||"active"})),[s]);async function p(e){try{let{data:a}=await N.O.auth.getSession(),s=a.session?.access_token||null,t=s?{Authorization:`Bearer ${s}`}:{},r=await fetch(`/api/client/social/accounts?account_id=${encodeURIComponent(e)}`,{method:"DELETE",headers:t}),n=await r.json();if(!r.ok)throw Error(n?.error||"Falha ao desconectar");await u()}catch(e){d(e?.message||"Erro ao desconectar")}}return(0,t.jsxs)("div",{className:"p-4 lg:p-6 max-w-7xl mx-auto space-y-4",children:[c&&t.jsx("div",{className:"rounded-xl border border-danger-200 bg-danger-50 p-3 text-sm text-danger-700",children:c}),o?(0,t.jsxs)("div",{className:"rounded-2xl border border-border bg-card p-6",children:[t.jsx("div",{className:"h-4 w-40 bg-muted rounded mb-3"}),t.jsx("div",{className:"h-4 w-64 bg-muted rounded"})]}):e?t.jsx(j,{clientId:e||"unknown",accounts:x,onConnect:function(a){if(!e){d("Voc\xea precisa estar logado como Cliente (com perfil vinculado) para conectar redes. Recarregue ou fa\xe7a login novamente.");return}if("instagram"!==a&&"facebook"!==a&&"linkedin"!==a){d("Conex\xe3o para esta plataforma ainda n\xe3o est\xe1 dispon\xedvel.");return}let s=`/api/oauth/${a}?client_id=${encodeURIComponent(e)}`;window.location.assign(s)},onDisconnect:p,onRefresh:()=>{d("Para reconectar, clique em Conectar novamente na plataforma.")},isClientView:!0}):(0,t.jsxs)("div",{className:"rounded-2xl border border-border bg-card p-6",children:[t.jsx("h2",{className:"text-lg font-bold text-foreground",children:"Minhas Redes Sociais"}),(0,t.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["Para conectar redes sociais, voc\xea precisa estar logado como ",t.jsx("span",{className:"font-semibold",children:"Cliente"})," e ter seu cadastro vinculado."]}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[t.jsx("button",{onClick:()=>u(),className:"px-4 py-2 rounded-lg bg-[#1672d6] text-white text-sm",children:"Recarregar"}),t.jsx("a",{href:"/login",className:"px-4 py-2 rounded-lg border border-border text-sm text-foreground",children:"Ir para Login"})]})]})]})}s(85999)},41602:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\Users\User\Downloads\valle-360-main\valle-360-main\src\app\cliente\redes\page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[89276,54267,51789,78515,46226,28870,39215,16819,72418,62198,18832,14574,79925],()=>s(70248));module.exports=t})();