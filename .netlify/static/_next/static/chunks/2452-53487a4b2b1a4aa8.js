"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2452],{53002:function(e,a,t){t.d(a,{i:function(){return l}});var s=t(57437),i=t(2265),r=t(99376),o=t(68123),n=t(12381);function l(e){let{children:a,allowedRoles:t,redirectTo:l="/login"}=e,d=(0,r.useRouter)(),[c,u]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!0),x=async()=>{p(!0);try{let e=await (0,o.ts)();if(!e){d.push(l);return}if(!t.includes(e.role)){d.push("/login");return}u(!0)}catch(e){console.error("Auth error:",e),d.push(l)}finally{p(!1)}};return((0,i.useEffect)(()=>{x()},[t,l]),m)?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen gap-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Verificando permiss\xf5es..."})]}):c?(0,s.jsx)(s.Fragment,{children:a}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Negado"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina."}),(0,s.jsx)(n.z,{onClick:()=>d.push("/login"),className:"w-full",children:"Voltar para Login"})]})})}},46525:function(e,a,t){t.d(a,{B:function(){return C}});var s=t(57437),i=t(2265),r=t(57586),o=t(26892),n=t(82023),l=t(25466),d=t(64972),c=t(87117),u=t(82718),m=t(70525),p=t(31047),x=t(88226),h=t(30401),f=t(32489),g=t(92451),b=t(10407),v=t(12381),D=t(93448);function w(e){return"valle_tour_completed:".concat(e)}let j=[{id:"welcome",title:"Bem-vindo \xe0 Valle 360! \uD83C\uDF89",description:"Estamos muito felizes em ter voc\xea conosco! Vamos fazer um tour r\xe1pido para voc\xea conhecer todas as funcionalidades dispon\xedveis.",details:["Este tour levar\xe1 apenas 2 minutos","Voc\xea pode pular a qualquer momento","Pode refazer o tour nas configura\xe7\xf5es"],icon:(0,s.jsx)(n.Z,{className:"size-8 text-white"}),tip:"Dica: Use o menu (☰) e a barra inferior no mobile para navegar"},{id:"dashboard",title:"Seu Dashboard Personalizado",description:"O dashboard \xe9 sua central de comando. Aqui voc\xea acompanha tudo sobre suas campanhas em tempo real.",details:["\uD83D\uDCCA M\xe9tricas de desempenho (impress\xf5es, cliques, convers\xf5es)","\uD83D\uDCB0 Acompanhamento de investimento e ROI","\uD83C\uDFAF Cards interativos que levam a an\xe1lises detalhadas","⚡ A\xe7\xf5es r\xe1pidas para as tarefas mais comuns"],icon:(0,s.jsx)(l.Z,{className:"size-8 text-white"}),tip:"Dica: Clique nos cards de m\xe9tricas para ver detalhes"},{id:"intelligence",title:"Central de Intelig\xeancia",description:"Acesse an\xe1lises profundas e insights exclusivos gerados pela nossa IA para impulsionar seus resultados.",details:["\uD83D\uDCC8 Desempenho: m\xe9tricas detalhadas das suas campanhas","\uD83D\uDCF0 Seu Setor: not\xedcias e tend\xeancias do seu mercado","\uD83C\uDFAF Concorrentes: an\xe1lise competitiva atualizada","\uD83E\uDDE0 Insights da Val: recomenda\xe7\xf5es personalizadas da IA"],icon:(0,s.jsx)(d.Z,{className:"size-8 text-white"}),tip:"Dica: A Val analisa seus dados e gera insights automaticamente"},{id:"approvals",title:"Aprova\xe7\xf5es de Materiais",description:"Revise e aprove todos os materiais criados pela nossa equipe antes da publica\xe7\xe3o.",details:["\uD83D\uDDBC️ Visualize posts, stories, v\xeddeos e banners","✅ Aprove com um clique ou solicite ajustes","\uD83D\uDCAC Deixe coment\xe1rios para a equipe","\uD83D\uDCF1 Veja como ficar\xe1 em cada rede social"],icon:(0,s.jsx)(c.Z,{className:"size-8 text-white"}),tip:"Dica: Aprove no prazo para manter suas campanhas em dia"},{id:"messages",title:"Mensagens e Comunica\xe7\xe3o",description:"Mantenha contato direto com toda a equipe Valle 360 em um s\xf3 lugar.",details:["\uD83D\uDCAC Chat em tempo real com sua equipe","\uD83D\uDC65 Grupos por projeto ou \xe1rea","\uD83D\uDCCE Envie arquivos e documentos","⭐ Avalie o atendimento ap\xf3s cada conversa"],icon:(0,s.jsx)(u.Z,{className:"size-8 text-white"}),tip:"Dica: Ative as notifica\xe7\xf5es para n\xe3o perder mensagens importantes"},{id:"evolution",title:"Sua Evolu\xe7\xe3o",description:"Acompanhe o progresso das suas m\xe9tricas desde que entrou no time Valle 360.",details:["\uD83D\uDCCA Gr\xe1ficos de evolu\xe7\xe3o mensal","\uD83C\uDFC6 Comparativo antes x depois","\uD83D\uDCC8 Crescimento em seguidores e engajamento","\uD83D\uDCB9 ROI acumulado ao longo do tempo"],icon:(0,s.jsx)(m.Z,{className:"size-8 text-white"}),tip:"Dica: Compartilhe esses resultados com sua equipe"},{id:"schedule",title:"Agenda de Reuni\xf5es",description:"Gerencie todas as suas reuni\xf5es e compromissos com a equipe Valle 360.",details:["\uD83D\uDCC5 Visualize reuni\xf5es agendadas","\uD83D\uDD04 Reagende com facilidade","\uD83D\uDD14 Receba lembretes autom\xe1ticos","\uD83D\uDCF9 Links do Google Meet integrados"],icon:(0,s.jsx)(p.Z,{className:"size-8 text-white"}),tip:"Dica: Voc\xea recebe lembretes 1 hora e 10 minutos antes"},{id:"financial",title:"Financeiro e Cr\xe9ditos",description:"Gerencie faturas, pagamentos e cr\xe9ditos de forma simples e transparente.",details:["\uD83D\uDCB3 Pague faturas online (Pix, Cart\xe3o, Boleto)","\uD83D\uDCC4 Hist\xf3rico completo de faturas","\uD83D\uDCB0 Adicione cr\xe9ditos para servi\xe7os extras","\uD83E\uDDFE Baixe notas fiscais"],icon:(0,s.jsx)(x.Z,{className:"size-8 text-white"}),tip:"Dica: Pague em dia e ganhe pontos no Valle Club"},{id:"val",title:"Conhe\xe7a a Val, sua Assistente IA",description:"A Val est\xe1 sempre dispon\xedvel para tirar suas d\xfavidas e ajudar no que precisar.",details:["\uD83E\uDD16 Dispon\xedvel 24/7 no bot\xe3o flutuante","\uD83D\uDCA1 Tire d\xfavidas sobre suas campanhas","\uD83D\uDCCA Pe\xe7a an\xe1lises e relat\xf3rios","\uD83C\uDFAF Receba sugest\xf5es personalizadas"],icon:(0,s.jsx)(n.Z,{className:"size-8 text-white"}),tip:"Dica: Clique no bot\xe3o da Val no canto inferior direito"},{id:"finish",title:"Pronto para Come\xe7ar! \uD83D\uDE80",description:"Voc\xea j\xe1 conhece as principais funcionalidades. Agora \xe9 s\xf3 explorar e aproveitar!",details:["✨ Explore o dashboard e as m\xe9tricas","✅ Confira se h\xe1 materiais para aprovar","\uD83D\uDCAC Envie uma mensagem para a equipe","\uD83C\uDFAF Visite a Central de Intelig\xeancia"],icon:(0,s.jsx)(h.Z,{className:"size-8 text-white"}),tip:"Precisando de ajuda? A Val est\xe1 sempre dispon\xedvel!"}],N=[{id:"welcome",title:"Bem-vindo(a)! \uD83D\uDE80",description:"Esse tour \xe9 r\xe1pido e vai te mostrar onde ficam as partes mais importantes do seu trabalho di\xe1rio.",details:["Tour de 1–2 minutos","Voc\xea pode pular a qualquer momento","Pode refazer depois nas configura\xe7\xf5es"],icon:(0,s.jsx)(n.Z,{className:"size-8 text-white"}),tip:"Dica: No desktop use o menu lateral; no mobile use o bot\xe3o de menu."},{id:"dashboard",title:"Dashboard da sua \xc1rea",description:"Aqui voc\xea v\xea prioridades, KPIs e alertas do que precisa aten\xe7\xe3o agora.",details:["\uD83D\uDCCC A\xe7\xf5es r\xe1pidas (Kanban, Mensagens, Agenda)","\uD83D\uDCC8 Indicadores espec\xedficos da sua \xe1rea","\uD83E\uDDE0 Insights e alertas assistidos por IA"],icon:(0,s.jsx)(l.Z,{className:"size-8 text-white"}),tip:"Dica: Use o Kanban como sua central de execu\xe7\xe3o."},{id:"kanban",title:"Kanban (Demandas)",description:"Organize tarefas por status e acompanhe prazos, aprova\xe7\xf5es e respons\xe1veis.",details:["\uD83E\uDDE9 Arraste cards entre colunas","⏱️ SLA e prioridades","\uD83D\uDCAC Coment\xe1rios e anexos"],icon:(0,s.jsx)(c.Z,{className:"size-8 text-white"}),tip:"Dica: Abra um card para ver detalhes e hist\xf3rico."},{id:"messages",title:"Mensagens",description:"Fale com cliente e equipe em tempo real, mantendo tudo registrado por projeto.",details:["\uD83D\uDCAC Conversas por contexto","\uD83D\uDCCE Arquivos e links","\uD83D\uDD14 Notifica\xe7\xf5es para n\xe3o perder prazos"],icon:(0,s.jsx)(u.Z,{className:"size-8 text-white"}),tip:"Dica: Use @men\xe7\xf5es para agilizar aprova\xe7\xf5es."},{id:"ia",title:"Val e IA por \xc1rea",description:"Use a Val para acelerar decis\xf5es, relat\xf3rios e pr\xf3ximos passos — com contexto da sua \xe1rea.",details:["✨ Sugest\xf5es e insights","\uD83D\uDCDD Resumos e relat\xf3rios r\xe1pidos","\uD83C\uDFAF Pr\xf3ximas a\xe7\xf5es recomendadas"],icon:(0,s.jsx)(d.Z,{className:"size-8 text-white"}),tip:"Dica: Quanto mais contexto voc\xea der, melhor a recomenda\xe7\xe3o."},{id:"finish",title:"Pronto! ✅",description:"Voc\xea j\xe1 pode come\xe7ar. Se quiser, explore sua \xe1rea e seu Kanban agora.",details:["\uD83E\uDDED Abra sua \xe1rea no menu","\uD83D\uDCCC Confira prioridades no Dashboard","\uD83D\uDCAC Alinhe pelo chat quando necess\xe1rio"],icon:(0,s.jsx)(h.Z,{className:"size-8 text-white"}),tip:"Se precisar, a Val fica no canto para ajudar."}],y=[{id:"welcome",title:"Bem-vindo(a), Admin! \uD83D\uDC51",description:"Esse tour foca no que voc\xea usa para operar a plataforma: clientes, equipe, intelig\xeancia e automa\xe7\xf5es.",details:["Tour de 2–3 minutos","Pode pular a qualquer momento","Refa\xe7a depois nas configura\xe7\xf5es"],icon:(0,s.jsx)(n.Z,{className:"size-8 text-white"}),tip:"Dica: Use o menu lateral para navegar por m\xf3dulos."},{id:"dashboard",title:"Dashboard & Opera\xe7\xe3o",description:"Vis\xe3o geral do sistema e atalhos para rotinas do dia.",details:["\uD83D\uDCCA Indicadores do neg\xf3cio","\uD83D\uDCCC Alertas operacionais","⚡ Atalhos para a\xe7\xf5es frequentes"],icon:(0,s.jsx)(l.Z,{className:"size-8 text-white"})},{id:"intelligence",title:"Intelig\xeancia & Preditivo",description:"Insights de performance e sinais de risco para agir antes do problema virar impacto.",details:["\uD83E\uDDE0 Centro de Intelig\xeancia","\uD83D\uDCC8 Analytics preditivo","\uD83C\uDFAF Recomenda\xe7\xf5es acion\xe1veis"],icon:(0,s.jsx)(d.Z,{className:"size-8 text-white"})},{id:"social",title:"Social (Post Center)",description:"Agendamento de postagens com padr\xe3o unificado e rastreabilidade.",details:["\uD83D\uDCC5 Agenda de posts","✅ Fluxos de aprova\xe7\xe3o","\uD83D\uDCCC Organiza\xe7\xe3o por cliente/canal"],icon:(0,s.jsx)(p.Z,{className:"size-8 text-white"}),tip:"Dica: Social/Head tamb\xe9m t\xeam acesso ao Post Center; Designer n\xe3o."},{id:"finance",title:"Financeiro",description:"Acompanhe pagamentos, relat\xf3rios e sa\xfade financeira.",details:["\uD83D\uDCB3 Cobran\xe7as e faturas","\uD83E\uDDFE Relat\xf3rios","\uD83D\uDCCC Pend\xeancias e alertas"],icon:(0,s.jsx)(x.Z,{className:"size-8 text-white"})},{id:"finish",title:"Pronto! ✅",description:"Agora voc\xea est\xe1 no controle. Vamos operar.",details:["\uD83D\uDC65 Revise clientes e colaboradores","\uD83D\uDCCA Monitore performance e preditivo","\uD83E\uDDE0 Use a Val para acelerar decis\xf5es"],icon:(0,s.jsx)(h.Z,{className:"size-8 text-white"})}];function C(e){let{variant:a="client"}=e,[t,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(0),u=(0,i.useMemo)(()=>(function(e){switch(e){case"admin":return y;case"employee":return N;default:return j}})(a),[a]);(0,i.useEffect)(()=>{localStorage.getItem(w(a))||setTimeout(()=>l(!0),2e3)},[a]);let m=()=>{d<u.length-1?c(e=>e+1):C()},p=()=>{d>0&&c(e=>e-1)},x=e=>{c(e)},C=()=>{localStorage.setItem(w(a),"true"),l(!1),c(0)},k=()=>{localStorage.setItem(w(a),"true"),l(!1),c(0)},A=u[d],z=d===u.length-1,E=0===d,S=(d+1)/u.length*100;return t?(0,s.jsx)(r.M,{children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm",onClick:k}),(0,s.jsx)(o.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-0 z-[101] flex items-center justify-center p-4",onClick:e=>e.stopPropagation(),children:(0,s.jsx)("div",{className:"w-full max-w-lg",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-[#0a0f1a] rounded-2xl shadow-2xl overflow-hidden border border-[#001533]/10 dark:border-white/10 flex flex-col",style:{maxHeight:"min(90vh, 720px)",paddingBottom:"env(safe-area-inset-bottom)"},children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-[#001533] to-[#1672d6] p-6 relative",children:[(0,s.jsx)("button",{onClick:k,className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Fechar tour",children:(0,s.jsx)(f.Z,{className:"size-5 text-white"})}),(0,s.jsx)(o.E.div,{initial:{scale:.5,opacity:0,rotate:-10},animate:{scale:1,opacity:1,rotate:0},transition:{type:"spring",stiffness:300,damping:20},className:"size-16 mx-auto bg-white/20 rounded-2xl flex items-center justify-center mb-4",children:A.icon},d),(0,s.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2 mb-3",children:(0,s.jsx)(o.E.div,{className:"bg-white h-2 rounded-full",initial:{width:0},animate:{width:"".concat(S,"%")},transition:{duration:.3}})}),(0,s.jsx)("div",{className:"flex items-center justify-center gap-1.5 flex-wrap",children:u.map((e,a)=>(0,s.jsx)("button",{onClick:()=>x(a),className:(0,D.cn)("h-2 rounded-full transition-all cursor-pointer hover:opacity-80",a===d?"w-6 bg-white":a<d?"w-2 bg-white/80":"w-2 bg-white/30"),title:"Ir para etapa ".concat(a+1)},a))})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto flex-1 min-h-0 pr-2",children:[(0,s.jsxs)(o.E.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-[#001533] dark:text-white mb-2",children:A.title}),(0,s.jsx)("p",{className:"text-[#001533]/70 dark:text-white/70 mb-4",children:A.description}),(0,s.jsx)("div",{className:"bg-[#001533]/5 dark:bg-white/5 rounded-xl p-4 mb-4",children:(0,s.jsx)("ul",{className:"space-y-2",children:A.details.map((e,a)=>(0,s.jsx)(o.E.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"text-sm text-[#001533]/80 dark:text-white/80 flex items-start gap-2",children:(0,s.jsx)("span",{children:e})},a))})}),A.tip&&(0,s.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-[#1672d6]/10 rounded-lg border border-[#1672d6]/20",children:[(0,s.jsx)(n.Z,{className:"size-4 text-[#1672d6] flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-[#1672d6] font-medium",children:A.tip})]})]},d),(0,s.jsxs)("p",{className:"text-sm text-[#001533]/50 dark:text-white/50 mt-4 text-center",children:["Etapa ",d+1," de ",u.length]})]}),(0,s.jsxs)("div",{className:"px-6 pb-6 space-y-4 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsx)("button",{onClick:p,disabled:E,className:(0,D.cn)("w-14 h-14 rounded-full flex items-center justify-center transition-all","border-2 border-[#001533]/20 dark:border-white/20",E?"opacity-30 cursor-not-allowed":"hover:border-[#1672d6] hover:bg-[#1672d6]/10 hover:scale-110"),children:(0,s.jsx)(g.Z,{className:"size-7 text-[#001533] dark:text-white"})}),(0,s.jsx)("div",{className:"text-center px-4",children:(0,s.jsxs)("p",{className:"text-lg font-bold text-[#001533] dark:text-white",children:[d+1," / ",u.length]})}),(0,s.jsx)("button",{onClick:m,className:(0,D.cn)("w-14 h-14 rounded-full flex items-center justify-center transition-all",z?"bg-emerald-500 hover:bg-emerald-600":"bg-[#1672d6] hover:bg-[#1260b5]","hover:scale-110"),children:z?(0,s.jsx)(h.Z,{className:"size-7 text-white"}):(0,s.jsx)(b.Z,{className:"size-7 text-white"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)(v.z,{variant:"outline",onClick:p,disabled:E,className:"h-11 px-4 rounded-xl border-[#001533]/20 dark:border-white/20",children:"Anterior"}),(0,s.jsx)(v.z,{onClick:m,className:(0,D.cn)("h-11 px-5 rounded-xl",z?"bg-emerald-500 hover:bg-emerald-600":"bg-[#1672d6] hover:bg-[#1260b5]"),children:z?"Come\xe7ar":"Pr\xf3ximo"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:k,className:"text-sm text-[#001533]/50 dark:text-white/50 hover:text-[#001533] dark:hover:text-white transition-colors",children:"Pular tour"}),(0,s.jsx)("p",{className:"text-sm text-[#001533]/50 dark:text-white/50",children:z?"Tudo pronto para come\xe7ar":"Use Pr\xf3ximo/Anterior para navegar"})]})]})]})})})]})}):null}},12381:function(e,a,t){t.d(a,{z:function(){return l}});var s=t(57437),i=t(2265),r=t(90535),o=t(93448);let n=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-valle-blue-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gradient-to-r from-valle-blue-600 to-valle-blue-700 text-white hover:from-valle-blue-700 hover:to-valle-blue-800 shadow-lg",secondary:"bg-valle-silver-200 text-valle-navy-800 hover:bg-valle-silver-300",outline:"border-2 border-valle-blue-600 text-valle-blue-600 hover:bg-valle-blue-50",ghost:"hover:bg-valle-blue-50 hover:text-valle-blue-600",danger:"bg-red-600 text-white hover:bg-red-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef((e,a)=>{let{className:t,variant:i,size:r,...l}=e;return(0,s.jsx)("button",{className:(0,o.cn)(n({variant:i,size:r,className:t})),ref:a,...l})});l.displayName="Button"},15291:function(e,a,t){t.d(a,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return p},i4:function(){return c},ki:function(){return u}});var s=t(57437),i=t(2265),r=t(93448),o=t(40875);let n=i.createContext(null);function l(){let e=i.useContext(n);if(!e)throw Error("Select components must be used within Select");return e}function d(e){let{value:a,defaultValue:t="",onValueChange:r,children:o}=e,[l,d]=i.useState(!1),[c,u]=i.useState(t);return(0,s.jsx)(n.Provider,{value:{value:void 0!==a?a:c,onValueChange:e=>{void 0===a&&u(e),null==r||r(e)},open:l,setOpen:d},children:(0,s.jsx)("div",{className:"relative",children:o})})}function c(e){let{className:a,children:t,...i}=e,{open:n,setOpen:d}=l();return(0,s.jsxs)("button",{type:"button",className:(0,r.cn)("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm","ring-offset-white placeholder:text-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","dark:border-gray-700 dark:bg-gray-900 dark:ring-offset-gray-950",a),onClick:()=>d(!n),...i,children:[t,(0,s.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})]})}function u(e){let{children:a,placeholder:t}=e,{value:i}=l();return!i&&t?(0,s.jsx)("span",{className:"text-gray-500",children:t}):(0,s.jsx)(s.Fragment,{children:a})}function m(e){let{children:a}=e,{open:t,setOpen:o}=l(),n=i.useRef(null);return(i.useEffect(()=>{function e(e){n.current&&!n.current.contains(e.target)&&o(!1)}if(t)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[t,o]),t)?(0,s.jsx)("div",{ref:n,className:(0,r.cn)("absolute z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white","text-gray-950 shadow-md animate-in fade-in-80 mt-1 w-full","dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50"),children:(0,s.jsx)("div",{className:"p-1 max-h-96 overflow-auto",children:a})}):null}function p(e){let{value:a,children:t}=e,{value:i,onValueChange:o,setOpen:n}=l();return(0,s.jsx)("div",{className:(0,r.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none","hover:bg-gray-100 focus:bg-gray-100 dark:hover:bg-gray-800 dark:focus:bg-gray-800",i===a&&"bg-gray-100 dark:bg-gray-800"),onClick:()=>{o(a),n(!1)},children:t})}},91032:function(e,a,t){t.d(a,{ue:function(){return p},yo:function(){return d}});var s=t(57437),i=t(2265),r=t(21904),o=t(90535),n=t(32489),l=t(93448);let d=r.fC;r.xz,r.x8;let c=r.h_,u=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(r.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i,ref:a})});u.displayName=r.aV.displayName;let m=(0,o.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=i.forwardRef((e,a)=>{let{side:t="right",className:i,children:o,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(r.VY,{ref:a,className:(0,l.cn)(m({side:t}),i),...d,children:[o,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=r.VY.displayName,i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(r.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold text-foreground",t),...i})}).displayName=r.Dx.displayName,i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(r.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...i})}).displayName=r.dk.displayName},22501:function(e,a,t){t.d(a,{t:function(){return j}});var s=t(57437),i=t(2265),r=t(57586),o=t(26892),n=t(33145),l=t(70525),d=t(31047),c=t(58896),u=t(48736),m=t(32489),p=t(29202),x=t(48662),h=t(44743),f=t(93448),g=t(12381);function b(e){let{children:a,variant:t,size:i,className:r,highlight:o,...n}=e,l=void 0!==o&&""!==o.trim(),d="string"==typeof a?a:"";if(!l)return(0,s.jsx)(g.z,{variant:t||"outline",size:i||"sm",className:(0,f.cn)("rounded-xl text-left h-auto py-2 px-3 whitespace-normal","border-[#001533]/10 hover:border-[#1672d6]/30 hover:bg-[#1672d6]/5","text-[#001533] dark:text-white",r),...n,children:a});if(!d)return(0,s.jsx)(g.z,{variant:t||"ghost",size:i||"sm",className:(0,f.cn)("w-full cursor-pointer justify-start rounded-xl py-2","hover:bg-[#1672d6]/5",r),...n,children:a});let c=o.trim(),u=d.toLowerCase(),m=c.toLowerCase(),p=u.includes(m);return(0,s.jsx)(g.z,{variant:t||"ghost",size:i||"sm",className:(0,f.cn)("w-full cursor-pointer justify-start gap-0 rounded-xl py-2","hover:bg-[#1672d6]/5",r),...n,children:p?(()=>{let e=u.indexOf(m);if(-1===e)return(0,s.jsx)("span",{className:"text-muted-foreground whitespace-pre-wrap",children:d});let a=d.substring(e,e+m.length),t=d.substring(0,e),i=d.substring(e+a.length);return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("span",{className:"text-muted-foreground whitespace-pre-wrap",children:t}),(0,s.jsx)("span",{className:"text-[#1672d6] font-medium whitespace-pre-wrap",children:a}),i&&(0,s.jsx)("span",{className:"text-muted-foreground whitespace-pre-wrap",children:i})]})})():(0,s.jsx)("span",{className:"text-muted-foreground whitespace-pre-wrap",children:d})})}t(29);let v=e=>{let{className:a}=e;return(0,s.jsxs)("div",{className:(0,f.cn)("flex items-center gap-1",a),children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-[#1672d6] animate-bounce",style:{animationDelay:"0ms"}}),(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-[#1672d6] animate-bounce",style:{animationDelay:"150ms"}}),(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-[#1672d6] animate-bounce",style:{animationDelay:"300ms"}})]})};var D=t(15291);let w=[{icon:l.Z,text:"An\xe1lise de desempenho",color:"text-emerald-600"},{icon:d.Z,text:"Agendar reuni\xe3o",color:"text-[#1672d6]"},{icon:c.Z,text:"Ver concorrentes",color:"text-purple-600"},{icon:u.Z,text:"Gerar relat\xf3rio",color:"text-primary"}];function j(e){let{userName:a="Cliente"}=e,[t,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)([]),[u,j]=(0,i.useState)(""),[N,y]=(0,i.useState)(!1),[C,k]=(0,i.useState)("val-pro"),[A,z]=(0,i.useState)(!1),[E,S]=(0,i.useState)(!1),[V,I]=(0,i.useState)({name:"Val",title:"Sua Assistente IA",emoji:"\uD83E\uDD16"}),[Z,q]=(0,i.useState)([]),F=(0,i.useRef)(null),P=(0,i.useRef)(null);(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/ai/val");if(e.ok){let a=await e.json();a.persona&&I(a.persona),a.quickActions&&q(a.quickActions)}}catch(e){console.error("Erro ao buscar persona:",e)}})()},[]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{S(!0)},1e4);return()=>clearTimeout(e)},[]),(0,i.useEffect)(()=>{if(E){let e=setTimeout(()=>{S(!1)},1e4);return()=>clearTimeout(e)}},[E]),(0,i.useEffect)(()=>{var e;null===(e=F.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[d]),(0,i.useEffect)(()=>{t&&P.current&&setTimeout(()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.focus()},300)},[t]),(0,i.useEffect)(()=>{if(!t||d.length>0)return;let e="val_web_insights_".concat(new Date().toDateString());try{let a=localStorage.getItem(e);if(a){let e=JSON.parse(a);if(null==e?void 0:e.message){c([{id:"web-".concat(Date.now()),text:String(e.message),isUser:!1,timestamp:new Date,sources:Array.isArray(e.sources)?e.sources.map(String):void 0}]);return}}}catch(e){}(async()=>{try{let a=await fetch("/api/ai/val/web-insights"),t=await a.json().catch(()=>null);if(!a.ok||(null==t?void 0:t.skip)||!(null==t?void 0:t.success)||!(null==t?void 0:t.message))return;let s={id:"web-".concat(Date.now()),text:String(t.message),isUser:!1,timestamp:new Date,sources:Array.isArray(t.sources)?t.sources.map(String):void 0};c([s]);try{localStorage.setItem(e,JSON.stringify({message:s.text,sources:s.sources||[],generatedAt:t.generatedAt||new Date().toISOString(),provider:t.provider||"unknown"}))}catch(e){}}catch(e){}})()},[t,d.length]);let R=async e=>{let a="string"==typeof e?e:u;if(!String(a||"").trim())return;let t={id:Date.now().toString(),text:a,isUser:!0,timestamp:new Date};c(e=>[...e,t]),j(""),y(!0);try{let e=await fetch("/api/ai/val",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a,context:{webSearch:A},history:d.slice(-10).map(e=>({role:e.isUser?"user":"assistant",content:e.text}))})}),t=await e.json();if(t.success&&t.response){var s;let e={id:(Date.now()+1).toString(),text:t.response.message||"Desculpe, n\xe3o consegui processar sua mensagem.",isUser:!1,timestamp:new Date,sources:Array.isArray(t.sources)?t.sources.map(String):Array.isArray(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.sources)?t.response.sources.map(String):void 0};c(a=>[...a,e])}else throw Error(t.error||"Erro desconhecido")}catch(a){console.error("Erro ao enviar mensagem:",a);let e={id:(Date.now()+1).toString(),text:"Desculpe, tive um problema ao processar sua mensagem. Pode tentar novamente? \uD83D\uDE4F",isUser:!1,timestamp:new Date};c(a=>[...a,e])}finally{y(!1)}},_=e=>{R(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:(0,f.cn)("fixed bottom-6 right-6 z-50 flex items-end gap-3",t&&"hidden"),children:[(0,s.jsx)(r.M,{children:E&&(0,s.jsx)(o.E.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.3,delay:.5},className:"relative",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-[#0a0f1a] rounded-2xl shadow-2xl p-4 pr-8 max-w-[220px] border border-[#001533]/10 dark:border-white/10",children:[(0,s.jsxs)("p",{className:"text-sm text-[#001533] dark:text-white",children:["Ol\xe1, ",(0,s.jsx)("span",{className:"font-semibold",children:a}),"! \uD83D\uDC4B"]}),(0,s.jsx)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70 mt-1",children:"Como posso te ajudar hoje?"}),(0,s.jsx)("p",{className:"text-xs text-[#1672d6] font-medium mt-2",children:"Clique aqui! \uD83D\uDE80"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),S(!1)},className:"absolute top-2 right-2 p-1 rounded-full hover:bg-[#001533]/5 dark:hover:bg-white/10 transition-colors",children:(0,s.jsx)(m.Z,{className:"size-3 text-[#001533]/40 dark:text-white/40"})}),(0,s.jsx)("div",{className:"absolute top-1/2 -right-2 -translate-y-1/2 w-3 h-3 bg-white dark:bg-[#0a0f1a] border-r border-t border-[#001533]/10 dark:border-white/10 rotate-45"})]})})}),(0,s.jsx)(o.E.button,{onClick:()=>l(!0),className:(0,f.cn)("w-16 h-16 rounded-full shadow-xl","overflow-hidden flex-shrink-0","hover:shadow-2xl hover:scale-105 transition-all","border-3 border-white shadow-lg"),whileHover:{scale:1.08},whileTap:{scale:.95},children:(0,s.jsx)(n.default,{src:"/images/Val.png",alt:"Val - Assistente IA",width:64,height:64,className:"w-full h-full object-cover",priority:!0})})]}),(0,s.jsx)(r.M,{children:t&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:(0,f.cn)("fixed bottom-6 right-6 z-50","w-[380px] h-[600px] max-h-[80vh]","bg-white dark:bg-[#0a0f1a] rounded-2xl shadow-2xl","border border-[#001533]/10 dark:border-white/10","flex flex-col overflow-hidden"),children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-[#001533] to-[#1672d6] p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative w-11 h-11 flex-shrink-0",children:[(0,s.jsx)(n.default,{src:"/images/Val.png",alt:"Val",fill:!0,className:"rounded-full border-2 border-white/30 object-cover"}),(0,s.jsx)("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 rounded-full border-2 border-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-semibold",children:"Val"}),(0,s.jsx)("p",{className:"text-white/70 text-xs",children:"Sua assistente Valle 360"})]})]}),(0,s.jsx)("button",{onClick:()=>l(!1),className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-white"})})]}),(0,s.jsx)("div",{className:"px-4 py-3 bg-[#1672d6]/10 border-b border-[#001533]/10 dark:border-white/10",children:(0,s.jsxs)("p",{className:"text-sm text-[#001533] dark:text-white",children:["Ol\xe1, ",(0,s.jsx)("span",{className:"font-semibold",children:a}),"! Como posso te ajudar hoje?"]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!d.some(e=>e.isUser)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-[#001533]/50 dark:text-white/50 uppercase tracking-wider px-1",children:"A\xe7\xf5es R\xe1pidas"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(Z.length>0?Z:w).map((e,a)=>{let t=e.icon;return(0,s.jsxs)(b,{onClick:()=>_(e.text),className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)(t,{className:(0,f.cn)("w-4 h-4",e.color)}),(0,s.jsx)("span",{className:"truncate",children:e.text})]},a)})})]}),d.map(e=>(0,s.jsxs)("div",{className:(0,f.cn)("flex items-start gap-3",e.isUser&&"flex-row-reverse"),children:[!e.isUser&&(0,s.jsx)(n.default,{src:"/images/Val.png",alt:"Val",width:36,height:36,className:"rounded-full object-cover flex-shrink-0"}),(0,s.jsxs)("div",{className:(0,f.cn)("rounded-2xl p-3 max-w-[85%]",e.isUser?"bg-[#1672d6] text-white rounded-tr-none":"bg-[#001533]/5 dark:bg-white/5 text-[#001533] dark:text-white rounded-tl-none"),children:[(0,s.jsx)("p",{className:"text-sm",children:e.text}),!e.isUser&&e.sources&&e.sources.length>0&&(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-[#001533]/10 dark:border-white/10",children:[(0,s.jsx)("p",{className:"text-[11px] font-medium text-[#001533]/60 dark:text-white/60",children:"Fontes"}),(0,s.jsx)("div",{className:"mt-1 space-y-1",children:e.sources.slice(0,6).map(e=>{let a=e;try{a=new URL(e).hostname}catch(e){}return(0,s.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",className:"block text-[11px] underline text-[#1672d6] hover:text-[#1260b5] break-all",children:a},e)})})]}),(0,s.jsx)("p",{className:(0,f.cn)("text-[10px] mt-1",e.isUser?"text-white/60":"text-[#001533]/40 dark:text-white/40"),children:e.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})]},e.id)),N&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(n.default,{src:"/images/Val.png",alt:"Val",width:36,height:36,className:"rounded-full object-cover flex-shrink-0"}),(0,s.jsx)("div",{className:"bg-[#001533]/5 dark:bg-white/5 rounded-2xl rounded-tl-none p-4",children:(0,s.jsx)(v,{})})]}),(0,s.jsx)("div",{ref:F})]}),(0,s.jsxs)("div",{className:"border-t border-[#001533]/10 dark:border-white/10 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2 px-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)("button",{onClick:()=>z(!A),className:(0,f.cn)("flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs transition-colors",A?"bg-[#1672d6]/10 text-[#1672d6]":"text-[#001533]/50 dark:text-white/50 hover:bg-[#001533]/5"),children:[(0,s.jsx)(p.Z,{className:"w-3.5 h-3.5"}),(0,s.jsx)("span",{children:"Web"})]}),(0,s.jsx)("button",{className:"p-1.5 rounded-lg text-[#001533]/50 dark:text-white/50 hover:bg-[#001533]/5 transition-colors",children:(0,s.jsx)(x.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)(D.Ph,{value:C,onValueChange:k,children:[(0,s.jsx)(D.i4,{className:"h-7 w-auto border-none shadow-none text-xs text-[#001533]/60 dark:text-white/60",children:(0,s.jsx)(D.ki,{})}),(0,s.jsxs)(D.Bw,{children:[(0,s.jsx)(D.Ql,{value:"val-pro",children:"Val Pro"}),(0,s.jsx)(D.Ql,{value:"val-fast",children:"Val Fast"}),(0,s.jsx)(D.Ql,{value:"val-creative",children:"Val Creative"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsx)("div",{className:"flex-1 relative",children:(0,s.jsx)("textarea",{ref:P,value:u,onChange:e=>j(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R())},placeholder:"Digite sua mensagem...",rows:1,className:(0,f.cn)("w-full resize-none rounded-xl border-2 border-[#001533]/10 dark:border-white/10","bg-[#001533]/5 dark:bg-white/5","px-4 py-3 pr-12 text-sm","text-[#001533] dark:text-white","placeholder:text-[#001533]/40 dark:placeholder:text-white/40","focus:outline-none focus:border-[#1672d6]/50","max-h-32 overflow-y-auto"),style:{minHeight:"48px"}})}),(0,s.jsx)(g.z,{onClick:()=>void R(),disabled:!u.trim()||N,className:(0,f.cn)("h-12 w-12 rounded-xl","bg-[#1672d6] hover:bg-[#1260b5]","disabled:opacity-50 disabled:cursor-not-allowed"),children:(0,s.jsx)(h.Z,{className:"w-5 h-5 text-white"})})]})]})]})})]})}c.Z},68123:function(e,a,t){t.d(a,{ts:function(){return r},w7:function(){return i}});var s=t(5526);async function i(){let{error:e}=await s.supabase.auth.signOut();if(e)throw e}async function r(){var e,a,t,i,r,o,n;let{data:{user:l}}=await s.supabase.auth.getUser();if(!l)return null;let{data:d,error:c}=await s.supabase.from("user_profiles").select("full_name, role, user_type").eq("user_id",l.id).single();if(d){let e=d.user_type||d.role;return"employee"===e&&(e="colaborador"),e||(e="cliente"),{id:l.id,email:l.email,name:d.full_name||(null===(i=l.user_metadata)||void 0===i?void 0:i.name)||(null===(r=l.email)||void 0===r?void 0:r.split("@")[0])||"",role:e}}let{data:u,error:m}=await s.supabase.from("users").select("full_name, role, user_type").eq("id",l.id).single();if(u){let e=u.user_type||u.role;return"employee"===e&&(e="colaborador"),e||(e="cliente"),{id:l.id,email:l.email,name:u.full_name||(null===(o=l.user_metadata)||void 0===o?void 0:o.name)||(null===(n=l.email)||void 0===n?void 0:n.split("@")[0])||"",role:e}}return{id:l.id,email:l.email,name:(null===(e=l.user_metadata)||void 0===e?void 0:e.name)||(null===(a=l.email)||void 0===a?void 0:a.split("@")[0])||"",role:(null===(t=l.user_metadata)||void 0===t?void 0:t.role)||"cliente"}}},5526:function(e,a,t){t.r(a),t.d(a,{supabase:function(){return o}});var s=t(62724);let i="https://ikjgsqtykkhqimypacro.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";i&&r||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let o=(0,s.eI)(i||"https://setup-missing.supabase.co",r||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},93448:function(e,a,t){t.d(a,{cn:function(){return r},x:function(){return o}});var s=t(61994),i=t(53335);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,i.m6)((0,s.W)(a))}function o(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}}]);