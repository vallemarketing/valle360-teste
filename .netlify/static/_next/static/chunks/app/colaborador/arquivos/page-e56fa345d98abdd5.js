(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7533],{63471:function(e,r,a){Promise.resolve().then(a.bind(a,95019))},95019:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return w}});var o=a(57437),s=a(2265),t=a(53113),l=a(4554),i=a(48736),n=a(69658),d=a(17689),c=a(32489),p=a(44743),u=a(99397),m=a(73247),x=a(41473),v=a(7586),y=a(95805),g=a(92735),h=a(18930),b=a(42208),f=a(57586),j=a(26892),N=a(14438);function w(){let[e,r]=(0,s.useState)("grid"),[a,w]=(0,s.useState)(""),[C,k]=(0,s.useState)([]),[A,E]=(0,s.useState)([]),[S,z]=(0,s.useState)(!0),[Z,_]=(0,s.useState)(!1),[q,B]=(0,s.useState)(null),[M,U]=(0,s.useState)(!1),[D,P]=(0,s.useState)(""),[L,F]=(0,s.useState)(""),[O,R]=(0,s.useState)(!1),T=(0,s.useRef)(null);(0,s.useEffect)(()=>{V(),I()},[]);let I=async()=>{try{let e=await fetch("/api/collaborator/clients",{cache:"no-store"}),r=await e.json().catch(()=>null);if(!e.ok||!(null==r?void 0:r.success))throw Error((null==r?void 0:r.error)||"Falha ao carregar clientes");let a=Array.isArray(null==r?void 0:r.clients)?r.clients:[];E(a.map(e=>({id:String((null==e?void 0:e.id)||""),company_name:String((null==e?void 0:e.company)||(null==e?void 0:e.companyName)||"Cliente")})))}catch(e){console.error("Erro ao carregar clientes:",e)}},V=async()=>{try{k([{id:"1",name:"Projeto_Cliente_A.pdf",type:"pdf",size:"2.5 MB",date:"2025-01-10",folder:"Projetos",url:"#",status:"draft"},{id:"2",name:"Design_Final.fig",type:"figma",size:"15.3 MB",date:"2025-01-08",folder:"Design",url:"#",status:"approved"},{id:"3",name:"Apresentacao.pptx",type:"powerpoint",size:"8.1 MB",date:"2025-01-05",folder:"Apresenta\xe7\xf5es",url:"#",status:"pending_approval"},{id:"4",name:"Banner_Instagram.png",type:"image",size:"1.2 MB",date:"2025-01-12",folder:"Social Media",url:"#",status:"draft",thumbnailUrl:"https://picsum.photos/seed/banner1/200/200"},{id:"5",name:"Video_Reels.mp4",type:"video",size:"45.8 MB",date:"2025-01-11",folder:"Videos",url:"#",status:"draft"}])}catch(e){console.error("Error loading files:",e)}finally{z(!1)}},G=async e=>{e.preventDefault(),_(!1);let r=Array.from(e.dataTransfer.files);r.length>0&&await W(r)},K=async e=>{let r=e.target.files;r&&r.length>0&&await W(Array.from(r)),T.current&&(T.current.value="")},W=async e=>{R(!0),N.Am.info("Fazendo upload de ".concat(e.length," arquivo(s)..."));try{for(let r of e){await new Promise(e=>setTimeout(e,500));let e={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:r.name,type:H(r.name),size:J(r.size),date:new Date().toISOString().split("T")[0],folder:"Uploads",url:URL.createObjectURL(r),status:"draft",thumbnailUrl:r.type.startsWith("image/")?URL.createObjectURL(r):void 0};k(r=>[e,...r])}N.Am.success("".concat(e.length," arquivo(s) enviado(s) com sucesso!"))}catch(e){console.error("Erro no upload:",e),N.Am.error("Erro ao fazer upload dos arquivos")}finally{R(!1)}},H=e=>{var r;return({pdf:"pdf",doc:"word",docx:"word",xls:"excel",xlsx:"excel",ppt:"powerpoint",pptx:"powerpoint",fig:"figma",png:"image",jpg:"image",jpeg:"image",gif:"image",webp:"image",mp4:"video",mov:"video",avi:"video"})[(null===(r=e.split(".").pop())||void 0===r?void 0:r.toLowerCase())||""]||"file"},J=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",Q=e=>{switch(e){case"image":return(0,o.jsx)(t.Z,{className:"w-8 h-8"});case"video":return(0,o.jsx)(l.Z,{className:"w-8 h-8"});case"pdf":case"word":case"excel":case"powerpoint":return(0,o.jsx)(i.Z,{className:"w-8 h-8"});default:return(0,o.jsx)(n.Z,{className:"w-8 h-8"})}},X=e=>{B(e),U(!0)},Y=async()=>{if(!D){N.Am.error("Selecione um cliente");return}try{var e;k(C.map(e=>e.id===(null==q?void 0:q.id)?{...e,status:"pending_approval"}:e));let r=(null===(e=A.find(e=>e.id===D))||void 0===e?void 0:e.company_name)||"Cliente";N.Am.success("Arquivo enviado para aprova\xe7\xe3o de ".concat(r)),U(!1),P(""),F(""),B(null)}catch(e){console.error("Erro ao enviar para aprova\xe7\xe3o:",e),N.Am.error("Erro ao enviar para aprova\xe7\xe3o")}},$=e=>{k(C.filter(r=>r.id!==e)),N.Am.success("Arquivo removido")},ee=C.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())),er=e=>{switch(e){case"pending_approval":return(0,o.jsx)("span",{className:"bg-amber-100 text-amber-700 text-[10px] px-2 py-1 rounded-full font-bold uppercase tracking-wider",children:"Em Aprova\xe7\xe3o"});case"approved":return(0,o.jsx)("span",{className:"bg-green-100 text-green-700 text-[10px] px-2 py-1 rounded-full font-bold uppercase tracking-wider",children:"Aprovado"});case"rejected":return(0,o.jsx)("span",{className:"bg-red-100 text-red-700 text-[10px] px-2 py-1 rounded-full font-bold uppercase tracking-wider",children:"Rejeitado"});default:return null}};return(0,o.jsxs)("div",{className:"min-h-screen p-8",style:{backgroundColor:"var(--bg-primary)"},onDragOver:e=>{e.preventDefault(),_(!0)},onDragLeave:e=>{e.preventDefault(),_(!1)},onDrop:G,children:[(0,o.jsx)("input",{ref:T,type:"file",multiple:!0,className:"hidden",onChange:K,accept:"image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.fig"}),(0,o.jsx)(f.M,{children:Z&&(0,o.jsx)(j.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"rgba(67, 112, 209, 0.2)"},children:(0,o.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl flex flex-col items-center",children:[(0,o.jsx)(d.Z,{className:"w-16 h-16 mb-4",style:{color:"#4370d1"}}),(0,o.jsx)("h3",{className:"text-2xl font-bold",style:{color:"#4370d1"},children:"Solte os arquivos aqui"}),(0,o.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Para fazer upload instant\xe2neo"})]})})}),(0,o.jsx)(f.M,{children:M&&(0,o.jsx)(j.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>U(!1),children:(0,o.jsxs)(j.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",style:{backgroundColor:"var(--bg-primary)"},onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"p-6",style:{borderBottom:"1px solid var(--border-light)"},children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h3",{className:"text-lg font-bold",style:{color:"var(--text-primary)"},children:"Enviar para Aprova\xe7\xe3o"}),(0,o.jsx)("button",{onClick:()=>U(!1),className:"p-2 rounded-lg hover:bg-gray-100",children:(0,o.jsx)(c.Z,{className:"w-5 h-5",style:{color:"var(--text-tertiary)"}})})]}),(0,o.jsx)("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"O cliente receber\xe1 uma notifica\xe7\xe3o para revisar este arquivo."})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-light)"},children:[(0,o.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"var(--primary-100)",color:"#4370d1"},children:Q((null==q?void 0:q.type)||"file")}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:null==q?void 0:q.name}),(0,o.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:null==q?void 0:q.size})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Selecione o Cliente *"}),(0,o.jsxs)("select",{className:"w-full p-3 rounded-lg border focus:ring-2 outline-none",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},value:D,onChange:e=>P(e.target.value),children:[(0,o.jsx)("option",{value:"",children:"Selecione..."}),A.map(e=>(0,o.jsx)("option",{value:e.id,children:e.company_name},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Mensagem (opcional)"}),(0,o.jsx)("textarea",{value:L,onChange:e=>F(e.target.value),placeholder:"Adicione uma mensagem para o cliente...",rows:3,className:"w-full p-3 rounded-lg border focus:ring-2 outline-none resize-none",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]})]}),(0,o.jsxs)("div",{className:"p-6 flex justify-end gap-3",style:{borderTop:"1px solid var(--border-light)",backgroundColor:"var(--bg-secondary)"},children:[(0,o.jsx)("button",{onClick:()=>U(!1),className:"px-4 py-2 font-medium rounded-lg transition-colors",style:{color:"var(--text-secondary)"},children:"Cancelar"}),(0,o.jsxs)("button",{onClick:Y,className:"px-4 py-2 text-white font-medium rounded-lg transition-colors flex items-center gap-2",style:{backgroundColor:"#4370d1"},children:[(0,o.jsx)(p.Z,{className:"w-4 h-4"}),"Enviar Agora"]})]})]})})}),(0,o.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,o.jsxs)("div",{className:"mb-8 flex justify-between items-end",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:"Meus Arquivos"}),(0,o.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Gerencie seus documentos e envie para aprova\xe7\xe3o"})]}),(0,o.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-secondary)"},children:[(0,o.jsx)(u.Z,{className:"w-4 h-4"}),"Nova Pasta"]})]}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"flex-1 relative",children:[(0,o.jsx)(m.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5",style:{color:"var(--text-tertiary)"}}),(0,o.jsx)("input",{type:"text",placeholder:"Buscar arquivos...",value:a,onChange:e=>w(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border focus:outline-none focus:ring-2",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>r("grid"),className:"p-2.5 rounded-xl border transition-colors",style:{backgroundColor:"grid"===e?"var(--primary-50)":"var(--bg-primary)",borderColor:"grid"===e?"#4370d1":"var(--border-light)"},children:(0,o.jsx)(x.Z,{className:"w-5 h-5",style:{color:"grid"===e?"#4370d1":"var(--text-tertiary)"}})}),(0,o.jsx)("button",{onClick:()=>r("list"),className:"p-2.5 rounded-xl border transition-colors",style:{backgroundColor:"list"===e?"var(--primary-50)":"var(--bg-primary)",borderColor:"list"===e?"#4370d1":"var(--border-light)"},children:(0,o.jsx)(v.Z,{className:"w-5 h-5",style:{color:"list"===e?"#4370d1":"var(--text-tertiary)"}})})]}),(0,o.jsxs)("button",{onClick:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.click()},disabled:O,className:"flex items-center gap-2 px-6 py-2.5 rounded-xl font-medium transition-colors text-white shadow-lg disabled:opacity-50",style:{backgroundColor:"#4370d1"},children:[(0,o.jsx)(d.Z,{className:"w-5 h-5 ".concat(O?"animate-bounce":"")}),O?"Enviando...":"Upload Arquivo"]})]}),S?(0,o.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"#4370d1"}})}):0===ee.length?(0,o.jsxs)("div",{className:"text-center py-16 border-2 border-dashed rounded-3xl",style:{borderColor:"var(--border-light)",backgroundColor:"var(--bg-secondary)"},children:[(0,o.jsx)(n.Z,{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--text-tertiary)"}}),(0,o.jsx)("p",{className:"text-lg mb-2",style:{color:"var(--text-secondary)"},children:a?"Nenhum arquivo encontrado":"Nenhum arquivo ainda"}),(0,o.jsx)("p",{className:"text-sm mb-4",style:{color:"var(--text-tertiary)"},children:a?"Tente buscar por outro termo":"Fa\xe7a upload de seus primeiros arquivos ou arraste-os para c\xe1"}),!a&&(0,o.jsx)("button",{onClick:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.click()},className:"px-6 py-2 rounded-lg font-medium text-white",style:{backgroundColor:"#4370d1"},children:"Fazer Upload"})]}):"grid"===e?(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:ee.map((e,r)=>(0,o.jsxs)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*r},className:"p-4 rounded-xl border cursor-pointer hover:shadow-xl transition-all group relative",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,o.jsx)("div",{className:"absolute top-2 left-2",children:er(e.status)}),(0,o.jsxs)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:["draft"===e.status&&(0,o.jsx)("button",{onClick:r=>{r.stopPropagation(),X(e)},className:"p-1.5 rounded-lg shadow transition-colors",style:{backgroundColor:"var(--bg-primary)"},title:"Enviar para Aprova\xe7\xe3o",children:(0,o.jsx)(y.Z,{size:14,style:{color:"#4370d1"}})}),(0,o.jsx)("button",{className:"p-1.5 rounded-lg shadow transition-colors",style:{backgroundColor:"var(--bg-primary)"},children:(0,o.jsx)(g.Z,{size:14,style:{color:"var(--text-secondary)"}})}),(0,o.jsx)("button",{onClick:r=>{r.stopPropagation(),$(e.id)},className:"p-1.5 rounded-lg shadow transition-colors hover:bg-red-50",style:{backgroundColor:"var(--bg-primary)"},children:(0,o.jsx)(h.Z,{size:14,className:"text-red-500"})})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center text-center pt-6",children:[e.thumbnailUrl?(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl mb-4 bg-cover bg-center",style:{backgroundImage:"url(".concat(e.thumbnailUrl,")")}}):(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mb-4",style:{backgroundColor:"var(--primary-50)",color:"#4370d1"},children:Q(e.type)}),(0,o.jsx)("h3",{className:"font-semibold mb-1 truncate w-full px-2",style:{color:"var(--text-primary)"},children:e.name}),(0,o.jsxs)("p",{className:"text-xs mb-3",style:{color:"var(--text-tertiary)"},children:[e.size," • ",e.date]}),(0,o.jsx)("span",{className:"px-2 py-1 text-[10px] rounded-full uppercase tracking-wider font-bold",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-tertiary)"},children:e.type})]})]},e.id))}):(0,o.jsx)("div",{className:"space-y-2 rounded-2xl border shadow-sm overflow-hidden",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:ee.map((e,r)=>(0,o.jsxs)(j.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*r},className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors group",style:{borderBottom:"1px solid var(--border-light)"},children:[(0,o.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,o.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--primary-50)",color:"#4370d1"},children:Q(e.type)}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"font-medium",style:{color:"var(--text-primary)"},children:e.name}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-xs mt-0.5",style:{color:"var(--text-tertiary)"},children:[(0,o.jsx)("span",{children:e.folder}),(0,o.jsx)("span",{children:"•"}),(0,o.jsx)("span",{children:e.size}),(0,o.jsx)("span",{children:"•"}),(0,o.jsx)("span",{children:e.date}),"draft"!==e.status&&(0,o.jsx)("span",{className:"ml-2",children:er(e.status)})]})]})]}),(0,o.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100",children:["draft"===e.status&&(0,o.jsx)("button",{onClick:()=>X(e),className:"p-2 rounded-lg transition-colors",style:{color:"#4370d1"},title:"Enviar para Aprova\xe7\xe3o",children:(0,o.jsx)(y.Z,{className:"w-4 h-4"})}),(0,o.jsx)("button",{className:"p-2 rounded-lg transition-colors",style:{color:"var(--text-secondary)"},children:(0,o.jsx)(b.Z,{className:"w-4 h-4"})}),(0,o.jsx)("button",{className:"p-2 rounded-lg transition-colors",style:{color:"var(--text-secondary)"},children:(0,o.jsx)(g.Z,{className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:()=>$(e.id),className:"p-2 rounded-lg transition-colors hover:text-red-500",style:{color:"var(--text-secondary)"},children:(0,o.jsx)(h.Z,{className:"w-4 h-4"})})]})]},e.id))})]})]})}}},function(e){e.O(0,[2882,4438,7954,2971,2117,1744],function(){return e(e.s=63471)}),_N_E=e.O()}]);