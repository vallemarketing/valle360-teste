(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7180],{47216:function(e,s,t){Promise.resolve().then(t.bind(t,54640))},54640:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var l=t(57437),a=t(2265),r=t(79820),i=t(69174),n=t(5526),c=t(95805),d=t(82431),o=t(58896),x=t(11239),m=t(28921),f=t(70525),v=t(95252),b=t(91436),u=t(77031),h=t(56940),p=t(97059),j=t(62994),N=t(78155),g=t(53250),w=t(69442);let _=[{id:"1",full_name:"Tech Solutions Ltda"},{id:"2",full_name:"Valle Boutique"},{id:"3",full_name:"Digital Plus"},{id:"4",full_name:"E-commerce Pro"},{id:"5",full_name:"Inova Marketing"}],y={1:{traffic_roas:1.8,traffic_cpl:45,traffic_conversions:28,traffic_ctr:.9,traffic_investment:8e3,traffic_leads:178},2:{traffic_roas:1.2,traffic_cpl:62,traffic_conversions:15,traffic_ctr:.6,traffic_investment:5e3,traffic_leads:81},3:{traffic_roas:2.1,traffic_cpl:38,traffic_conversions:42,traffic_ctr:1.1,traffic_investment:12e3,traffic_leads:316},4:{traffic_roas:1.5,traffic_cpl:55,traffic_conversions:22,traffic_ctr:.8,traffic_investment:1e4,traffic_leads:182},5:{traffic_roas:1.3,traffic_cpl:68,traffic_conversions:18,traffic_ctr:.7,traffic_investment:6e3,traffic_leads:88}},C={1:{roas:4.2,cpc:1.85,cpm:18.5,ctr:2.4,investment:8e3,conversions:78,leads:432},2:{roas:3.5,cpc:2.2,cpm:22,ctr:1.8,investment:5e3,conversions:42,leads:227},3:{roas:5.1,cpc:1.45,cpm:14.5,ctr:3.2,investment:12e3,conversions:118,leads:827},4:{roas:3.8,cpc:2,cpm:20,ctr:2.1,investment:1e4,conversions:68,leads:500},5:{roas:3.2,cpc:2.5,cpm:25,ctr:1.6,investment:6e3,conversions:38,leads:240}};function Z(){let[e,s]=(0,a.useState)([]),[t,Z]=(0,a.useState)(""),[R,I]=(0,a.useState)(null),[S,O]=(0,a.useState)(null),[k,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Y()},[]),(0,a.useEffect)(()=>{t&&F()},[t]);let Y=async()=>{let{data:e,error:t}=await n.supabase.from("user_profiles").select("id, full_name").eq("user_type","cliente").order("full_name");e&&e.length>0?s(e):s(_)},F=async()=>{E(!0);let{data:e}=await n.supabase.from("before_valle_metrics").select("*").eq("client_id",t).maybeSingle();e?I(e):y[t]&&I(y[t]);let{data:s}=await n.supabase.from("traffic_metrics").select("*").eq("client_id",t).order("period_end",{ascending:!1}).limit(1).maybeSingle();s?O(s):C[t]&&O(C[t]),E(!1)},A=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return 0===e?0:t?((e-s)/e*100).toFixed(0):((s-e)/e*100).toFixed(0)},T=R?R.traffic_investment/(R.traffic_leads||1):0,B=S?S.cpc:0;R&&R.traffic_investment,S&&S.cpm;let L=R&&S,V=L?[{metric:"ROAS",antes:R.traffic_roas,depois:S.roas},{metric:"CTR",antes:R.traffic_ctr,depois:S.ctr},{metric:"Convers\xf5es",antes:R.traffic_conversions,depois:S.conversions},{metric:"Leads",antes:R.traffic_leads,depois:S.leads}]:[];return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-valle-navy-900",children:"Tr\xe1fego Comparativo"}),(0,l.jsx)("p",{className:"text-valle-silver-600 mt-2",children:"Compare o desempenho das campanhas antes e depois da Valle 360"})]}),(0,l.jsxs)(r.Zb,{className:"border-2 border-valle-blue-200 bg-gradient-to-r from-valle-blue-50 to-white",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsxs)(r.ll,{className:"flex items-center gap-2 text-valle-navy-900",children:[(0,l.jsx)(c.Z,{className:"w-6 h-6 text-valle-blue-600"}),"Selecionar Cliente"]})}),(0,l.jsx)(r.aY,{children:(0,l.jsxs)("select",{value:t,onChange:e=>Z(e.target.value),className:"w-full h-12 px-4 rounded-lg border-2 border-valle-silver-300 bg-white focus:border-valle-blue-500 focus:ring-2 focus:ring-valle-blue-200 transition-all",children:[(0,l.jsx)("option",{value:"",children:"Selecione um cliente..."}),e.map(e=>(0,l.jsx)("option",{value:e.id,children:e.full_name},e.id))]})})]}),k&&(0,l.jsx)(r.Zb,{className:"border-2 border-valle-silver-200",children:(0,l.jsxs)(r.aY,{className:"py-16 text-center",children:[(0,l.jsx)(d.Z,{className:"w-12 h-12 mx-auto text-valle-blue-600 animate-spin mb-4"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-valle-navy-700",children:"Carregando dados..."})]})}),!k&&t&&!L&&(0,l.jsx)(r.Zb,{className:"border-2 border-amber-200 bg-gradient-to-r from-amber-50 to-white",children:(0,l.jsxs)(r.aY,{className:"py-16 text-center",children:[(0,l.jsx)(o.Z,{className:"w-16 h-16 mx-auto text-primary mb-4"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-valle-navy-700",children:"Dados insuficientes para compara\xe7\xe3o"}),(0,l.jsx)("p",{className:"text-sm text-valle-silver-600 mt-2",children:'\xc9 necess\xe1rio ter dados "antes da Valle 360" e pelo menos uma m\xe9trica de tr\xe1fego registrada'})]})}),!k&&t&&L&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.Zb,{className:"border-2 border-valle-blue-200 bg-gradient-to-br from-white to-valle-blue-50",children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(r.ll,{className:"text-valle-navy-900 flex items-center gap-2",children:[(0,l.jsx)(x.Z,{className:"w-6 h-6 text-valle-blue-600"}),"Comparativo de Tr\xe1fego Pago"]}),(0,l.jsxs)(i.C,{className:"bg-gradient-to-r from-green-600 to-green-700 text-white",children:["ROI +",A(R.traffic_roas,S.roas),"%"]})]}),(0,l.jsx)("p",{className:"text-sm text-valle-silver-600 mt-2",children:"Resultados antes e depois da gest\xe3o profissional Valle 360"})]}),(0,l.jsxs)(r.aY,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"text-center mb-4",children:(0,l.jsx)(i.C,{variant:"outline",className:"text-base px-4 py-2 border-2 border-valle-silver-400",children:"Antes da Valle 360"})}),(0,l.jsx)(r.Zb,{className:"border-2 border-valle-silver-300 bg-gradient-to-br from-valle-silver-100 to-valle-silver-50",children:(0,l.jsxs)(r.aY,{className:"p-6 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-valle-silver-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"w-5 h-5 text-valle-silver-500"}),(0,l.jsx)("span",{className:"text-sm text-valle-silver-700",children:"ROAS"})]}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-valle-silver-700",children:[R.traffic_roas.toFixed(1),"x"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-valle-silver-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"w-5 h-5 text-valle-silver-500"}),(0,l.jsx)("span",{className:"text-sm text-valle-silver-700",children:"CPL"})]}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-valle-silver-700",children:["R$ ",R.traffic_cpl.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-valle-silver-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(f.Z,{className:"w-5 h-5 text-valle-silver-500"}),(0,l.jsx)("span",{className:"text-sm text-valle-silver-700",children:"CTR"})]}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-valle-silver-700",children:[R.traffic_ctr.toFixed(1),"%"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-valle-silver-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"w-5 h-5 text-valle-silver-500"}),(0,l.jsx)("span",{className:"text-sm text-valle-silver-700",children:"Convers\xf5es"})]}),(0,l.jsx)("span",{className:"text-2xl font-bold text-valle-silver-700",children:R.traffic_conversions})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-valle-silver-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-valle-silver-500"}),(0,l.jsx)("span",{className:"text-sm text-valle-silver-700",children:"Leads"})]}),(0,l.jsx)("span",{className:"text-2xl font-bold text-valle-silver-700",children:R.traffic_leads})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-valle-silver-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.Z,{className:"w-5 h-5 text-valle-silver-500"}),(0,l.jsx)("span",{className:"text-sm text-valle-silver-700",children:"Investimento"})]}),(0,l.jsxs)("span",{className:"text-xl font-bold text-valle-silver-700",children:["R$ ",R.traffic_investment.toLocaleString("pt-BR")]})]})]})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"text-center mb-4",children:(0,l.jsx)(i.C,{className:"text-base px-4 py-2 bg-gradient-to-r from-valle-blue-600 to-valle-blue-700 text-white",children:"Depois da Valle 360"})}),(0,l.jsx)(r.Zb,{className:"border-2 border-valle-blue-300 bg-gradient-to-br from-valle-blue-50 to-white shadow-xl",children:(0,l.jsxs)(r.aY,{className:"p-6 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border-2 border-valle-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"w-5 h-5 text-valle-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-valle-blue-700 font-medium",children:"ROAS"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-2xl font-bold text-valle-blue-700",children:[S.roas.toFixed(1),"x"]}),(0,l.jsxs)(i.C,{className:"bg-green-600 text-white text-xs",children:["+",A(R.traffic_roas,S.roas),"%"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border-2 border-valle-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"w-5 h-5 text-valle-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-valle-blue-700 font-medium",children:"CPC"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-2xl font-bold text-valle-blue-700",children:["R$ ",S.cpc.toFixed(2)]}),(0,l.jsxs)(i.C,{className:"bg-green-600 text-white text-xs",children:["-",A(T,B,!0),"%"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border-2 border-valle-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(f.Z,{className:"w-5 h-5 text-valle-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-valle-blue-700 font-medium",children:"CTR"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-2xl font-bold text-valle-blue-700",children:[S.ctr.toFixed(1),"%"]}),(0,l.jsxs)(i.C,{className:"bg-green-600 text-white text-xs",children:["+",A(R.traffic_ctr,S.ctr),"%"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border-2 border-valle-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"w-5 h-5 text-valle-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-valle-blue-700 font-medium",children:"Convers\xf5es"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-2xl font-bold text-valle-blue-700",children:S.conversions}),(0,l.jsxs)(i.C,{className:"bg-green-600 text-white text-xs",children:["+",A(R.traffic_conversions,S.conversions),"%"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border-2 border-valle-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-valle-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-valle-blue-700 font-medium",children:"Leads"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-2xl font-bold text-valle-blue-700",children:S.leads}),(0,l.jsxs)(i.C,{className:"bg-green-600 text-white text-xs",children:["+",A(R.traffic_leads,S.leads),"%"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border-2 border-valle-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.Z,{className:"w-5 h-5 text-valle-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-valle-blue-700 font-medium",children:"Investimento"})]}),(0,l.jsxs)("span",{className:"text-xl font-bold text-valle-blue-700",children:["R$ ",S.investment.toLocaleString("pt-BR")]})]})]})})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,l.jsx)(r.Zb,{className:"border-2 border-green-200 bg-gradient-to-br from-green-50 to-white",children:(0,l.jsxs)(r.aY,{className:"p-4 text-center",children:[(0,l.jsx)("p",{className:"text-sm text-valle-silver-600 mb-1",children:"Melhoria no ROAS"}),(0,l.jsxs)("p",{className:"text-4xl font-bold text-green-700",children:["+",A(R.traffic_roas,S.roas),"%"]}),(0,l.jsx)("p",{className:"text-xs text-valle-silver-600 mt-2",children:"Retorno sobre investimento"})]})}),(0,l.jsx)(r.Zb,{className:"border-2 border-valle-blue-200 bg-gradient-to-br from-valle-blue-50 to-white",children:(0,l.jsxs)(r.aY,{className:"p-4 text-center",children:[(0,l.jsx)("p",{className:"text-sm text-valle-silver-600 mb-1",children:"Aumento de Convers\xf5es"}),(0,l.jsxs)("p",{className:"text-4xl font-bold text-valle-blue-700",children:["+",A(R.traffic_conversions,S.conversions),"%"]}),(0,l.jsx)("p",{className:"text-xs text-valle-silver-600 mt-2",children:"Mais resultados"})]})}),(0,l.jsx)(r.Zb,{className:"border-2 border-green-200 bg-gradient-to-br from-green-50 to-white",children:(0,l.jsxs)(r.aY,{className:"p-4 text-center",children:[(0,l.jsx)("p",{className:"text-sm text-valle-silver-600 mb-1",children:"Redu\xe7\xe3o de Custo"}),(0,l.jsxs)("p",{className:"text-4xl font-bold text-green-700",children:["-",A(T,B,!0),"%"]}),(0,l.jsx)("p",{className:"text-xs text-valle-silver-600 mt-2",children:"Economia por clique"})]})})]}),V.length>0&&(0,l.jsxs)(r.Zb,{className:"border border-valle-silver-200 mt-6",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-lg",children:"Comparativo Visual"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)(b.h,{width:"100%",height:300,children:(0,l.jsxs)(u.v,{data:V,children:[(0,l.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,l.jsx)(p.K,{dataKey:"metric",stroke:"#757575"}),(0,l.jsx)(j.B,{stroke:"#757575"}),(0,l.jsx)(N.u,{contentStyle:{backgroundColor:"white",border:"2px solid #2563eb",borderRadius:"8px"}}),(0,l.jsx)(g.D,{}),(0,l.jsx)(w.$,{dataKey:"antes",fill:"#9ca3af",name:"Antes",radius:[8,8,0,0]}),(0,l.jsx)(w.$,{dataKey:"depois",fill:"#2563eb",name:"Depois",radius:[8,8,0,0]})]})})})]})]})]})}),!t&&(0,l.jsx)(r.Zb,{className:"border-2 border-valle-silver-200",children:(0,l.jsxs)(r.aY,{className:"py-16 text-center",children:[(0,l.jsx)(o.Z,{className:"w-16 h-16 mx-auto text-valle-silver-400 mb-4"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-valle-navy-700",children:"Selecione um cliente para visualizar"}),(0,l.jsx)("p",{className:"text-sm text-valle-silver-600 mt-2",children:"Escolha um cliente acima para ver a compara\xe7\xe3o de tr\xe1fego antes e depois"})]})})]})}},69174:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});var l=t(57437);t(2265);var a=t(90535),r=t(93448);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-valle-blue-600 text-white",secondary:"border-transparent bg-valle-silver-300 text-valle-navy-800",outline:"text-valle-navy-700 border-valle-silver-400",success:"border-transparent bg-green-600 text-white",warning:"border-transparent bg-yellow-600 text-white",danger:"border-transparent bg-red-600 text-white"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...a}=e;return(0,l.jsx)("div",{className:(0,r.cn)(i({variant:t}),s),...a})}},79820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var l=t(57437),a=t(2265),r=t(93448);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("rounded-xl border-2 border-valle-silver-200 bg-white shadow-md",t),...a})});i.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("h3",{ref:s,className:(0,r.cn)("font-semibold leading-none tracking-tight text-lg",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-foreground/70",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5526:function(e,s,t){"use strict";t.r(s),t.d(s,{supabase:function(){return i}});var l=t(62724);let a="https://ikjgsqtykkhqimypacro.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";a&&r||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let i=(0,l.eI)(a||"https://setup-missing.supabase.co",r||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},93448:function(e,s,t){"use strict";t.d(s,{cn:function(){return r},x:function(){return i}});var l=t(61994),a=t(53335);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,l.W)(s))}function i(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[6137,4609,2724,5906,3964,6156,4330,2971,2117,1744],function(){return e(e.s=47216)}),_N_E=e.O()}]);