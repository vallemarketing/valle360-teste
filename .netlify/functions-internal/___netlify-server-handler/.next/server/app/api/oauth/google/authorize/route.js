"use strict";(()=>{var e={};e.id=48129,e.ids=[48129],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},74967:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{GET:()=>d});var o=r(49303),s=r(88716),n=r(60670),i=r(87070),c=r(20344),u=r(71615);let p=process.env.GOOGLE_CLIENT_ID||"",l=process.env.GOOGLE_REDIRECT_URI||`${process.env.NEXT_PUBLIC_APP_URL}/api/oauth/google/callback`;async function d(e){try{let t=(0,c.createRouteHandlerClient)({cookies:u.cookies}),{data:{user:r}}=await t.auth.getUser();if(!r)return i.NextResponse.redirect(new URL("/login",e.url));let a=e.nextUrl.searchParams,o=a.get("clientId"),s=a.get("redirect")||"/admin/integracoes",n={userId:r.id,clientId:o,redirect:s,timestamp:Date.now()},d=Buffer.from(JSON.stringify(n)).toString("base64url"),g=new URL("https://accounts.google.com/o/oauth2/v2/auth");return g.searchParams.set("client_id",p),g.searchParams.set("redirect_uri",l),g.searchParams.set("response_type","code"),g.searchParams.set("scope","https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events"),g.searchParams.set("access_type","offline"),g.searchParams.set("prompt","consent"),g.searchParams.set("state",d),i.NextResponse.redirect(g.toString())}catch(t){return console.error("Google OAuth error:",t),i.NextResponse.redirect(new URL("/error?message=oauth_error",e.url))}}let g=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/oauth/google/authorize/route",pathname:"/api/oauth/google/authorize",filename:"route",bundlePath:"app/api/oauth/google/authorize/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\oauth\\google\\authorize\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:x}=g,w="/api/oauth/google/authorize/route";function v(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[89276,55972,54128,20958],()=>r(74967));module.exports=a})();