(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{8393:function(e,a,i){Promise.resolve().then(i.bind(i,75432))},32489:function(e,a,i){"use strict";i.d(a,{Z:function(){return s}});let s=(0,i(79205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},99376:function(e,a,i){"use strict";var s=i(35475);i.o(s,"useParams")&&i.d(a,{useParams:function(){return s.useParams}}),i.o(s,"usePathname")&&i.d(a,{usePathname:function(){return s.usePathname}}),i.o(s,"useRouter")&&i.d(a,{useRouter:function(){return s.useRouter}}),i.o(s,"useSearchParams")&&i.d(a,{useSearchParams:function(){return s.useSearchParams}})},75432:function(e,a,i){"use strict";i.r(a),i.d(a,{default:function(){return I}});var s=i(57437),t=i(2265),n=i(26892),l=i(27648),o=i(70525),r=i(32096),d=i(58896),c=i(25846),u=i(42208),m=i(28921),h=i(95252),v=i(11239),x=i(10407),p=i(76865),g=i(32489),b=i(82023),f=i(76858),j=i(5526),y=i(99376),N=i(93448),w=i(2818);function k(e){return Number.isFinite(e)?e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):"".concat(Math.round(e)):"0"}function I(){var e,a,i,I,C,E,z,S,_,Z,A,P;let R=(0,y.useRouter)(),[M,F]=(0,t.useState)(!0),[O,V]=(0,t.useState)({nome:"Cliente",empresa:"Empresa",avatar:"",plano:"Premium"}),[J,X]=(0,t.useState)(null),[q,U]=(0,t.useState)(null),[T,B]=(0,t.useState)(null);(0,t.useEffect)(()=>{D();let e=localStorage.getItem("valle_last_visit");if(e){let a=Math.floor((Date.now()-parseInt(e))/36e5),i=Math.floor(a/24);i>0?X("h\xe1 ".concat(i," dia").concat(i>1?"s":"")):a>0?X("h\xe1 ".concat(a," hora").concat(a>1?"s":"")):X("agora")}localStorage.setItem("valle_last_visit",Date.now().toString())},[]);let D=async()=>{try{let{data:{user:a}}=await j.supabase.auth.getUser();if(!a){R.push("/login");return}let{data:i}=await j.supabase.from("user_profiles").select("full_name").eq("user_id",a.id).single(),[s,t]=await Promise.all([fetch("/api/client/dashboard/summary?days=30",{cache:"no-store"}),fetch("/api/client/dashboard/feed?maxItems=6",{cache:"no-store"})]),n=await s.json().catch(()=>null),l=await t.json().catch(()=>null);if(U(s.ok&&(null==n?void 0:n.success)?n:null),B(t.ok&&(null==l?void 0:l.success)?{nextMeeting:l.nextMeeting||null,activities:l.activities||[]}:null),i||(null==n?void 0:n.client)){var e;V({nome:(null==i?void 0:i.full_name)||"Cliente",empresa:(null==n?void 0:null===(e=n.client)||void 0===e?void 0:e.company_name)||"Sua Empresa",avatar:"",plano:"Premium"})}}catch(e){console.error("Erro ao carregar dados:",e)}finally{F(!1)}};if(M)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1672d6] mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-[#001533]/60 dark:text-white/60",children:"Carregando..."})]})});let L=O.nome.split(" ")[0],G=null==q?void 0:q.kpis,Y=!!(null==q?void 0:null===(e=q.ads)||void 0===e?void 0:e.available),$=(null==q?void 0:null===(a=q.billing)||void 0===a?void 0:a.hasOpenInvoice)?null==q?void 0:null===(i=q.billing)||void 0===i?void 0:i.invoice:null,H=(null==q?void 0:null===(I=q.insights)||void 0===I?void 0:I.available)?null==q?void 0:null===(C=q.insights)||void 0===C?void 0:C.new:0,K=(null==T?void 0:T.nextMeeting)||null,Q=Array.isArray(null==T?void 0:T.activities)?null==T?void 0:T.activities:void 0,W=(0,t.useMemo)(()=>{var e,a,i,t,n,l,u;let m=null!==(l=null==G?void 0:null===(e=G.impressions)||void 0===e?void 0:e.change)&&void 0!==l?l:0,h=null==q?void 0:null===(i=q.client)||void 0===i?void 0:null===(a=i.segment)||void 0===a?void 0:a.trim(),v=null!==(u=null==q?void 0:null===(t=q.client)||void 0===t?void 0:t.competitors_count)&&void 0!==u?u:0,x=(null==q?void 0:null===(n=q.insights)||void 0===n?void 0:n.available)?"".concat(q.insights.new," novas"):void 0;return[{icon:(0,s.jsx)(o.Z,{className:"size-5 text-white"}),title:"Desempenho",description:Y?"Ads + Social consolidados (30d)":"Social consolidado (30d)",date:"Atualizado agora",iconClassName:"bg-[#1672d6]",titleClassName:"text-[#1672d6]",href:"/cliente/painel/desempenho",badge:"".concat(m>=0?"+":"").concat(m,"%"),badgeColor:m>=0?"bg-emerald-500":"bg-red-500"},{icon:(0,s.jsx)(r.Z,{className:"size-5 text-white"}),title:"Seu Setor",description:h?"Segmento: ".concat(h):"Not\xedcias e tend\xeancias do seu mercado",date:"Atualizado hoje",iconClassName:"bg-[#001533]",titleClassName:"text-[#001533] dark:text-white",href:"/cliente/painel/setor",badge:"Hoje",badgeColor:"bg-primary"},{icon:(0,s.jsx)(d.Z,{className:"size-5 text-white"}),title:"Concorrentes",description:v?"".concat(v," monitorado(s)"):"Defina seus concorrentes para gerar comparativos",date:"Atualizado agora",iconClassName:"bg-purple-500",titleClassName:"text-purple-600",href:"/cliente/painel/concorrentes",badge:v?"".concat(v):void 0,badgeColor:"bg-purple-500"},...x?[{icon:(0,s.jsx)(c.Z,{className:"size-5 text-white"}),title:"Insights IA",description:"Recomenda\xe7\xf5es com fontes (hoje)",date:"Atualizado hoje",iconClassName:"bg-emerald-500",titleClassName:"text-emerald-600",href:"/cliente/painel/insights",badge:x,badgeColor:"bg-emerald-500"}]:[]]},[Y,null==G?void 0:null===(E=G.impressions)||void 0===E?void 0:E.change,null==q?void 0:null===(z=q.client)||void 0===z?void 0:z.segment,null==q?void 0:null===(S=q.client)||void 0===S?void 0:S.competitors_count,null==q?void 0:null===(_=q.insights)||void 0===_?void 0:_.available,null==q?void 0:null===(Z=q.insights)||void 0===Z?void 0:Z.new]);return(0,s.jsxs)("div",{className:"p-4 lg:p-6 space-y-6 md:space-y-8 max-w-7xl mx-auto",children:[(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsx)(w.h$,{userName:L,userCompany:O.empresa,planName:O.plano,ctaText:"Agendar Reuni\xe3o",ctaHref:"/cliente/agenda",lastVisit:J})}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,s.jsxs)(w.oy,{children:[(0,s.jsx)(w.Ai,{title:"Impress\xf5es",value:G?k(G.impressions.value):"—",change:G?G.impressions.change:0,icon:(0,s.jsx)(u.Z,{className:"size-5 text-[#1672d6]"})}),(0,s.jsx)(w.Ai,{title:(null==G?void 0:null===(A=G.clicks)||void 0===A?void 0:A.label)||"Cliques",value:G?k(G.clicks.value):"—",change:G?G.clicks.change:0,icon:(0,s.jsx)(m.Z,{className:"size-5 text-[#1672d6]"})}),(0,s.jsx)(w.Ai,{title:"Convers\xf5es",value:G&&Y?k(G.conversions.value):"—",change:G?G.conversions.change:0,icon:(0,s.jsx)(d.Z,{className:"size-5 text-[#1672d6]"})}),(0,s.jsx)(w.Ai,{title:"Investimento",value:G&&Y?"R$ ".concat(G.spend.value.toFixed(0)):"—",change:G?G.spend.change:0,changeLabel:Y?"ads (30d)":"ads n\xe3o conectado",icon:(0,s.jsx)(h.Z,{className:"size-5 text-[#1672d6]"})})]})}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,s.jsx)(l.default,{href:"/cliente/painel",children:(0,s.jsx)("div",{className:"rounded-2xl bg-gradient-to-r from-[#001533] to-[#1672d6] p-6 text-white cursor-pointer hover:shadow-xl hover:shadow-[#1672d6]/20 transition-all group",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-white/20",children:(0,s.jsx)(v.Z,{className:"size-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold",children:"Painel de Intelig\xeancia"}),(0,s.jsx)("p",{className:"text-white/70 mt-1",children:"Acesse todas as informa\xe7\xf5es organizadas: desempenho, setor, concorrentes e insights IA"})]})]}),(0,s.jsx)("div",{className:"p-3 rounded-full bg-white/10 group-hover:bg-white/20 transition-colors",children:(0,s.jsx)(x.Z,{className:"size-6 group-hover:translate-x-1 transition-transform"})})]})})})}),!!$&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},children:(0,s.jsx)("div",{className:"rounded-2xl bg-[#001533] p-4 text-white shadow-lg border-2 border-[#1672d6]/30",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-[#1672d6]",children:(0,s.jsx)(p.Z,{className:"size-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Fatura em aberto"}),(0,s.jsxs)("p",{className:"text-white/80 text-sm",children:["Voc\xea tem uma fatura de"," ",(0,s.jsx)("span",{className:"font-bold",children:"R$ ".concat(Number($.amount||0).toFixed(2).replace(".",","))})," ","com vencimento em ",(0,s.jsx)("span",{className:"font-bold",children:$.due_date})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.default,{href:"/cliente/financeiro",children:(0,s.jsx)("button",{className:"px-4 py-2 bg-[#1672d6] text-white rounded-lg font-medium text-sm hover:bg-[#1260b5] transition-colors",children:"Ver Financeiro"})}),(0,s.jsx)("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(g.Z,{className:"size-4"})})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"rounded-2xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-[#1672d6]/10",children:(0,s.jsx)(b.Z,{className:"size-5 text-[#1672d6]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#001533] dark:text-white",children:"Destaques da Semana"}),(0,s.jsx)("p",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"Clique em um card para ver detalhes"})]})]}),(0,s.jsxs)(l.default,{href:"/cliente/painel",className:"flex items-center gap-1 text-sm font-medium text-[#1672d6] hover:underline",children:["Ver todos ",(0,s.jsx)(f.Z,{className:"size-4"})]})]}),(0,s.jsx)("div",{className:"flex justify-center py-4",children:(0,s.jsx)(w.eL,{cards:W.map((e,a)=>({...e,className:0===a?(0,N.cn)("[grid-area:stack] hover:-translate-y-10","before:absolute before:w-full before:h-full before:rounded-xl","before:bg-[#001533]/5 before:content-[''] before:left-0 before:top-0","before:transition-opacity before:duration-500","hover:before:opacity-0","grayscale-[20%] hover:grayscale-0"):1===a?(0,N.cn)("[grid-area:stack] translate-x-16 translate-y-10 hover:-translate-y-1","before:absolute before:w-full before:h-full before:rounded-xl","before:bg-[#001533]/5 before:content-[''] before:left-0 before:top-0","before:transition-opacity before:duration-500","hover:before:opacity-0","grayscale-[20%] hover:grayscale-0"):"[grid-area:stack] translate-x-32 translate-y-20 hover:translate-y-10"}))})})]}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.35},children:(0,s.jsx)(w.$k,{defaultExpanded:!1,stats:{impressions:{value:G?k(G.impressions.value):"—",change:G?G.impressions.change:0},clicks:{value:G?k(G.clicks.value):"—",change:G?G.clicks.change:0},conversions:{value:G&&Y?k(G.conversions.value):"—",change:G?G.conversions.change:0},roi:{value:G&&Y?"".concat(G.roi.value.toFixed(2)):"—",change:G?G.roi.change:0}}})}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"rounded-2xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 p-6",children:(0,s.jsx)(w._R,{})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.45},children:(0,s.jsx)(l.default,{href:"/cliente/painel/insights",children:(0,s.jsxs)("div",{className:"rounded-2xl border-2 border-emerald-500/30 bg-emerald-500/5 p-6 cursor-pointer hover:border-emerald-500/50 hover:bg-emerald-500/10 transition-all group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-emerald-500",children:(0,s.jsx)(c.Z,{className:"size-5 text-white"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-[#001533] dark:text-white",children:"Insights da Val"})]}),(0,s.jsx)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70 mb-4",children:(null==q?void 0:null===(P=q.insights)||void 0===P?void 0:P.available)?"".concat(H," nova(s) recomenda\xe7\xe3o(\xf5es) hoje para melhorar seus resultados"):"Gere insights com fontes para receber recomenda\xe7\xf5es personalizadas"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-emerald-600 font-medium text-sm group-hover:gap-3 transition-all",children:["Ver recomenda\xe7\xf5es ",(0,s.jsx)(x.Z,{className:"size-4"})]})]})})}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:(0,s.jsx)(w.Ql,{date:null==K?void 0:K.date,time:null==K?void 0:K.time,with:null==K?void 0:K.with,withRole:null==K?void 0:K.withRole,href:(null==K?void 0:K.href)||"/cliente/agenda"})}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:(0,s.jsx)(w.M6,{activities:Q})}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},children:(0,s.jsx)(w.G7,{})})]})]})]})}},5526:function(e,a,i){"use strict";i.r(a),i.d(a,{supabase:function(){return l}});var s=i(62724);let t="https://ikjgsqtykkhqimypacro.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";t&&n||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let l=(0,s.eI)(t||"https://setup-missing.supabase.co",n||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[2882,6137,4609,2724,2972,3145,3281,5165,4900,8819,2971,2117,1744],function(){return e(e.s=8393)}),_N_E=e.O()}]);