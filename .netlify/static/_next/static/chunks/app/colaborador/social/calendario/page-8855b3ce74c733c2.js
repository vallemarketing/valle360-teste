(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9508],{30916:function(e,t,r){Promise.resolve().then(r.bind(r,69067))},42208:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},79219:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},48736:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},53113:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},37760:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},50598:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},2207:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},42351:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},69067:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var l=r(57437),a=r(2265),n=r(26892),o=r(31047),s=r(99397),i=r(73247),c=r(37760),d=r(79219),u=r(50598),m=r(71006);function h(){let[e,t]=(0,a.useState)(""),[r,h]=(0,a.useState)("all"),[g,v]=(0,a.useState)(!0),[x,y]=(0,a.useState)(null),[b,j]=(0,a.useState)([]),[k,w]=(0,a.useState)([]),N=e=>{window.location.href="/colaborador/social-media/upload"},C=async()=>{v(!0),y(null);try{let[e,t]=await Promise.all([fetch("/api/social/posts-mirror",{cache:"no-store"}),fetch("/api/social/clients",{cache:"no-store"})]),r=await e.json().catch(()=>null),l=await t.json().catch(()=>null);if(!e.ok)throw Error((null==r?void 0:r.error)||"Falha ao carregar posts");if(!t.ok)throw Error((null==l?void 0:l.error)||"Falha ao carregar clientes");j(Array.isArray(null==r?void 0:r.posts)?r.posts:[]),w((Array.isArray(null==l?void 0:l.clients)?l.clients:[]).map(e=>({id:String((null==e?void 0:e.id)||""),name:String((null==e?void 0:e.name)||"Cliente")})))}catch(e){console.error("Erro ao carregar calend\xe1rio social:",e),j([]),w([]),y(String((null==e?void 0:e.message)||"Falha ao carregar calend\xe1rio social"))}finally{v(!1)}},S=async e=>{if(window.confirm("Deseja deletar este post?")){y(null);try{let t=await fetch("/api/social/posts-mirror?id=".concat(encodeURIComponent(e)),{method:"DELETE"}),r=await t.json().catch(()=>null);if(!t.ok)throw Error((null==r?void 0:r.error)||"Falha ao deletar post");await C()}catch(e){console.error("Falha ao deletar post:",e),y(String((null==e?void 0:e.message)||"Falha ao deletar post"))}}};(0,a.useEffect)(()=>{C()},[]);let M=(0,a.useMemo)(()=>new Map(k.map(e=>[e.id,e.name])),[k]),Z=(0,a.useMemo)(()=>(b||[]).map(e=>{let t=String((null==e?void 0:e.caption)||""),r=t.trim()?t.trim().slice(0,48)+(t.trim().length>48?"…":""):"Post (".concat(String((null==e?void 0:e.post_type)||"m\xeddia"),")"),l=(null==e?void 0:e.client_id)?String(e.client_id):"",a=M.get(l)||"Cliente",n=(null==e?void 0:e.scheduled_at)||(null==e?void 0:e.published_at)||(null==e?void 0:e.created_at)||new Date().toISOString(),o=!!(null==e?void 0:e.is_draft)||"draft"===String((null==e?void 0:e.status)||"").toLowerCase(),s=String((null==e?void 0:e.status)||"").toLowerCase(),i=o?"draft":"failed"===s?"failed":"published"===s||(null==e?void 0:e.published_at)?"published":("scheduled"===s||null==e||e.scheduled_at,"scheduled"),c=(Array.isArray(null==e?void 0:e.platforms)?e.platforms.map(String):[]).filter(e=>["instagram","facebook","linkedin","twitter"].includes(String(e))),d=String((null==e?void 0:e.post_type)||(null==e?void 0:e.type)||"image").toLowerCase(),u=d.includes("reel")?"reel":d.includes("story")?"story":d.includes("carousel")?"carousel":d.includes("video")?"video":"image",m=Array.isArray(null==e?void 0:e.media_urls)?e.media_urls:[],h=m.length?String(m[0]):void 0;return{id:String((null==e?void 0:e.id)||""),title:r,content:t,type:u,platforms:c.length?c:["instagram"],scheduledAt:n,status:i,clientId:l,clientName:a,thumbnail:h,createdBy:String((null==e?void 0:e.created_by)||"")}}).filter(e=>!!e.id),[b,M]),F=(0,a.useMemo)(()=>{let t=e.trim().toLowerCase();return Z.filter(e=>!!("all"===r||e.platforms.includes(r))&&(!t||"".concat(e.title," ").concat(e.content," ").concat(e.clientName).toLowerCase().includes(t)))},[Z,e,r]),_=(0,a.useMemo)(()=>{let e=F.filter(e=>"scheduled"===e.status).length,t=F.filter(e=>"draft"===e.status).length,r=new Set(F.map(e=>e.clientId).filter(Boolean)).size,l=new Date,a=l.getFullYear(),n=l.getMonth();return{scheduled:e,drafts:t,activeClients:r,publishedMonth:F.filter(e=>{if("published"!==e.status)return!1;let t=new Date(e.scheduledAt);return t.getFullYear()===a&&t.getMonth()===n}).length}},[F]);return(0,l.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--pink-100, #FCE7F3)"},children:(0,l.jsx)(o.Z,{className:"w-7 h-7",style:{color:"var(--pink-500, #EC4899)"}})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Calend\xe1rio de Posts"}),(0,l.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Agende e gerencie publica\xe7\xf5es nas redes sociais"})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsxs)(n.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N(new Date),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium text-white",style:{backgroundColor:"var(--primary-500)"},children:[(0,l.jsx)(s.Z,{className:"w-4 h-4"}),"Novo Post"]})})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)("input",{type:"text",placeholder:"Buscar post...",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 pl-10 rounded-xl border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,l.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"var(--text-tertiary)"}})]}),(0,l.jsx)("div",{className:"flex gap-2",children:[{id:"all",label:"Todas",icon:null},{id:"instagram",label:"Instagram",icon:(0,l.jsx)(c.Z,{className:"w-4 h-4"}),color:"#E4405F"},{id:"facebook",label:"Facebook",icon:(0,l.jsx)(d.Z,{className:"w-4 h-4"}),color:"#1877F2"},{id:"linkedin",label:"LinkedIn",icon:(0,l.jsx)(u.Z,{className:"w-4 h-4"}),color:"#0A66C2"}].map(e=>(0,l.jsxs)("button",{onClick:()=>h(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:r===e.id?e.color||"var(--primary-500)":"var(--bg-primary)",color:r===e.id?"white":"var(--text-secondary)",border:"1px solid ".concat(r===e.id?e.color||"var(--primary-500)":"var(--border-light)")},children:[e.icon,(0,l.jsx)("span",{className:"hidden md:inline",children:e.label})]},e.id))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsx)(f,{label:"Agendados",value:g?"—":String(_.scheduled),color:"var(--primary-500)"}),(0,l.jsx)(f,{label:"Publicados (M\xeas)",value:g?"—":String(_.publishedMonth),color:"var(--success-500)"}),(0,l.jsx)(f,{label:"Rascunhos",value:g?"—":String(_.drafts),color:"var(--warning-500)"}),(0,l.jsx)(f,{label:"Clientes Ativos",value:g?"—":String(_.activeClients),color:"var(--purple-500)"})]}),x&&(0,l.jsx)("div",{className:"rounded-xl p-4 border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--error-300)"},children:(0,l.jsx)("p",{style:{color:"var(--error-700)"},children:x})}),(0,l.jsx)(m.d,{posts:F,onAddPost:N,onEditPost:e=>{window.location.href="/colaborador/social-media/upload"},onDeletePost:S,onViewPost:e=>{window.location.href="/colaborador/social-media/upload"}}),(0,l.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl p-6 border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,l.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",style:{color:"var(--text-primary)"},children:[(0,l.jsx)("span",{className:"text-lg",children:"\uD83E\uDD16"}),"Sugest\xe3o da Val: Melhores Hor\xe1rios (benchmark)"]}),(0,l.jsx)("p",{className:"text-sm mb-4",style:{color:"var(--text-tertiary)"},children:"Observa\xe7\xe3o: at\xe9 termos dados suficientes por canal/cliente, estas sugest\xf5es usam benchmarks gerais."}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsx)(p,{platform:"Instagram",time:"18:00 - 21:00",engagement:"+45%"}),(0,l.jsx)(p,{platform:"Facebook",time:"13:00 - 15:00",engagement:"+32%"}),(0,l.jsx)(p,{platform:"LinkedIn",time:"08:00 - 10:00",engagement:"+28%"}),(0,l.jsx)(p,{platform:"Stories",time:"12:00 - 14:00",engagement:"+38%"})]})]})]})})}function f(e){let{label:t,value:r,color:a}=e;return(0,l.jsxs)("div",{className:"rounded-xl p-4 border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,l.jsx)("p",{className:"text-2xl font-bold",style:{color:a},children:r}),(0,l.jsx)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:t})]})}function p(e){let{platform:t,time:r,engagement:a}=e;return(0,l.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"},children:[(0,l.jsx)("p",{className:"font-medium text-sm",style:{color:"var(--text-primary)"},children:t}),(0,l.jsx)("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:r}),(0,l.jsxs)("p",{className:"text-xs font-medium mt-1",style:{color:"var(--success-500)"},children:[a," engajamento"]})]})}},8971:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var l=r(14993),a=r(55036);function n(e,t,r){let n=(0,a.Q)(e,null==r?void 0:r.in);if(isNaN(t))return(0,l.L)((null==r?void 0:r.in)||e,NaN);if(!t)return n;let o=n.getDate(),s=(0,l.L)((null==r?void 0:r.in)||e,n.getTime());return(s.setMonth(n.getMonth()+t+1,0),o>=s.getDate())?s:(n.setFullYear(s.getFullYear(),s.getMonth(),o),n)}},70888:function(e,t,r){"use strict";r.d(t,{D:function(){return n}});var l=r(77967),a=r(14993);function n(e,t){var r;let{start:n,end:o}=function(e,t){let[r,a]=(0,l.d)(e,t.start,t.end);return{start:r,end:a}}(null==t?void 0:t.in,e),s=+n>+o,i=s?+n:+o,c=s?o:n;c.setHours(0,0,0,0);let d=null!==(r=null==t?void 0:t.step)&&void 0!==r?r:1;if(!d)return[];d<0&&(d=-d,s=!s);let u=[];for(;+c<=i;)u.push((0,a.L)(n,c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return s?u.reverse():u}},26062:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var l=r(55036);function a(e,t){let r=(0,l.Q)(e,null==t?void 0:t.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}},6364:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var l=r(77967);function a(e,t,r){let[a,n]=(0,l.d)(null==r?void 0:r.in,e,t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}},56739:function(e,t,r){"use strict";r.d(t,{N:function(){return a}});var l=r(55036);function a(e,t){let r=(0,l.Q)(e,null==t?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}},38549:function(e,t,r){"use strict";r.d(t,{W:function(){return a}});var l=r(8971);function a(e,t,r){return(0,l.z)(e,-t,r)}}},function(e){e.O(0,[2882,3828,1667,7241,1006,2971,2117,1744],function(){return e(e.s=30916)}),_N_E=e.O()}]);