"use strict";(()=>{var e={};e.id=52905,e.ids=[52905],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},49592:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var r={};t.r(r),t.d(r,{POST:()=>p,dynamic:()=>l});var o=t(49303),n=t(88716),a=t(60670),i=t(87070),c=t(20344),u=t(71615);let l="force-dynamic";async function p(e){try{let s=(0,u.cookies)(),t=(0,c.createRouteHandlerClient)({cookies:()=>s}),{data:r}=await t.auth.getUser();if(!r.user?.id)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{data:o,error:n}=await t.rpc("is_admin");if(n||!o)return i.NextResponse.json({error:"Acesso negado (admin)"},{status:403});let{emailCorporativo:a,emailPessoal:l}=await e.json();if(!a||!l)return i.NextResponse.json({error:"Email corporativo e email pessoal s\xe3o obrigat\xf3rios"},{status:400});let[p]=a.split("@"),d=process.env.CPANEL_USER,m=process.env.CPANEL_PASSWORD,g=process.env.CPANEL_DOMAIN;if(!d||!m||!g)return console.warn("⚠️ Credenciais do cPanel n\xe3o configuradas"),i.NextResponse.json({success:!1,message:"Credenciais do cPanel n\xe3o configuradas. Configure CPANEL_USER, CPANEL_PASSWORD e CPANEL_DOMAIN (ex.: https://SEU_HOST:2083)."},{status:200});let x=Buffer.from(`${d}:${m}`).toString("base64"),f=function(e){let s=String(e||"").trim();return s?(/^https?:\/\//i.test(s)?s:`https://${s}`).replace(/\/+$/,""):""}(g),v=`${f}/execute/Email/dispatch_client_settings?account=${encodeURIComponent(p)}&to=${encodeURIComponent(l)}`;console.log("\uD83D\uDCE7 Enviando configura\xe7\xf5es de email via cPanel..."),console.log("  → Email corporativo:",a),console.log("  → Para email pessoal:",l);let E=await fetch(v,{method:"GET",headers:{Authorization:`Basic ${x}`,"Content-Type":"application/json"}}),h=await E.json();if(h.result?.status===1)return console.log(`✅ Configura\xe7\xf5es enviadas com sucesso para: ${l}`),i.NextResponse.json({success:!0,message:"Configura\xe7\xf5es de email enviadas com sucesso",emailCorporativo:a,emailPessoal:l});return console.error("❌ Erro ao enviar configura\xe7\xf5es:",h.result?.errors),i.NextResponse.json({success:!1,message:"Erro ao enviar configura\xe7\xf5es de email",errors:h.result?.errors||["Erro desconhecido"]},{status:400})}catch(e){return console.error("Erro na API de envio de configura\xe7\xf5es:",e),i.NextResponse.json({success:!1,error:e.message||"Erro desconhecido"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/cpanel/send-email-settings/route",pathname:"/api/cpanel/send-email-settings",filename:"route",bundlePath:"app/api/cpanel/send-email-settings/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\cpanel\\send-email-settings\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:x}=d,f="/api/cpanel/send-email-settings/route";function v(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[89276,55972,54128,20958],()=>t(49592));module.exports=r})();