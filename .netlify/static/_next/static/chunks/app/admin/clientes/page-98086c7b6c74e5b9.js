(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7773],{62968:function(e,a,t){Promise.resolve().then(t.bind(t,40449))},40449:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return F}});var s=t(57437),r=t(2265),i=t(26892),l=t(57586),n=t(32489),c=t(92369),d=t(89345),o=t(13041),x=t(70525),m=t(48736),g=t(83774),h=t(15868),p=t(98728),y=t(30401),u=t(97869),b=t(89688),j=t(71533),v=t(42208),N=t(95805),f=t(82023),w=t(99397),k=t(73247),C=t(98420),E=t(27648),A=t(93448),S=t(5526),I=t(14438);let Z=[{id:"1",code:"reputation",name:"Central de Reputa\xe7\xe3o",description:"NPS, Google, Reclame Aqui",category:"analytics",enabled:!0},{id:"2",code:"insights_predictive",name:"Insights Preditivos",description:"An\xe1lises e sugest\xf5es com IA",category:"ai",enabled:!0},{id:"3",code:"franchisee_analysis",name:"An\xe1lise de Franqueados",description:"Gest\xe3o de franquias",category:"management",enabled:!1},{id:"4",code:"val_ai",name:"Assistente Val IA",description:"Chat inteligente",category:"ai",enabled:!0},{id:"5",code:"gamification",name:"Valle Club",description:"Gamifica\xe7\xe3o e recompensas",category:"engagement",enabled:!1},{id:"6",code:"advanced_reports",name:"Relat\xf3rios Avan\xe7ados",description:"Exporta\xe7\xe3o e BI",category:"analytics",enabled:!1},{id:"7",code:"integrations_google",name:"Integra\xe7\xe3o Google",description:"Ads, Analytics, GMB",category:"integration",enabled:!0},{id:"8",code:"integrations_meta",name:"Integra\xe7\xe3o Meta",description:"Facebook, Instagram",category:"integration",enabled:!0}];function T(e){let{client:a,onClose:t}=e;return(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:(0,s.jsxs)(i.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("img",{src:a.avatar,alt:a.companyName,className:"w-14 h-14 rounded-xl"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a.companyName}),(0,s.jsx)("p",{className:"text-gray-500",children:a.industry})]})]}),(0,s.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:(0,s.jsx)(n.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:(0,A.cn)("px-3 py-1 rounded-full text-sm font-medium","active"===a.status&&"bg-green-100 text-green-700","inactive"===a.status&&"bg-red-100 text-red-700","pending"===a.status&&"bg-yellow-100 text-yellow-700"),children:"active"===a.status?"Ativo":"inactive"===a.status?"Inativo":"Pendente"}),(0,s.jsxs)("span",{className:"text-gray-500 text-sm",children:["Cliente desde ",new Date(a.startDate).toLocaleDateString("pt-BR")]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Contato Principal"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-white",children:a.contactName})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Email"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-white",children:a.email})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Telefone"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-white",children:a.phone})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Valor Mensal"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-green-500"}),(0,s.jsxs)("span",{className:"text-green-600 font-bold",children:["R$ ",a.monthlyValue.toLocaleString("pt-BR")]})]})]}),a.cnpj&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"CNPJ"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-white",children:a.cnpj})]})]}),a.city&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Localiza\xe7\xe3o"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{className:"text-gray-900 dark:text-white",children:[a.city,", ",a.state]})]})]})]}),a.services&&a.services.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Servi\xe7os Contratados"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:a.services.map(e=>(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"social_media"===e?"Social Media":"trafego_pago"===e?"Tr\xe1fego Pago":"design"===e?"Design":"web"===e?"Web":e},e))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Fechar"}),(0,s.jsx)(E.default,{href:"/admin/clientes/".concat(a.id),children:(0,s.jsxs)("button",{className:"px-4 py-2 bg-[#1672d6] text-white rounded-lg hover:bg-[#1260b5] transition-colors flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"Editar Cliente"]})})]})]})})}function _(e){let{client:a,onClose:t,onSave:l}=e,[c,d]=(0,r.useState)(Z),o=e=>{d(a=>a.map(a=>a.id===e?{...a,enabled:!a.enabled}:a))};return(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:(0,s.jsxs)(i.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-purple-100 flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-purple-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Gerenciar Servi\xe7os"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:a.companyName})]})]}),(0,s.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:(0,s.jsx)(n.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Ative ou desative as funcionalidades dispon\xedveis para este cliente."}),Object.entries({analytics:"An\xe1lises",ai:"Intelig\xeancia Artificial",management:"Gest\xe3o",engagement:"Engajamento",integration:"Integra\xe7\xf5es"}).map(e=>{let[a,t]=e,r=c.filter(e=>e.category===a);return 0===r.length?null:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:t}),(0,s.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,s.jsxs)("div",{className:(0,A.cn)("flex items-center justify-between p-4 rounded-xl border transition-all",e.enabled?"border-green-200 bg-green-50 dark:bg-green-900/20":"border-gray-200 bg-gray-50 dark:bg-gray-700/50"),children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,s.jsx)("button",{onClick:()=>o(e.id),className:(0,A.cn)("relative w-14 h-7 rounded-full transition-colors",e.enabled?"bg-green-500":"bg-gray-300"),children:(0,s.jsx)(i.E.div,{className:"absolute top-1 w-5 h-5 bg-white rounded-full shadow",animate:{left:e.enabled?"32px":"4px"},transition:{type:"spring",stiffness:500,damping:30}})})]},e.id))})]},a)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[c.filter(e=>e.enabled).length," de ",c.length," funcionalidades ativas"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),(0,s.jsxs)("button",{onClick:()=>{l(a.id,c),t()},className:"px-4 py-2 bg-[#1672d6] text-white rounded-lg hover:bg-[#1260b5] transition-colors flex items-center gap-2",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4"}),"Salvar Altera\xe7\xf5es"]})]})]})]})})}function P(e){let{client:a,action:t,onConfirm:r,onCancel:l}=e,n="deactivate"===t;return(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:l,children:(0,s.jsx)(i.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full shadow-xl",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6 text-center",children:[(0,s.jsx)("div",{className:(0,A.cn)("w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",n?"bg-red-100":"bg-green-100"),children:n?(0,s.jsx)(u.Z,{className:"w-8 h-8 text-red-600"}):(0,s.jsx)(b.Z,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:n?"Desativar Acesso":"Ativar Acesso"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:["Tem certeza que deseja ",(0,s.jsx)("strong",{children:n?"desativar":"ativar"})," o acesso de"," ",(0,s.jsx)("strong",{children:a.companyName}),"?",n&&(0,s.jsx)("span",{className:"block mt-2 text-sm text-red-600",children:"O cliente perder\xe1 acesso imediato ao sistema."})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsx)("button",{onClick:l,className:"px-6 py-2.5 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:"Cancelar"}),(0,s.jsxs)("button",{onClick:r,className:(0,A.cn)("px-6 py-2.5 text-white rounded-lg transition-colors font-medium flex items-center gap-2",n?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),children:[n?(0,s.jsx)(u.Z,{className:"w-4 h-4"}):(0,s.jsx)(b.Z,{className:"w-4 h-4"}),"Confirmar"]})]})]})})})}function R(e){let{client:a,onViewDetails:t,onManageServices:n,onToggleAccess:c,onEdit:d}=e,[o,x]=(0,r.useState)(!1),m=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{className:"relative",ref:m,children:[(0,s.jsx)("button",{onClick:()=>x(!o),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,s.jsx)(j.Z,{className:"w-5 h-5 text-gray-500"})}),(0,s.jsx)(l.M,{children:o&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden z-50",children:[(0,s.jsxs)("button",{onClick:()=>{t(),x(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 text-blue-500"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-200",children:"Ver Detalhes"})]}),(0,s.jsxs)("button",{onClick:()=>{n(),x(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 text-purple-500"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-200",children:"Gerenciar Servi\xe7os"})]}),(0,s.jsx)(E.default,{href:"/admin/clientes/".concat(a.id,"/equipe"),children:(0,s.jsxs)("button",{onClick:()=>x(!1),className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 text-green-500"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-200",children:"Gerenciar Equipe"})]})}),(0,s.jsxs)("button",{onClick:()=>{d(),x(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-200",children:"Editar Cliente"})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700"}),(0,s.jsx)("button",{onClick:()=>{c(),x(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"active"===a.status?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 text-red-500"}),(0,s.jsx)("span",{className:"text-red-600",children:"Desativar Acesso"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 text-green-500"}),(0,s.jsx)("span",{className:"text-green-600",children:"Ativar Acesso"})]})})]})})]})}function F(){let[e,a]=(0,r.useState)(""),[t,o]=(0,r.useState)("all"),[m,g]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[y,u]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(null),[Z,F]=(0,r.useState)(!1),[O,z]=(0,r.useState)(null),L=m.filter(a=>{let s=a.companyName.toLowerCase().includes(e.toLowerCase())||a.contactName.toLowerCase().includes(e.toLowerCase())||a.email.toLowerCase().includes(e.toLowerCase()),r="all"===t||a.status===t;return s&&r}),B=e=>({active:{bg:"bg-green-100",text:"text-green-700",label:"Ativo"},inactive:{bg:"bg-red-100",text:"text-red-700",label:"Inativo"},pending:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Pendente"}})[e],V=L.reduce((e,a)=>e+a.monthlyValue,0),q=e=>{N({client:e,action:"active"===e.status?"deactivate":"activate"})},J=async()=>{try{var e;let{data:a}=await S.supabase.auth.getSession(),t=null===(e=a.session)||void 0===e?void 0:e.access_token;return t?{Authorization:"Bearer ".concat(t)}:{}}catch(e){return{}}},M=async()=>{try{var e,a;F(!0);let t=await J(),s=await fetch("/api/admin/create-test-client",{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify({company_name:"Cliente Teste (Social)"})}),r=await s.json().catch(()=>null);if(!s.ok)throw Error((null==r?void 0:r.error)||"Falha ao criar cliente de teste");let i=String((null==r?void 0:null===(e=r.credentials)||void 0===e?void 0:e.email)||""),l=String((null==r?void 0:null===(a=r.credentials)||void 0===a?void 0:a.password)||"");z({email:i,password:l});try{await navigator.clipboard.writeText("Email: ".concat(i,"\nSenha: ").concat(l)),I.Am.success("Cliente de teste criado (copiado)",{description:"Credenciais copiadas para a \xe1rea de transfer\xeancia."})}catch(e){I.Am.success("Cliente de teste criado",{description:"Abra o modal para copiar as credenciais."})}}catch(e){I.Am.error((null==e?void 0:e.message)||"Erro ao criar cliente de teste")}finally{F(!1)}},G=async()=>{try{p(!0);let e=await J(),a=await fetch("/api/admin/clients",{headers:e}),t=await a.json().catch(()=>null);if(!a.ok)throw Error((null==t?void 0:t.error)||"Falha ao carregar clientes");g(Array.isArray(null==t?void 0:t.clients)?t.clients:[])}catch(e){g([]),I.Am.error("Falha ao carregar clientes",{description:"Verifique permiss\xf5es e integra\xe7\xf5es do Supabase."})}finally{p(!1)}};(0,r.useEffect)(()=>{G()},[]);let D=async()=>{if(!v)return;let e="activate"===v.action?"active":"inactive";g(a=>a.map(a=>a.id===v.client.id?{...a,status:e}:a)),N(null);try{let a=await J();(await fetch("/api/admin/clients",{method:"PUT",headers:{"Content-Type":"application/json",...a},body:JSON.stringify({userId:v.client.userId||v.client.id,status:e})})).ok?I.Am.success("Status atualizado: ".concat("active"===e?"Ativo":"Inativo")):I.Am.error("Falha ao atualizar status no banco")}catch(e){I.Am.error("Falha ao atualizar status no banco")}},U=async(e,a)=>{try{let t=await J(),s=await fetch("/api/admin/clients",{method:"POST",headers:{"Content-Type":"application/json",...t},body:JSON.stringify({clientId:e,features:a})}),r=await s.json().catch(()=>null);if(!s.ok)throw Error((null==r?void 0:r.error)||"Erro ao salvar servi\xe7os");I.Am.success("Servi\xe7os/Features atualizados!")}catch(e){I.Am.error((null==e?void 0:e.message)||"Erro ao salvar servi\xe7os")}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2 text-gray-900 dark:text-white",children:"Clientes"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Gerencie todos os clientes da Valle 360"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(i.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:M,disabled:Z,className:"flex items-center gap-2 px-5 py-3 rounded-xl font-medium text-gray-900 shadow-sm bg-white border border-gray-200 hover:bg-gray-50 transition-colors disabled:opacity-60",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5 text-[#1672d6]"}),Z?"Criando…":"Criar cliente de teste"]}),(0,s.jsx)(E.default,{href:"/admin/clientes/novo",children:(0,s.jsxs)(i.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium text-white shadow-md bg-[#1672d6] hover:bg-[#1260b5] transition-colors",children:[(0,s.jsx)(w.Z,{className:"w-5 h-5"}),"Novo Cliente"]})})]})]}),(0,s.jsx)(l.M,{children:O&&(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>z(null),children:(0,s.jsxs)(i.E.div,{initial:{scale:.97,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.97,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Cliente de teste criado"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Use essas credenciais para logar em ",(0,s.jsx)("span",{className:"font-mono",children:"/login"}),"."]})]}),(0,s.jsx)("button",{onClick:()=>z(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:(0,s.jsx)(n.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-3",children:[(0,s.jsxs)("div",{className:"rounded-xl border bg-gray-50 dark:bg-gray-900 p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),(0,s.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:O.email})]}),(0,s.jsxs)("div",{className:"rounded-xl border bg-gray-50 dark:bg-gray-900 p-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Senha"}),(0,s.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:O.password})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,s.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText("Email: ".concat(O.email,"\nSenha: ").concat(O.password)),I.Am.success("Copiado!")}catch(e){I.Am.error("N\xe3o foi poss\xedvel copiar")}},className:"px-4 py-2 rounded-lg border text-sm",children:"Copiar"}),(0,s.jsx)("button",{onClick:()=>z(null),className:"px-4 py-2 rounded-lg bg-[#1672d6] text-white text-sm",children:"Fechar"})]})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl p-6 shadow-sm border bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2 text-gray-500",children:"Total de Clientes"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:m.length})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-xl p-6 shadow-sm border bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2 text-gray-500",children:"Clientes Ativos"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:m.filter(e=>"active"===e.status).length})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"rounded-xl p-6 shadow-sm border bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2 text-gray-500",children:"Clientes Inativos"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-red-600",children:m.filter(e=>"inactive"===e.status).length})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"rounded-xl p-6 shadow-sm border bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2 text-gray-500",children:"Receita Mensal"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-[#1672d6]",children:["R$ ",(V/1e3).toFixed(1),"k"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(k.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar por nome, contato ou email...",value:e,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#1672d6]"})]}),(0,s.jsxs)("select",{value:t,onChange:e=>o(e.target.value),className:"px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#1672d6]",children:[(0,s.jsx)("option",{value:"all",children:"Todos os Status"}),(0,s.jsx)("option",{value:"active",children:"Ativos"}),(0,s.jsx)("option",{value:"inactive",children:"Inativos"}),(0,s.jsx)("option",{value:"pending",children:"Pendentes"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:L.map((e,a)=>{let t=B(e.status);return(0,s.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"rounded-xl p-6 shadow-sm border hover:shadow-md transition-all bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsx)("img",{src:e.avatar,alt:e.companyName,className:"w-16 h-16 rounded-xl"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.companyName}),(0,s.jsx)("span",{className:(0,A.cn)("px-3 py-1 rounded-full text-xs font-medium",t.bg,t.text),children:t.label})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 min-w-0",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.contactName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 min-w-0",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.email})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 min-w-0",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.industry})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),(0,s.jsxs)("span",{className:"font-semibold text-green-600 whitespace-nowrap",children:["R$ ",e.monthlyValue.toLocaleString("pt-BR")," /m\xeas"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>q(e),className:(0,A.cn)("relative w-12 h-6 rounded-full transition-colors","active"===e.status?"bg-green-500":"bg-gray-300"),title:"active"===e.status?"Clique para desativar":"Clique para ativar",children:(0,s.jsx)(i.E.div,{className:"absolute top-1 w-4 h-4 bg-white rounded-full shadow",animate:{left:"active"===e.status?"26px":"4px"},transition:{type:"spring",stiffness:500,damping:30}})}),(0,s.jsx)("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-lg font-medium text-sm bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",children:"Ver Detalhes"}),(0,s.jsx)(R,{client:e,onViewDetails:()=>u(e),onManageServices:()=>j(e),onToggleAccess:()=>q(e),onEdit:()=>window.location.href="/admin/clientes/".concat(e.id)})]})]})},e.id)})}),h?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(C.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-lg text-gray-500",children:"Carregando clientes..."})]}):0===L.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(C.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-lg text-gray-500",children:"Nenhum cliente encontrado"})]})]}),(0,s.jsxs)(l.M,{children:[y&&(0,s.jsx)(T,{client:y,onClose:()=>u(null)}),b&&(0,s.jsx)(_,{client:b,onClose:()=>j(null),onSave:U}),v&&(0,s.jsx)(P,{client:v.client,action:v.action,onConfirm:D,onCancel:()=>N(null)})]})]})}},5526:function(e,a,t){"use strict";t.r(a),t.d(a,{supabase:function(){return l}});var s=t(62724);let r="https://ikjgsqtykkhqimypacro.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";r&&i||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let l=(0,s.eI)(r||"https://setup-missing.supabase.co",i||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},93448:function(e,a,t){"use strict";t.d(a,{cn:function(){return i},x:function(){return l}});var s=t(61994),r=t(53335);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.m6)((0,s.W)(a))}function l(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[2882,6137,4609,2724,4438,2972,844,2971,2117,1744],function(){return e(e.s=62968)}),_N_E=e.O()}]);