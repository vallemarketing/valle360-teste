"use strict";(()=>{var e={};e.id=65350,e.ids=[65350],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},96104:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>j,patchFetch:()=>y,requestAsyncStorage:()=>x,routeModule:()=>g,serverHooks:()=>I,staticGenerationAsyncStorage:()=>R});var a={};r.r(a),r.d(a,{DELETE:()=>h,GET:()=>l,POST:()=>p,PUT:()=>m,dynamic:()=>d});var t=r(49303),o=r(88716),n=r(60670),i=r(87070),c=r(68042),u=r(1926);let d="force-dynamic";async function l(e){try{let{searchParams:s}=new URL(e.url),r=s.get("status")||void 0,a=s.get("industry")||void 0,t=s.get("min_score"),o=s.get("assigned_to")||void 0,n=await c.h.getLeads({status:r,industry:a,min_score:t?parseInt(t):void 0,assigned_to:o});return i.NextResponse.json({success:!0,leads:n})}catch(e){return console.error("Erro ao buscar leads:",e),i.NextResponse.json({success:!1,error:"Erro ao buscar leads"},{status:500})}}async function p(e){try{let{action:s,...r}=await e.json();if("scrape"===s){let e={industry:r.industry,location:r.location,keywords:r.keywords,has_website:r.has_website,has_social_media:r.has_social_media},s=await c.h.searchLeads(e);return i.NextResponse.json({success:!0,result:s})}if("generate_message"===s){let{lead:e,template:s}=r,a=c.h.generateOutreachMessage(e,s||"initial");return i.NextResponse.json({success:!0,message:a})}let a={company_name:r.company_name,website:r.website,email:r.email,phone:r.phone,industry:r.industry,size:r.size,location:r.location,social_media:r.social_media,score:r.score||50,status:r.status||"new",source:r.source||"manual",tags:r.tags,notes:r.notes},t=await c.h.saveLead(a);if(!t)return i.NextResponse.json({success:!1,error:"Erro ao salvar lead"},{status:500});return i.NextResponse.json({success:!0,lead:t})}catch(e){return console.error("Erro na API de leads:",e),i.NextResponse.json({success:!1,error:"Erro ao processar requisi\xe7\xe3o"},{status:500})}}async function m(e){try{let{id:s,...r}=await e.json();if(!s)return i.NextResponse.json({success:!1,error:"ID do lead \xe9 obrigat\xf3rio"},{status:400});if(r.interaction)return await c.h.updateLeadScore(s,r.interaction),i.NextResponse.json({success:!0,message:"Score atualizado"});let{error:a}=await u.O.from("leads").update({...r,updated_at:new Date().toISOString()}).eq("id",s);if(a)return i.NextResponse.json({success:!1,error:"Erro ao atualizar lead"},{status:500});return i.NextResponse.json({success:!0,message:"Lead atualizado"})}catch(e){return console.error("Erro ao atualizar lead:",e),i.NextResponse.json({success:!1,error:"Erro ao atualizar lead"},{status:500})}}async function h(e){try{let{searchParams:s}=new URL(e.url),r=s.get("id");if(!r)return i.NextResponse.json({success:!1,error:"ID do lead \xe9 obrigat\xf3rio"},{status:400});let{error:a}=await u.O.from("leads").delete().eq("id",r);if(a)return i.NextResponse.json({success:!1,error:"Erro ao remover lead"},{status:500});return i.NextResponse.json({success:!0,message:"Lead removido"})}catch(e){return console.error("Erro ao remover lead:",e),i.NextResponse.json({success:!1,error:"Erro ao remover lead"},{status:500})}}let g=new t.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/leads/route",pathname:"/api/leads",filename:"route",bundlePath:"app/api/leads/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\leads\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:x,staticGenerationAsyncStorage:R,serverHooks:I}=g,j="/api/leads/route";function y(){return(0,n.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:R})}},1926:(e,s,r)=>{r.d(s,{O:()=>n});var a=r(54128);let t="https://ikjgsqtykkhqimypacro.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";t&&o||console.error("âŒ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let n=(0,a.eI)(t||"https://setup-missing.supabase.co",o||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[89276,55972,54128,68042],()=>r(96104));module.exports=a})();