(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9391],{72440:function(e,s,a){Promise.resolve().then(a.bind(a,65022))},65022:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return S}});var r=a(57437),t=a(2265),l=a(99376),i=a(26892),c=a(57586),n=a(14438),o=a(37760),d=a(79219),m=a(50598),x=a(51817),p=a(91723),h=a(92934),u=a(31047),j=a(42208),y=a(37157),f=a(31810),g=a(33842),v=a(67782),N=a(88997),b=a(82718),w=a(44743),C=a(61178),k=a(29202),Z=a(68919);function A(e){let{platform:s,accountName:a,accountAvatar:l,copy:n,hashtags:x=[],mediaUrl:p,mediaType:h="image"}=e,[u,j]=(0,t.useState)(s),y=x.length>0?"".concat(n,"\n\n").concat(x.join(" ")):n;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:["instagram","facebook","linkedin"].map(e=>{let s={instagram:o.Z,facebook:d.Z,linkedin:m.Z}[e],a=u===e;return(0,r.jsxs)("button",{onClick:()=>j(e),className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:a?"var(--primary-100)":"var(--bg-secondary)",color:a?"var(--primary-700)":"var(--text-tertiary)"},children:[(0,r.jsx)(s,{className:"w-4 h-4"}),e.charAt(0).toUpperCase()+e.slice(1)]},e)})}),(0,r.jsx)(c.M,{mode:"wait",children:(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"rounded-xl border overflow-hidden",style:{backgroundColor:"linkedin"===u?"#f3f2ef":"white",borderColor:"var(--border-light)",maxWidth:"instagram"===u?"400px":"500px"},children:["instagram"===u&&(0,r.jsx)(E,{accountName:a,accountAvatar:l,caption:y,mediaUrl:p}),"facebook"===u&&(0,r.jsx)(P,{accountName:a,accountAvatar:l,caption:y,mediaUrl:p}),"linkedin"===u&&(0,r.jsx)(_,{accountName:a,accountAvatar:l,caption:y,mediaUrl:p})]},u)}),(0,r.jsxs)("div",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:[n.length," caracteres","instagram"===u&&n.length>2200&&(0,r.jsx)("span",{className:"text-primary ml-2",children:"⚠️ Limite do Instagram: 2200"}),"linkedin"===u&&n.length>3e3&&(0,r.jsx)("span",{className:"text-primary ml-2",children:"⚠️ Limite do LinkedIn: 3000"})]})]})}function E(e){let{accountName:s,accountAvatar:a,caption:t,mediaUrl:l}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border-b",style:{borderColor:"#efefef"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500 p-0.5",children:(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-white p-0.5",children:a?(0,r.jsx)("img",{src:a,alt:"",className:"w-full h-full rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full rounded-full bg-gray-200"})})}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:s.replace("@","")})]}),(0,r.jsx)(v.Z,{className:"w-5 h-5 text-gray-800"})]}),(0,r.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:l?(0,r.jsx)("img",{src:l,alt:"Preview",className:"w-full h-full object-cover"}):(0,r.jsxs)("div",{className:"text-center text-gray-400 p-4",children:[(0,r.jsx)(o.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),(0,r.jsx)("span",{className:"text-sm",children:"Imagem do post"})]})}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(N.Z,{className:"w-6 h-6"}),(0,r.jsx)(b.Z,{className:"w-6 h-6"}),(0,r.jsx)(w.Z,{className:"w-6 h-6"})]}),(0,r.jsx)(C.Z,{className:"w-6 h-6"})]}),(0,r.jsx)("p",{className:"text-sm font-semibold mb-1",children:"1.234 curtidas"}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsxs)("span",{className:"font-semibold",children:[s.replace("@","")," "]}),(0,r.jsx)("span",{className:"whitespace-pre-wrap break-words",children:t.length>150?t.substring(0,150)+"... mais":t})]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"H\xc1 1 HORA"})]})]})}function P(e){let{accountName:s,accountAvatar:a,caption:t,mediaUrl:l}=e;return(0,r.jsxs)("div",{className:"bg-white",children:[(0,r.jsxs)("div",{className:"p-3 flex items-center gap-3",children:[a?(0,r.jsx)("img",{src:a,alt:"",className:"w-10 h-10 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:s.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-sm",children:s}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,r.jsx)("span",{children:"Agora mesmo"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)(k.Z,{className:"w-3 h-3"})]})]})]}),(0,r.jsx)("div",{className:"px-3 pb-3",children:(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:t.length>250?t.substring(0,250)+"... Ver mais":t})}),l?(0,r.jsx)("img",{src:l,alt:"Preview",className:"w-full"}):(0,r.jsx)("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-gray-400 p-4",children:[(0,r.jsx)(d.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),(0,r.jsx)("span",{className:"text-sm",children:"M\xeddia do post"})]})}),(0,r.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between text-xs text-gray-500 border-b",style:{borderColor:"#efefef"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)("div",{className:"flex -space-x-1",children:[(0,r.jsx)("div",{className:"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"w-3 h-3 text-white"})}),(0,r.jsx)("div",{className:"w-5 h-5 rounded-full bg-red-500 flex items-center justify-center",children:(0,r.jsx)(N.Z,{className:"w-3 h-3 text-white",fill:"white"})})]}),(0,r.jsx)("span",{children:"234"})]}),(0,r.jsx)("span",{children:"12 coment\xe1rios • 5 compartilhamentos"})]}),(0,r.jsxs)("div",{className:"px-3 py-2 flex items-center justify-around text-gray-600 text-sm font-medium",children:[(0,r.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-100",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5"}),"Curtir"]}),(0,r.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-100",children:[(0,r.jsx)(b.Z,{className:"w-5 h-5"}),"Comentar"]}),(0,r.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-100",children:[(0,r.jsx)(Z.Z,{className:"w-5 h-5"}),"Compartilhar"]})]})]})}function _(e){let{accountName:s,accountAvatar:a,caption:t,mediaUrl:l}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"p-4 flex items-start gap-3",children:[a?(0,r.jsx)("img",{src:a,alt:"",className:"w-12 h-12 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold",children:s.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold text-sm text-gray-900",children:s}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"T\xedtulo ou descri\xe7\xe3o • 500+ seguidores"}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500 mt-0.5",children:[(0,r.jsx)("span",{children:"Agora"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)(k.Z,{className:"w-3 h-3"})]})]}),(0,r.jsx)(v.Z,{className:"w-6 h-6 text-gray-600"})]}),(0,r.jsx)("div",{className:"px-4 pb-3",children:(0,r.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-wrap break-words",children:t.length>300?t.substring(0,300)+"... ver mais":t})}),l?(0,r.jsx)("img",{src:l,alt:"Preview",className:"w-full"}):(0,r.jsx)("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-gray-400 p-4",children:[(0,r.jsx)(m.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),(0,r.jsx)("span",{className:"text-sm",children:"M\xeddia do post"})]})}),(0,r.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between text-xs text-gray-500 border-b",style:{borderColor:"#e5e5e5"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)("div",{className:"flex -space-x-1",children:[(0,r.jsx)("span",{className:"text-sm",children:"\uD83D\uDC4D"}),(0,r.jsx)("span",{className:"text-sm",children:"\uD83C\uDF89"}),(0,r.jsx)("span",{className:"text-sm",children:"❤️"})]}),(0,r.jsx)("span",{className:"ml-1",children:"56"})]}),(0,r.jsx)("span",{children:"8 coment\xe1rios"})]}),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between text-gray-600 text-xs font-medium",children:[(0,r.jsxs)("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded hover:bg-gray-100",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Gostei"]}),(0,r.jsxs)("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded hover:bg-gray-100",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4"}),"Comentar"]}),(0,r.jsxs)("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded hover:bg-gray-100",children:[(0,r.jsx)(Z.Z,{className:"w-4 h-4"}),"Compartilhar"]}),(0,r.jsxs)("button",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded hover:bg-gray-100",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),"Enviar"]})]})]})}let D={instagram:o.Z,facebook:d.Z,linkedin:m.Z};function S(){let e=(0,l.useParams)().clientId,[s,a]=(0,t.useState)(!0),[o,d]=(0,t.useState)([]),[m,v]=(0,t.useState)(null),[N,b]=(0,t.useState)(!1),[w,C]=(0,t.useState)(!1),[k,Z]=(0,t.useState)(""),[E,P]=(0,t.useState)(!1);(0,t.useEffect)(()=>{_()},[e]);let _=async()=>{a(!0);try{let s=await fetch("/api/admin/social/publish?client_id=".concat(e,"&status=pending_approval")),a=await s.json();if(s.ok){let e=(a.posts||[]).filter(e=>"client"===e.approval_flow_step&&"pending_approval"===e.status);d(e)}}catch(e){console.error("Error loading posts:",e),n.Am.error("Erro ao carregar posts")}finally{a(!1)}},S=async e=>{P(!0);try{let s=await fetch("/api/admin/social/publish",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e,action:"approve"})}),a=await s.json();if(s.ok)n.Am.success("Post aprovado com sucesso! \uD83C\uDF89"),b(!1),v(null),_();else throw Error(a.error||"Erro ao aprovar")}catch(e){n.Am.error(e.message||"Erro ao aprovar")}finally{P(!1)}},T=async()=>{if(m){if(!k.trim()){n.Am.error("Por favor, informe o motivo da reprova\xe7\xe3o");return}P(!0);try{let e=await fetch("/api/admin/social/publish",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:m.id,action:"reject",reason:k})}),s=await e.json();if(e.ok)n.Am.success("Post reprovado. A equipe foi notificada."),C(!1),b(!1),v(null),Z(""),_();else throw Error(s.error||"Erro ao reprovar")}catch(e){n.Am.error(e.message||"Erro ao reprovar")}finally{P(!1)}}};return s?(0,r.jsx)("div",{className:"min-h-[80vh] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(x.Z,{className:"w-8 h-8 animate-spin",style:{color:"var(--primary-500)"}}),(0,r.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Carregando..."})]})}):(0,r.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--warning-100)"},children:(0,r.jsx)(p.Z,{className:"w-7 h-7",style:{color:"var(--warning-600)"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Aprova\xe7\xf5es"}),(0,r.jsxs)("p",{style:{color:"var(--text-secondary)"},children:[o.length," post",1!==o.length?"s":""," aguardando sua aprova\xe7\xe3o"]})]})]}),0===o.length?(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border p-12 text-center",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,r.jsx)(h.Z,{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--success-300)"}}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text-primary)"},children:"Tudo aprovado! \uD83C\uDF89"}),(0,r.jsx)("p",{style:{color:"var(--text-secondary)"},children:"N\xe3o h\xe1 posts aguardando sua aprova\xe7\xe3o no momento."})]}):(0,r.jsx)("div",{className:"space-y-4",children:o.map((e,s)=>(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"rounded-2xl border p-5",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:e.platforms.map(e=>{let s=D[e];return s?(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:(0,r.jsx)(s,{className:"w-4 h-4",style:{color:"var(--text-secondary)"}})},e):null})}),e.scheduled_at&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm",style:{color:"var(--text-tertiary)"},children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),new Date(e.scheduled_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-xl mb-4",style:{backgroundColor:"var(--bg-secondary)"},children:[(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",style:{color:"var(--text-primary)"},children:e.copy}),e.hashtags&&e.hashtags.length>0&&(0,r.jsx)("p",{className:"text-sm mt-2",style:{color:"var(--primary-600)"},children:e.hashtags.join(" ")})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("button",{onClick:()=>{v(e),b(!0)},className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[(0,r.jsx)(j.Z,{className:"w-4 h-4"}),"Ver Preview"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{v(e),C(!0)},disabled:E,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium border disabled:opacity-50",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--error-300)",color:"var(--error-600)"},children:[(0,r.jsx)(y.Z,{className:"w-4 h-4"}),"Reprovar"]}),(0,r.jsxs)("button",{onClick:()=>S(e.id),disabled:E,className:"inline-flex items-center gap-2 px-5 py-2 rounded-xl text-sm font-medium text-white disabled:opacity-50",style:{backgroundColor:"var(--success-500)"},children:[E?(0,r.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Aprovar"]})]})]})]},e.id))}),(0,r.jsx)(c.M,{children:N&&m&&(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>b(!1),children:(0,r.jsxs)(i.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--text-primary)"},children:"Preview do Post"}),(0,r.jsx)(A,{platform:m.platforms[0]||"instagram",accountName:"Sua Conta",copy:m.copy,hashtags:m.hashtags}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-6 pt-4 border-t",style:{borderColor:"var(--border-light)"},children:[(0,r.jsxs)("button",{onClick:()=>{b(!1),C(!0)},className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium",style:{color:"var(--error-600)"},children:[(0,r.jsx)(y.Z,{className:"w-4 h-4"}),"Reprovar"]}),(0,r.jsxs)("button",{onClick:()=>S(m.id),disabled:E,className:"inline-flex items-center gap-2 px-5 py-2 rounded-xl text-sm font-medium text-white disabled:opacity-50",style:{backgroundColor:"var(--success-500)"},children:[E?(0,r.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Aprovar"]})]})]})})}),(0,r.jsx)(g.do,{isOpen:w,onClose:()=>{E||(C(!1),Z(""))},onConfirm:T,title:"Reprovar Post",message:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Por favor, informe o motivo da reprova\xe7\xe3o para que a equipe possa fazer os ajustes necess\xe1rios."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Motivo *"}),(0,r.jsx)("textarea",{value:k,onChange:e=>Z(e.target.value),placeholder:"Ex: A imagem n\xe3o est\xe1 de acordo com a identidade visual...",rows:3,className:"w-full px-3 py-2 rounded-lg border text-sm resize-none",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]})]}),confirmText:"Reprovar",cancelText:"Cancelar",variant:"danger",loading:E})]})})}}},function(e){e.O(0,[2882,4438,4816,3842,2971,2117,1744],function(){return e(e.s=72440)}),_N_E=e.O()}]);