(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2717],{50147:function(e,r,l){Promise.resolve().then(l.bind(l,10185))},10185:function(e,r,l){"use strict";l.r(r),l.d(r,{default:function(){return w}});var s=l(57437),t=l(2265),a=l(99376),o=l(26892),n=l(14438),i=l(51817),c=l(31047),d=l(3577),m=l(57586),x=l(37760),u=l(79219),p=l(50598),h=l(92451),y=l(10407),g=l(91723),v=l(42208);let b={instagram:x.Z,facebook:u.Z,linkedin:p.Z},j={pending_approval:{label:"Aguardando",color:"var(--warning-600)",bgColor:"var(--warning-100)"},approved:{label:"Aprovado",color:"var(--success-600)",bgColor:"var(--success-100)"},scheduled:{label:"Agendado",color:"var(--primary-600)",bgColor:"var(--primary-100)"},published:{label:"Publicado",color:"var(--success-700)",bgColor:"var(--success-50)"},failed:{label:"Falhou",color:"var(--error-600)",bgColor:"var(--error-100)"},rejected:{label:"Reprovado",color:"var(--error-600)",bgColor:"var(--error-100)"}},f=["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],N=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];function C(e){let{posts:r,onViewPost:l,showClientName:a=!1}=e,[n,i]=(0,t.useState)(new Date),[c,d]=(0,t.useState)(null),x=n.getFullYear(),u=n.getMonth(),p=new Date(x,u+1,0).getDate(),C=new Date(x,u,1).getDay(),w=(0,t.useMemo)(()=>{let e={};for(let l of r){if(!l.scheduled_at)continue;let r=l.scheduled_at.split("T")[0];e[r]||(e[r]=[]),e[r].push(l)}return e},[r]),k=(0,t.useMemo)(()=>{let e=[];for(let r=0;r<C;r++){let l=new Date(x,u,-C+r+1);e.push({date:l,isCurrentMonth:!1,dateKey:l.toISOString().split("T")[0]})}for(let r=1;r<=p;r++){let l=new Date(x,u,r);e.push({date:l,isCurrentMonth:!0,dateKey:l.toISOString().split("T")[0]})}let r=42-e.length;for(let l=1;l<=r;l++){let r=new Date(x,u+1,l);e.push({date:r,isCurrentMonth:!1,dateKey:r.toISOString().split("T")[0]})}return e},[x,u,p,C]),S=new Date().toISOString().split("T")[0],D=c&&w[c]||[];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{i(new Date(x,u-1,1)),d(null)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(h.Z,{className:"w-5 h-5",style:{color:"var(--text-secondary)"}})}),(0,s.jsxs)("h2",{className:"text-lg font-semibold min-w-[180px] text-center",style:{color:"var(--text-primary)"},children:[N[u]," ",x]}),(0,s.jsx)("button",{onClick:()=>{i(new Date(x,u+1,1)),d(null)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(y.Z,{className:"w-5 h-5",style:{color:"var(--text-secondary)"}})})]}),(0,s.jsx)("button",{onClick:()=>{i(new Date),d(null)},className:"px-3 py-1.5 rounded-lg text-sm font-medium",style:{backgroundColor:"var(--primary-100)",color:"var(--primary-700)"},children:"Hoje"})]}),(0,s.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{borderColor:"var(--border-light)"},children:[(0,s.jsx)("div",{className:"grid grid-cols-7 border-b",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:f.map(e=>(0,s.jsx)("div",{className:"py-3 text-center text-sm font-medium",style:{color:"var(--text-tertiary)"},children:e},e))}),(0,s.jsx)("div",{className:"grid grid-cols-7",children:k.map((e,r)=>{let l=w[e.dateKey]||[],a=e.dateKey===S,o=e.dateKey===c,n=l.length>0;return(0,s.jsxs)("button",{onClick:()=>d(n?e.dateKey:null),className:"\n                  relative min-h-[80px] p-2 border-b border-r text-left transition-colors\n                  ".concat(e.isCurrentMonth?"":"opacity-40","\n                  ").concat(n?"cursor-pointer hover:bg-gray-50":"cursor-default","\n                  ").concat(o?"bg-primary-50":"","\n                "),style:{borderColor:"var(--border-light)"},children:[(0,s.jsx)("span",{className:"\n                    inline-flex items-center justify-center w-7 h-7 rounded-full text-sm font-medium\n                    ".concat(a?"bg-primary-500 text-white":"","\n                  "),style:{color:a?void 0:"var(--text-primary)"},children:e.date.getDate()}),l.length>0&&(0,s.jsxs)("div",{className:"mt-1 space-y-1",children:[l.slice(0,3).map((e,r)=>{let l=j[e.status]||j.scheduled;return(0,s.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded text-xs truncate",style:{backgroundColor:l.bgColor,color:l.color},children:[e.platforms[0]&&b[e.platforms[0]]&&t.createElement(b[e.platforms[0]],{className:"w-3 h-3 flex-shrink-0"}),(0,s.jsxs)("span",{className:"truncate",children:[e.copy.substring(0,15),"..."]})]},e.id)}),l.length>3&&(0,s.jsxs)("span",{className:"text-xs pl-1",style:{color:"var(--text-tertiary)"},children:["+",l.length-3," mais"]})]})]},r)})})]}),(0,s.jsx)(m.M,{children:c&&D.length>0&&(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"rounded-xl border p-4",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,s.jsxs)("h3",{className:"font-medium mb-3",style:{color:"var(--text-primary)"},children:[new Date(c).toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"}),(0,s.jsxs)("span",{className:"ml-2 text-sm font-normal",style:{color:"var(--text-tertiary)"},children:["(",D.length," post",D.length>1?"s":"",")"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:D.map(e=>{let r=j[e.status]||j.scheduled;return(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border",style:{borderColor:"var(--border-light)",backgroundColor:"var(--bg-secondary)"},children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:r.bgColor,color:r.color},children:r.label}),a&&e.client_name&&(0,s.jsx)("span",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:e.client_name})]}),(0,s.jsx)("p",{className:"text-sm line-clamp-2",style:{color:"var(--text-primary)"},children:e.copy}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:e.platforms.map(e=>{let r=b[e];return r?(0,s.jsx)(r,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}},e):null})}),(0,s.jsxs)("span",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:[(0,s.jsx)(g.Z,{className:"w-3 h-3 inline mr-1"}),new Date(e.scheduled_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]}),l&&(0,s.jsx)("button",{onClick:()=>l(e),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(v.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}})})]},e.id)})})]})}),(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-4 text-xs",style:{color:"var(--text-tertiary)"},children:Object.entries(j).slice(0,4).map(e=>{let[r,l]=e;return(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"w-3 h-3 rounded",style:{backgroundColor:l.bgColor,border:"1px solid ".concat(l.color)}}),l.label]},r)})})]})}function w(){let e=(0,a.useParams)().clientId,[r,l]=(0,t.useState)(!0),[m,x]=(0,t.useState)([]),[u,p]=(0,t.useState)("all");(0,t.useEffect)(()=>{h()},[e]);let h=async()=>{l(!0);try{let r=await fetch("/api/admin/social/publish?client_id=".concat(e)),l=await r.json();r.ok&&x(l.posts||[])}catch(e){console.error("Error loading posts:",e),n.Am.error("Erro ao carregar posts")}finally{l(!1)}},y=m.filter(e=>"all"===u||e.status===u);return r?(0,s.jsx)("div",{className:"min-h-[80vh] flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(i.Z,{className:"w-8 h-8 animate-spin",style:{color:"var(--primary-500)"}}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Carregando calend\xe1rio..."})]})}):(0,s.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--primary-50)"},children:(0,s.jsx)(c.Z,{className:"w-7 h-7",style:{color:"var(--primary-500)"}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Calend\xe1rio de Posts"}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Visualize todos os seus posts agendados e publicados"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}}),(0,s.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"px-3 py-2 rounded-xl border text-sm",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},children:[(0,s.jsx)("option",{value:"all",children:"Todos os posts"}),(0,s.jsx)("option",{value:"scheduled",children:"Apenas agendados"}),(0,s.jsx)("option",{value:"published",children:"Apenas publicados"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Total de posts",value:m.length,color:"var(--primary-500)"},{label:"Agendados",value:m.filter(e=>"scheduled"===e.status).length,color:"var(--info-500)"},{label:"Publicados",value:m.filter(e=>"published"===e.status).length,color:"var(--success-500)"}].map(e=>(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border p-4",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,s.jsx)("p",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:e.label}),(0,s.jsx)("p",{className:"text-2xl font-bold mt-1",style:{color:e.color},children:e.value})]},e.label))}),(0,s.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border p-6",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:(0,s.jsx)(C,{posts:y,onViewPost:e=>{n.Am.info("Visualizando: ".concat(e.copy.substring(0,50),"..."))}})})]})})}}},function(e){e.O(0,[2882,4438,9741,2971,2117,1744],function(){return e(e.s=50147)}),_N_E=e.O()}]);