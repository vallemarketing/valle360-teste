(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{2403:function(e,t,s){Promise.resolve().then(s.bind(s,51105))},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var r=s(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:m,iconNode:u,...x}=e;return(0,r.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:s,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",d),...!m&&!o(x)&&{"aria-hidden":"true"},...x},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:o,...c}=s;return(0,r.createElement)(d,{ref:i,iconNode:t,className:n("lucide-".concat(a(l(e))),"lucide-".concat(e),o),...c})});return s.displayName=l(e),s}},30401:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},44794:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},15868:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},51105:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(57437),a=s(2265),i=s(95452),l=s(99397),n=s(44794),o=s(30401),c=s(15868),d=s(18930),m=s(14438);function u(){let[e,t]=(0,a.useState)([]),[s,u]=(0,a.useState)(!0),[x,g]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),f=(0,i.createClientComponentClient)();(0,a.useEffect)(()=>{v()},[]);let v=async()=>{u(!0);let{data:e,error:s}=await f.from("services").select("*").order("name");s?m.Am.error("Erro ao carregar servi\xe7os"):t(e||[]),u(!1)},b=async e=>{e.preventDefault();let t=new FormData(e.currentTarget),s=String(t.get("deliverables")||"").trim(),r={};if(s)try{r=JSON.parse(s)}catch(e){m.Am.error("Entreg\xe1veis inv\xe1lidos. Use JSON v\xe1lido.");return}let a={name:t.get("name"),description:t.get("description"),base_price:parseFloat(t.get("base_price")||"0"),billing_cycle:t.get("billing_cycle"),deliverables:r,active:!0};if(h){let{error:e}=await f.from("services").update(a).eq("id",h.id);e?m.Am.error("Erro ao atualizar"):m.Am.success("Servi\xe7o atualizado!")}else{let{error:e}=await f.from("services").insert(a);e?m.Am.error("Erro ao criar"):m.Am.success("Servi\xe7o criado!")}g(!1),p(null),v()},y=async e=>{if(!confirm("Tem certeza?"))return;let{error:t}=await f.from("services").delete().eq("id",e);t?m.Am.error("Erro ao deletar"):(m.Am.success("Servi\xe7o removido"),v())};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Cat\xe1logo de Servi\xe7os"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Defina os produtos e entreg\xe1veis padr\xe3o da ag\xeancia."})]}),(0,r.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Novo Servi\xe7o"]})]}),s?(0,r.jsx)("div",{className:"text-center py-12",children:"Carregando..."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("div",{className:"p-3 bg-indigo-50 text-indigo-600 rounded-lg",children:(0,r.jsx)(n.Z,{className:"w-6 h-6"})}),(0,r.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium uppercase",children:e.billing_cycle})]}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.name}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-baseline gap-1 mb-6",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["R$ ",e.base_price.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsxs)("span",{className:"text-gray-400 text-sm",children:["/ ","monthly"===e.billing_cycle?"m\xeas":"un"]})]}),(0,r.jsxs)("div",{className:"space-y-2 border-t pt-4",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Entreg\xe1veis:"}),Object.entries(e.deliverables).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 text-green-500"}),String(s),"x ",t]},t)})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-3 border-t flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>{p(e),g(!0)},className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>y(e.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,r.jsx)(d.Z,{className:"w-4 h-4"})})]})]},e.id))}),x&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6 shadow-xl",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:h?"Editar Servi\xe7o":"Novo Servi\xe7o"}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Servi\xe7o"}),(0,r.jsx)("input",{name:"name",defaultValue:null==h?void 0:h.name,required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ex: Gest\xe3o de Redes Sociais"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{name:"description",defaultValue:null==h?void 0:h.description,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"O que est\xe1 incluso..."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pre\xe7o Base (R$)"}),(0,r.jsx)("input",{name:"base_price",type:"number",step:"0.01",defaultValue:null==h?void 0:h.base_price,required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciclo"}),(0,r.jsxs)("select",{name:"billing_cycle",defaultValue:(null==h?void 0:h.billing_cycle)||"monthly",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,r.jsx)("option",{value:"monthly",children:"Mensal"}),(0,r.jsx)("option",{value:"quarterly",children:"Trimestral"}),(0,r.jsx)("option",{value:"yearly",children:"Anual"}),(0,r.jsx)("option",{value:"one_time",children:"\xdanico"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entreg\xe1veis (JSON)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("textarea",{name:"deliverables",defaultValue:JSON.stringify((null==h?void 0:h.deliverables)||{videos:4,posts:12},null,2),rows:4,className:"w-full px-3 py-2 border rounded-lg font-mono text-sm bg-gray-50 focus:ring-2 focus:ring-indigo-500"}),(0,r.jsx)("div",{className:"absolute top-2 right-2 text-xs text-gray-400",children:"JSON"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Use formato JSON: ",'{"videos": 4, "posts": 12}']})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{g(!1),p(null)},className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50 text-gray-700",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Salvar"})]})]})]})})]})})}}},function(e){e.O(0,[4609,2724,4438,5452,2971,2117,1744],function(){return e(e.s=2403)}),_N_E=e.O()}]);