(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6136],{38601:function(e,t,a){Promise.resolve().then(a.bind(a,18150))},33327:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},31047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},41671:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},78867:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},95252:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},87414:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},29985:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},89345:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},82718:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},68919:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},82023:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},70525:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},95805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},18150:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var s=a(57437),i=a(2265),r=a(5526),l=a(91723),n=a(95805),c=a(89345),o=a(41671),d=a(95252),m=a(99388),x=a(87414),h=a(82023),u=a(70525),p=a(31047),g=a(33327),y=a(78867),f=a(82718),b=a(29985),j=a(68919),N=a(26892);function w(){let[e,t]=(0,i.useState)(null),[a,w]=(0,i.useState)([]),[k,v]=(0,i.useState)(!0),[_,Z]=(0,i.useState)(!1);(0,i.useEffect)(()=>{C()},[]);let C=async()=>{try{let{data:{user:e}}=await r.supabase.auth.getUser();if(!e)return;let{data:a}=await r.supabase.from("employees").select("id").eq("user_id",e.id).single();if(!a)return;let{data:s}=await r.supabase.from("employee_referral_program").select("*").eq("employee_id",a.id).single();if(!s){let{data:e}=await r.supabase.rpc("create_employee_referral_program",{p_employee_id:a.id});if(e){let{data:e}=await r.supabase.from("employee_referral_program").select("*").eq("employee_id",a.id).single();s=e}}let{data:i}=await r.supabase.from("employee_referrals").select("*").eq("employee_id",a.id).order("referred_at",{ascending:!1});t(s),w(i||[])}catch(e){console.error("Erro ao carregar programa:",e)}finally{v(!1)}},I=()=>{(null==e?void 0:e.referral_code)&&(navigator.clipboard.writeText(e.referral_code),Z(!0),setTimeout(()=>Z(!1),2e3))},E=async t=>{if(!(null==e?void 0:e.referral_code))return;let a="\uD83C\uDF81 Quer transformar seu marketing com IA? Use meu cupom exclusivo ".concat(e.referral_code," e ganhe 10% de desconto! Entre em contato com a Valle 360: https://valle360.com");"whatsapp"===t?window.open("https://wa.me/?text=".concat(encodeURIComponent(a)),"_blank"):"email"===t&&window.open("mailto:?subject=Indica\xe7\xe3o Valle 360&body=".concat(encodeURIComponent(a)),"_blank");try{let{data:{user:e}}=await r.supabase.auth.getUser();if(!e)return;let{data:a}=await r.supabase.from("employees").select("id").eq("user_id",e.id).single();a&&await r.supabase.rpc("track_referral_share",{p_employee_id:a.id,p_channel:t})}catch(e){console.error("Erro ao registrar compartilhamento:",e)}},M=e=>{let t={pending:{label:"Em Negocia\xe7\xe3o",color:"bg-yellow-100 text-yellow-800",icon:l.Z},qualified:{label:"Lead Qualificado",color:"bg-blue-100 text-blue-800",icon:n.Z},proposal_sent:{label:"Proposta Enviada",color:"bg-purple-100 text-purple-800",icon:c.Z},contract_signed:{label:"Contrato Assinado",color:"bg-green-100 text-green-800",icon:o.Z},paid:{label:"Comiss\xe3o Paga",color:"bg-green-100 text-green-800",icon:d.Z},cancelled:{label:"Cancelado",color:"bg-red-100 text-red-800",icon:m.Z},expired:{label:"Expirado",color:"bg-gray-100 text-gray-800",icon:m.Z}},a=t[e]||t.pending,i=a.icon;return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ".concat(a.color),children:[(0,s.jsx)(i,{className:"w-3 h-3"}),a.label]})};return k?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4370d1] mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando programa..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsx)(N.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-8 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8"}),"Programa de Fidelidade"]}),(0,s.jsx)("p",{className:"text-white/90",children:"Indique clientes e ganhe 10% do valor de cada contrato!"})]}),(0,s.jsx)(h.Z,{className:"w-16 h-16 opacity-50"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(N.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,s.jsx)(n.Z,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsx)(u.Z,{className:"w-6 h-6 text-green-600"})]}),(0,s.jsx)("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Total Indicado"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==e?void 0:e.times_used)||0}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"clientes"})]}),(0,s.jsxs)(N.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,s.jsx)(d.Z,{className:"w-6 h-6 text-green-600"})}),(0,s.jsx)(o.Z,{className:"w-6 h-6 text-green-600"})]}),(0,s.jsx)("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Total Ganho"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["R$ ",((null==e?void 0:e.total_earned)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"pago em sal\xe1rio"})]}),(0,s.jsxs)(N.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,s.jsx)(l.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,s.jsx)(p.Z,{className:"w-6 h-6 text-yellow-600"})]}),(0,s.jsx)("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Pr\xf3ximo Pagamento"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["R$ ",((null==e?void 0:e.pending_amount)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date().toLocaleDateString("pt-BR",{month:"long",year:"numeric"})})]})]}),(0,s.jsxs)(N.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-8 shadow-sm border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"w-7 h-7 text-[#4370d1]"}),"Seu Cupom Exclusivo"]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-[#0f1b35] to-[#4370d1] rounded-2xl p-8 text-white mb-6",children:[(0,s.jsx)("p",{className:"text-white/80 text-sm mb-3",children:"SEU C\xd3DIGO DE INDICA\xc7\xc3O:"}),(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white/10 rounded-xl p-4 backdrop-blur-sm mb-6",children:[(0,s.jsx)("p",{className:"text-3xl font-bold tracking-wider",children:null==e?void 0:e.referral_code}),(0,s.jsx)("button",{onClick:I,className:"bg-white/20 hover:bg-white/30 p-3 rounded-lg transition-all flex items-center gap-2",children:_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"text-sm",children:"Copiado!"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"text-sm",children:"Copiar"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>E("whatsapp"),className:"bg-white/10 hover:bg-white/20 p-4 rounded-xl transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"WhatsApp"})]}),(0,s.jsxs)("button",{onClick:()=>E("email"),className:"bg-white/10 hover:bg-white/20 p-4 rounded-xl transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Email"})]}),(0,s.jsxs)("button",{onClick:I,className:"bg-white/10 hover:bg-white/20 p-4 rounded-xl transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Copiar Link"})]}),(0,s.jsxs)("button",{onClick:()=>{},className:"bg-white/10 hover:bg-white/20 p-4 rounded-xl transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(j.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Mais"})]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 rounded-xl p-6 border-2 border-blue-100",children:[(0,s.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 text-blue-600"}),"Como Funciona"]}),(0,s.jsxs)("ol",{className:"space-y-3 text-gray-700",children:[(0,s.jsxs)("li",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,s.jsx)("span",{children:"Compartilhe seu cupom exclusivo com empresas interessadas em marketing digital"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,s.jsx)("span",{children:"O cliente menciona seu cupom durante o fechamento do contrato"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),(0,s.jsxs)("span",{children:["Voc\xea recebe ",(0,s.jsx)("strong",{children:"10% do valor total do contrato"})]})]}),(0,s.jsxs)("li",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),(0,s.jsx)("span",{children:"Pagamento autom\xe1tico no seu sal\xe1rio do pr\xf3ximo m\xeas \uD83D\uDCB0"})]})]})]})]}),(0,s.jsxs)(N.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Hist\xf3rico de Indica\xe7\xf5es"}),a.length>0?(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)("div",{className:"p-5 bg-gray-50 rounded-xl border border-gray-200 hover:border-gray-300 transition-all",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:e.client_name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.client_email}),e.client_phone&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.client_phone})]}),M(e.status)]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Valor do Contrato"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.contract_value?"R$ ".concat(e.contract_value.toLocaleString("pt-BR",{minimumFractionDigits:2})):"Aguardando"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Sua Comiss\xe3o (10%)"}),(0,s.jsx)("p",{className:"text-lg font-bold text-green-600",children:e.commission_amount?"R$ ".concat(e.commission_amount.toLocaleString("pt-BR",{minimumFractionDigits:2})):"A calcular"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"paid"===e.status?"Pago em":"contract_signed"===e.status?"Pagamento em":"Indicado em"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:e.commission_paid_at?new Date(e.commission_paid_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):e.payment_month?e.payment_month:new Date(e.referred_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"})})]})]})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(n.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg mb-2",children:"Nenhuma indica\xe7\xe3o ainda"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Compartilhe seu cupom e comece a ganhar!"})]})]})]})})}},5526:function(e,t,a){"use strict";a.r(t),a.d(t,{supabase:function(){return l}});var s=a(62724);let i="https://ikjgsqtykkhqimypacro.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";i&&r||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let l=(0,s.eI)(i||"https://setup-missing.supabase.co",r||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[2882,4609,2724,2971,2117,1744],function(){return e(e.s=38601)}),_N_E=e.O()}]);