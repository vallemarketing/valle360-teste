(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6290:function(e,s,r){Promise.resolve().then(r.bind(r,78206))},94766:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});let a=(0,r(79205).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},40875:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});let a=(0,r(79205).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},73247:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});let a=(0,r(79205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},99376:function(e,s,r){"use strict";var a=r(35475);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},78206:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return v}});var a=r(57437),i=r(2265),n=r(99376),t=r(91230),o=r(12381),c=r(15291),l=r(73247),d=r(94766);function u(e){let{currentRole:s,availableRoles:r,userName:u,userAvatar:m}=e,g=(0,n.useRouter)(),h=(0,n.useSearchParams)(),[f,p]=(0,i.useState)(!1),b=t.se[s];return(0,a.jsxs)("header",{className:"sticky top-0 z-50 w-full border-b bg-white dark:bg-gray-900 shadow-sm",children:[(0,a.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#1672d6] to-[#001533] flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"V"})}),(0,a.jsx)("span",{className:"font-bold text-lg hidden sm:inline",children:"Valle 360"})]}),(0,a.jsx)("div",{className:"h-8 w-px bg-gray-200 dark:bg-gray-700"}),(0,a.jsxs)(c.Ph,{value:s,onValueChange:e=>{(0,t.Iu)(e);let s=new URLSearchParams(h);s.set("role",e),g.push("/dashboard?".concat(s.toString()))},children:[(0,a.jsx)(c.i4,{className:"w-[180px] sm:w-[220px]","aria-label":"Selecionar departamento",children:(0,a.jsx)(c.ki,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b.color},"aria-hidden":"true"}),(0,a.jsx)("span",{className:"truncate",children:b.label})]})})}),(0,a.jsx)(c.Bw,{children:r.map(e=>{let s=t.se[e];return(0,a.jsx)(c.Ql,{value:e,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color},"aria-hidden":"true"}),(0,a.jsx)("span",{children:s.label})]})},e)})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>p(!f),"aria-label":"Buscar",children:(0,a.jsx)(l.Z,{className:"w-5 h-5"})}),(0,a.jsx)(o.z,{variant:"ghost",size:"icon","aria-label":"Notifica\xe7\xf5es",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})}),m?(0,a.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:(0,a.jsx)("img",{src:m,alt:u||"Usu\xe1rio",className:"w-full h-full object-cover"})}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:(null==u?void 0:u.charAt(0))||"U"})})]})]}),f&&(0,a.jsx)("div",{className:"border-t bg-gray-50 dark:bg-gray-800 p-4",children:(0,a.jsx)("input",{type:"search",placeholder:"Buscar...",className:"w-full px-4 py-2 rounded-md border bg-white dark:bg-gray-900",autoFocus:!0})})]})}var m=r(5526),g=r(73795);function h(){return(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"},e))}),(0,a.jsx)("div",{className:"h-96 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]})}function f(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),[r,o]=(0,i.useState)(null),[c,l]=(0,i.useState)([]),[d,g]=(0,i.useState)(null),[f,b]=(0,i.useState)(!0);async function v(){try{let{data:{user:s}}=await m.supabase.auth.getUser();if(!s){e.push("/login");return}let{data:r,error:a}=await m.supabase.from("user_profiles").select("*").eq("id",s.id).maybeSingle();if(a)throw a;g(r);let i=(0,t.Jm)(r);l(i),0===i.length&&e.push("/unauthorized")}catch(e){console.error("Erro ao carregar perfil:",e)}finally{b(!1)}}return((0,i.useEffect)(()=>{v()},[]),(0,i.useEffect)(()=>{c.length>0&&function(){let r=s.get("role");if(r&&c.includes(r)){o(r);return}let a=(0,t.eZ)();if(a&&c.includes(a)){o(a);let r=new URLSearchParams(s);r.set("role",a),e.replace("/dashboard?".concat(r.toString()));return}let i=(0,t.sH)(c);o(i);let n=new URLSearchParams(s);n.set("role",i),e.replace("/dashboard?".concat(n.toString()))}()},[s,c]),f||!r)?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)("div",{className:"h-16 bg-white dark:bg-gray-900 border-b animate-pulse"}),(0,a.jsx)(h,{})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(u,{currentRole:r,availableRoles:c,userName:null==d?void 0:d.full_name,userAvatar:null==d?void 0:d.avatar_url}),(0,a.jsx)("main",{className:"container mx-auto p-6",children:(0,a.jsx)(p,{role:r})})]})}function p(e){let{role:s}=e;return({social:(0,a.jsx)(g.tL,{}),video:(0,a.jsx)(g.QG,{}),design:(0,a.jsx)(g.yC,{}),web:(0,a.jsx)(g.Tk,{}),sales:(0,a.jsx)(g.iC,{}),finance:(0,a.jsx)(g.cV,{}),hr:(0,a.jsx)(g.EM,{}),head_marketing:(0,a.jsx)(g.rx,{}),admin:(0,a.jsx)(g._N,{})})[s]||(0,a.jsx)(b,{role:s})}function b(e){let{role:s}=e;return(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:["Dashboard ",s.toUpperCase()]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"View em desenvolvimento"})]})}function v(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(h,{}),children:(0,a.jsx)(f,{})})}},15291:function(e,s,r){"use strict";r.d(s,{Bw:function(){return m},Ph:function(){return l},Ql:function(){return g},i4:function(){return d},ki:function(){return u}});var a=r(57437),i=r(2265),n=r(93448),t=r(40875);let o=i.createContext(null);function c(){let e=i.useContext(o);if(!e)throw Error("Select components must be used within Select");return e}function l(e){let{value:s,defaultValue:r="",onValueChange:n,children:t}=e,[c,l]=i.useState(!1),[d,u]=i.useState(r);return(0,a.jsx)(o.Provider,{value:{value:void 0!==s?s:d,onValueChange:e=>{void 0===s&&u(e),null==n||n(e)},open:c,setOpen:l},children:(0,a.jsx)("div",{className:"relative",children:t})})}function d(e){let{className:s,children:r,...i}=e,{open:o,setOpen:l}=c();return(0,a.jsxs)("button",{type:"button",className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm","ring-offset-white placeholder:text-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","dark:border-gray-700 dark:bg-gray-900 dark:ring-offset-gray-950",s),onClick:()=>l(!o),...i,children:[r,(0,a.jsx)(t.Z,{className:"h-4 w-4 opacity-50"})]})}function u(e){let{children:s,placeholder:r}=e,{value:i}=c();return!i&&r?(0,a.jsx)("span",{className:"text-gray-500",children:r}):(0,a.jsx)(a.Fragment,{children:s})}function m(e){let{children:s}=e,{open:r,setOpen:t}=c(),o=i.useRef(null);return(i.useEffect(()=>{function e(e){o.current&&!o.current.contains(e.target)&&t(!1)}if(r)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r,t]),r)?(0,a.jsx)("div",{ref:o,className:(0,n.cn)("absolute z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white","text-gray-950 shadow-md animate-in fade-in-80 mt-1 w-full","dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50"),children:(0,a.jsx)("div",{className:"p-1 max-h-96 overflow-auto",children:s})}):null}function g(e){let{value:s,children:r}=e,{value:i,onValueChange:t,setOpen:o}=c();return(0,a.jsx)("div",{className:(0,n.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none","hover:bg-gray-100 focus:bg-gray-100 dark:hover:bg-gray-800 dark:focus:bg-gray-800",i===s&&"bg-gray-100 dark:bg-gray-800"),onClick:()=>{t(s),o(!1)},children:r})}},91230:function(e,s,r){"use strict";r.d(s,{Iu:function(){return t},Jm:function(){return i},eZ:function(){return o},sH:function(){return n},se:function(){return a}});let a={social:{id:"social",label:"Social Media",icon:"Instagram",color:"#E1306C",description:"Gerenciamento de redes sociais, posts e engajamento",permissions:["view_social_posts","create_social_posts","edit_social_posts","delete_social_posts","view_social_metrics"]},video:{id:"video",label:"Videomaker",icon:"Video",color:"#FF0000",description:"Produ\xe7\xe3o de v\xeddeos, grava\xe7\xf5es e edi\xe7\xf5es",permissions:["view_video_projects","create_video_projects","edit_video_projects","view_recording_requests","approve_recording_requests"]},design:{id:"design",label:"Designer Gr\xe1fico",icon:"Palette",color:"#7B68EE",description:"Cria\xe7\xe3o de pe\xe7as gr\xe1ficas, briefings e aprova\xe7\xf5es",permissions:["view_design_briefings","create_design_briefings","edit_design_briefings","view_design_assets","create_design_assets","approve_design_assets"]},web:{id:"web",label:"Web Designer",icon:"Globe",color:"#4169E1",description:"Desenvolvimento web, manuten\xe7\xe3o de sites e performance",permissions:["view_web_projects","create_web_projects","edit_web_projects","view_web_tickets","create_web_tickets","resolve_web_tickets","view_web_metrics"]},sales:{id:"sales",label:"Comercial",icon:"TrendingUp",color:"#32CD32",description:"Pipeline de vendas, leads e negocia\xe7\xf5es",permissions:["view_leads","create_leads","edit_leads","view_deals","create_deals","edit_deals","view_contracts","create_contracts"]},finance:{id:"finance",label:"Financeiro",icon:"DollarSign",color:"#FFD700",description:"Gest\xe3o financeira, cobran\xe7as e pagamentos",permissions:["view_invoices","create_invoices","edit_invoices","view_payments","register_payments","send_billing_notifications"]},hr:{id:"hr",label:"RH",icon:"Users",color:"#FF6347",description:"Recursos humanos, solicita\xe7\xf5es e performance da equipe",permissions:["view_employees","create_employees","edit_employees","view_requests","approve_requests","view_performance"]},head_marketing:{id:"head_marketing",label:"Head de Marketing",icon:"BarChart3",color:"#9370DB",description:"Vis\xe3o estrat\xe9gica consolidada de todos os setores",permissions:["view_all_dashboards","view_strategic_metrics","view_team_performance","view_client_overview"]},admin:{id:"admin",label:"Administrador",icon:"Shield",color:"#1E90FF",description:"Acesso completo a todas as funcionalidades",permissions:["*"]}};function i(e){return({super_admin:["head_marketing","admin","sales","social","video","design","web","finance","hr"],admin:["head_marketing","admin","sales","social","video","design","web","finance","hr"],social_media:["social"],videomaker:["video"],designer:["design"],web_designer:["web"],comercial:["sales"],financeiro:["finance"],rh:["hr"],head_marketing:["head_marketing","sales","social","video","design","web"]})[null==e?void 0:e.user_type]||["head_marketing","sales","social","video","design","web","finance","hr"]}function n(e){for(let s of["head_marketing","admin","sales","social","finance"])if(e.includes(s))return s;return e[0]||"social"}function t(e){localStorage.setItem("preferred_dashboard_role",e)}function o(){return localStorage.getItem("preferred_dashboard_role")}},5526:function(e,s,r){"use strict";r.r(s),r.d(s,{supabase:function(){return t}});var a=r(62724);let i="https://ikjgsqtykkhqimypacro.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";i&&n||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let t=(0,a.eI)(i||"https://setup-missing.supabase.co",n||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[6137,4609,2724,9045,3795,2971,2117,1744],function(){return e(e.s=6290)}),_N_E=e.O()}]);