"use strict";exports.id=53247,exports.ids=[53247],exports.modules={90176:(e,t,r)=>{r.d(t,{t:()=>o});var a=r(54128);function o(){let e="https://ikjgsqtykkhqimypacro.supabase.co",t=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!t)throw Error("Supabase admin n\xe3o configurado (NEXT_PUBLIC_SUPABASE_URL / SUPABASE_SERVICE_ROLE_KEY).");return(0,a.eI)(e,t,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}})}},51547:(e,t,r)=>{r.d(t,{F:()=>_,getProviderStatus:()=>x});var a=r(90176);function o(e){let t=e.match(/\{[\s\S]*\}|\[[\s\S]*\]/);if(!t)throw Error("Resposta n\xe3o cont\xe9m JSON");return JSON.parse(t[0])}function n(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function i(e){return e?Array.isArray(e)?e.map(e=>String(e).trim()).filter(Boolean):"string"==typeof e?[e.trim()].filter(Boolean):[]:[]}async function s(e){try{let t=(0,a.t)();await t.from("audit_logs").insert({user_id:e.userId||null,action:e.action,entity_type:e.entityType||"ai",entity_id:e.entityId||null,old_values:null,new_values:e.newValues,ip_address:null,user_agent:null,created_at:new Date().toISOString()})}catch{}}let l=null;async function c(){if(l&&Date.now()-l.fetchedAt<6e4)return{apiKey:l.apiKey,config:l.config};let e=null,t=null;try{let r=(0,a.t)(),{data:o}=await r.from("integration_configs").select("api_key, config").eq("integration_id","openrouter").single();e=o?.api_key||null,t=o?.config||null}catch{}return e=e||process.env.OPENROUTER_API_KEY||null,l={fetchedAt:Date.now(),apiKey:e,config:t},{apiKey:e,config:t}}function u(e){return e?"string"==typeof e?n(e):"object"==typeof e?e:null:null}async function d(e="general"){let t=process.env.OPENROUTER_MODEL;if(t)return[t].filter(Boolean);let{config:r}=await c(),a=r?.model?String(r.model).trim():"";if(a)return[a];let o=n(process.env.OPENROUTER_MODEL_POLICY_JSON),s=u(r?.model_policy)||u(r?.modelPolicy)||o||{default:["openrouter/auto"],general:["openrouter/auto"],analysis:["anthropic/claude-3.5-sonnet","openrouter/auto"],strategy:["anthropic/claude-3.5-sonnet","openrouter/auto"],kanban_insights:["anthropic/claude-3.5-sonnet","openrouter/auto"],kanban_message:["openai/gpt-4o","openrouter/auto"],copywriting:["openai/gpt-4o","openrouter/auto"],sales:["openai/gpt-4o","openrouter/auto"],sentiment:["google/gemini-1.5-pro","openrouter/auto"],classification:["google/gemini-1.5-pro","openrouter/auto"],hr:["anthropic/claude-3.5-sonnet","openrouter/auto"]},l=[...i(s[e]),...i(s.default),"openrouter/auto"],d=new Set,p=[];for(let e of l){let t=String(e).trim();!t||d.has(t)||(d.add(t),p.push(t))}return p.length?p:["openrouter/auto"]}async function p(){try{let e=(0,a.t)(),{data:t}=await e.from("integration_configs").select("api_key").eq("integration_id","anthropic").single();if(t?.api_key)return t.api_key}catch{}return process.env.ANTHROPIC_API_KEY||null}async function m(){try{let e=(0,a.t)(),{data:t}=await e.from("integration_configs").select("api_key").eq("integration_id","openai").single();if(t?.api_key)return t.api_key}catch{}return process.env.OPENAI_API_KEY||null}async function g(){try{let e=(0,a.t)(),{data:t}=await e.from("integration_configs").select("api_key").eq("integration_id","gemini").single();if(t?.api_key)return t.api_key}catch{}return process.env.GOOGLE_GEMINI_API_KEY||process.env.GOOGLE_CLOUD_API_KEY||null}async function f(e,t,r){let a=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json","HTTP-Referer":process.env.NEXT_PUBLIC_APP_URL||"http://localhost","X-Title":"Valle 360"},body:JSON.stringify({model:t,messages:e.messages,temperature:e.temperature??.7,max_tokens:e.maxTokens??1024,response_format:e.json?{type:"json_object"}:void 0})}),o=await a.text();if(!a.ok)throw Error(`OpenRouter error (${a.status}): ${o.slice(0,500)}`);let n=JSON.parse(o),i=n?.choices?.[0]?.message?.content||"";return{provider:"openrouter",model:n?.model||t,text:i,usage:n?.usage}}async function h(e){let{apiKey:t}=await c();if(!t)throw Error("OPENROUTER_API_KEY n\xe3o configurada");let r=await d(e.task),a=Date.now(),n=[];for(let l of r)try{let n=await f(e,l,t);return await s({userId:e.actorUserId||null,action:"ai.request",entityType:e.entityType||"ai",entityId:e.entityId||null,newValues:{provider:n.provider,model:n.model,ok:!0,ms:Date.now()-a,task:e.task||"general",correlation_id:e.correlationId,json:!!e.json,openrouter_models_tried:r}}),e.json&&(n.json=o(n.text)),n}catch(t){var i;let e=t?.message||String(t);if(n.push({model:l,error:e}),!(!(i=function(e){let t=e.match(/OpenRouter error \\((\\d+)\\):/);if(!t?.[1])return null;let r=Number(t[1]);return Number.isFinite(r)?r:null}(e))||401!==i&&403!==i&&(429===i||408===i||i>=500&&i<=599||400===i&&/model|not found|no such|invalid/i.test(e))))break}let l=n.map(e=>`${e.model}: ${e.error}`).join(" | ");throw Error(`OpenRouter falhou em ${n.length} tentativa(s). ${l}`)}async function v(e){let t=await p();if(!t)throw Error("ANTHROPIC_API_KEY n\xe3o configurada");let r=function(e="general"){return process.env.ANTHROPIC_MODEL||"claude-3-5-sonnet-20241022"}(e.task),a=Date.now(),n=e.messages.find(e=>"system"===e.role)?.content,i=e.messages.filter(e=>"system"!==e.role).map(e=>`${e.role.toUpperCase()}: ${e.content}`).join("\n\n"),l=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:r,max_tokens:e.maxTokens??1024,temperature:e.temperature??.7,system:e.json?`${n||""}

Responda APENAS com um JSON v\xe1lido, sem texto extra.`:n,messages:[{role:"user",content:i}]})}),c=await l.text();if(!l.ok)throw Error(`Claude error (${l.status}): ${c.slice(0,500)}`);let u=JSON.parse(c),d=u?.content?.[0]?.text||"",m={provider:"claude",model:r,text:d,usage:u?.usage};return await s({userId:e.actorUserId||null,action:"ai.request",entityType:e.entityType||"ai",entityId:e.entityId||null,newValues:{provider:m.provider,model:m.model,ok:!0,ms:Date.now()-a,task:e.task||"general",correlation_id:e.correlationId,json:!!e.json}}),e.json&&(m.json=o(d)),m}async function y(e){let t=await m();if(!t)throw Error("OPENAI_API_KEY n\xe3o configurada");let r=function(e="general"){return process.env.OPENAI_MODEL||"gpt-4o-mini"}(e.task),a=Date.now(),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:r,messages:e.messages,temperature:e.temperature??.7,max_tokens:e.maxTokens??1024,response_format:e.json?{type:"json_object"}:void 0})}),i=await n.text();if(!n.ok)throw Error(`OpenAI error (${n.status}): ${i.slice(0,500)}`);let l=JSON.parse(i),c=l?.choices?.[0]?.message?.content||"",u={provider:"openai",model:l?.model||r,text:c,usage:l?.usage};return await s({userId:e.actorUserId||null,action:"ai.request",entityType:e.entityType||"ai",entityId:e.entityId||null,newValues:{provider:u.provider,model:u.model,ok:!0,ms:Date.now()-a,task:e.task||"general",correlation_id:e.correlationId,json:!!e.json}}),e.json&&(u.json=o(c)),u}async function S(e){let t=await g();if(!t)throw Error("GOOGLE_GEMINI_API_KEY/GOOGLE_CLOUD_API_KEY n\xe3o configurada");let r=function(e="general"){return process.env.GEMINI_MODEL||"gemini-1.5-flash"}(e.task),a=Date.now(),n=e.messages.find(e=>"system"===e.role)?.content,i=e.messages.filter(e=>"system"!==e.role).map(e=>`${e.role.toUpperCase()}: ${e.content}`).join("\n\n"),l=e.json?`${n||""}

Responda APENAS com um JSON v\xe1lido, sem texto extra.

${i}`:`${n||""}

${i}`,c=`https://generativelanguage.googleapis.com/v1beta/models/${r}:generateContent?key=${encodeURIComponent(t)}`,u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:l}]}],generationConfig:{temperature:e.temperature??.7,maxOutputTokens:e.maxTokens??1024}})}),d=await u.text();if(!u.ok)throw Error(`Gemini error (${u.status}): ${d.slice(0,500)}`);let p=JSON.parse(d),m=p?.candidates?.[0]?.content?.parts?.map(e=>e.text).join("")||"",f={provider:"gemini",model:r,text:m,usage:p?.usageMetadata};return await s({userId:e.actorUserId||null,action:"ai.request",entityType:e.entityType||"ai",entityId:e.entityId||null,newValues:{provider:f.provider,model:f.model,ok:!0,ms:Date.now()-a,task:e.task||"general",correlation_id:e.correlationId,json:!!e.json}}),e.json&&(f.json=o(m)),f}function x(){return{openrouter:!!process.env.OPENROUTER_API_KEY,claude:!!process.env.ANTHROPIC_API_KEY,openai:!!process.env.OPENAI_API_KEY,gemini:!!(process.env.GOOGLE_GEMINI_API_KEY||process.env.GOOGLE_CLOUD_API_KEY)}}async function _(e){let t=e.correlationId||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),r={...e,correlationId:t},a=[];for(let e of[{provider:"openrouter",fn:h},{provider:"claude",fn:v},{provider:"openai",fn:y},{provider:"gemini",fn:S}])try{return await e.fn(r)}catch(n){let o=n?.message||String(n);a.push({provider:e.provider,error:o}),await s({userId:r.actorUserId||null,action:"ai.request_failed",entityType:r.entityType||"ai",entityId:r.entityId||null,newValues:{provider:e.provider,ok:!1,error:o.slice(0,500),task:r.task||"general",correlation_id:t,json:!!r.json}})}let o=a.map(e=>`${e.provider}: ${e.error}`).join(" | ");throw Error(`Falha em todos os provedores. ${o}`)}},53247:(e,t,r)=>{r.d(t,{At:()=>g,De:()=>i,eZ:()=>f,ps:()=>d,pu:()=>p,wK:()=>u,xu:()=>l});var a=r(1926),o=r(51547);let n=`Voc\xea \xe9 o CHRO virtual da Valle 360, uma ag\xeancia de marketing digital.
Seu papel \xe9 desenvolver pessoas, prever turnover e fortalecer a cultura organizacional.

Suas responsabilidades:
1. An\xe1lise de performance e potencial de colaboradores
2. Predi\xe7\xe3o e preven\xe7\xe3o de turnover
3. Planos de carreira e desenvolvimento
4. Recomenda\xe7\xf5es salariais justas
5. Sa\xfade das equipes e cultura

Sempre forne\xe7a:
- An\xe1lises emp\xe1ticas mas objetivas
- Planos de a\xe7\xe3o espec\xedficos
- Considera\xe7\xe3o pelo bem-estar individual e coletivo
- Alinhamento com objetivos do neg\xf3cio

Seja humano, estrat\xe9gico e focado no desenvolvimento das pessoas.`;async function i(){let{data:e}=await a.O.from("user_profiles").select("id, full_name, role, created_at").in("role",["social_media","designer","trafego","video_maker","web_designer","comercial","rh","financeiro"]);if(!e?.length)return[{userId:"emp-1",name:"Maria Silva",role:"social_media",department:"Social Media",performanceScore:92,engagementScore:88,satisfactionScore:85,culturalFitScore:95,growthPotential:"exceptional",turnoverRisk:15,burnoutRisk:25,promotionReadiness:85,salaryCompetitiveness:82,insights:["Alto performer","Pronta para liderar equipe","Excelente fit cultural"],trend:"improving"},{userId:"emp-2",name:"Jo\xe3o Santos",role:"designer",department:"Design",performanceScore:78,engagementScore:65,satisfactionScore:62,culturalFitScore:75,growthPotential:"medium",turnoverRisk:55,burnoutRisk:48,promotionReadiness:35,salaryCompetitiveness:68,insights:["Engajamento baixo - necessita aten\xe7\xe3o","Poss\xedvel sobrecarga","Revisar sal\xe1rio"],trend:"declining"},{userId:"emp-3",name:"Ana Oliveira",role:"trafego",department:"Tr\xe1fego",performanceScore:88,engagementScore:92,satisfactionScore:90,culturalFitScore:88,growthPotential:"high",turnoverRisk:12,burnoutRisk:15,promotionReadiness:70,salaryCompetitiveness:90,insights:["Excelente equil\xedbrio","Candidata a mentora","Manter reconhecimento"],trend:"improving"}];let t=[];for(let a of e){var r;let e=Math.floor(30*Math.random())+70,o=Math.floor(25*Math.random())+75,n=Math.floor(30*Math.random())+70,i=Math.floor((Date.now()-new Date(a.created_at).getTime())/2592e6),l=20;i<6&&(l+=15),n<75&&(l+=20),o<80&&(l+=15);let c=100-(n+o)/2,u="medium";e>=90&&o>=90?u="exceptional":e>=85?u="high":e<75&&(u="low");let d=await s({name:a.full_name||"Colaborador",performance:e,engagement:o,satisfaction:n,tenure:i});t.push({userId:a.id,name:a.full_name||"Colaborador",role:a.role,department:{social_media:"Social Media",designer:"Design",trafego:"Tr\xe1fego",video_maker:"V\xeddeo",web_designer:"Web",comercial:"Comercial",rh:"RH",financeiro:"Financeiro"}[r=a.role]||r,performanceScore:e,engagementScore:o,satisfactionScore:n,culturalFitScore:Math.floor(20*Math.random())+80,growthPotential:u,turnoverRisk:Math.min(100,l),burnoutRisk:Math.min(100,c),promotionReadiness:e>=85&&i>=12?80:40,salaryCompetitiveness:Math.floor(30*Math.random())+70,insights:d,trend:e>85?"improving":e>75?"stable":"declining"})}return t}async function s(e){let t=[];return e.performance>=90&&t.push("Alto performer - considerar para promo\xe7\xe3o ou projetos especiais"),e.engagement<75&&t.push("Engajamento baixo - agendar 1:1 para entender motiva\xe7\xf5es"),e.satisfaction<70&&t.push("Satisfa\xe7\xe3o em queda - identificar causas e agir preventivamente"),e.tenure<3&&t.push("Per\xedodo de adapta\xe7\xe3o - refor\xe7ar onboarding e acompanhamento"),e.tenure>=24&&e.performance>=85&&t.push("Colaborador s\xeanior e dedicado - avaliar reconhecimento especial"),0===t.length&&t.push("Performance est\xe1vel - manter acompanhamento regular"),t}async function l(){let e=await i(),t=[];for(let r of e.filter(e=>e.turnoverRisk>=35)){let e=[];r.satisfactionScore<70&&e.push({factor:"Satisfa\xe7\xe3o baixa",weight:30,description:`Score de ${r.satisfactionScore}% abaixo do ideal`,isMitigatable:!0}),r.engagementScore<75&&e.push({factor:"Engajamento baixo",weight:25,description:"Poss\xedvel desconex\xe3o com objetivos",isMitigatable:!0}),r.salaryCompetitiveness<75&&e.push({factor:"Sal\xe1rio abaixo do mercado",weight:25,description:"Risco de proposta externa",isMitigatable:!0}),r.burnoutRisk>50&&e.push({factor:"Risco de burnout",weight:20,description:"Sobrecarga identificada",isMitigatable:!0});let a=r.turnoverRisk>=70?"critical":r.turnoverRisk>=50?"high":r.turnoverRisk>=35?"medium":"low",o=await c(r,e);t.push({userId:r.userId,name:r.name,department:r.department,probability:r.turnoverRisk,predictedDate:"critical"===a?new Date(Date.now()+5184e6).toISOString():null,riskLevel:a,factors:e,preventiveActions:o,estimatedReplacementCost:45e3})}return t.sort((e,t)=>t.probability-e.probability)}async function c(e,t){let r=[];for(let e of t)switch(e.factor){case"Satisfa\xe7\xe3o baixa":r.push("Agendar conversa individual para entender insatisfa\xe7\xf5es"),r.push("Avaliar mudan\xe7a de projetos ou equipe");break;case"Engajamento baixo":r.push("Envolver em projeto desafiador"),r.push("Reconhecer publicamente contribui\xe7\xf5es recentes");break;case"Sal\xe1rio abaixo do mercado":r.push("Avaliar reajuste salarial"),r.push("Considerar benef\xedcios alternativos");break;case"Risco de burnout":r.push("Redistribuir tarefas imediatamente"),r.push("Oferecer dia de folga ou flexibilidade")}return[...new Set(r)].slice(0,5)}async function u(e,t){let r=(await i()).find(t=>t.userId===e);if(!r)return null;let a={"L\xedder de Social Media":[{name:"Gest\xe3o de equipe",currentLevel:60,requiredLevel:90,gap:30},{name:"Estrat\xe9gia de conte\xfado",currentLevel:80,requiredLevel:95,gap:15},{name:"An\xe1lise de m\xe9tricas",currentLevel:75,requiredLevel:90,gap:15},{name:"Comunica\xe7\xe3o com cliente",currentLevel:70,requiredLevel:90,gap:20}],"Head de Design":[{name:"Lideran\xe7a criativa",currentLevel:65,requiredLevel:95,gap:30},{name:"Design systems",currentLevel:70,requiredLevel:90,gap:20},{name:"Gest\xe3o de projetos",currentLevel:60,requiredLevel:85,gap:25},{name:"Mentoria",currentLevel:50,requiredLevel:85,gap:35}],"Gerente de Tr\xe1fego":[{name:"Estrat\xe9gia multicanal",currentLevel:75,requiredLevel:95,gap:20},{name:"Otimiza\xe7\xe3o de budget",currentLevel:80,requiredLevel:95,gap:15},{name:"Gest\xe3o de equipe",currentLevel:55,requiredLevel:85,gap:30},{name:"Relat\xf3rios executivos",currentLevel:70,requiredLevel:90,gap:20}]}[t]||[{name:"Habilidade t\xe9cnica",currentLevel:70,requiredLevel:90,gap:20},{name:"Lideran\xe7a",currentLevel:50,requiredLevel:85,gap:35},{name:"Comunica\xe7\xe3o",currentLevel:65,requiredLevel:85,gap:20}],o=a.reduce((e,t)=>e+t.gap,0),n=[{title:"Completar treinamento de lideran\xe7a",description:"Curso de fundamentos de gest\xe3o de pessoas",targetDate:new Date(Date.now()+5184e6).toISOString(),completed:!1},{title:"Liderar projeto piloto",description:"Assumir responsabilidade de um projeto menor",targetDate:new Date(Date.now()+10368e6).toISOString(),completed:!1},{title:"Mentorar um colega",description:"Apoiar desenvolvimento de um colega mais novo",targetDate:new Date(Date.now()+15552e6).toISOString(),completed:!1},{title:"Feedback 360\xb0",description:"Coletar e agir sobre feedback da equipe",targetDate:new Date(Date.now()+20736e6).toISOString(),completed:!1}];return{userId:e,employeeName:r.name,currentPosition:r.role,targetPosition:t,timelineMonths:Math.ceil(o/5),currentProgress:25,requiredSkills:a,milestones:n,recommendedTrainings:[{name:"Lideran\xe7a para novos gestores",type:"course",duration:"20 horas",priority:"high",cost:500,expectedImpact:"Fundamentos de gest\xe3o e comunica\xe7\xe3o"},{name:"Mentoria com l\xedder s\xeanior",type:"mentoring",duration:"3 meses",priority:"high",cost:0,expectedImpact:"Aprendizado pr\xe1tico e networking interno"},{name:"Workshop de feedback efetivo",type:"workshop",duration:"4 horas",priority:"medium",cost:200,expectedImpact:"Melhorar comunica\xe7\xe3o com equipe"}],mentorName:"Gestor atual",status:"active"}}async function d(){let e=await i(),t=[],r={social_media:4500,designer:5e3,trafego:5500,video_maker:5500,web_designer:6e3,comercial:5e3,rh:4500,financeiro:5e3};for(let a of e){let e=r[a.role]||4500,o=a.salaryCompetitiveness/100*e,n=1;a.performanceScore>=90?n=1.15:a.performanceScore>=85?n=1.1:a.performanceScore>=80?n=1.05:a.performanceScore<70&&(n=.95);let i=e*n*1,s=(i-o)/o*100;Math.abs(s)>=5&&t.push({userId:a.userId,employeeName:a.name,currentSalary:o,marketAverage:e,recommendedSalary:i,adjustmentPercentage:s,justification:s>10?`Performance excepcional (${a.performanceScore}%) e alto engajamento justificam aumento significativo.`:s>5?`Performance acima da m\xe9dia merece reconhecimento salarial.`:s<-10?`Sal\xe1rio abaixo do mercado - risco de perda para concorr\xeancia.`:s<-5?`Ajuste necess\xe1rio para manter competitividade salarial.`:`Sal\xe1rio alinhado com mercado e performance.`,performanceFactor:n,tenureFactor:1,urgency:s<-15?"high":s<-5?"medium":"low"})}return t.sort((e,t)=>e.adjustmentPercentage-t.adjustmentPercentage)}async function p(){let e=await i(),t=[...new Set(e.map(e=>e.department))],r=[];for(let a of t){let t=e.filter(e=>e.department===a);if(0===t.length)continue;let o=t.reduce((e,t)=>e+t.performanceScore,0)/t.length,n=t.reduce((e,t)=>e+t.engagementScore,0)/t.length,i=t.reduce((e,t)=>e+t.satisfactionScore,0)/t.length,s=t.reduce((e,t)=>e+t.burnoutRisk,0)/t.length,l=[],c=[];n<75&&l.push("Engajamento baixo"),i<70&&l.push("Satisfa\xe7\xe3o em queda"),s>40&&l.push("Risco de burnout elevado"),t.filter(e=>e.turnoverRisk>50).length>0&&l.push("Risco de turnover"),o>=85&&c.push("Alta performance"),n>=85&&c.push("Equipe engajada"),t.filter(e=>"exceptional"===e.growthPotential).length>0&&c.push("Talentos excepcionais"),r.push({department:a,overallScore:Math.round((o+n+i+(100-s))/4),engagementLevel:Math.round(n),collaborationScore:Math.round(20*Math.random()+75),leadershipScore:Math.round(20*Math.random()+70),workloadBalance:Math.round(100-s),developmentOpportunities:Math.round(20*Math.random()+70),issues:l,strengths:c})}return r}async function m(){let e=[],t=await l(),r=await p(),a=await d();for(let r of t.filter(e=>"critical"===e.riskLevel))e.push({id:`turnover-${r.userId}`,type:"turnover_critical",severity:"critical",title:`URGENTE: ${r.name} pode sair em breve`,description:`Risco de ${r.probability}%. Custo de substitui\xe7\xe3o: R$ ${r.estimatedReplacementCost.toLocaleString("pt-BR")}`,employeeId:r.userId,recommendedAction:r.preventiveActions[0]||"Conversa imediata",createdAt:new Date().toISOString()});for(let t of r.filter(e=>e.overallScore<70))e.push({id:`team-${t.department}`,type:"team_health",severity:"high",title:`Equipe ${t.department} precisa de aten\xe7\xe3o`,description:`Score geral: ${t.overallScore}%. Problemas: ${t.issues.join(", ")}`,department:t.department,recommendedAction:"Reuni\xe3o de equipe para diagn\xf3stico",createdAt:new Date().toISOString()});let o=a.filter(e=>e.adjustmentPercentage<-15);return o.length>0&&e.push({id:"salary-gap",type:"salary_competitiveness",severity:"high",title:`${o.length} colaboradores com sal\xe1rio abaixo do mercado`,description:`Risco de perda de talentos. Ajuste total sugerido: R$ ${o.reduce((e,t)=>e+(t.recommendedSalary-t.currentSalary),0).toLocaleString("pt-BR")}/m\xeas`,recommendedAction:"Revis\xe3o salarial urgente",createdAt:new Date().toISOString()}),e.sort((e,t)=>{let r={critical:0,high:1,medium:2,low:3};return r[e.severity]-r[t.severity]})}async function g(){let e=await i(),t=await l(),r=await p(),a=await d(),o=await m(),n=e.reduce((e,t)=>e+t.performanceScore,0)/(e.length||1),s=e.reduce((e,t)=>e+t.engagementScore,0)/(e.length||1),c=t.filter(e=>"high"===e.riskLevel||"critical"===e.riskLevel).length;return{kpis:{totalEmployees:e.length,averagePerformance:Math.round(n),averageEngagement:Math.round(s),turnoverRate:c/(e.length||1)*100,openPositions:2,averageTenure:18,trainingHoursPerEmployee:12},employeeAnalytics:e,turnoverPredictions:t,careerPlans:[],salaryRecommendations:a,teamHealth:r,alerts:o}}async function f(e,t){let r=await g(),a=`
DADOS ATUAIS DE PESSOAS:
- Total de colaboradores: ${r.kpis.totalEmployees}
- Performance m\xe9dia: ${r.kpis.averagePerformance}%
- Engajamento m\xe9dio: ${r.kpis.averageEngagement}%
- Taxa de risco de turnover: ${r.kpis.turnoverRate.toFixed(1)}%
- Vagas abertas: ${r.kpis.openPositions}
- Tempo m\xe9dio de empresa: ${r.kpis.averageTenure} meses

COLABORADORES EM RISCO:
${r.turnoverPredictions.slice(0,3).map(e=>`- ${e.name} (${e.department}): ${e.probability}% risco - ${e.factors[0]?.factor||"M\xfaltiplos fatores"}`).join("\n")}

SA\xdaDE DAS EQUIPES:
${r.teamHealth.map(e=>`- ${e.department}: ${e.overallScore}% score, ${e.issues.length?"Problemas: "+e.issues.join(", "):"Saud\xe1vel"}`).join("\n")}

ALERTAS ATIVOS:
${r.alerts.slice(0,3).map(e=>`- [${e.severity.toUpperCase()}] ${e.title}`).join("\n")}
`;try{return(await (0,o.F)({task:"hr",json:!1,temperature:.7,maxTokens:1e3,entityType:"chro_chat",entityId:null,messages:[{role:"system",content:n},{role:"system",content:a},{role:"user",content:e}]})).text||"Desculpe, n\xe3o consegui processar sua solicita\xe7\xe3o."}catch(e){return console.error("Erro no chat CHRO:",e),"Erro ao processar solicita\xe7\xe3o. Tente novamente."}}},1926:(e,t,r)=>{r.d(t,{O:()=>i});var a=r(54128);let o="https://ikjgsqtykkhqimypacro.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";o&&n||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let i=(0,a.eI)(o||"https://setup-missing.supabase.co",n||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}};