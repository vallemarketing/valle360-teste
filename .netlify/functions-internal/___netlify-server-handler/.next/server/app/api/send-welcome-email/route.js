"use strict";(()=>{var e={};e.id=44400,e.ids=[44400],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},76523:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>f,patchFetch:()=>j,requestAsyncStorage:()=>x,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>v});var t={};r.r(t),r.d(t,{POST:()=>p,dynamic:()=>d});var a=r(49303),o=r(88716),n=r(60670),i=r(87070),l=r(20344),c=r(71615),u=r(10603);let d="force-dynamic";async function p(e){try{let s=(0,c.cookies)(),r=(0,l.createRouteHandlerClient)({cookies:()=>s}),{data:t}=await r.auth.getUser();if(!t.user?.id)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{data:a,error:o}=await r.rpc("is_admin");if(o||!a)return i.NextResponse.json({error:"Acesso negado (admin)"},{status:403});let{emailPessoal:n,emailCorporativo:d,nome:p,senha:m,areasTexto:x,tipo:v="colaborador",mode:g="auto"}=await e.json();if(!n||!d||!p||!m)return i.NextResponse.json({error:"Dados incompletos. Necess\xe1rio: emailPessoal, emailCorporativo, nome, senha"},{status:400});if("manual"===g){let e=`Ol\xe1 ${p},

\\uD83D\\uDD10 Seus Dados de Acesso
   ðŸ“§ Email: ${d}
   ðŸ”‘ Senha: ${m}
URL: ${process.env.NEXT_PUBLIC_APP_URL||"https://valle-360-platform.vercel.app"}

[Bot\xe3o: Acessar Valle 360]

âš ï¸ Altere sua senha no primeiro acesso!

\xa9 ${new Date().getFullYear()} Valle 360`,s=(0,u.xC)({to:n,subject:"cliente"===v?"\uD83C\uDF89 Bem-vindo ao Valle 360! Seus Dados de Acesso":"\uD83C\uDF89 Bem-vindo \xe0 Fam\xedlia Valle 360!",text:e});return i.NextResponse.json({success:!0,provider:"mailto",mailtoUrl:s,emailPessoal:n,emailCorporativo:d,credentials:{email:d,senha:m}})}let f=await (0,u.Pi)({emailDestino:n,emailCorporativo:d,senha:m,nome:p,areasTexto:x,tipo:v});if(f.success)return i.NextResponse.json({success:!0,message:f.message,provider:f.provider,mailtoUrl:f.mailtoUrl,emailPessoal:n,emailCorporativo:d});if(f.fallbackMode)return i.NextResponse.json({success:!1,fallbackMode:!0,message:f.message,error:f.error,mailtoUrl:f.mailtoUrl,credentials:f.credentials},{status:200});return i.NextResponse.json({success:!1,error:f.error||f.message},{status:500})}catch(e){return console.error("Erro ao enviar email:",e),i.NextResponse.json({success:!1,error:e.message||"Erro desconhecido"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/send-welcome-email/route",pathname:"/api/send-welcome-email",filename:"route",bundlePath:"app/api/send-welcome-email/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\send-welcome-email\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:x,staticGenerationAsyncStorage:v,serverHooks:g}=m,f="/api/send-welcome-email/route";function j(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:v})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[89276,55972,54128,20958,10603],()=>r(76523));module.exports=t})();