(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7196],{35939:function(e,a,r){Promise.resolve().then(r.bind(r,91420))},92934:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},99388:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91723:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},42208:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},79219:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},37760:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},50598:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},83229:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},73247:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},42351:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},92369:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},32489:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},74767:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(79205).Z)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},91420:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return T}});var t=r(57437),s=r(2265),l=r(57586),d=r(26892),i=r(14438),n=r(91723),o=r(92934),c=r(99388),x=r(51817),g=r(82023),m=r(82431),u=r(48736),h=r(73247),b=r(49322),p=r(92369),y=r(31047),f=r(37760),j=r(79219),k=r(50598),v=r(42351),N=r(74767),w=r(2207),C=r(42208),Z=r(32489),S=r(53113),_=r(41217),A=r(83229);let E=(0,r(79205).Z)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var z=r(30401);let P={instagram:f.Z,facebook:j.Z,linkedin:k.Z,twitter:v.Z,youtube:N.Z};function M(e){let{draft:a,onClose:r,onApprove:n,onReject:o,onUpdate:c}=e,[g,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[p,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(""),[k,v]=(0,s.useState)(!1),[N,M]=(0,s.useState)(""),[T,R]=(0,s.useState)(""),[F,L]=(0,s.useState)([]),[O,D]=(0,s.useState)(""),[H,V]=(0,s.useState)(""),[K,q]=(0,s.useState)(""),[J,B]=(0,s.useState)([]);if((0,s.useEffect)(()=>{if(a){let e=a.action_payload,r=e.metadata||{};M(e.title||""),R(e.description||""),L(r.hashtags||[]),V(r.cta||""),q(r.visualPrompt||""),B(r.selectedNetworks||[]),m(!1),h(!1),v(!1),j("")}},[a]),!a)return null;let I=async()=>{y(!0);try{let e=await fetch("/api/admin/csuite/actions/edit",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:a.id,title:N,description:T,hashtags:F,cta:H,visualPrompt:K,selectedNetworks:J})}),r=await e.json();if(!e.ok||!r.success)throw Error(r.error||"Erro ao salvar edi\xe7\xf5es");i.Am.success("Edi\xe7\xf5es salvas com sucesso!"),m(!1),c&&c()}catch(e){i.Am.error(e.message||"Erro ao salvar edi\xe7\xf5es")}finally{y(!1)}},G=async()=>{y(!0);try{let e=await fetch("/api/admin/csuite/actions/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:a.id})}),t=await e.json();if(!e.ok||!t.success)throw Error(t.error||"Erro ao aprovar conte\xfado");t.kanban_url?i.Am.success("✅ Conte\xfado aprovado! Tarefa criada no Kanban.",{description:"Clique no bot\xe3o abaixo para visualizar a tarefa criada.",action:{label:"Ver no Kanban →",onClick:()=>window.location.href=t.kanban_url},duration:1e4}):i.Am.success("✅ Conte\xfado aprovado e publicado!",{description:"Acesse o Kanban Geral para gerenciar o post.",action:{label:"Ir para Kanban",onClick:()=>window.location.href="/admin/kanban-app"},duration:8e3}),r()}catch(e){i.Am.error(e.message||"Erro ao aprovar")}finally{y(!1)}},U=async()=>{if(!f.trim()){i.Am.error("Por favor, informe o motivo da rejei\xe7\xe3o");return}y(!0);try{await o(a.id,f),i.Am.success("Conte\xfado rejeitado"),r()}catch(e){i.Am.error(e.message||"Erro ao rejeitar")}finally{y(!1)}},W=()=>{let e=O.trim();e&&!F.includes(e)&&(L([...F,e.startsWith("#")?e:"#".concat(e)]),D(""))},Q=e=>{L(F.filter(a=>a!==e))},X=e=>{J.includes(e)?B(J.filter(a=>a!==e)):B([...J,e])};return(0,t.jsx)(l.M,{children:(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:(0,t.jsxs)(d.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,t.jsx)(w.Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g?"Editar Conte\xfado":u?"Pr\xe9-visualiza\xe7\xe3o":"Aprovar Conte\xfado"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Criado em ",new Date(a.created_at).toLocaleDateString("pt-BR")]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!g&&!k&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>h(!u),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:u?"Modo Edi\xe7\xe3o":"Pr\xe9-visualizar",children:(0,t.jsx)(C.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,t.jsx)("button",{onClick:()=>m(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Editar",children:(0,t.jsx)(w.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:(0,t.jsx)(Z.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:u?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-xl p-6 border-2 border-purple-200 dark:border-purple-800",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:N}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap mb-4",children:T}),F.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:F.map(e=>(0,t.jsx)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium",children:e},e))}),H&&(0,t.jsx)("div",{className:"inline-block px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold",children:H})]}),K&&(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(S.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,t.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Prompt Visual"})]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 italic",children:K})]}),J.length>0&&(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Redes Selecionadas"}),(0,t.jsx)("div",{className:"flex gap-3",children:J.map(e=>{let a=P[e.toLowerCase()];return a?(0,t.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,t.jsx)(a,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"capitalize text-sm font-medium text-gray-700 dark:text-gray-300",children:e})]},e):null})})]})]}):g?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"T\xedtulo"}),(0,t.jsx)("input",{type:"text",value:N,onChange:e=>M(e.target.value),className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white",placeholder:"T\xedtulo do post"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Copy (Texto do Post)"}),(0,t.jsx)("textarea",{value:T,onChange:e=>R(e.target.value),rows:6,className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white resize-none",placeholder:"Texto principal do conte\xfado..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hashtags"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)("input",{type:"text",value:O,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),W()),className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white",placeholder:"Digite uma hashtag e pressione Enter"}),(0,t.jsx)("button",{onClick:W,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:(0,t.jsx)(_.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[e,(0,t.jsx)("button",{onClick:()=>Q(e),className:"hover:text-blue-900 dark:hover:text-blue-100",children:(0,t.jsx)(Z.Z,{className:"w-3 h-3"})})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CTA (Call to Action)"}),(0,t.jsx)("input",{type:"text",value:H,onChange:e=>V(e.target.value),className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white",placeholder:"Ex: Saiba mais, Compre agora, etc."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prompt Visual (para gera\xe7\xe3o de imagem)"}),(0,t.jsx)("textarea",{value:K,onChange:e=>q(e.target.value),rows:3,className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white resize-none",placeholder:"Descri\xe7\xe3o para gera\xe7\xe3o de imagem..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Redes Sociais"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:["instagram","facebook","linkedin","twitter","youtube"].map(e=>{let a=P[e],r=J.includes(e);return(0,t.jsxs)("button",{onClick:()=>X(e),className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 transition-all ".concat(r?"bg-blue-100 dark:bg-blue-900/30 border-blue-500 dark:border-blue-400":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:border-blue-300"),children:[(0,t.jsx)(a,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"capitalize text-sm font-medium",children:e})]},e)})})]})]}):(0,t.jsx)("div",{className:"space-y-4",children:k?(0,t.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 border-2 border-red-200 dark:border-red-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),(0,t.jsx)("h4",{className:"font-semibold text-red-900 dark:text-red-100",children:"Rejeitar Conte\xfado"})]}),(0,t.jsx)("textarea",{value:f,onChange:e=>j(e.target.value),rows:3,className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-red-300 dark:border-red-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 dark:text-white resize-none",placeholder:"Informe o motivo da rejei\xe7\xe3o..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:N}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:T})]}),F.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hashtags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map(e=>(0,t.jsx)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:e},e))})]}),H&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Call to Action"}),(0,t.jsx)("p",{className:"text-gray-900 dark:text-white font-medium",children:H})]}),K&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prompt Visual"}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 italic",children:K})]}),J.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Redes Selecionadas"}),(0,t.jsx)("div",{className:"flex gap-2",children:J.map(e=>{let a=P[e.toLowerCase()];return a?(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[(0,t.jsx)(a,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"capitalize text-sm",children:e})]},e):null})})]})]})})}),(0,t.jsx)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>m(!1),className:"px-6 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:p,children:"Cancelar"}),(0,t.jsx)("button",{onClick:I,disabled:p,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}),"Salvando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{className:"w-5 h-5"}),"Salvar Edi\xe7\xf5es"]})})]}):k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>v(!1),className:"px-6 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:p,children:"Cancelar"}),(0,t.jsx)("button",{onClick:U,disabled:p||!f.trim(),className:"flex items-center gap-2 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}),"Rejeitando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E,{className:"w-5 h-5"}),"Confirmar Rejei\xe7\xe3o"]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",disabled:p,children:[(0,t.jsx)(E,{className:"w-5 h-5"}),"Rejeitar"]}),(0,t.jsx)("button",{onClick:G,disabled:p,className:"flex items-center gap-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}),"Aprovando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.Z,{className:"w-5 h-5"}),"Aprovar e Publicar"]})})]})})]})})})}function T(){let[e,a]=(0,s.useState)(!0),[r,f]=(0,s.useState)([]),[j,k]=(0,s.useState)([]),[v,N]=(0,s.useState)(null),[w,C]=(0,s.useState)("draft"),[Z,S]=(0,s.useState)(""),[_,A]=(0,s.useState)(!1);(0,s.useEffect)(()=>{E()},[]);let E=async()=>{a(!0);try{let e=await fetch("/api/admin/csuite/actions/drafts",{cache:"no-store"}),a=await e.json();if(e.ok&&a.success){let e=(a.drafts||[]).filter(e=>"create_kanban_task"===e.action_type);f(e)}let r=await fetch("/api/admin/clients",{cache:"no-store"});if(r.ok){let e=await r.json();e.success&&k(e.clients||[])}}catch(e){console.error("Erro ao carregar dados:",e),i.Am.error("Erro ao carregar aprova\xe7\xf5es")}finally{a(!1)}},z=async e=>{let a=await fetch("/api/admin/csuite/actions/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:e})}),r=await a.json();if(!a.ok||!r.success)throw Error(r.error||"Erro ao aprovar conte\xfado");await E()},P=async(e,a)=>{let r=await fetch("/api/admin/csuite/actions/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_id:e,reason:a})}),t=await r.json();if(!r.ok||!t.success)throw Error(t.error||"Erro ao rejeitar conte\xfado");await E()},T=e=>{if(!e)return"Cliente n\xe3o especificado";let a=j.find(a=>a.id===e);return(null==a?void 0:a.name)||(null==a?void 0:a.company_name)||"Cliente desconhecido"},R=e=>{switch(e.toLowerCase()){case"draft":return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm font-medium",children:[(0,t.jsx)(n.Z,{className:"w-4 h-4"}),"Pendente"]});case"executed":return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-sm font-medium",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4"}),"Aprovado"]});case"cancelled":return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-sm font-medium",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4"}),"Rejeitado"]});default:return(0,t.jsx)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-sm font-medium",children:e})}},F=r.filter(e=>{if("all"!==w&&e.status!==w)return!1;if(Z.trim()){var a,r,t,s,l,d;let i=Z.toLowerCase(),n=(null===(r=e.action_payload)||void 0===r?void 0:null===(a=r.title)||void 0===a?void 0:a.toLowerCase())||"",o=(null===(s=e.action_payload)||void 0===s?void 0:null===(t=s.description)||void 0===t?void 0:t.toLowerCase())||"",c=T(null===(d=e.action_payload)||void 0===d?void 0:null===(l=d.metadata)||void 0===l?void 0:l.client_id).toLowerCase();return n.includes(i)||o.includes(i)||c.includes(i)}return!0}),L={total:r.length,pending:r.filter(e=>"draft"===e.status).length,approved:r.filter(e=>"executed"===e.status).length,rejected:r.filter(e=>"cancelled"===e.status).length};return e?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(x.Z,{className:"w-12 h-12 text-blue-600 dark:text-blue-400 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando aprova\xe7\xf5es..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-6",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-blue-600 rounded-2xl shadow-lg",children:(0,t.jsx)(g.Z,{className:"w-8 h-8 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Aprova\xe7\xe3o de Conte\xfado"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Revise e aprove conte\xfados criados pela IA"})]})]}),(0,t.jsxs)("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg shadow-md transition-colors border border-gray-200 dark:border-gray-700",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Atualizar"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:L.total})]}),(0,t.jsx)(u.Z,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendentes"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:L.pending})]}),(0,t.jsx)(n.Z,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aprovados"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:L.approved})]}),(0,t.jsx)(o.Z,{className:"w-8 h-8 text-green-600 dark:text-green-400"})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejeitados"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:L.rejected})]}),(0,t.jsx)(c.Z,{className:"w-8 h-8 text-red-600 dark:text-red-400"})]})})]}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",value:Z,onChange:e=>S(e.target.value),placeholder:"Buscar por t\xedtulo, descri\xe7\xe3o ou cliente...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:[{value:"all",label:"Todos"},{value:"draft",label:"Pendentes"},{value:"executed",label:"Aprovados"},{value:"cancelled",label:"Rejeitados"}].map(e=>(0,t.jsx)("button",{onClick:()=>C(e.value),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(w===e.value?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.label},e.value))})]})})]}),0===F.length?(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center shadow-md border border-gray-200 dark:border-gray-700",children:[(0,t.jsx)(b.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhum conte\xfado encontrado"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"draft"===w?"N\xe3o h\xe1 conte\xfados pendentes para aprova\xe7\xe3o no momento.":"Nenhum conte\xfado corresponde aos filtros selecionados."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,t.jsx)(l.M,{children:F.map(e=>{var a,r,s,l,i,n;let o=T(null===(r=e.action_payload)||void 0===r?void 0:null===(a=r.metadata)||void 0===a?void 0:a.client_id),c=new Date(e.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"});return(0,t.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>N(e),children:[(0,t.jsxs)("div",{className:"p-4 bg-gradient-to-r from-purple-500/10 to-blue-500/10 dark:from-purple-500/20 dark:to-blue-500/20 border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white line-clamp-2 flex-1",children:(null===(s=e.action_payload)||void 0===s?void 0:s.title)||"Sem t\xedtulo"})}),R(e.status)]}),(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:(null===(l=e.action_payload)||void 0===l?void 0:l.description)||"Sem descri\xe7\xe3o"}),(null===(n=e.action_payload)||void 0===n?void 0:null===(i=n.metadata)||void 0===i?void 0:i.hashtags)&&e.action_payload.metadata.hashtags.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.action_payload.metadata.hashtags.slice(0,3).map(e=>(0,t.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs",children:e},e)),e.action_payload.metadata.hashtags.length>3&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded text-xs",children:["+",e.action_payload.metadata.hashtags.length-3]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"truncate",children:o})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:c})]})]}),"draft"===e.status&&(0,t.jsx)("div",{className:"px-4 pb-4",children:(0,t.jsx)("button",{className:"w-full py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all",children:"Revisar e Aprovar"})})]},e.id)})})})]}),v&&(0,t.jsx)(M,{draft:v,onClose:()=>N(null),onApprove:z,onReject:P,onUpdate:E})]})}}},function(e){e.O(0,[2882,4438,4112,2971,2117,1744],function(){return e(e.s=35939)}),_N_E=e.O()}]);