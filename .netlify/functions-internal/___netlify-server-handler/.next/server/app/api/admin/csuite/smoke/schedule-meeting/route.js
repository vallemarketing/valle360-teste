"use strict";(()=>{var e={};e.id=66895,e.ids=[66895],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},76356:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>x,routeModule:()=>p,serverHooks:()=>_,staticGenerationAsyncStorage:()=>g});var i={};r.r(i),r.d(i,{POST:()=>m,dynamic:()=>l});var a=r(49303),s=r(88716),n=r(60670),o=r(87070),c=r(17478),d=r(90176),u=r(4676);let l="force-dynamic";async function m(e){let t=await (0,c.k)(e);if(!t.ok)return t.res;let r={};try{r=await e.json()}catch{}let i=(0,d.t)(),a=String(r?.role||"ceo").toLowerCase(),{data:s}=await i.from("ai_executives").select("id, role").eq("role",a).maybeSingle();if(!s?.id)return o.NextResponse.json({success:!1,error:`Executivo n\xe3o encontrado (role=${a})`},{status:400});let n=String(r?.title||"[SMOKE] Reuni\xe3o executiva (schedule_meeting)").trim(),l=String(r?.meeting_type||"review").trim(),m=Array.isArray(r?.participants)?r.participants.map(e=>String(e).toLowerCase()):["ceo","cfo","cto","cmo","coo","cco","chro"],p=Array.isArray(r?.agenda)?r.agenda:["Validar cria\xe7\xe3o de reuni\xe3o via draft schedule_meeting","Confirmar exibi\xe7\xe3o no Hist\xf3rico/Audit","Confirmar rastreabilidade (trigger_data.draft_id)"],{data:x,error:g}=await i.from("ai_executive_action_drafts").insert({executive_id:s.id,created_by_user_id:t.userId,action_type:"schedule_meeting",action_payload:{title:n,meeting_type:l,participants:m,agenda:p,metadata:{source:"smoke",kind:"schedule_meeting"}},preview:{label:"Smoke: schedule_meeting",title:n,meeting_type:l,participants:m,agenda:p},risk_level:"low",requires_external:!1,is_executable:!0,status:"draft"}).select("id").single();if(g||!x?.id)return o.NextResponse.json({success:!1,error:g?.message||"Falha ao criar draft"},{status:500});let _=await (0,u.K)({draftId:String(x.id),actorUserId:t.userId});return _.ok?o.NextResponse.json({success:!0,draft_id:x.id,executed_at:_.executedAt,execution_result:_.executionResult}):o.NextResponse.json({success:!1,error:_.executionResult?.error||"Falha ao executar draft",draft_id:x.id},{status:400})}let p=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/csuite/smoke/schedule-meeting/route",pathname:"/api/admin/csuite/smoke/schedule-meeting",filename:"route",bundlePath:"app/api/admin/csuite/smoke/schedule-meeting/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\admin\\csuite\\smoke\\schedule-meeting\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:_}=p,f="/api/admin/csuite/smoke/schedule-meeting/route";function h(){return(0,n.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:g})}}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[89276,55972,54128,20958,95827],()=>r(76356));module.exports=i})();