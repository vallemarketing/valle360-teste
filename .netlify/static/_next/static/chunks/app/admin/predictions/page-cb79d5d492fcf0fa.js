(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3639],{93016:function(e,r,s){Promise.resolve().then(s.bind(s,24962))},17580:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(79205).Z)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},82023:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(79205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},70525:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(79205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},37806:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(79205).Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},24962:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return u}});var t=s(57437),l=s(2265),a=s(82023),i=s(76865),n=s(17580),d=s(70525),c=s(95252),o=s(3085),x=s(37806),m=s(27648),h=s(79050);function u(){let[e,r]=(0,l.useState)(null),[s,u]=(0,l.useState)(!0),[p,y]=(0,l.useState)(!1),[v,b]=(0,l.useState)(null),[j,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await fetch("/api/admin/predictions/dashboard"),s=await e.json();s.success&&r(s.dashboard)}catch(e){console.error("Error fetching dashboard:",e)}finally{u(!1)}},N=async()=>{if(confirm("Deseja calcular predi\xe7\xf5es para todos os clientes? Isso pode demorar alguns segundos.")){y(!0);try{let r=await fetch("/api/admin/predictions/calculate-all",{method:"POST"}),s=await r.json();if(s.success){var e;alert("✅ Sucesso! ".concat((null===(e=s.stats)||void 0===e?void 0:e.total)||0," predi\xe7\xf5es calculadas.")),g()}else alert("❌ Erro: ".concat(s.error))}catch(e){console.error("Error calculating predictions:",e),alert("❌ Erro ao calcular predi\xe7\xf5es")}finally{y(!1)}}};return s?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Carregando predi\xe7\xf5es..."})]})}):e?(0,t.jsxs)("div",{className:"min-h-screen p-8",style:{backgroundColor:"var(--bg-primary)"},children:[(0,t.jsxs)("div",{className:"mb-8 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:"\uD83D\uDD2E Predi\xe7\xf5es & Intelig\xeancia de Neg\xf3cio"}),(0,t.jsx)("p",{style:{color:"var(--text-secondary)"},children:"An\xe1lises preditivas para tomada de decis\xe3o estrat\xe9gica"})]}),(0,t.jsx)("button",{onClick:N,disabled:p,className:"px-6 py-3 rounded-lg font-bold flex items-center gap-2 hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--primary-500)",color:"white"},children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Calculando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{className:"w-5 h-5"}),"Calcular Predi\xe7\xf5es"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-red-500/10",children:(0,t.jsx)(i.Z,{className:"w-6 h-6 text-red-500"})}),e.churn.high_risk_count>0&&(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-red-500 text-white",children:"ATEN\xc7\xc3O"})]}),(0,t.jsx)("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"Risco de Churn"}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:e.churn.high_risk_count}),(0,t.jsx)("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"clientes em alto risco"}),(0,t.jsxs)("p",{className:"text-xs mt-2 text-red-500",children:["R$ ",(e.churn.total_revenue_at_risk/1e3).toFixed(0),"k em risco"]}),(0,t.jsxs)(m.default,{href:"/admin/predictions/churn",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver detalhes ",(0,t.jsx)(n.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-green-500/10",children:(0,t.jsx)(d.Z,{className:"w-6 h-6 text-green-500"})}),e.ltv.upsell_opportunities>0&&(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-green-500 text-white",children:e.ltv.upsell_opportunities})]}),(0,t.jsx)("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"Oportunidades de Upsell"}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:e.ltv.upsell_opportunities}),(0,t.jsx)("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"clientes prontos para upgrade"}),(0,t.jsxs)("p",{className:"text-xs mt-2 text-green-500",children:["Potencial: R$ ",(e.ltv.total_upsell_potential/1e3).toFixed(0),"k"]}),(0,t.jsxs)(m.default,{href:"/admin/predictions/ltv",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver oportunidades ",(0,t.jsx)(n.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-blue-500/10",children:(0,t.jsx)(c.Z,{className:"w-6 h-6 text-blue-500"})}),(0,t.jsxs)("div",{className:"flex items-center text-xs",children:["upward"===e.revenue.trend?(0,t.jsx)(d.Z,{className:"w-4 h-4 text-green-500 mr-1"}):"downward"===e.revenue.trend?(0,t.jsx)(o.Z,{className:"w-4 h-4 text-red-500 mr-1"}):(0,t.jsx)("span",{className:"w-4 h-4 mr-1",children:"→"}),(0,t.jsxs)("span",{style:{color:"upward"===e.revenue.trend?"#10b981":"downward"===e.revenue.trend?"#ef4444":"var(--text-secondary)"},children:[e.revenue.growth_rate>0?"+":"",e.revenue.growth_rate.toFixed(1),"%"]})]})]}),(0,t.jsx)("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"MRR Previsto"}),(0,t.jsxs)("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:["R$ ",(e.revenue.predicted_mrr/1e3).toFixed(0),"k"]}),(0,t.jsxs)("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:["ARR: R$ ",(e.revenue.predicted_arr/1e3).toFixed(0),"k"]}),(0,t.jsxs)("p",{className:"text-xs mt-2",style:{color:"var(--text-tertiary)"},children:["Confian\xe7a: ",e.revenue.confidence,"%"]}),(0,t.jsxs)(m.default,{href:"/admin/predictions/revenue",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver detalhes ",(0,t.jsx)(n.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-purple-500/10",children:(0,t.jsx)(x.Z,{className:"w-6 h-6 text-purple-500"})}),"urgent"===e.hiring.priority_level||"high"===e.hiring.priority_level?(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-orange-500 text-white",children:"URGENTE"}):null]}),(0,t.jsx)("h3",{className:"text-sm font-medium mb-1",style:{color:"var(--text-tertiary)"},children:"Necessidade de Contrata\xe7\xe3o"}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"},children:e.hiring.recommended_hires}),(0,t.jsx)("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:0===e.hiring.recommended_hires?"equipe adequada":"contrata\xe7\xf5es recomendadas"}),(0,t.jsxs)("p",{className:"text-xs mt-2",style:{color:"var(--text-tertiary)"},children:["Capacidade: ",e.hiring.capacity_utilization.toFixed(0),"%"]}),(0,t.jsxs)(m.default,{href:"/admin/predictions/hiring",className:"mt-4 text-sm flex items-center hover:underline",style:{color:"var(--primary-500)"},children:["Ver an\xe1lise ",(0,t.jsx)(n.Z,{className:"w-4 h-4 ml-1"})]})]})]}),e.churn.clients.length>0&&(0,t.jsxs)("div",{className:"p-6 rounded-xl border mb-8",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"⚠️ Clientes em Alto Risco de Churn"}),(0,t.jsx)(m.default,{href:"/admin/predictions/churn",className:"text-sm hover:underline",style:{color:"var(--primary-500)"},children:"Ver todos"})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.churn.clients.slice(0,5).map(e=>{var r;return(0,t.jsxs)("div",{className:"p-4 rounded-lg border flex items-center justify-between",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",style:{color:"var(--text-primary)"},children:(null===(r=e.clients)||void 0===r?void 0:r.company_name)||"Cliente"}),(0,t.jsxs)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Probabilidade de churn: ",e.churn_probability,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat("critical"===e.risk_level?"bg-red-500 text-white":"bg-orange-500 text-white"),children:"critical"===e.risk_level?"CR\xcdTICO":"ALTO RISCO"}),(0,t.jsx)("button",{onClick:()=>{b(e),f(!0)},className:"px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"Tomar A\xe7\xe3o"})]})]},e.id)})})]}),e.ltv.clients.length>0&&(0,t.jsxs)("div",{className:"p-6 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"\uD83D\uDCB0 Top Oportunidades de Upsell"}),(0,t.jsx)(m.default,{href:"/admin/predictions/ltv",className:"text-sm hover:underline",style:{color:"var(--primary-500)"},children:"Ver todas"})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.ltv.clients.slice(0,5).map(e=>{var r,s;return(0,t.jsxs)("div",{className:"p-4 rounded-lg border flex items-center justify-between",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",style:{color:"var(--text-primary)"},children:(null===(r=e.clients)||void 0===r?void 0:r.company_name)||"Cliente"}),(0,t.jsxs)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Probabilidade: ",e.upsell_probability,"% • Valor atual: R$ ",(null===(s=e.clients)||void 0===s?void 0:s.monthly_value)||0]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-green-500",children:["+R$ ",e.estimated_upsell_value||0]}),(0,t.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:"potencial"})]}),(0,t.jsx)("button",{className:"px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"Propor Upgrade"})]})]},e.id)})})]}),(0,t.jsx)(h.h,{clientId:(null==v?void 0:v.client_id)||null,churnData:v,isOpen:j,onClose:()=>{f(!1),b(null),g()}})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Erro ao carregar dashboard"})})}}},function(e){e.O(0,[2882,4438,2972,262,9050,2971,2117,1744],function(){return e(e.s=93016)}),_N_E=e.O()}]);