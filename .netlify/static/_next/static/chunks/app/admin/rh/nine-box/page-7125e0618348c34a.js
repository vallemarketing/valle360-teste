(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9288],{55743:function(e,a,s){Promise.resolve().then(s.bind(s,8098))},96215:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},92735:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},48736:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},82023:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},58896:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},95805:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},27648:function(e,a,s){"use strict";s.d(a,{default:function(){return l.a}});var r=s(72972),l=s.n(r)},99376:function(e,a,s){"use strict";var r=s(35475);s.o(r,"useParams")&&s.d(a,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(a,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(a,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(a,{useSearchParams:function(){return r.useSearchParams}})},8098:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return w}});var r=s(57437),l=s(2265),n=s(27648),i=s(99376),t=s(58896),c=s(99397),o=s(95805),d=s(82023),u=s(48736),x=s(92735),m=s(96215),h=s(79820),v=s(12381),p=s(69174),y=s(17168),j=s(74291),f=s(40279),b=s(75060),g=s(15291);function N(e){return"open"===e?(0,r.jsx)(p.C,{className:"bg-emerald-500/10 text-emerald-700 border-emerald-500/30",children:"Aberto"}):"closed"===e?(0,r.jsx)(p.C,{className:"bg-gray-500/10 text-gray-700 border-gray-500/30",children:"Fechado"}):(0,r.jsx)(p.C,{className:"bg-amber-500/10 text-amber-700 border-amber-500/30",children:"Rascunho"})}function w(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",style:{color:"var(--text-secondary)"},children:"Carregando 9 Box..."})}),children:(0,r.jsx)(C,{})})}function C(){var e,a,s,w,C;let k=(0,i.useRouter)(),S=(0,i.useSearchParams)().get("cycle"),[_,P]=(0,l.useState)(!0),[I,Z]=(0,l.useState)(null),[z,Q]=(0,l.useState)([]),[M,R]=(0,l.useState)(""),A=(0,l.useMemo)(()=>z.find(e=>e.id===M)||null,[z,M]),[E,U]=(0,l.useState)("matrix"),[D,B]=(0,l.useState)(null),[O,q]=(0,l.useState)([]),[V,F]=(0,l.useState)(null),[T,H]=(0,l.useState)(null),[Y,L]=(0,l.useState)([]),[X,K]=(0,l.useState)(!1),[$,G]=(0,l.useState)({name:"",description:"",starts_at:"",ends_at:"",ai_enabled:!0}),[J,W]=(0,l.useState)(!1),[ee,ea]=(0,l.useState)([]),[es,er]=(0,l.useState)(""),[el,en]=(0,l.useState)(!1);async function ei(e){let a=await fetch(e,{cache:"no-store"}),s=await a.json().catch(()=>({}));if(!a.ok)throw Error((null==s?void 0:s.error)||"Falha na requisi\xe7\xe3o");return s}async function et(e,a){let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):"{}"}),r=await s.json().catch(()=>({}));if(!s.ok)throw Error((null==r?void 0:r.error)||"Falha na requisi\xe7\xe3o");return r}async function ec(){Q((await ei("/api/nine-box/cycles")).cycles||[])}async function eo(){ea((await ei("/api/nine-box/employees?active=1")).employees||[])}async function ed(e){let a=await ei("/api/nine-box/matrix?cycle_id=".concat(encodeURIComponent(e)));B({points:a.points||[],counts:a.counts||{}})}async function eu(e){q((await ei("/api/nine-box/assessments?cycle_id=".concat(encodeURIComponent(e)))).assessments||[])}async function ex(e){F(await ei("/api/nine-box/dashboard?cycle_id=".concat(encodeURIComponent(e))))}async function em(e){H(await ei("/api/nine-box/ai/predictive?cycle_id=".concat(encodeURIComponent(e))))}async function eh(e){L((await ei("/api/nine-box/action-items?cycle_id=".concat(encodeURIComponent(e)))).items||[])}async function ev(e){await Promise.allSettled([ed(e),eu(e),ex(e),em(e),eh(e)])}(0,l.useEffect)(()=>{let e=!0;return(async()=>{P(!0),Z(null);try{await ec()}catch(a){if(!e)return;Z((null==a?void 0:a.message)||"Erro ao carregar")}finally{if(!e)return;P(!1)}})(),()=>{e=!1}},[]),(0,l.useEffect)(()=>{if(!z.length)return;let e=S&&z.some(e=>e.id===S)?S:z[0].id;e&&e!==M&&R(e)},[z,S]),(0,l.useEffect)(()=>{M&&((async()=>{Z(null);try{await ev(M)}catch(e){Z((null==e?void 0:e.message)||"Erro ao carregar dados do ciclo")}})(),k.replace("/admin/rh/nine-box?cycle=".concat(encodeURIComponent(M))))},[M]);let ep=(null==D?void 0:D.counts)||{},ey=e=>Number(ep[e]||0),ej=(0,l.useMemo)(()=>Y.slice(0,8),[Y]),ef=(0,l.useMemo)(()=>(null==V?void 0:V.alerts)||[],[V]),eb=(0,l.useMemo)(()=>(null==T?void 0:T.summary)||null,[T]),eg=(0,l.useMemo)(()=>(null==T?void 0:T.alerts)||[],[T]),eN=(0,l.useMemo)(()=>(ee||[]).map(e=>({id:String(e.id),label:"".concat(String(e.full_name||e.name||e.email||e.id)).concat(e.department?" • ".concat(e.department):"").concat(e.position?" • ".concat(e.position):"")})).sort((e,a)=>e.label.localeCompare(a.label)),[ee]);async function ew(){try{var e;let a={name:$.name.trim(),description:$.description.trim()||null,starts_at:$.starts_at?new Date($.starts_at).toISOString():null,ends_at:$.ends_at?new Date($.ends_at).toISOString():null,ai_enabled:!!$.ai_enabled,config:{}},s=await et("/api/nine-box/cycles",a);K(!1),G({name:"",description:"",starts_at:"",ends_at:"",ai_enabled:!0}),await ec(),(null==s?void 0:null===(e=s.cycle)||void 0===e?void 0:e.id)&&R(String(s.cycle.id))}catch(e){Z((null==e?void 0:e.message)||"Erro ao criar ciclo")}}async function eC(e){if(M)try{Z(null),"open"===e&&await et("/api/nine-box/cycles/".concat(encodeURIComponent(M),"/open")),"closed"===e&&await et("/api/nine-box/cycles/".concat(encodeURIComponent(M),"/close")),await ec(),await ev(M)}catch(e){Z((null==e?void 0:e.message)||"Erro ao atualizar status")}}async function ek(){if(W(!0),er(""),!ee.length)try{await eo()}catch(e){Z((null==e?void 0:e.message)||"Erro ao carregar colaboradores")}}async function eS(){if(M&&es)try{var e;en(!0);let a=await et("/api/nine-box/assessments",{cycle_id:M,employee_id:es,status:"draft"}),s=String((null==a?void 0:null===(e=a.assessment)||void 0===e?void 0:e.id)||"");if(!s)throw Error("Falha ao criar avalia\xe7\xe3o");W(!1),k.push("/admin/rh/nine-box/assessments/".concat(encodeURIComponent(s)))}catch(e){Z((null==e?void 0:e.message)||"Erro ao criar avalia\xe7\xe3o")}finally{en(!1)}}return(0,r.jsxs)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--purple-100)"},children:(0,r.jsx)(t.Z,{className:"w-6 h-6",style:{color:"var(--purple-500)"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"9 Box (Matriz de Talentos)"}),(0,r.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Ciclos, avalia\xe7\xf5es, matriz, dashboard, PDI e IA (copiloto)."})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[(0,r.jsx)(n.default,{href:"/admin/rh",children:(0,r.jsx)(v.z,{variant:"outline",children:"Voltar ao RH"})}),(0,r.jsxs)(v.z,{onClick:()=>K(!0),className:"gap-2",style:{backgroundColor:"var(--primary-500)"},children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),"Novo ciclo"]})]})]}),I&&(0,r.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:I}),(0,r.jsx)(h.Zb,{children:(0,r.jsxs)(h.Ol,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(h.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Ciclo"}),A?N(A.status):null,(null==A?void 0:A.ai_enabled)?(0,r.jsx)(p.C,{className:"bg-purple-500/10 text-purple-700 border-purple-500/30",children:"IA ativa"}):(0,r.jsx)(p.C,{className:"bg-gray-500/10 text-gray-700 border-gray-500/30",children:"IA desligada"})]}),(0,r.jsx)(h.SZ,{children:"Selecione um ciclo para ver matriz, avalia\xe7\xf5es e PDI."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("div",{className:"min-w-[280px]",children:(0,r.jsxs)(g.Ph,{value:M,onValueChange:e=>R(e),children:[(0,r.jsx)(g.i4,{children:(0,r.jsx)(g.ki,{placeholder:_?"Carregando...":"Selecione",children:(null==A?void 0:A.name)||"Selecione"})}),(0,r.jsx)(g.Bw,{children:(z||[]).map(e=>(0,r.jsx)(g.Ql,{value:e.id,children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3 w-full",children:[(0,r.jsx)("div",{className:"truncate",children:e.name}),(0,r.jsx)("div",{className:"ml-auto",children:N(e.status)})]})},e.id))})]})}),(0,r.jsxs)(v.z,{variant:"outline",onClick:()=>ek(),className:"gap-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"Nova avalia\xe7\xe3o"]}),(null==A?void 0:A.status)!=="open"&&(null==A?void 0:A.status)!=="closed"&&(0,r.jsxs)(v.z,{onClick:()=>eC("open"),className:"gap-2",style:{backgroundColor:"var(--success-600)"},children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),"Abrir ciclo"]}),(null==A?void 0:A.status)==="open"&&(0,r.jsx)(v.z,{onClick:()=>eC("closed"),variant:"outline",className:"gap-2",children:"Fechar ciclo"}),!!M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{href:"/admin/rh/nine-box/criteria?cycle=".concat(encodeURIComponent(M)),children:(0,r.jsx)(v.z,{variant:"outline",className:"gap-2",children:"Crit\xe9rios"})}),(0,r.jsx)("a",{href:"/api/nine-box/export/pdf?cycle_id=".concat(encodeURIComponent(M)),children:(0,r.jsxs)(v.z,{variant:"outline",className:"gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),"PDF"]})}),(0,r.jsx)("a",{href:"/api/nine-box/export/xlsx?cycle_id=".concat(encodeURIComponent(M)),children:(0,r.jsxs)(v.z,{variant:"outline",className:"gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"XLSX"]})})]})]})]})}),(0,r.jsxs)(y.mQ,{value:E,onValueChange:e=>U(e),children:[(0,r.jsxs)(y.dr,{className:"w-full justify-start",children:[(0,r.jsx)(y.SP,{value:"matrix",children:"Matriz"}),(0,r.jsx)(y.SP,{value:"assessments",children:"Avalia\xe7\xf5es"}),(0,r.jsx)(y.SP,{value:"dashboard",children:"Dashboard"}),(0,r.jsx)(y.SP,{value:"actions",children:"Plano de a\xe7\xe3o"})]}),(0,r.jsx)(y.nU,{value:"matrix",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)(h.Zb,{className:"lg:col-span-2",children:[(0,r.jsxs)(h.Ol,{children:[(0,r.jsx)(h.ll,{children:"Matriz 9 Box"}),(0,r.jsx)(h.SZ,{children:"Contagem por quadrante (Potencial ↑ / Performance →)."})]}),(0,r.jsx)(h.aY,{children:(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["Q7","Q8","Q9","Q4","Q5","Q6","Q1","Q2","Q3"].map(e=>(0,r.jsxs)("div",{className:"rounded-xl border p-3",style:{borderColor:"var(--border-light)",backgroundColor:"var(--bg-primary)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"font-semibold",style:{color:"var(--text-primary)"},children:e}),(0,r.jsx)("div",{className:"text-2xl font-bold",style:{color:"var(--primary-500)"},children:ey(e)})]}),(0,r.jsx)("div",{className:"mt-1 text-xs",style:{color:"var(--text-secondary)"},children:{Q1:"Baixo potencial / Baixa perf.",Q2:"Baixo potencial / M\xe9dia perf.",Q3:"Baixo potencial / Alta perf.",Q4:"M\xe9dio potencial / Baixa perf.",Q5:"M\xe9dio potencial / M\xe9dia perf.",Q6:"M\xe9dio potencial / Alta perf.",Q7:"Alto potencial / Baixa perf.",Q8:"Alto potencial / M\xe9dia perf.",Q9:"Alto potencial / Alta perf."}[e]||e})]},e))})})]}),(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{children:[(0,r.jsx)(h.ll,{children:"\xdaltimas avalia\xe7\xf5es"}),(0,r.jsx)(h.SZ,{children:"Abra e finalize avalia\xe7\xf5es para atualizar a matriz."})]}),(0,r.jsxs)(h.aY,{className:"space-y-2",children:[((null==D?void 0:D.points)||[]).slice(0,8).map(e=>{var a,s,l,i;return(0,r.jsx)(n.default,{href:"/admin/rh/nine-box/assessments/".concat(encodeURIComponent(e.id)),children:(0,r.jsxs)("div",{className:"rounded-xl border p-3 hover:shadow-sm transition-all",style:{borderColor:"var(--border-light)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate font-medium",style:{color:"var(--text-primary)"},children:String((null===(a=e.employee)||void 0===a?void 0:a.full_name)||(null===(s=e.employee)||void 0===s?void 0:s.name)||e.employee_id)}),(0,r.jsxs)("div",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:[String((null===(l=e.employee)||void 0===l?void 0:l.department)||"—")," • ",String((null===(i=e.employee)||void 0===i?void 0:i.position)||"—")]})]}),(0,r.jsx)(p.C,{className:"bg-gray-500/10 text-gray-700 border-gray-500/30",children:"submitted"===e.status?"Finalizada":"Rascunho"})]}),e.result?(0,r.jsxs)("div",{className:"mt-2 text-xs",style:{color:"var(--text-secondary)"},children:["Perf ",e.result.performance_score," • Pot ",e.result.potential_score," • ",e.result.quadrant]}):(0,r.jsx)("div",{className:"mt-2 text-xs",style:{color:"var(--text-secondary)"},children:"Sem resultado (finalize para calcular)"})]})},e.id)}),!(null==D?void 0:null===(e=D.points)||void 0===e?void 0:e.length)&&(0,r.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Nenhuma avalia\xe7\xe3o com resultado ainda."})]})]})]})}),(0,r.jsx)(y.nU,{value:"assessments",children:(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h.ll,{children:"Avalia\xe7\xf5es do ciclo"}),(0,r.jsx)(h.SZ,{children:"Crie, edite e finalize avalia\xe7\xf5es. Notas 1/2/5 exigem justificativa."})]}),(0,r.jsxs)(v.z,{onClick:()=>ek(),variant:"outline",className:"gap-2",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),"Nova avalia\xe7\xe3o"]})]}),(0,r.jsxs)(h.aY,{className:"space-y-2",children:[(O||[]).slice(0,50).map(e=>{var a,s,l,i;return(0,r.jsx)(n.default,{href:"/admin/rh/nine-box/assessments/".concat(encodeURIComponent(e.id)),children:(0,r.jsxs)("div",{className:"rounded-xl border p-3 hover:shadow-sm transition-all",style:{borderColor:"var(--border-light)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate font-medium",style:{color:"var(--text-primary)"},children:String((null===(a=e.employee)||void 0===a?void 0:a.full_name)||(null===(s=e.employee)||void 0===s?void 0:s.name)||e.employee_id)}),(0,r.jsxs)("div",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:[String((null===(l=e.employee)||void 0===l?void 0:l.department)||"—")," • ",String((null===(i=e.employee)||void 0===i?void 0:i.position)||"—")]})]}),(0,r.jsx)(p.C,{className:"bg-gray-500/10 text-gray-700 border-gray-500/30",children:"submitted"===e.status?"Finalizada":"Rascunho"})]}),e.result?(0,r.jsxs)("div",{className:"mt-2 text-xs",style:{color:"var(--text-secondary)"},children:["Perf ",e.result.performance_score," • Pot ",e.result.potential_score," • ",e.result.quadrant]}):(0,r.jsx)("div",{className:"mt-2 text-xs",style:{color:"var(--text-secondary)"},children:"Sem resultado (finalize para calcular)"})]})},e.id)}),!O.length&&(0,r.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Nenhuma avalia\xe7\xe3o neste ciclo ainda."})]})]})}),(0,r.jsx)(y.nU,{value:"dashboard",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)(h.Zb,{className:"lg:col-span-2",children:[(0,r.jsxs)(h.Ol,{children:[(0,r.jsxs)(h.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5"}),"Vis\xe3o geral"]}),(0,r.jsx)(h.SZ,{children:"Distribui\xe7\xe3o por quadrante e alertas foco (Q1/Q4/Q7)."})]}),(0,r.jsx)(h.aY,{children:(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["Q9","Q8","Q7","Q6","Q5","Q4","Q3","Q2","Q1"].map(e=>{var a;return(0,r.jsxs)("div",{className:"rounded-xl border p-3",style:{borderColor:"var(--border-light)"},children:[(0,r.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:e}),(0,r.jsx)("div",{className:"text-2xl font-bold",style:{color:"var(--primary-500)"},children:Number((null==V?void 0:null===(a=V.byQuadrant)||void 0===a?void 0:a[e])||0)})]},e)})})})]}),(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{children:[(0,r.jsx)(h.ll,{children:"Alertas"}),(0,r.jsx)(h.SZ,{children:"Priorize estes colaboradores para PDI e acompanhamento."})]}),(0,r.jsxs)(h.aY,{className:"space-y-2",children:[eb?(0,r.jsxs)("div",{className:"rounded-xl border p-3 mb-2",style:{borderColor:"var(--border-light)"},children:[(0,r.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Preditivo (risco)"}),(0,r.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-sm",style:{color:"var(--text-primary)"},children:[(0,r.jsx)("span",{children:"Alto:"}),(0,r.jsx)("span",{className:"font-semibold",children:Number((null==eb?void 0:null===(a=eb.byRisk)||void 0===a?void 0:a.high)||0)}),(0,r.jsx)("span",{className:"ml-2",children:"M\xe9dio:"}),(0,r.jsx)("span",{className:"font-semibold",children:Number((null==eb?void 0:null===(s=eb.byRisk)||void 0===s?void 0:s.medium)||0)}),(0,r.jsx)("span",{className:"ml-2",children:"Baixo:"}),(0,r.jsx)("span",{className:"font-semibold",children:Number((null==eb?void 0:null===(w=eb.byRisk)||void 0===w?void 0:w.low)||0)})]}),(0,r.jsx)("div",{className:"mt-2 text-xs",style:{color:"var(--text-secondary)"},children:"Dica: use o PDI com IA nas avalia\xe7\xf5es para criar interven\xe7\xf5es."})]}):null,eg.length?(0,r.jsx)(r.Fragment,{children:eg.slice(0,8).map((e,a)=>{var s,l,n,i,t,c,o,d;return(0,r.jsxs)("div",{className:"rounded-xl border p-3",style:{borderColor:"var(--border-light)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:String((null===(s=e.employee)||void 0===s?void 0:s.full_name)||(null===(l=e.employee)||void 0===l?void 0:l.name)||(null===(n=e.employee)||void 0===n?void 0:n.id))}),(0,r.jsx)(p.C,{className:"high"===e.riskLevel?"bg-red-500/10 text-red-700 border-red-500/30":"medium"===e.riskLevel?"bg-amber-500/10 text-amber-700 border-amber-500/30":"bg-emerald-500/10 text-emerald-700 border-emerald-500/30",children:String(e.riskLevel)})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs",style:{color:"var(--text-secondary)"},children:["Atual: ",String((null===(i=e.current)||void 0===i?void 0:i.quadrant)||"—")," • Perf Δ ",null!==(o=null===(t=e.deltas)||void 0===t?void 0:t.performance)&&void 0!==o?o:"—"," • Pot Δ"," ",null!==(d=null===(c=e.deltas)||void 0===c?void 0:c.potential)&&void 0!==d?d:"—"]}),Array.isArray(e.reasons)&&e.reasons.length?(0,r.jsx)("div",{className:"mt-1 text-xs",style:{color:"var(--text-secondary)"},children:e.reasons.slice(0,2).join(" • ")}):null]},"pred-".concat(a))})}):(0,r.jsxs)(r.Fragment,{children:[(ef||[]).slice(0,10).map((e,a)=>{var s,l,i;return(0,r.jsx)(n.default,{href:"/admin/rh/nine-box/assessments/".concat(encodeURIComponent(e.assessment_id)),children:(0,r.jsxs)("div",{className:"rounded-xl border p-3 hover:shadow-sm transition-all",style:{borderColor:"var(--border-light)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:String((null===(s=e.employee)||void 0===s?void 0:s.full_name)||(null===(l=e.employee)||void 0===l?void 0:l.name)||(null===(i=e.employee)||void 0===i?void 0:i.id))}),(0,r.jsx)(p.C,{className:"bg-red-500/10 text-red-700 border-red-500/30",children:String(e.quadrant)})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs",style:{color:"var(--text-secondary)"},children:["Perf ",e.performance_score," • Pot ",e.potential_score]})]})},a)}),!(null==ef?void 0:ef.length)&&(0,r.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Sem alertas foco neste ciclo."})]})]})]})]})}),(0,r.jsx)(y.nU,{value:"actions",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)(h.Zb,{className:"lg:col-span-2",children:[(0,r.jsxs)(h.Ol,{children:[(0,r.jsx)(h.ll,{children:"Itens de PDI (Plano de a\xe7\xe3o)"}),(0,r.jsx)(h.SZ,{children:"Crie a\xe7\xf5es vinculadas ao ciclo e ao colaborador (via tela da avalia\xe7\xe3o)."})]}),(0,r.jsxs)(h.aY,{className:"space-y-2",children:[ej.map(e=>(0,r.jsxs)("div",{className:"rounded-xl border p-3",style:{borderColor:"var(--border-light)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:e.title}),(0,r.jsx)(p.C,{className:"bg-gray-500/10 text-gray-700 border-gray-500/30",children:e.status})]}),e.description?(0,r.jsx)("div",{className:"mt-1 text-sm",style:{color:"var(--text-secondary)"},children:e.description}):null,e.due_date?(0,r.jsxs)("div",{className:"mt-2 text-xs",style:{color:"var(--text-secondary)"},children:["Vencimento: ",e.due_date]}):null]},e.id)),!Y.length&&(0,r.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Nenhum item de PDI neste ciclo ainda."})]})]}),(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{children:[(0,r.jsx)(h.ll,{children:"Exportar"}),(0,r.jsx)(h.SZ,{children:"Gere relat\xf3rios simples para compartilhar."})]}),(0,r.jsxs)(h.aY,{className:"space-y-2",children:[M?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{href:"/api/nine-box/export/pdf?cycle_id=".concat(encodeURIComponent(M)),children:(0,r.jsxs)(v.z,{className:"w-full gap-2",variant:"outline",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),"Baixar PDF"]})}),(0,r.jsx)("a",{href:"/api/nine-box/export/xlsx?cycle_id=".concat(encodeURIComponent(M)),children:(0,r.jsxs)(v.z,{className:"w-full gap-2",variant:"outline",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Baixar XLSX"]})})]}):(0,r.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Selecione um ciclo primeiro."}),(0,r.jsx)("div",{className:"mt-4 text-xs",style:{color:"var(--text-secondary)"},children:"Dica: gere PDI com IA dentro da avalia\xe7\xe3o do colaborador."})]})]})]})})]})]}),(0,r.jsx)(j.Vq,{open:X,onOpenChange:K,children:(0,r.jsxs)(j.cZ,{onClose:()=>K(!1),children:[(0,r.jsxs)(j.fK,{children:[(0,r.jsx)(j.$N,{children:"Novo ciclo do 9 Box"}),(0,r.jsx)(j.Be,{children:"Crie um ciclo para organizar as avalia\xe7\xf5es. Voc\xea pode abrir/fechar depois."})]}),(0,r.jsx)(j.a7,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(b._,{children:"Nome"}),(0,r.jsx)(f.II,{value:$.name,onChange:e=>G(a=>({...a,name:e.target.value})),placeholder:"Ex.: 2026 • 1\xba semestre"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(b._,{children:"Descri\xe7\xe3o"}),(0,r.jsx)(f.II,{value:$.description,onChange:e=>G(a=>({...a,description:e.target.value})),placeholder:"Opcional"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(b._,{children:"In\xedcio"}),(0,r.jsx)(f.II,{type:"datetime-local",value:$.starts_at,onChange:e=>G(a=>({...a,starts_at:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(b._,{children:"Fim"}),(0,r.jsx)(f.II,{type:"datetime-local",value:$.ends_at,onChange:e=>G(a=>({...a,ends_at:e.target.value}))})]}),(0,r.jsxs)("div",{className:"md:col-span-2 flex items-center justify-between rounded-xl border p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),(0,r.jsx)("div",{className:"text-sm font-medium",children:"IA (copiloto) habilitada"})]}),(0,r.jsx)("button",{type:"button",className:"text-sm underline",onClick:()=>G(e=>({...e,ai_enabled:!e.ai_enabled})),children:$.ai_enabled?"Desligar":"Ligar"})]})]})}),(0,r.jsxs)(j.cN,{children:[(0,r.jsx)(v.z,{variant:"outline",onClick:()=>K(!1),children:"Cancelar"}),(0,r.jsx)(v.z,{onClick:ew,disabled:!$.name.trim(),style:{backgroundColor:"var(--primary-500)"},children:"Criar ciclo"})]})]})}),(0,r.jsx)(j.Vq,{open:J,onOpenChange:W,children:(0,r.jsxs)(j.cZ,{onClose:()=>W(!1),className:"max-w-2xl",children:[(0,r.jsxs)(j.fK,{children:[(0,r.jsx)(j.$N,{children:"Nova avalia\xe7\xe3o"}),(0,r.jsx)(j.Be,{children:"Escolha um colaborador para iniciar a avalia\xe7\xe3o do ciclo selecionado."})]}),(0,r.jsx)(j.a7,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(b._,{children:"Colaborador"}),(0,r.jsxs)(g.Ph,{value:es,onValueChange:e=>er(e),children:[(0,r.jsx)(g.i4,{children:(0,r.jsx)(g.ki,{placeholder:"Selecione um colaborador",children:(null===(C=eN.find(e=>e.id===es))||void 0===C?void 0:C.label)||"Selecione um colaborador"})}),(0,r.jsx)(g.Bw,{children:eN.map(e=>(0,r.jsx)(g.Ql,{value:e.id,children:e.label},e.id))})]}),(0,r.jsx)("div",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Depois voc\xea pode usar a IA para sugerir notas, gerar resumo e PDI."})]})}),(0,r.jsxs)(j.cN,{children:[(0,r.jsx)(v.z,{variant:"outline",onClick:()=>W(!1),children:"Cancelar"}),(0,r.jsx)(v.z,{onClick:eS,disabled:!es||el,style:{backgroundColor:"var(--primary-500)"},children:el?"Criando...":"Criar e abrir"})]})]})})]})}},74291:function(e,a,s){"use strict";s.d(a,{$N:function(){return o},Be:function(){return d},Vq:function(){return i},a7:function(){return u},cN:function(){return x},cZ:function(){return t},fK:function(){return c}});var r=s(57437),l=s(32489),n=s(2265);function i(e){let{open:a,onOpenChange:s,children:l}=e;return((0,n.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]),a)?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>s(!1)}),(0,r.jsx)("div",{className:"relative z-50 w-full max-w-4xl max-h-[90vh] overflow-y-auto mx-4",children:l})]}):null}function t(e){let{children:a,onClose:s,className:n}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-800 ".concat(n||""),children:[s&&(0,r.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,r.jsx)(l.Z,{className:"w-5 h-5"})}),a]})}function c(e){let{children:a}=e;return(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800",children:a})}function o(e){let{children:a}=e;return(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a})}function d(e){let{children:a}=e;return(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:a})}function u(e){let{children:a}=e;return(0,r.jsx)("div",{className:"px-6 py-4",children:a})}function x(e){let{children:a,className:s}=e;return(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex items-center justify-end gap-3 ".concat(s||""),children:a})}},17168:function(e,a,s){"use strict";s.d(a,{SP:function(){return o},dr:function(){return c},mQ:function(){return t},nU:function(){return d}});var r=s(57437),l=s(2265),n=s(93448);let i=l.createContext(void 0);function t(e){var a;let{defaultValue:s,value:t,onValueChange:c,children:o,className:d}=e;if(void 0===t&&void 0===s)throw Error("Tabs requires either `value` (controlled) or `defaultValue` (uncontrolled).");let u=null!==(a=null!=t?t:s)&&void 0!==a?a:"",[x,m]=l.useState(u);return l.useEffect(()=>{void 0!==t&&m(t)},[t]),(0,r.jsx)(i.Provider,{value:{activeTab:x,setActiveTab:e=>{void 0===t&&m(e),null==c||c(e)}},children:(0,r.jsx)("div",{className:(0,n.cn)("",d),children:o})})}function c(e){let{children:a,className:s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-800 p-1 text-gray-600 dark:text-gray-400",s),children:a})}function o(e){let{value:a,children:s,className:t}=e,c=l.useContext(i);if(!c)throw Error("TabsTrigger must be used within Tabs");let{activeTab:o,setActiveTab:d}=c,u=o===a;return(0,r.jsx)("button",{type:"button",onClick:()=>d(a),className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",u?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",t),children:s})}function d(e){let{value:a,children:s,className:t}=e,c=l.useContext(i);if(!c)throw Error("TabsContent must be used within Tabs");let{activeTab:o}=c;return o!==a?null:(0,r.jsx)("div",{className:(0,n.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2",t),children:s})}}},function(e){e.O(0,[2882,6137,2972,5940,9857,2971,2117,1744],function(){return e(e.s=55743)}),_N_E=e.O()}]);