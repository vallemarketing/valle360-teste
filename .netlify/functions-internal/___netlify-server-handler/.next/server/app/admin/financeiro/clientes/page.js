(()=>{var e={};e.id=71080,e.ids=[71080],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},69227:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>r.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(44462),t(9457),t(49991),t(35866);var s=t(23191),l=t(88716),i=t(37922),r=t.n(i),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(a,d);let c=["",{children:["admin",{children:["financeiro",{children:["clientes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,44462)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\financeiro\\clientes\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9457)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,49991)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\financeiro\\clientes\\page.tsx"],m="/admin/financeiro/clientes/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/financeiro/clientes/page",pathname:"/admin/financeiro/clientes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},23224:(e,a,t)=>{Promise.resolve().then(t.bind(t,87002))},38787:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]])},7507:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},52952:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]])},48238:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},26092:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},71821:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},31540:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},25880:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("file-code",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]])},92529:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]])},99102:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])},86645:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]])},29798:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},52351:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("kanban",[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]])},17129:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},77506:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5932:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},42887:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},83855:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},58038:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},85571:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]])},50949:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},94909:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]])},99513:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(62881).Z)("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]])},87002:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>Z});var s=t(10326),l=t(17577),i=t(59813),r=t(31540),n=t(83855),d=t(71821),c=t(50949),o=t(30361),m=t(17069),x=t(37358),h=t(12714),p=t(42887),g=t(5932),u=t(69436),y=t(94019),b=t(99102),j=t(36283),f=t(59734),v=t(40617),k=t(9086),N=t(28870),w=t(85999);function Z(){let[e,a]=(0,l.useState)([]),[t,Z]=(0,l.useState)(!0),[S,_]=(0,l.useState)({mrr:0,late_total:0,active_contracts:0,avg_ticket:0}),[E,P]=(0,l.useState)(!1),[$,R]=(0,l.useState)(!1),[D,V]=(0,l.useState)(null),[q,z]=(0,l.useState)(!1),[L,U]=(0,l.useState)(!1),[O,H]=(0,l.useState)(""),[T,B]=(0,l.useState)({sendgrid:!1,whatsapp:!1}),[W,F]=(0,l.useState)(!0);(0,i.createClientComponentClient)();let G=e=>{V(e),z(!0)},I=e=>{V(e),H(`Ol\xe1 ${e.name}! ðŸ˜Š

Identificamos uma fatura em aberto referente ao seu contrato com a Valle 360.
Pode nos confirmar a previs\xe3o de pagamento? Se preferir, posso te ajudar com o link/2\xaa via.

Obrigado!`),U(!0)},J=e=>{window.open(`tel:${e.phone}`,"_blank"),w.Am.info(`Ligando para ${e.phone}...`)},X=e=>{window.open(`mailto:${e.email}?subject=Cobran\xe7a - Valle 360`,"_blank"),w.Am.info(`Abrindo email para ${e.email}...`)};return(0,s.jsxs)("div",{className:"p-8 bg-gray-50 min-h-screen",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gest\xe3o de Cobran\xe7as"}),s.jsx("p",{className:"text-gray-500",children:"Vis\xe3o consolidada de contratos e inadimpl\xeancia."})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>R(!0),className:"px-4 py-2 text-sm border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[s.jsx(r.Z,{className:"w-4 h-4"}),"Exportar"]}),(0,s.jsxs)("button",{onClick:()=>P(!0),className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[s.jsx(n.Z,{className:"w-4 h-4"}),"Novo Contrato"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(M,{title:"MRR (Receita Recorrente)",value:`R$ ${S.mrr.toLocaleString("pt-BR")}`,icon:s.jsx(d.Z,{className:"w-6 h-6 text-green-600"}),trend:"+12% vs m\xeas anterior",color:"green"}),s.jsx(M,{title:"Inadimpl\xeancia Atual",value:`R$ ${S.late_total.toLocaleString("pt-BR")}`,icon:s.jsx(c.Z,{className:"w-6 h-6 text-red-600"}),trend:`${e.filter(e=>"late"===e.payment_status).length} clientes atrasados`,color:"red"}),s.jsx(M,{title:"Contratos Ativos",value:S.active_contracts.toString(),icon:s.jsx(o.Z,{className:"w-6 h-6 text-blue-600"}),trend:"Est\xe1vel",color:"blue"}),s.jsx(M,{title:"Ticket M\xe9dio",value:`R$ ${S.avg_ticket.toLocaleString("pt-BR")}`,icon:s.jsx(m.Z,{className:"w-6 h-6 text-purple-600"}),trend:"+5% vs m\xeas anterior",color:"purple"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Carteira de Clientes"})}),s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Valor Mensal"}),s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status Pagamento"}),s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Pr\xf3ximo Vencimento"}),s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Sa\xfade"}),s.jsx("th",{className:"text-right py-4 px-6 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:t?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-8",children:"Carregando..."})}):e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-6",children:(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500",children:e.email})]})}),(0,s.jsxs)("td",{className:"py-4 px-6 text-gray-600 font-medium",children:["R$ ",e.contract_value.toLocaleString("pt-BR")]}),s.jsx("td",{className:"py-4 px-6",children:s.jsx(C,{status:e.payment_status,daysLate:e.days_late})}),s.jsx("td",{className:"py-4 px-6 text-gray-600",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(x.Z,{className:"w-4 h-4 text-gray-400"}),new Date(e.next_billing).toLocaleDateString("pt-BR")]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsx(A,{score:e.health_score})}),s.jsx("td",{className:"py-4 px-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>G(e),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Ver Detalhes",children:s.jsx(h.Z,{className:"w-4 h-4 text-gray-600"})}),s.jsx("button",{onClick:()=>J(e),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Ligar",children:s.jsx(p.Z,{className:"w-4 h-4 text-green-600"})}),s.jsx("button",{onClick:()=>X(e),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Email",children:s.jsx(g.Z,{className:"w-4 h-4 text-blue-600"})}),"late"===e.payment_status&&(0,s.jsxs)("button",{onClick:()=>I(e),className:"px-3 py-1.5 bg-red-50 text-red-600 rounded-lg text-sm font-medium hover:bg-red-100 transition-colors flex items-center gap-1",children:[s.jsx(u.Z,{className:"w-3 h-3"}),"Cobrar"]})]})})]},e.id))})]})})]})]}),s.jsx(k.M,{children:$&&s.jsx(N.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>R(!1),children:(0,s.jsxs)(N.E.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Exportar Dados"}),s.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(y.Z,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha o formato de exporta\xe7\xe3o:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>{let a=new Blob([[["Cliente","Email","Telefone","Valor Mensal","Status Pagamento","Pr\xf3ximo Vencimento","Score Sa\xfade"],...e.map(e=>[e.name,e.email,e.phone,`R$ ${e.contract_value}`,"ok"===e.payment_status?"Em Dia":"late"===e.payment_status?"Atrasado":"Pendente",new Date(e.next_billing).toLocaleDateString("pt-BR"),e.health_score.toString()])].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=`cobrancas_${new Date().toISOString().split("T")[0]}.csv`,s.click(),w.Am.success("CSV exportado com sucesso!"),R(!1)},className:"flex flex-col items-center gap-2 p-4 border rounded-xl hover:bg-gray-50 transition-colors",children:[s.jsx(b.Z,{className:"w-8 h-8 text-green-600"}),s.jsx("span",{className:"font-medium",children:"CSV / Excel"})]}),(0,s.jsxs)("button",{onClick:()=>{w.Am.success("PDF gerado! Download iniciando..."),R(!1)},className:"flex flex-col items-center gap-2 p-4 border rounded-xl hover:bg-gray-50 transition-colors",children:[s.jsx(j.Z,{className:"w-8 h-8 text-red-600"}),s.jsx("span",{className:"font-medium",children:"PDF"})]})]})]})})}),s.jsx(k.M,{children:E&&s.jsx(N.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>P(!1),children:(0,s.jsxs)(N.E.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Novo Contrato"}),s.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),s.jsx("input",{type:"text",placeholder:"Nome do cliente",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",placeholder:"email@empresa.com",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Mensal"}),s.jsx("input",{type:"text",placeholder:"R$ 0,00",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dia Vencimento"}),s.jsx("input",{type:"number",placeholder:"10",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),s.jsx("button",{onClick:()=>{w.Am.success("Redirecionando para cria\xe7\xe3o de contrato..."),P(!1)},className:"w-full py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Criar Contrato"})]})]})})}),s.jsx(k.M,{children:q&&D&&s.jsx(N.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>z(!1),children:(0,s.jsxs)(N.E.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Detalhes do Cliente"}),s.jsx("button",{onClick:()=>z(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-xl flex items-center justify-center",children:s.jsx(f.Z,{className:"w-8 h-8 text-indigo-600"})}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900",children:D.name}),s.jsx("p",{className:"text-gray-500",children:D.email})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Valor Mensal"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["R$ ",D.contract_value.toLocaleString("pt-BR")]})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Status"}),s.jsx(C,{status:D.payment_status,daysLate:D.days_late})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Pr\xf3ximo Vencimento"}),s.jsx("p",{className:"font-medium",children:new Date(D.next_billing).toLocaleDateString("pt-BR")})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Score de Sa\xfade"}),s.jsx(A,{score:D.health_score})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsxs)("button",{onClick:()=>{J(D),z(!1)},className:"flex-1 py-2 bg-green-50 text-green-600 rounded-lg font-medium hover:bg-green-100 flex items-center justify-center gap-2",children:[s.jsx(p.Z,{className:"w-4 h-4"})," Ligar"]}),(0,s.jsxs)("button",{onClick:()=>{X(D),z(!1)},className:"flex-1 py-2 bg-blue-50 text-blue-600 rounded-lg font-medium hover:bg-blue-100 flex items-center justify-center gap-2",children:[s.jsx(g.Z,{className:"w-4 h-4"})," Email"]}),"late"===D.payment_status&&(0,s.jsxs)("button",{onClick:()=>{I(D),z(!1)},className:"flex-1 py-2 bg-red-50 text-red-600 rounded-lg font-medium hover:bg-red-100 flex items-center justify-center gap-2",children:[s.jsx(u.Z,{className:"w-4 h-4"})," Cobrar"]})]})]})]})})}),s.jsx(k.M,{children:L&&D&&s.jsx(N.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>U(!1),children:(0,s.jsxs)(N.E.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Enviar Cobran\xe7a"}),s.jsx("p",{className:"text-sm text-gray-500",children:D.name})]}),s.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(y.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensagem"}),s.jsx("textarea",{value:O,onChange:e=>H(e.target.value),className:"w-full h-40 p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[(0,s.jsxs)("button",{className:"py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 flex items-center justify-center gap-2",onClick:async()=>{try{w.Am.loading("Enviando pela intranet...");let e=await fetch("/api/admin/outbound/intranet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:D.id,text:O})}),a=await e.json().catch(()=>({}));if(!e.ok)throw Error(a?.error||"Falha ao enviar intranet");w.Am.dismiss(),w.Am.success("Mensagem enviada pela intranet!"),U(!1)}catch(e){w.Am.dismiss(),w.Am.error(`Erro: ${String(e?.message||e)}`)}},title:"Mensagem interna (chat) para o cliente",children:[s.jsx(v.Z,{className:"w-4 h-4"}),"Intranet"]}),(0,s.jsxs)("button",{className:"py-2 border rounded-lg font-medium hover:bg-gray-50 flex items-center justify-center gap-2",title:"Abrir email via mailto",onClick:async()=>{try{w.Am.loading("Preparando email...");let e=await fetch("/api/admin/outbound/email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:D.email,toName:D.name,subject:"Cobran\xe7a - Valle 360",text:O,html:`<div style="font-family: Arial, sans-serif; line-height: 1.5;">${O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\n/g,"<br/>")}</div>`})}),a=await e.json().catch(()=>({}));if(!e.ok)throw Error(a?.error||"Falha ao enviar email");w.Am.dismiss(),a?.mailtoUrl?(window.open(a.mailtoUrl,"_blank"),w.Am.success("Email pronto! Abra seu app de email.")):w.Am.success("Email preparado!")}catch(e){w.Am.dismiss(),w.Am.error(`Erro: ${String(e?.message||e)}`)}},children:[s.jsx(g.Z,{className:"w-4 h-4"}),"Email"]}),(0,s.jsxs)("button",{className:"py-2 border rounded-lg font-medium hover:bg-gray-50 flex items-center justify-center gap-2 disabled:opacity-60",disabled:W||!T.whatsapp,title:T.whatsapp?"Enviar via WhatsApp":"WhatsApp n\xe3o configurado",onClick:async()=>{try{w.Am.loading("Enviando WhatsApp...");let e=await fetch("/api/admin/outbound/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toPhone:D.phone,text:O})}),a=await e.json().catch(()=>({}));if(!e.ok)throw Error(a?.error||"Falha ao enviar WhatsApp");w.Am.dismiss(),w.Am.success("WhatsApp enviado!")}catch(e){w.Am.dismiss(),w.Am.error(`Erro: ${String(e?.message||e)}`)}},children:[s.jsx(p.Z,{className:"w-4 h-4"}),"WhatsApp"]})]})]})]})})})]})}function M({title:e,value:a,icon:t,trend:l,color:i}){return(0,s.jsxs)(N.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white p-6 rounded-xl shadow-sm border-l-4 ${({green:"border-l-green-500 bg-green-50",red:"border-l-red-500 bg-red-50",blue:"border-l-blue-500 bg-blue-50",purple:"border-l-purple-500 bg-purple-50"})[i]?.split(" ")[0]||"border-l-gray-500"}`,children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:e}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:a})]}),s.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:t})]}),s.jsx("p",{className:"text-xs font-medium text-gray-600",children:l})]})}function C({status:e,daysLate:a}){let t={ok:"bg-green-100 text-green-800",late:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"},l={ok:"Em Dia",late:a?`Atrasado ${a}d`:"Atrasado",pending:"Pendente"};return s.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${t[e]||t.pending}`,children:l[e]||"Desconhecido"})}function A({score:e}){let a="bg-green-500";return e<70?a="bg-red-500":e<90&&(a="bg-yellow-500"),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden w-24",children:s.jsx("div",{className:`h-full ${a} transition-all`,style:{width:`${e}%`}})}),s.jsx("span",{className:"text-xs text-gray-600 font-medium",children:e})]})}},44462:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\User\Downloads\valle-360-main\valle-360-main\src\app\admin\financeiro\clientes\page.tsx#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[89276,54267,51789,78515,46226,28870,39215,16819,72418,86148,61288,36499,59813,18832,14574,92237],()=>t(69227));module.exports=s})();