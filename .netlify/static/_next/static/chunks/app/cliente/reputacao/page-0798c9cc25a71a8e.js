(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9920],{73950:function(e,t,a){Promise.resolve().then(a.bind(a,1746))},1746:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var s=a(57437),r=a(2265),i=a(57586),n=a(26892),l=a(82431),c=a(86595),d=a(70525),o=a(3085),m=a(21047),x=a(33327),u=a(41671),g=a(76865),p=a(88906),f=a(53417),h=a(31810),b=a(37157),y=a(96215),j=a(82023),N=a(11239),w=a(58896),v=a(38098),_=a(93448),k=a(5526),A=a(45879),Z=a(66337),q=a(76858),E=a(27648);function R(e){let{featureName:t}=e;return(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center p-8 rounded-2xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center mb-4",children:(0,s.jsx)(Z.Z,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Funcionalidade n\xe3o dispon\xedvel"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center max-w-sm mb-4",children:t?'A funcionalidade "'.concat(t,'" n\xe3o est\xe1 inclu\xedda no seu plano atual.'):"Esta funcionalidade n\xe3o est\xe1 inclu\xedda no seu plano atual."}),(0,s.jsxs)(E.default,{href:"/cliente/servicos",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#1672d6] text-white rounded-lg text-sm font-medium hover:bg-[#1260b5] transition-colors",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),"Ver planos dispon\xedveis",(0,s.jsx)(q.Z,{className:"w-4 h-4"})]})]})}function S(){return(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl"})})}function I(e){let{feature:t,children:a,fallback:i,hideWhenDisabled:n=!1,showLoading:l=!1}=e,{hasAccess:c,loading:d}=function(e){let[t,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){try{i(!0),l(null);let{data:{user:t}}=await k.supabase.auth.getUser();if(!t){a(!1);return}let{data:s}=await k.supabase.from("user_profiles").select("client_id, user_type").eq("user_id",t.id).single();if((null==s?void 0:s.user_type)==="super_admin"||(null==s?void 0:s.user_type)==="admin"){a(!0);return}if(!(null==s?void 0:s.client_id)){a(!1);return}let r=await (0,A.U6)(s.client_id,e);a(r)}catch(e){console.error("Erro ao verificar feature:",e),l("Erro ao verificar permiss\xe3o"),a(!1)}finally{i(!1)}})()},[e]),{hasAccess:t,loading:s,error:n}}(t);return d&&l?(0,s.jsx)(S,{}):d?null:c?(0,s.jsx)(s.Fragment,{children:a}):n?null:(0,s.jsx)(s.Fragment,{children:i||(0,s.jsx)(R,{})})}function C(){let[e,t]=(0,r.useState)("overview"),[a,k]=(0,r.useState)(null),[A,Z]=(0,r.useState)([]),[q,E]=(0,r.useState)(null),[R,S]=(0,r.useState)(!0),[C,B]=(0,r.useState)(null);(0,r.useEffect)(()=>{z()},[]);let z=async()=>{S(!0);try{let[e,t,a]=await Promise.all([fetch("/api/reputation/analyze?action=overview").then(e=>e.json()),fetch("/api/reputation/analyze?action=reviews").then(e=>e.json()),fetch("/api/reputation/analyze?action=predictive").then(e=>e.json())]);e.success&&k(e.data),t.success&&Z(t.data),a.success&&E(a.data)}catch(e){console.error("Erro ao carregar dados:",e)}finally{S(!1)}};return R?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-[#1672d6]"})}):(0,s.jsx)(I,{feature:"reputation",children:(0,s.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"w-7 h-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:"Central de Reputa\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Monitore e gerencie sua reputa\xe7\xe3o em todas as plataformas"})]})]}),(0,s.jsxs)("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),"Atualizar"]})]}),a&&(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"col-span-1 bg-gradient-to-br from-[#001533] to-[#1672d6] rounded-2xl p-6 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("span",{className:"text-white/70 text-sm font-medium",children:"Score Geral"}),(0,s.jsxs)("div",{className:(0,_.cn)("flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold","up"===a.trend?"bg-green-500/20 text-green-300":"down"===a.trend?"bg-red-500/20 text-red-300":"bg-white/20 text-white"),children:["up"===a.trend&&(0,s.jsx)(d.Z,{className:"w-3 h-3"}),"down"===a.trend&&(0,s.jsx)(o.Z,{className:"w-3 h-3"}),"stable"===a.trend&&(0,s.jsx)(m.Z,{className:"w-3 h-3"}),"up"===a.trend?"Subindo":"down"===a.trend?"Caindo":"Est\xe1vel"]})]}),(0,s.jsxs)("div",{className:"flex items-end gap-2 mb-4",children:[(0,s.jsx)("span",{className:"text-5xl font-bold",children:a.score}),(0,s.jsx)("span",{className:"text-white/50 text-xl mb-2",children:"/100"})]}),(0,s.jsxs)("div",{className:(0,_.cn)("inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium","excellent"===a.status&&"bg-green-500/20 text-green-300","good"===a.status&&"bg-blue-500/20 text-blue-300","attention"===a.status&&"bg-yellow-500/20 text-yellow-300","critical"===a.status&&"bg-red-500/20 text-red-300"),children:["excellent"===a.status&&(0,s.jsx)(x.Z,{className:"w-4 h-4"}),"good"===a.status&&(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"attention"===a.status&&(0,s.jsx)(g.Z,{className:"w-4 h-4"}),"critical"===a.status&&(0,s.jsx)(g.Z,{className:"w-4 h-4"}),"excellent"===a.status&&"Excelente","good"===a.status&&"Bom","attention"===a.status&&"Aten\xe7\xe3o","critical"===a.status&&"Cr\xedtico"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:(0,s.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),(0,s.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Google"})]}),a.platforms.google.pendingReplies>0&&(0,s.jsxs)("span",{className:"px-2 py-1 bg-amber-100 text-primary rounded-full text-xs font-medium",children:[a.platforms.google.pendingReplies," pendente",a.platforms.google.pendingReplies>1?"s":""]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:a.platforms.google.rating.toFixed(1)}),(0,s.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,s.jsx)(c.Z,{className:(0,_.cn)("w-4 h-4",e<=Math.round(a.platforms.google.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300")},e))})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[a.platforms.google.totalReviews," avalia\xe7\xf5es"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-green-600"})}),(0,s.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Reclame Aqui"})]}),a.platforms.reclameAqui.pendingComplaints>0&&(0,s.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-600 rounded-full text-xs font-medium",children:[a.platforms.reclameAqui.pendingComplaints," pendente",a.platforms.reclameAqui.pendingComplaints>1?"s":""]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:a.platforms.reclameAqui.rating.toFixed(1)}),(0,s.jsx)("span",{className:(0,_.cn)("px-2 py-1 rounded-full text-xs font-bold uppercase","otimo"===a.platforms.reclameAqui.reputation&&"bg-green-100 text-green-700","bom"===a.platforms.reclameAqui.reputation&&"bg-blue-100 text-blue-700","regular"===a.platforms.reclameAqui.reputation&&"bg-yellow-100 text-yellow-700","ruim"===a.platforms.reclameAqui.reputation&&"bg-amber-100 text-amber-700","nao_recomendado"===a.platforms.reclameAqui.reputation&&"bg-red-100 text-red-700"),children:a.platforms.reclameAqui.reputation.replace("_"," ")})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[a.platforms.reclameAqui.solutionRate,"% de solu\xe7\xe3o"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:(0,s.jsx)(f.Z,{className:"w-5 h-5 text-purple-600"})}),(0,s.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Redes Sociais"})]}),a.platforms.social.alerts>0&&(0,s.jsxs)("span",{className:"px-2 py-1 bg-amber-100 text-primary rounded-full text-xs font-medium",children:[a.platforms.social.alerts," alerta",a.platforms.social.alerts>1?"s":""]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsxs)("span",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:[a.platforms.social.sentiment>0?"+":"",(100*a.platforms.social.sentiment).toFixed(0),"%"]}),(0,s.jsxs)("div",{className:(0,_.cn)("w-6 h-6 rounded-full flex items-center justify-center",a.platforms.social.sentiment>.2&&"bg-green-100",a.platforms.social.sentiment<=.2&&a.platforms.social.sentiment>=-.2&&"bg-gray-100",a.platforms.social.sentiment<-.2&&"bg-red-100"),children:[a.platforms.social.sentiment>.2&&(0,s.jsx)(h.Z,{className:"w-3 h-3 text-green-600"}),a.platforms.social.sentiment<=.2&&a.platforms.social.sentiment>=-.2&&(0,s.jsx)(m.Z,{className:"w-3 h-3 text-gray-600"}),a.platforms.social.sentiment<-.2&&(0,s.jsx)(b.Z,{className:"w-3 h-3 text-red-600"})]})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[a.platforms.social.mentions," men\xe7\xf5es recentes"]})]})]}),(0,s.jsx)("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:[{id:"overview",label:"Vis\xe3o Geral",icon:y.Z},{id:"google",label:"Google",icon:c.Z},{id:"reclameaqui",label:"Reclame Aqui",icon:p.Z},{id:"social",label:"Redes Sociais",icon:f.Z},{id:"insights",label:"Insights Preditivos",icon:j.Z}].map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.id),className:(0,_.cn)("flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 -mb-px whitespace-nowrap",e===a.id?"border-[#1672d6] text-[#1672d6]":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,s.jsx)(a.icon,{className:"w-4 h-4"}),a.label]},a.id))}),(0,s.jsxs)(i.M,{mode:"wait",children:["overview"===e&&a&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"w-5 h-5 text-yellow-500"}),"Insights e A\xe7\xf5es Recomendadas"]}),(0,s.jsx)("div",{className:"space-y-3",children:a.insights.map((e,t)=>(0,s.jsxs)("div",{className:(0,_.cn)("flex items-start gap-4 p-4 rounded-xl","action"===e.type&&"bg-blue-50 border border-blue-200","warning"===e.type&&"bg-amber-50 border border-amber-200","opportunity"===e.type&&"bg-green-50 border border-green-200","success"===e.type&&"bg-emerald-50 border border-emerald-200"),children:[(0,s.jsxs)("div",{className:(0,_.cn)("w-10 h-10 rounded-xl flex items-center justify-center","action"===e.type&&"bg-blue-100","warning"===e.type&&"bg-amber-100","opportunity"===e.type&&"bg-green-100","success"===e.type&&"bg-emerald-100"),children:["action"===e.type&&(0,s.jsx)(w.Z,{className:"w-5 h-5 text-blue-600"}),"warning"===e.type&&(0,s.jsx)(g.Z,{className:"w-5 h-5 text-primary"}),"opportunity"===e.type&&(0,s.jsx)(d.Z,{className:"w-5 h-5 text-green-600"}),"success"===e.type&&(0,s.jsx)(u.Z,{className:"w-5 h-5 text-emerald-600"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800",children:e.title}),e.platform&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs",children:e.platform}),(0,s.jsx)("span",{className:(0,_.cn)("px-2 py-0.5 rounded-full text-xs font-medium","high"===e.priority&&"bg-red-100 text-red-600","medium"===e.priority&&"bg-yellow-100 text-yellow-600","low"===e.priority&&"bg-gray-100 text-gray-600"),children:"high"===e.priority?"Alta":"medium"===e.priority?"M\xe9dia":"Baixa"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),e.actionUrl&&(0,s.jsx)("button",{className:"px-3 py-1.5 bg-[#1672d6] text-white rounded-lg text-sm font-medium hover:bg-[#1260b5] transition-colors",children:"Ver"})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5 text-gray-400"}),"\xdaltimas Avalia\xe7\xf5es"]}),(0,s.jsx)("div",{className:"space-y-3",children:A.slice(0,5).map(e=>(0,s.jsxs)("div",{className:(0,_.cn)("p-3 rounded-xl border cursor-pointer hover:shadow-sm transition-shadow",e.needsAttention?"border-amber-200 bg-amber-50":"border-gray-100 dark:border-gray-700"),onClick:()=>B(e),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:e.authorName}),(0,s.jsxs)("span",{className:(0,_.cn)("w-6 h-6 rounded-full flex items-center justify-center","positive"===e.sentiment&&"bg-green-100","neutral"===e.sentiment&&"bg-gray-100","negative"===e.sentiment&&"bg-red-100"),children:["positive"===e.sentiment&&(0,s.jsx)(h.Z,{className:"w-3 h-3 text-green-600"}),"neutral"===e.sentiment&&(0,s.jsx)(m.Z,{className:"w-3 h-3 text-gray-600"}),"negative"===e.sentiment&&(0,s.jsx)(b.Z,{className:"w-3 h-3 text-red-600"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.text}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-400 capitalize",children:e.platform}),e.needsAttention&&!e.hasReply&&(0,s.jsx)("span",{className:"text-xs text-primary font-medium",children:"Responder"})]})]},e.id))})]})]}),"google"===e&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Reviews do Google"}),(0,s.jsx)("div",{className:"space-y-4",children:A.filter(e=>"google"===e.platform).map(e=>(0,s.jsxs)("div",{className:"flex gap-4 p-4 border border-gray-100 dark:border-gray-700 rounded-xl",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold",children:e.authorName.charAt(0)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"font-medium text-gray-800 dark:text-white",children:e.authorName}),(0,s.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(t=>(0,s.jsx)(c.Z,{className:(0,_.cn)("w-3 h-3",t<=(e.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300")},t))}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.text}),(0,s.jsx)("div",{className:"flex items-center gap-2 mt-3",children:e.hasReply?(0,s.jsxs)("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"w-3 h-3"}),"Respondido"]}):(0,s.jsxs)("button",{className:"text-xs text-[#1672d6] font-medium flex items-center gap-1 hover:underline",children:[(0,s.jsx)(v.Z,{className:"w-3 h-3"}),"Responder"]})})]})]},e.id))})]})}),"reclameaqui"===e&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Reclama\xe7\xf5es no Reclame Aqui"}),(0,s.jsx)("div",{className:"space-y-4",children:A.filter(e=>"reclame_aqui"===e.platform).map(e=>(0,s.jsxs)("div",{className:(0,_.cn)("p-4 border rounded-xl",e.needsAttention?"border-red-200 bg-red-50":e.hasReply?"border-green-200 bg-green-50":"border-gray-100 dark:border-gray-700"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-800 dark:text-white",children:e.authorName}),(0,s.jsx)("span",{className:(0,_.cn)("px-2 py-1 rounded-full text-xs font-medium",e.needsAttention&&"bg-red-100 text-red-600",e.hasReply&&!e.needsAttention&&"bg-green-100 text-green-600"),children:e.needsAttention?"Pendente":e.hasReply?"Respondido":"Aguardando"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.text}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,s.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString("pt-BR")}),e.needsAttention&&(0,s.jsxs)("button",{className:"text-xs text-red-600 font-medium flex items-center gap-1 hover:underline",children:[(0,s.jsx)(v.Z,{className:"w-3 h-3"}),"Responder Urgente"]})]})]},e.id))})]})}),"social"===e&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Men\xe7\xf5es nas Redes Sociais"}),(0,s.jsx)("div",{className:"space-y-4",children:A.filter(e=>["instagram","facebook","other"].includes(e.platform)).map(e=>(0,s.jsxs)("div",{className:"flex gap-4 p-4 border border-gray-100 dark:border-gray-700 rounded-xl",children:[(0,s.jsx)("div",{className:(0,_.cn)("w-10 h-10 rounded-full flex items-center justify-center text-white font-bold","instagram"===e.platform&&"bg-gradient-to-br from-purple-500 to-pink-500","facebook"===e.platform&&"bg-blue-600","other"===e.platform&&"bg-gray-500"),children:e.authorName.charAt(0)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"font-medium text-gray-800 dark:text-white",children:e.authorName}),(0,s.jsx)("span",{className:"text-xs text-gray-400 capitalize",children:e.platform}),(0,s.jsxs)("span",{className:(0,_.cn)("w-5 h-5 rounded-full flex items-center justify-center","positive"===e.sentiment&&"bg-green-100","neutral"===e.sentiment&&"bg-gray-100","negative"===e.sentiment&&"bg-red-100"),children:["positive"===e.sentiment&&(0,s.jsx)(h.Z,{className:"w-2.5 h-2.5 text-green-600"}),"neutral"===e.sentiment&&(0,s.jsx)(m.Z,{className:"w-2.5 h-2.5 text-gray-600"}),"negative"===e.sentiment&&(0,s.jsx)(b.Z,{className:"w-2.5 h-2.5 text-red-600"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.text}),(0,s.jsx)("span",{className:"text-xs text-gray-400 mt-2 block",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]})]},e.id))})]})}),"insights"===e&&q&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"w-5 h-5 text-yellow-500"}),"Previs\xf5es da Val IA"]}),(0,s.jsx)("div",{className:"space-y-4",children:q.predictions.map(e=>(0,s.jsxs)("div",{className:(0,_.cn)("p-4 rounded-xl border","risk"===e.type?"border-red-200 bg-red-50":"border-green-200 bg-green-50"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:["risk"===e.type?(0,s.jsx)(g.Z,{className:"w-5 h-5 text-red-500"}):(0,s.jsx)(d.Z,{className:"w-5 h-5 text-green-500"}),(0,s.jsx)("h4",{className:"font-medium text-gray-800",children:e.title})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Probabilidade: ",(0,s.jsxs)("strong",{children:[Math.round(100*e.probability),"%"]})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Impacto: ",(0,s.jsx)("strong",{className:(0,_.cn)("high"===e.impact&&"text-red-600","medium"===e.impact&&"text-yellow-600","low"===e.impact&&"text-gray-600"),children:"high"===e.impact?"Alto":"medium"===e.impact?"M\xe9dio":"Baixo"})]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:e.timeframe})]}),e.action&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"A\xe7\xe3o recomendada:"}),(0,s.jsx)("p",{className:"text-sm text-[#1672d6] font-medium",children:e.action})]})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(w.Z,{className:"w-5 h-5 text-blue-500"}),"Recomenda\xe7\xf5es"]}),(0,s.jsx)("div",{className:"space-y-3",children:q.recommendations.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-[#1672d6] flex items-center justify-center text-white text-xs font-bold",children:t+1}),(0,s.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:e})]},t))}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-br from-[#001533] to-[#1672d6] rounded-xl text-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:(0,s.jsx)(j.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold",children:"Precisa de ajuda?"}),(0,s.jsx)("p",{className:"text-xs text-white/70",children:"Converse com a Val IA"})]})]}),(0,s.jsx)("p",{className:"text-sm text-white/80 mb-3",children:"A Val pode ajudar voc\xea a criar respostas para reviews, analisar tend\xeancias e sugerir a\xe7\xf5es."}),(0,s.jsx)("button",{className:"w-full py-2 bg-white text-[#001533] rounded-lg text-sm font-bold hover:bg-white/90 transition-colors",children:"Conversar com Val IA"})]})]})]})]})]})})})}},45879:function(e,t,a){"use strict";a.d(t,{Cq:function(){return i},U6:function(){return r},UV:function(){return m},a8:function(){return x},hX:function(){return l},o$:function(){return d},oY:function(){return c},r5:function(){return o},zx:function(){return n}});var s=a(5526);async function r(e,t){try{let{data:a,error:r}=await s.supabase.rpc("client_has_feature",{p_client_id:e,p_feature_code:t});if(r)return console.error("Erro ao verificar feature:",r),!1;return!0===a}catch(e){return console.error("Erro ao verificar feature:",e),!1}}async function i(){let{data:e,error:t}=await s.supabase.from("features").select("*").eq("is_active",!0).order("sort_order");return t?(console.error("Erro ao buscar features:",t),[]):e||[]}async function n(e){let{data:t,error:a}=await s.supabase.from("features").select("*").eq("is_active",!0).order("sort_order");if(a||!t)return console.error("Erro ao buscar features:",a),[];let{data:r,error:i}=await s.supabase.from("client_features").select("*").eq("client_id",e);i&&console.error("Erro ao buscar features do cliente:",i);let{data:n,error:l}=await s.supabase.from("feature_requests").select("feature_id").eq("client_id",e).eq("status","pending");l&&console.error("Erro ao buscar solicita\xe7\xf5es:",l);let c=new Map((r||[]).map(e=>[e.feature_id,e])),d=new Set((n||[]).map(e=>e.feature_id));return t.map(e=>{let t=c.get(e.id),a=d.has(e.id),s="disabled";return(null==t?void 0:t.is_enabled)?(!t.expires_at||new Date(t.expires_at)>new Date)&&(s="enabled"):a&&(s="pending"),{feature:e,status:s,enabled_by:null==t?void 0:t.enabled_by,enabled_at:(null==t?void 0:t.enabled_at)||void 0,expires_at:(null==t?void 0:t.expires_at)||void 0}})}async function l(e,t,a,r,i){try{let{data:n,error:l}=await s.supabase.from("features").select("id").eq("code",t).single();if(l||!n)return{success:!1,error:"Feature n\xe3o encontrada"};let{error:c}=await s.supabase.from("client_features").upsert({client_id:e,feature_id:n.id,is_enabled:a,enabled_by:"manual",enabled_by_user_id:r,enabled_at:a?new Date().toISOString():null,notes:i},{onConflict:"client_id,feature_id"});if(c)return{success:!1,error:c.message};return await s.supabase.from("feature_logs").insert({client_id:e,feature_id:n.id,feature_code:t,action:a?"enabled":"disabled",changed_by_user_id:r,reason:i||"Altera\xe7\xe3o manual"}),{success:!0}}catch(e){return console.error("Erro ao toggle feature:",e),{success:!1,error:"Erro interno"}}}async function c(){let{data:e,error:t}=await s.supabase.from("feature_requests").select("\n      *,\n      feature:features(*)\n    ").eq("status","pending").order("created_at",{ascending:!1});return t?(console.error("Erro ao buscar solicita\xe7\xf5es:",t),[]):e||[]}async function d(e,t,a){try{let{data:r,error:i}=await s.supabase.from("feature_requests").select("client_id, feature_id").eq("id",e).single();if(i||!r)return{success:!1,error:"Solicita\xe7\xe3o n\xe3o encontrada"};let{error:n}=await s.supabase.from("feature_requests").update({status:"approved",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),review_notes:a}).eq("id",e);if(n)return{success:!1,error:n.message};let{error:l}=await s.supabase.from("client_features").upsert({client_id:r.client_id,feature_id:r.feature_id,is_enabled:!0,enabled_by:"request",enabled_by_user_id:t,enabled_at:new Date().toISOString(),notes:"Aprovado via solicita\xe7\xe3o. ".concat(a||"")},{onConflict:"client_id,feature_id"});if(l)return{success:!1,error:l.message};return await s.supabase.from("feature_logs").insert({client_id:r.client_id,feature_id:r.feature_id,action:"request_approved",changed_by_user_id:t,reason:a||"Solicita\xe7\xe3o aprovada"}),{success:!0}}catch(e){return console.error("Erro ao aprovar solicita\xe7\xe3o:",e),{success:!1,error:"Erro interno"}}}async function o(e,t,a){try{let{data:r,error:i}=await s.supabase.from("feature_requests").select("client_id, feature_id").eq("id",e).single();if(i||!r)return{success:!1,error:"Solicita\xe7\xe3o n\xe3o encontrada"};let{error:n}=await s.supabase.from("feature_requests").update({status:"rejected",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),review_notes:a}).eq("id",e);if(n)return{success:!1,error:n.message};return await s.supabase.from("feature_logs").insert({client_id:r.client_id,feature_id:r.feature_id,action:"request_rejected",changed_by_user_id:t,reason:a}),{success:!0}}catch(e){return console.error("Erro ao rejeitar solicita\xe7\xe3o:",e),{success:!1,error:"Erro interno"}}}async function m(){let{data:e,error:t}=await s.supabase.from("services").select("\n      *,\n      service_features(\n        feature:features(*)\n      )\n    ").eq("is_active",!0).order("sort_order");return t?(console.error("Erro ao buscar servi\xe7os:",t),[]):(e||[]).map(e=>{var t;return{...e,features:(null===(t=e.service_features)||void 0===t?void 0:t.map(e=>e.feature).filter(Boolean))||[]}})}async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,{data:a,error:r}=await s.supabase.from("feature_logs").select("*").eq("client_id",e).order("created_at",{ascending:!1}).limit(t);return r?(console.error("Erro ao buscar logs:",r),[]):a||[]}},5526:function(e,t,a){"use strict";a.r(t),a.d(t,{supabase:function(){return n}});var s=a(62724);let r="https://ikjgsqtykkhqimypacro.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";r&&i||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let n=(0,s.eI)(r||"https://setup-missing.supabase.co",i||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},93448:function(e,t,a){"use strict";a.d(t,{cn:function(){return i},x:function(){return n}});var s=a(61994),r=a(53335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[2882,6137,4609,2724,2972,6712,2971,2117,1744],function(){return e(e.s=73950)}),_N_E=e.O()}]);