(()=>{var e={};e.id=26400,e.ids=[26400],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11186:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),a(87257),a(9457),a(49991),a(35866);var t=a(23191),s=a(88716),n=a(37922),i=a.n(n),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(r,o);let d=["",{children:["admin",{children:["fluxos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,87257)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\fluxos\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9457)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49991)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\admin\\fluxos\\page.tsx"],u="/admin/fluxos/page",h={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/fluxos/page",pathname:"/admin/fluxos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},17291:(e,r,a)=>{Promise.resolve().then(a.bind(a,40327))},38787:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]])},7507:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},69669:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},52952:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]])},48238:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},43810:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},26092:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},25880:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("file-code",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]])},92529:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]])},86645:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]])},70717:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},29798:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},52351:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("kanban",[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]])},17129:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},77506:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},94893:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},21405:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54689:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},58038:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},73037:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("square-kanban",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 7v7",key:"1x2jlm"}],["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M16 7v9",key:"1hp2iy"}]])},85571:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]])},50949:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},94909:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]])},99513:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(62881).Z)("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]])},40327:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>Z});var t=a(10326),s=a(17577),n=a(35047),i=a(85999),l=a(29752),o=a(91664),d=a(38443),c=a(50384),u=a(24118),h=a(41190),x=a(21405),p=a(94893),m=a(50949),_=a(43810),g=a(70717),y=a(12714),v=a(73037),f=a(66307),b=a(69669),j=a(54689);function k(e){let r=(e||"").toLowerCase();return"pending"===r?t.jsx(d.C,{className:"bg-yellow-500/10 text-yellow-700 border-yellow-500/30",children:"Pendente"}):"completed"===r||"processed"===r?t.jsx(d.C,{className:"bg-emerald-500/10 text-emerald-700 border-emerald-500/30",children:"OK"}):"error"===r?t.jsx(d.C,{className:"bg-red-500/10 text-red-700 border-red-500/30",children:"Erro"}):t.jsx(d.C,{variant:"outline",children:e})}function w(e){let r=e?.data_payload||{},a=r.kanban_board_id||r.board_id,t=r.kanban_task_id||r.task_id;return a&&t?`/admin/meu-kanban?boardId=${encodeURIComponent(String(a))}&taskId=${encodeURIComponent(String(t))}`:null}function N(e){let r=e||{};return{client_id:r.client_id||r.clientId||null,proposal_id:r.proposal_id||null,contract_id:r.contract_id||null,invoice_id:r.invoice_id||null,correlation_id:r.correlation_id||null,executed_at:r.executed_at||null,executed_by:r.executed_by||null,completed_note:r.completed_note||null,completed_at:r.completed_at||null,completed_by:r.completed_by||null,reopened_note:r.reopened_note||null,reopened_at:r.reopened_at||null,reopened_by:r.reopened_by||null,error_resolved_note:r.error_resolved_note||null,error_resolved_at:r.error_resolved_at||null,error_resolved_by:r.error_resolved_by||null,marked_error_note:r.marked_error_note||null,marked_error_at:r.marked_error_at||null,marked_error_by:r.marked_error_by||null,rerouted_note:r.rerouted_note||null,rerouted_at:r.rerouted_at||null,rerouted_by:r.rerouted_by||null,rerouted_from_area:r.rerouted_from_area||null,rerouted_to_area:r.rerouted_to_area||null,previous_executions:Array.isArray(r.previous_executions)?r.previous_executions:null,reroute_history:Array.isArray(r.reroute_history)?r.reroute_history:null,source_event_id:r.source_event_id||null}}function C(e){if(!e)return null;let r=new Date(String(e));return Number.isNaN(r.getTime())?String(e):r.toLocaleString("pt-BR")}function S(){(0,n.useSearchParams)();let[e,r]=(0,s.useState)("transitions"),[a,S]=(0,s.useState)(!1),[Z,M]=(0,s.useState)([]),[$,z]=(0,s.useState)([]),[E,A]=(0,s.useState)("pending"),[L,P]=(0,s.useState)(""),[T,O]=(0,s.useState)(null),[q,R]=(0,s.useState)(null),[F,V]=(0,s.useState)(null),[D,I]=(0,s.useState)(null),[H,K]=(0,s.useState)(null),[U,J]=(0,s.useState)(null),[B,Y]=(0,s.useState)(null),G=(0,s.useMemo)(()=>{let e=["Comercial","Jur\xeddico","Contratos","Financeiro","Operacao","Admin","RH","Social Media","Tr\xe1fego","Design","V\xeddeo"],r=Array.from(new Set([...e,...(Z||[]).flatMap(e=>[e.from_area,e.to_area]).filter(Boolean).map(e=>String(e))])).filter(r=>!e.includes(r));return r.sort((e,r)=>e.localeCompare(r,"pt-BR")),[...e,...r]},[Z]),Q=(0,s.useMemo)(()=>{let e=L.trim().toLowerCase();return(Z||[]).filter(e=>"all"===E||String(e.status).toLowerCase()===E).filter(r=>{if(!e)return!0;let a=(()=>{try{return JSON.stringify(r.data_payload||{}).toLowerCase()}catch{return""}})();return String(r.from_area||"").toLowerCase().includes(e)||String(r.to_area||"").toLowerCase().includes(e)||String(r.trigger_event||"").toLowerCase().includes(e)||String(r.error_message||"").toLowerCase().includes(e)||a.includes(e)})},[Z,E,L]),W=(0,s.useMemo)(()=>{let e=L.trim().toLowerCase();return($||[]).filter(e=>"all"===E||String(e.status).toLowerCase()===E).filter(r=>{if(!e)return!0;let a=(()=>{try{return JSON.stringify(r.payload||{}).toLowerCase()}catch{return""}})();return String(r.event_type||"").toLowerCase().includes(e)||String(r.entity_type||"").toLowerCase().includes(e)||String(r.error_message||"").toLowerCase().includes(e)||a.includes(e)})},[$,E,L]),X=(0,s.useMemo)(()=>{let e,r,a,t,s,n;let i=Z||[],l=$||[];return{transitions:{pending:(e="pending",i.filter(r=>String(r.status).toLowerCase()===e).length),error:(r="error",i.filter(e=>String(e.status).toLowerCase()===r).length),completed:(a="completed",i.filter(e=>String(e.status).toLowerCase()===a).length),total:i.length},events:{pending:(t="pending",l.filter(e=>String(e.status).toLowerCase()===t).length),error:(s="error",l.filter(e=>String(e.status).toLowerCase()===s).length),processed:(n="processed",l.filter(e=>String(e.status).toLowerCase()===n).length),total:l.length}}},[Z,$]),ee=(0,s.useCallback)(async()=>{let e=await fetch("/api/admin/workflow-transitions?limit=200"),r=await e.json().catch(()=>null);if(!e.ok)throw Error(r?.error||`Erro ao carregar fluxos [${e.status}]`);M(r?.transitions||[])},[]),er=(0,s.useCallback)(async()=>{let e=await fetch("/api/admin/events?limit=200"),r=await e.json().catch(()=>null);if(!e.ok)throw Error(r?.error||`Erro ao carregar eventos [${e.status}]`);z(r?.events||[])},[]),ea=(0,s.useCallback)(async()=>{S(!0);try{await Promise.all([ee(),er()])}catch(e){i.Am.error(e?.message||"Falha ao atualizar")}finally{S(!1)}},[ee,er]),et=async(e,r)=>{try{let a=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"completed",note:r})}),t=await a.json().catch(()=>null);if(!a.ok)throw Error(t?.error||`Falha ao concluir [${a.status}]`);i.Am.success("Transi\xe7\xe3o conclu\xedda"),await ee()}catch(e){i.Am.error(e?.message||"Falha ao concluir transi\xe7\xe3o")}},es=async(e,r)=>{try{let a=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"pending",action:"reopen",note:r})}),t=await a.json().catch(()=>null);if(!a.ok)throw Error(t?.error||`Falha ao reabrir [${a.status}]`);i.Am.success("Transi\xe7\xe3o reaberta"),await ee()}catch(e){i.Am.error(e?.message||"Falha ao reabrir transi\xe7\xe3o")}},en=async(e,r)=>{try{let a=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"pending",action:"resolve_error",note:r})}),t=await a.json().catch(()=>null);if(!a.ok)throw Error(t?.error||`Falha ao resolver erro [${a.status}]`);i.Am.success("Erro resolvido (voltou para pendente)"),await ee()}catch(e){i.Am.error(e?.message||"Falha ao resolver erro")}},ei=async(e,r)=>{try{let a=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"error",action:"mark_error",note:r})}),t=await a.json().catch(()=>null);if(!a.ok)throw Error(t?.error||`Falha ao marcar erro [${a.status}]`);i.Am.success("Transi\xe7\xe3o marcada como erro"),await ee()}catch(e){i.Am.error(e?.message||"Falha ao marcar erro")}},el=async(e,r,a)=>{try{let t=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"pending",action:"reroute",to_area:r,note:a})}),s=await t.json().catch(()=>null);if(!t.ok)throw Error(s?.error||`Falha ao encaminhar [${t.status}]`);i.Am.success("Transi\xe7\xe3o encaminhada"),await ee()}catch(e){i.Am.error(e?.message||"Falha ao encaminhar")}},eo=async()=>{try{let e=await fetch("/api/admin/events/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({limit:50})}),r=await e.json().catch(()=>null);if(!e.ok)throw Error(r?.error||`Falha ao processar eventos [${e.status}]`);i.Am.success(`Eventos processados: ${r?.processed||0} (falhas: ${r?.failed||0})`),await ea()}catch(e){i.Am.error(e?.message||"Falha ao processar eventos")}},ed=async e=>{try{let r=await fetch("/api/admin/events/reprocess",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),a=await r.json().catch(()=>null);if(!r.ok)throw Error(a?.error||`Falha ao reprocessar [${r.status}]`);i.Am.success("Evento reprocessado"),await ea()}catch(e){i.Am.error(e?.message||"Falha ao reprocessar evento")}},ec=async e=>{try{let r=await fetch("/api/admin/workflow-transitions/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),a=await r.json().catch(()=>null);if(!r.ok)throw Error(a?.error||`Falha ao enviar para Kanban [${r.status}]`);i.Am.success("Enviado para Kanban e marcado como conclu\xeddo"),await ea()}catch(e){i.Am.error(e?.message||"Falha ao enviar para Kanban")}};return t.jsx("div",{className:"min-h-screen bg-white dark:bg-[#0a0f1a] p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-[#001533] dark:text-white",children:"Central de Fluxos"}),t.jsx("p",{className:"text-[#001533]/60 dark:text-white/60",children:"Visualize a conversa entre \xe1reas (eventos → transi\xe7\xf5es → execu\xe7\xe3o)."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.z,{variant:"outline",onClick:ea,disabled:a,children:[t.jsx(x.Z,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Atualizar"]}),(0,t.jsxs)(o.z,{onClick:eo,disabled:a,children:[t.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"Processar eventos pendentes"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[t.jsx(l.Ol,{className:"pb-2",children:t.jsx(l.ll,{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Transi\xe7\xf5es"})}),(0,t.jsxs)(l.aY,{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:X.transitions.total}),(0,t.jsxs)("div",{className:"flex gap-2",children:[k("pending"),t.jsx("span",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:X.transitions.pending})]})]})]}),(0,t.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[t.jsx(l.Ol,{className:"pb-2",children:t.jsx(l.ll,{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Eventos"})}),(0,t.jsxs)(l.aY,{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:X.events.total}),(0,t.jsxs)("div",{className:"flex gap-2",children:[k("pending"),t.jsx("span",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:X.events.pending})]})]})]}),(0,t.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[t.jsx(l.Ol,{className:"pb-2",children:t.jsx(l.ll,{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Erros"})}),(0,t.jsxs)(l.aY,{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:X.transitions.error+X.events.error}),t.jsx(m.Z,{className:"w-5 h-5 text-red-500"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-start md:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(o.z,{variant:"pending"===E?"default":"outline",onClick:()=>A("pending"),children:"Pendentes"}),t.jsx(o.z,{variant:"error"===E?"default":"outline",onClick:()=>A("error"),children:"Erros"}),t.jsx(o.z,{variant:"completed"===E||"processed"===E?"default":"outline",onClick:()=>A("transitions"===e?"completed":"processed"),children:"OK"}),t.jsx(o.z,{variant:"all"===E?"default":"outline",onClick:()=>A("all"),children:"Todos"})]}),t.jsx(h.II,{value:L,onChange:e=>P(e.target.value),placeholder:"Buscar (\xe1rea, evento, erro...)",className:"max-w-md"})]}),(0,t.jsxs)(c.mQ,{value:e,defaultValue:e,onValueChange:e=>r(e),children:[(0,t.jsxs)(c.dr,{children:[t.jsx(c.SP,{value:"transitions",children:"Transi\xe7\xf5es"}),t.jsx(c.SP,{value:"events",children:"Eventos"})]}),t.jsx(c.nU,{value:"transitions",className:"mt-4",children:(0,t.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[t.jsx(l.Ol,{children:t.jsx(l.ll,{children:"Workflow Transitions"})}),t.jsx(l.aY,{className:"space-y-3",children:0===Q.length?t.jsx("div",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"Nenhuma transi\xe7\xe3o encontrada."}):t.jsx("div",{className:"space-y-2",children:Q.map(e=>(()=>{let r=w(e),a=N(e.data_payload),s=a.executed_at||a.executed_by?`Executado${a.executed_at?` em ${new Date(a.executed_at).toLocaleString("pt-BR")}`:""}${a.executed_by?` por ${String(a.executed_by).slice(0,8)}…`:""}`:null,n=a.reopened_at||a.reopened_by?`Reaberto${a.reopened_at?` em ${new Date(a.reopened_at).toLocaleString("pt-BR")}`:""}${a.reopened_by?` por ${String(a.reopened_by).slice(0,8)}…`:""}`:null,l=a.error_resolved_at||a.error_resolved_by?`Erro resolvido${a.error_resolved_at?` em ${new Date(a.error_resolved_at).toLocaleString("pt-BR")}`:""}${a.error_resolved_by?` por ${String(a.error_resolved_by).slice(0,8)}…`:""}`:null,c=a.marked_error_at||a.marked_error_by?`Marcado erro${a.marked_error_at?` em ${new Date(a.marked_error_at).toLocaleString("pt-BR")}`:""}${a.marked_error_by?` por ${String(a.marked_error_by).slice(0,8)}…`:""}`:null,u=a.rerouted_at||a.rerouted_by?`Encaminhado${a.rerouted_at?` em ${new Date(a.rerouted_at).toLocaleString("pt-BR")}`:""}${a.rerouted_by?` por ${String(a.rerouted_by).slice(0,8)}…`:""}`:null;return(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-[#001533]/10 dark:border-white/10 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("span",{className:"font-semibold text-[#001533] dark:text-white",children:[e.from_area," → ",e.to_area]}),k(String(e.status)),t.jsx(d.C,{variant:"outline",children:e.trigger_event}),a.client_id?t.jsx(d.C,{variant:"outline",children:"Cliente"}):null,a.proposal_id?t.jsx(d.C,{variant:"outline",children:"Proposta"}):null,a.contract_id?t.jsx(d.C,{variant:"outline",children:"Contrato"}):null,a.invoice_id?t.jsx(d.C,{variant:"outline",children:"Fatura"}):null]}),(0,t.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[new Date(e.created_at).toLocaleString("pt-BR"),e.error_message?` • ${e.error_message}`:"",s?` • ${s}`:"",a.completed_note?` • Nota: ${String(a.completed_note).slice(0,120)}`:"",n?` • ${n}`:"",a.reopened_note?` • Motivo: ${String(a.reopened_note).slice(0,120)}`:"",l?` • ${l}`:"",a.error_resolved_note?` • Motivo: ${String(a.error_resolved_note).slice(0,120)}`:"",c?` • ${c}`:"",a.marked_error_note?` • Motivo: ${String(a.marked_error_note).slice(0,120)}`:"",u?` • ${u}`:"",a.rerouted_to_area?` • Para: ${String(a.rerouted_to_area)}`:"",a.rerouted_note?` • Motivo: ${String(a.rerouted_note).slice(0,120)}`:""]}),a.client_id||a.proposal_id||a.contract_id||a.invoice_id||a.correlation_id?(0,t.jsxs)("div",{className:"text-[11px] text-[#001533]/50 dark:text-white/50 space-x-2",children:[a.client_id?(0,t.jsxs)("span",{children:["client_id: ",String(a.client_id).slice(0,10),"…"]}):null,a.proposal_id?(0,t.jsxs)("span",{children:["proposal_id: ",String(a.proposal_id).slice(0,10),"…"]}):null,a.contract_id?(0,t.jsxs)("span",{children:["contract_id: ",String(a.contract_id).slice(0,10),"…"]}):null,a.invoice_id?(0,t.jsxs)("span",{children:["invoice_id: ",String(a.invoice_id).slice(0,10),"…"]}):null,a.correlation_id?(0,t.jsxs)("span",{children:["corr: ",String(a.correlation_id).slice(0,10),"…"]}):null]}):null]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[(0,t.jsxs)(o.z,{variant:"outline",onClick:async()=>{try{let r=e.data_payload||{},t={transition_id:e.id,from_area:e.from_area,to_area:e.to_area,trigger_event:e.trigger_event,client_id:a.client_id,proposal_id:a.proposal_id,contract_id:a.contract_id,invoice_id:a.invoice_id,correlation_id:a.correlation_id,source_event_id:a.source_event_id,kanban_task_id:r.kanban_task_id||r.task_id||null,kanban_board_id:r.kanban_board_id||r.board_id||null};await navigator.clipboard.writeText(JSON.stringify(t,null,2)),i.Am.success("IDs copiados")}catch{i.Am.error("Falha ao copiar")}},children:[t.jsx(_.Z,{className:"w-4 h-4 mr-2"}),"Copiar IDs"]}),(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>R(e),children:[t.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"Hist\xf3rico"]}),(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>O({title:`Payload • ${e.trigger_event}`,json:e.data_payload}),children:[t.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Payload"]}),r?(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>window.location.assign(r),children:[t.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Abrir no Kanban"]}):null,(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>ec(e.id),disabled:"pending"!==String(e.status).toLowerCase(),children:[t.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Enviar para Kanban"]}),(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>V({id:e.id,note:String(a.completed_note||"")}),disabled:"completed"===String(e.status).toLowerCase(),children:[t.jsx(f.Z,{className:"w-4 h-4 mr-2"}),"Concluir"]}),t.jsx(o.z,{variant:"outline",onClick:()=>I({id:e.id,note:String(a.reopened_note||"")}),disabled:"completed"!==String(e.status).toLowerCase(),children:"Reabrir"}),t.jsx(o.z,{variant:"outline",onClick:()=>K({id:e.id,note:String(a.error_resolved_note||"")}),disabled:"error"!==String(e.status).toLowerCase(),children:"Resolver erro"}),t.jsx(o.z,{variant:"outline",onClick:()=>Y({id:e.id,toArea:String(e.to_area||""),note:String(a.rerouted_note||"")}),disabled:"pending"!==String(e.status).toLowerCase(),children:"Encaminhar"}),(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>J({id:e.id,note:String(a.marked_error_note||"")}),disabled:"error"===String(e.status).toLowerCase(),children:[t.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Erro"]})]})]},e.id)})())})})]})}),t.jsx(c.nU,{value:"events",className:"mt-4",children:(0,t.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[t.jsx(l.Ol,{children:t.jsx(l.ll,{children:"Event Log"})}),t.jsx(l.aY,{className:"space-y-3",children:0===W.length?t.jsx("div",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"Nenhum evento encontrado."}):t.jsx("div",{className:"space-y-2",children:W.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-[#001533]/10 dark:border-white/10 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"font-semibold text-[#001533] dark:text-white",children:e.event_type}),k(String(e.status)),e.entity_type?t.jsx(d.C,{variant:"outline",children:e.entity_type}):null]}),(0,t.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[new Date(e.created_at).toLocaleString("pt-BR"),e.error_message?` • ${e.error_message}`:""]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>O({title:`Payload • ${e.event_type}`,json:e.payload}),children:[t.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Payload"]}),(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>ed(e.id),disabled:"error"!==String(e.status).toLowerCase(),children:[t.jsx(j.Z,{className:"w-4 h-4 mr-2"}),"Reprocessar"]})]})]},e.id))})})]})})]}),t.jsx(u.Vq,{open:!!q,onOpenChange:e=>e?null:R(null),children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[900px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:"Hist\xf3rico da transi\xe7\xe3o"})}),q?(()=>{let{ids:e,items:r}=function(e){let r=e?.data_payload||{},a=N(r),t=[];for(let s of(t.push({at:e.created_at,label:"Criado",by:e.created_by,extra:{from:e.from_area,to:e.to_area,trigger:e.trigger_event}}),(a.marked_error_at||a.marked_error_note)&&t.push({at:a.marked_error_at,label:"Marcado como erro",by:a.marked_error_by,note:a.marked_error_note}),(a.error_resolved_at||a.error_resolved_note)&&t.push({at:a.error_resolved_at,label:"Erro resolvido (volta p/ pendente)",by:a.error_resolved_by,note:a.error_resolved_note}),(a.reopened_at||a.reopened_note)&&t.push({at:a.reopened_at,label:"Reaberto",by:a.reopened_by,note:a.reopened_note}),(a.rerouted_at||a.rerouted_note)&&t.push({at:a.rerouted_at,label:"Encaminhado",by:a.rerouted_by,note:a.rerouted_note,extra:{from:a.rerouted_from_area,to:a.rerouted_to_area}}),(a.executed_at||r.kanban_task_id||r.kanban_board_id)&&t.push({at:a.executed_at,label:"Executado (Kanban)",by:a.executed_by,extra:{kanban_task_id:r.kanban_task_id,kanban_board_id:r.kanban_board_id}}),(a.completed_note||e.completed_at)&&t.push({at:a.completed_at||e.completed_at,label:"Conclu\xeddo (manual)",by:a.completed_by||r.completed_by,note:a.completed_note}),a.previous_executions||[]))s&&t.push({at:s.executed_at||s.at,label:"Execu\xe7\xe3o anterior (resetada)",by:s.executed_by||s.by,note:s.note,extra:{kanban_task_id:s.kanban_task_id,kanban_board_id:s.kanban_board_id,reason:s.reason,action:s.action}});for(let e of a.reroute_history||[])e&&t.push({at:e.rerouted_at||e.at,label:"Encaminhamento (hist\xf3rico)",by:e.rerouted_by||e.by,note:e.rerouted_note||e.note,extra:{from:e.from_area||e.from,to:e.to_area||e.to}});let s=t.map(e=>{let r=e.at?new Date(String(e.at)).getTime():NaN;return{...e,__ts:r}});return s.sort((e,r)=>(Number.isNaN(e.__ts)?Number.POSITIVE_INFINITY:e.__ts)-(Number.isNaN(r.__ts)?Number.POSITIVE_INFINITY:r.__ts)),{ids:a,items:s}}(q),a=w(q),s=q.data_payload||{};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[(0,t.jsxs)("span",{className:"font-semibold text-[#001533] dark:text-white",children:[q.from_area," → ",q.to_area]})," ","• ",q.trigger_event," • ",k(String(q.status))]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[a?(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>window.location.assign(a),children:[t.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Abrir no Kanban"]}):null,(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>O({title:`Payload • ${q.trigger_event}`,json:s}),children:[t.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Ver payload"]})]})]}),(0,t.jsxs)("div",{className:"text-[11px] text-[#001533]/50 dark:text-white/50 space-x-2",children:[(0,t.jsxs)("span",{children:["transition_id: ",q.id.slice(0,10),"…"]}),e.client_id?(0,t.jsxs)("span",{children:["client_id: ",String(e.client_id).slice(0,10),"…"]}):null,e.proposal_id?(0,t.jsxs)("span",{children:["proposal_id: ",String(e.proposal_id).slice(0,10),"…"]}):null,e.contract_id?(0,t.jsxs)("span",{children:["contract_id: ",String(e.contract_id).slice(0,10),"…"]}):null,e.invoice_id?(0,t.jsxs)("span",{children:["invoice_id: ",String(e.invoice_id).slice(0,10),"…"]}):null,e.correlation_id?(0,t.jsxs)("span",{children:["corr: ",String(e.correlation_id).slice(0,10),"…"]}):null,e.source_event_id?(0,t.jsxs)("span",{children:["source_event_id: ",String(e.source_event_id).slice(0,10),"…"]}):null]}),t.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-auto pr-1",children:0===r.length?t.jsx("div",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"Sem hist\xf3rico."}):r.map((e,r)=>(0,t.jsxs)("div",{className:"rounded-lg border border-[#001533]/10 dark:border-white/10 p-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[t.jsx("div",{className:"text-sm font-semibold text-[#001533] dark:text-white",children:e.label}),(0,t.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[C(e.at)?C(e.at):"—",e.by?` • ${function(e){if(!e)return null;let r=String(e);return r.length>10?`${r.slice(0,8)}…`:r}(e.by)}`:""]})]}),e.note?t.jsx("div",{className:"text-xs text-[#001533]/70 dark:text-white/70 mt-1 whitespace-pre-wrap",children:String(e.note)}):null,e.extra?t.jsx("pre",{className:"text-[11px] bg-black/5 dark:bg-white/5 rounded-lg p-2 mt-2 overflow-auto",children:JSON.stringify(e.extra,null,2)}):null]},r))})]})})():null]})}),t.jsx(u.Vq,{open:!!T,onOpenChange:e=>e?null:O(null),children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[900px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:T?.title||"Payload"})}),t.jsx("pre",{className:"text-xs bg-black/5 dark:bg-white/5 rounded-lg p-4 overflow-auto max-h-[70vh]",children:JSON.stringify(T?.json??{},null,2)})]})}),t.jsx(u.Vq,{open:!!F,onOpenChange:e=>e?null:V(null),children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:"Concluir transi\xe7\xe3o"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Escreva uma nota curta explicando a resolu\xe7\xe3o (fica salva no Hub)."}),t.jsx("textarea",{value:F?.note||"",onChange:e=>V(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: revisado com cliente, cl\xe1usulas ajustadas e enviado para assinatura."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{variant:"outline",onClick:()=>V(null),children:"Cancelar"}),t.jsx(o.z,{onClick:async()=>{if(!F)return;let{id:e,note:r}=F;V(null),await et(e,r||"")},children:"Concluir"})]})]})]})}),t.jsx(u.Vq,{open:!!D,onOpenChange:e=>e?null:I(null),children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:"Reabrir transi\xe7\xe3o"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Descreva o motivo da reabertura (fica salvo no Hub)."}),t.jsx("textarea",{value:D?.note||"",onChange:e=>I(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: pend\xeancia de assinatura, cliente pediu ajuste, dados inconsistentes."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{variant:"outline",onClick:()=>I(null),children:"Cancelar"}),t.jsx(o.z,{onClick:async()=>{if(!D)return;let{id:e,note:r}=D;I(null),await es(e,r||"")},children:"Reabrir"})]})]})]})}),t.jsx(u.Vq,{open:!!H,onOpenChange:e=>e?null:K(null),children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:"Resolver erro"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:["Descreva como o erro foi resolvido. A transi\xe7\xe3o volta para ",t.jsx("b",{children:"pendente"}),"."]}),t.jsx("textarea",{value:H?.note||"",onChange:e=>K(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: corrigido payload, ajustado cliente_id, reprocessado com sucesso."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{variant:"outline",onClick:()=>K(null),children:"Cancelar"}),t.jsx(o.z,{onClick:async()=>{if(!H)return;let{id:e,note:r}=H;K(null),await en(e,r||"")},children:"Voltar para pendente"})]})]})]})}),t.jsx(u.Vq,{open:!!U,onOpenChange:e=>e?null:J(null),children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:"Marcar como erro"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:["Informe o motivo do erro (fica salvo no Hub e vira o ",t.jsx("b",{children:"error_message"})," da transi\xe7\xe3o)."]}),t.jsx("textarea",{value:U?.note||"",onChange:e=>J(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: faltou client_id no payload, erro na cria\xe7\xe3o de contrato, dados inv\xe1lidos."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{variant:"outline",onClick:()=>J(null),children:"Cancelar"}),t.jsx(o.z,{onClick:async()=>{if(!U)return;let{id:e,note:r}=U;J(null),await ei(e,r||"")},children:"Marcar erro"})]})]})]})}),t.jsx(u.Vq,{open:!!B,onOpenChange:e=>e?null:Y(null),children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:"Encaminhar transi\xe7\xe3o"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:["Selecione a \xe1rea destino e descreva o motivo. A transi\xe7\xe3o permanece ",t.jsx("b",{children:"pendente"}),"."]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-xs font-semibold text-gray-500 block uppercase tracking-wider",children:"\xc1rea destino"}),t.jsx("select",{value:B?.toArea||"",onChange:e=>Y(r=>r?{...r,toArea:e.target.value}:r),className:"w-full px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",children:G.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsx("textarea",{value:B?.note||"",onChange:e=>Y(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: an\xe1lise indica que pertence ao Financeiro, precisa validar cobran\xe7a antes de seguir."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{variant:"outline",onClick:()=>Y(null),children:"Cancelar"}),t.jsx(o.z,{onClick:async()=>{if(!B)return;let{id:e,toArea:r,note:a}=B;Y(null),await el(e,r,a||"")},children:"Encaminhar"})]})]})]})})]})})}function Z(){return t.jsx(s.Suspense,{fallback:t.jsx("div",{className:"p-6 text-sm text-[#001533]/60 dark:text-white/60",children:"Carregando…"}),children:t.jsx(S,{})})}},29752:(e,r,a)=>{"use strict";a.d(r,{Ol:()=>l,SZ:()=>d,Zb:()=>i,aY:()=>c,ll:()=>o});var t=a(10326),s=a(17577),n=a(51223);let i=s.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,n.cn)("rounded-xl border-2 border-valle-silver-200 bg-white shadow-md",e),...r}));i.displayName="Card";let l=s.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let o=s.forwardRef(({className:e,...r},a)=>t.jsx("h3",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight text-lg",e),...r}));o.displayName="CardTitle";let d=s.forwardRef(({className:e,...r},a)=>t.jsx("p",{ref:a,className:(0,n.cn)("text-sm text-foreground/70",e),...r}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",s.forwardRef(({className:e,...r},a)=>t.jsx("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},24118:(e,r,a)=>{"use strict";a.d(r,{$N:()=>o,Be:()=>d,Vq:()=>n,a7:()=>c,cN:()=>u,cZ:()=>i,fK:()=>l});var t=a(10326),s=a(94019);function n({open:e,onOpenChange:r,children:a}){return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>r(!1)}),t.jsx("div",{className:"relative z-50 w-full max-w-4xl max-h-[90vh] overflow-y-auto mx-4",children:a})]}):null}function i({children:e,onClose:r,className:a}){return(0,t.jsxs)("div",{className:`bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-800 ${a||""}`,children:[r&&t.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:t.jsx(s.Z,{className:"w-5 h-5"})}),e]})}function l({children:e}){return t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800",children:e})}function o({children:e}){return t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e})}function d({children:e}){return t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:e})}function c({children:e}){return t.jsx("div",{className:"px-6 py-4",children:e})}function u({children:e,className:r}){return t.jsx("div",{className:`px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex items-center justify-end gap-3 ${r||""}`,children:e})}a(17577)},50384:(e,r,a)=>{"use strict";a.d(r,{SP:()=>d,dr:()=>o,mQ:()=>l,nU:()=>c});var t=a(10326),s=a(17577),n=a(51223);let i=s.createContext(void 0);function l({defaultValue:e,value:r,onValueChange:a,children:l,className:o}){if(void 0===r&&void 0===e)throw Error("Tabs requires either `value` (controlled) or `defaultValue` (uncontrolled).");let d=r??e??"",[c,u]=s.useState(d);return s.useEffect(()=>{void 0!==r&&u(r)},[r]),t.jsx(i.Provider,{value:{activeTab:c,setActiveTab:e=>{void 0===r&&u(e),a?.(e)}},children:t.jsx("div",{className:(0,n.cn)("",o),children:l})})}function o({children:e,className:r}){return t.jsx("div",{className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-800 p-1 text-gray-600 dark:text-gray-400",r),children:e})}function d({value:e,children:r,className:a}){let l=s.useContext(i);if(!l)throw Error("TabsTrigger must be used within Tabs");let{activeTab:o,setActiveTab:d}=l,c=o===e;return t.jsx("button",{type:"button",onClick:()=>d(e),className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",c?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",a),children:r})}function c({value:e,children:r,className:a}){let l=s.useContext(i);if(!l)throw Error("TabsContent must be used within Tabs");let{activeTab:o}=l;return o!==e?null:t.jsx("div",{className:(0,n.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2",a),children:r})}},87257:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`C:\Users\User\Downloads\valle-360-main\valle-360-main\src\app\admin\fluxos\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[89276,54267,51789,78515,46226,28870,39215,16819,72418,86148,61288,36499,18832,14574,92237],()=>a(11186));module.exports=t})();