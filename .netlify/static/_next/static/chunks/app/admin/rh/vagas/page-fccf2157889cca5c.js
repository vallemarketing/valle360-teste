(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8907],{72876:function(e,a,r){Promise.resolve().then(r.bind(r,71906))},71906:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return O}});var s=r(57437),l=r(2265),t=r(26892),o=r(57586),i=r(2207),n=r(41671),c=r(89227),d=r(99388),m=r(5005),x=r(99397),u=r(95805),p=r(42208),y=r(73247),v=r(83774),h=r(91723),b=r(50598),g=r(29202),j=r(70525),f=r(18930),N=r(51817),C=r(82023),w=r(30401),k=r(78867),S=r(10407),E=r(44743);let T=["Design","Marketing","Desenvolvimento","Comercial","Financeiro","RH","Opera\xe7\xf5es","Tr\xe1fego Pago","Social Media","V\xeddeo"],D=[{id:"remote",label:"Remoto",icon:"\uD83C\uDFE0"},{id:"hybrid",label:"H\xedbrido",icon:"\uD83D\uDD04"},{id:"onsite",label:"Presencial",icon:"\uD83C\uDFE2"}],I=[{id:"clt",label:"CLT"},{id:"pj",label:"PJ"},{id:"internship",label:"Est\xe1gio"},{id:"freelance",label:"Freelance"}];function Z(e){var a;let{onSave:r,onPublish:o,initialData:i}=e,[n,c]=(0,l.useState)(1),[d,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)(!1),[p,y]=(0,l.useState)(!1),[v,h]=(0,l.useState)({title:(null==i?void 0:i.title)||"",department:(null==i?void 0:i.department)||"",location:(null==i?void 0:i.location)||"S\xe3o Paulo, SP",locationType:(null==i?void 0:i.locationType)||"hybrid",contractType:(null==i?void 0:i.contractType)||"clt",salaryRange:(null==i?void 0:i.salaryRange)||{min:3e3,max:6e3},showSalary:null===(a=null==i?void 0:i.showSalary)||void 0===a||a,description:(null==i?void 0:i.description)||"",responsibilities:(null==i?void 0:i.responsibilities)||[],requirements:(null==i?void 0:i.requirements)||[],benefits:(null==i?void 0:i.benefits)||[],skills:(null==i?void 0:i.skills)||[],status:"draft"}),[j,f]=(0,l.useState)(""),[Z,P]=(0,l.useState)(""),[A,O]=(0,l.useState)(""),[q,F]=(0,l.useState)(""),L=async()=>{if(!v.title||!v.department){alert("Preencha o t\xedtulo e departamento primeiro");return}m(!0);try{var e,a;let r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:'Gere uma descri\xe7\xe3o de vaga profissional e atrativa para a posi\xe7\xe3o de "'.concat(v.title,'" no departamento de "').concat(v.department,'". \n            \n            A vaga \xe9 ').concat(null===(e=D.find(e=>e.id===v.locationType))||void 0===e?void 0:e.label," em ").concat(v.location,".\n            Contrato: ").concat(null===(a=I.find(e=>e.id===v.contractType))||void 0===a?void 0:a.label,'.\n            \n            Retorne um JSON com:\n            {\n              "description": "descri\xe7\xe3o da vaga em 2-3 par\xe1grafos",\n              "responsibilities": ["responsabilidade 1", "responsabilidade 2", ...] (5-7 itens),\n              "requirements": ["requisito 1", "requisito 2", ...] (5-7 itens),\n              "benefits": ["benef\xedcio 1", "benef\xedcio 2", ...] (5-7 itens),\n              "skills": ["skill 1", "skill 2", ...] (5-8 skills t\xe9cnicas)\n            }\n            \n            Seja espec\xedfico e use linguagem moderna e inclusiva.')}],context:{type:"job_generation"}})}),s=await r.json();try{let e=s.message.match(/\{[\s\S]*\}/);if(e){let a=JSON.parse(e[0]);h(e=>({...e,description:a.description||e.description,responsibilities:a.responsibilities||e.responsibilities,requirements:a.requirements||e.requirements,benefits:a.benefits||e.benefits,skills:a.skills||e.skills}))}}catch(e){console.error("Erro ao parsear resposta:",e)}}catch(e){console.error("Erro ao gerar com IA:",e)}finally{m(!1)}},V=async()=>{let e=J();await navigator.clipboard.writeText(e),u(!0),setTimeout(()=>u(!1),2e3)},J=()=>{var e,a;return"\uD83D\uDE80 VAGA: ".concat(v.title.toUpperCase(),"\n\n\uD83D\uDCCD ").concat(v.location," | ").concat(null===(e=D.find(e=>e.id===v.locationType))||void 0===e?void 0:e.label,"\n\uD83D\uDCCB ").concat(null===(a=I.find(e=>e.id===v.contractType))||void 0===a?void 0:a.label,"\n").concat(v.showSalary?"\uD83D\uDCB0 R$ ".concat(v.salaryRange.min.toLocaleString()," - R$ ").concat(v.salaryRange.max.toLocaleString()):"","\n\n").concat(v.description,"\n\n\uD83D\uDCCC RESPONSABILIDADES:\n").concat(v.responsibilities.map(e=>"• ".concat(e)).join("\n"),"\n\n✅ REQUISITOS:\n").concat(v.requirements.map(e=>"• ".concat(e)).join("\n"),"\n\n\uD83C\uDF81 BENEF\xcdCIOS:\n").concat(v.benefits.map(e=>"• ".concat(e)).join("\n"),"\n\n\uD83D\uDD27 SKILLS:\n").concat(v.skills.join(" • "),'\n\n\uD83D\uDCE9 Interessado? Envie seu curr\xedculo ou comente "QUERO"!\n\n#vaga #emprego #').concat(v.department.toLowerCase().replace(/\s+/g,"")," #oportunidade")},_=(e,a,r)=>{a.trim()&&(h(r=>({...r,[e]:[...r[e],a.trim()]})),r(""))},z=(e,a)=>{h(r=>({...r,[e]:r[e].filter((e,r)=>r!==a)}))},B=n/4*100;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{style:{color:"var(--text-secondary)"},children:["Etapa ",n," de ",4]}),(0,s.jsxs)("span",{style:{color:"var(--text-tertiary)"},children:[Math.round(B),"%"]})]}),(0,s.jsx)("div",{className:"h-2 rounded-full overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsx)(t.E.div,{initial:{width:0},animate:{width:"".concat(B,"%")},className:"h-full rounded-full",style:{backgroundColor:"var(--primary-500)"}})})]}),1===n&&(0,s.jsxs)(t.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Informa\xe7\xf5es B\xe1sicas"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"T\xedtulo da Vaga *"}),(0,s.jsx)("input",{type:"text",value:v.title,onChange:e=>h(a=>({...a,title:e.target.value})),placeholder:"Ex: Designer Gr\xe1fico S\xeanior",className:"w-full px-4 py-3 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Departamento *"}),(0,s.jsxs)("select",{value:v.department,onChange:e=>h(a=>({...a,department:e.target.value})),className:"w-full px-4 py-3 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),T.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Localiza\xe7\xe3o"}),(0,s.jsx)("input",{type:"text",value:v.location,onChange:e=>h(a=>({...a,location:e.target.value})),placeholder:"S\xe3o Paulo, SP",className:"w-full px-4 py-3 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Tipo"}),(0,s.jsx)("div",{className:"flex gap-2",children:D.map(e=>(0,s.jsxs)("button",{onClick:()=>h(a=>({...a,locationType:e.id})),className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:v.locationType===e.id?"var(--primary-500)":"var(--bg-secondary)",color:v.locationType===e.id?"white":"var(--text-secondary)"},children:[e.icon," ",e.label]},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Tipo de Contrato"}),(0,s.jsx)("select",{value:v.contractType,onChange:e=>h(a=>({...a,contractType:e.target.value})),className:"w-full px-4 py-3 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},children:I.map(e=>(0,s.jsx)("option",{value:e.id,children:e.label},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Faixa Salarial"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",value:v.salaryRange.min,onChange:e=>h(a=>({...a,salaryRange:{...a.salaryRange,min:parseInt(e.target.value)||0}})),placeholder:"Min",className:"w-full px-3 py-2 rounded-lg border text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,s.jsx)("span",{style:{color:"var(--text-tertiary)"},children:"-"}),(0,s.jsx)("input",{type:"number",value:v.salaryRange.max,onChange:e=>h(a=>({...a,salaryRange:{...a.salaryRange,max:parseInt(e.target.value)||0}})),placeholder:"Max",className:"w-full px-3 py-2 rounded-lg border text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 mt-2 text-sm",style:{color:"var(--text-tertiary)"},children:[(0,s.jsx)("input",{type:"checkbox",checked:v.showSalary,onChange:e=>h(a=>({...a,showSalary:e.target.checked}))}),"Exibir sal\xe1rio na vaga"]})]})]})]}),2===n&&(0,s.jsxs)(t.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Descri\xe7\xe3o da Vaga"}),(0,s.jsxs)(t.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:L,disabled:d,className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium text-white",style:{backgroundColor:"var(--purple-500)"},children:[d?(0,s.jsx)(N.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(C.Z,{className:"w-4 h-4"}),"Gerar com IA"]})]}),(0,s.jsx)("textarea",{value:v.description,onChange:e=>h(a=>({...a,description:e.target.value})),placeholder:"Descreva a vaga, a empresa e o que buscamos no candidato ideal...",rows:6,className:"w-full px-4 py-3 rounded-xl border resize-none",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Responsabilidades"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&_("responsibilities",j,f),placeholder:"Adicionar responsabilidade...",className:"flex-1 px-4 py-2 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,s.jsx)("button",{onClick:()=>_("responsibilities",j,f),className:"px-4 py-2 rounded-xl",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"+"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:v.responsibilities.map((e,a)=>(0,s.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:[e,(0,s.jsx)("button",{onClick:()=>z("responsibilities",a),className:"ml-1 text-red-500 hover:text-red-700",children:"\xd7"})]},a))})]})]}),3===n&&(0,s.jsxs)(t.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Requisitos e Skills"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Requisitos"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:Z,onChange:e=>P(e.target.value),onKeyDown:e=>"Enter"===e.key&&_("requirements",Z,P),placeholder:"Adicionar requisito...",className:"flex-1 px-4 py-2 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,s.jsx)("button",{onClick:()=>_("requirements",Z,P),className:"px-4 py-2 rounded-xl",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"+"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:v.requirements.map((e,a)=>(0,s.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:[e,(0,s.jsx)("button",{onClick:()=>z("requirements",a),className:"ml-1 text-red-500",children:"\xd7"})]},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Skills T\xe9cnicas"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:q,onChange:e=>F(e.target.value),onKeyDown:e=>"Enter"===e.key&&_("skills",q,F),placeholder:"Adicionar skill...",className:"flex-1 px-4 py-2 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,s.jsx)("button",{onClick:()=>_("skills",q,F),className:"px-4 py-2 rounded-xl",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"+"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:v.skills.map((e,a)=>(0,s.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm",style:{backgroundColor:"var(--primary-100)",color:"var(--primary-700)"},children:[e,(0,s.jsx)("button",{onClick:()=>z("skills",a),className:"ml-1 text-red-500",children:"\xd7"})]},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Benef\xedcios"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:A,onChange:e=>O(e.target.value),onKeyDown:e=>"Enter"===e.key&&_("benefits",A,O),placeholder:"Adicionar benef\xedcio...",className:"flex-1 px-4 py-2 rounded-xl border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,s.jsx)("button",{onClick:()=>_("benefits",A,O),className:"px-4 py-2 rounded-xl",style:{backgroundColor:"var(--primary-500)",color:"white"},children:"+"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:v.benefits.map((e,a)=>(0,s.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm",style:{backgroundColor:"var(--success-100)",color:"var(--success-700)"},children:[e,(0,s.jsx)("button",{onClick:()=>z("benefits",a),className:"ml-1 text-red-500",children:"\xd7"})]},a))})]})]}),4===n&&(0,s.jsxs)(t.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Preview e Publica\xe7\xe3o"}),(0,s.jsxs)("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:[x?(0,s.jsx)(w.Z,{className:"w-4 h-4"}):(0,s.jsx)(k.Z,{className:"w-4 h-4"}),x?"Copiado!":"Copiar"]})]}),(0,s.jsx)("div",{className:"p-4 rounded-xl border whitespace-pre-wrap text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},children:J()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-3",style:{color:"var(--text-secondary)"},children:"Publicar em:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(R,{icon:(0,s.jsx)(b.Z,{className:"w-5 h-5"}),name:"LinkedIn",color:"#0A66C2",description:"Publicar na p\xe1gina da empresa"}),(0,s.jsx)(R,{icon:(0,s.jsx)(g.Z,{className:"w-5 h-5"}),name:"Site de Vagas",color:"var(--primary-500)",description:"P\xe1gina de carreiras Valle 360"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",style:{borderColor:"var(--border-light)"},children:[(0,s.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===n,className:"px-4 py-2 rounded-xl font-medium transition-colors disabled:opacity-50",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:"Anterior"}),n<4?(0,s.jsxs)("button",{onClick:()=>c(e=>Math.min(4,e+1)),className:"flex items-center gap-2 px-6 py-2 rounded-xl font-medium text-white",style:{backgroundColor:"var(--primary-500)"},children:["Pr\xf3ximo",(0,s.jsx)(S.Z,{className:"w-4 h-4"})]}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>null==r?void 0:r(v),className:"px-4 py-2 rounded-xl font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:"Salvar Rascunho"}),(0,s.jsxs)("button",{onClick:()=>null==o?void 0:o(v,["linkedin","website"]),className:"flex items-center gap-2 px-6 py-2 rounded-xl font-medium text-white",style:{backgroundColor:"var(--success-500)"},children:[(0,s.jsx)(E.Z,{className:"w-4 h-4"}),"Publicar Vaga"]})]})]})]})}function R(e){let{icon:a,name:r,color:t,description:o}=e,[i,n]=(0,l.useState)(!0);return(0,s.jsxs)("button",{onClick:()=>n(!i),className:"flex items-center gap-3 p-4 rounded-xl border transition-all ".concat(i?"ring-2":""),style:{backgroundColor:i?"".concat(t,"10"):"var(--bg-secondary)",borderColor:i?t:"var(--border-light)"},children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"".concat(t,"20"),color:t},children:a}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:r}),(0,s.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:o})]}),(0,s.jsx)("div",{className:"ml-auto w-5 h-5 rounded-full border-2 flex items-center justify-center",style:{borderColor:i?t:"var(--border-medium)"},children:i&&(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t}})})]})}var P=r(5526);let A={draft:{color:"var(--neutral-700)",bg:"var(--neutral-100)",label:"Rascunho",icon:(0,s.jsx)(i.Z,{className:"w-4 h-4"})},active:{color:"var(--success-700)",bg:"var(--success-100)",label:"Ativa",icon:(0,s.jsx)(n.Z,{className:"w-4 h-4"})},paused:{color:"var(--warning-700)",bg:"var(--warning-100)",label:"Pausada",icon:(0,s.jsx)(c.Z,{className:"w-4 h-4"})},closed:{color:"var(--error-700)",bg:"var(--error-100)",label:"Encerrada",icon:(0,s.jsx)(d.Z,{className:"w-4 h-4"})}};function O(){let[e,a]=(0,l.useState)([]),[r,d]=(0,l.useState)(!0),[N,C]=(0,l.useState)(null),[w,k]=(0,l.useState)(!1),[S,E]=(0,l.useState)(""),[T,D]=(0,l.useState)("all"),[I,R]=(0,l.useState)(null),O=async()=>{var e;let{data:a}=await P.supabase.auth.getSession(),r=null===(e=a.session)||void 0===e?void 0:e.access_token;return r?{Authorization:"Bearer ".concat(r)}:{}},F=async()=>{d(!0),C(null);try{let e=await O(),r=new URLSearchParams;"all"!==T&&r.set("status",T),S.trim()&&r.set("q",S.trim());let s=await fetch("/api/admin/rh/jobs?".concat(r.toString()),{headers:e,cache:"no-store"}),l=await s.json().catch(()=>null);if(!s.ok||!(null==l?void 0:l.success))throw Error((null==l?void 0:l.error)||"Falha ao carregar vagas");a(Array.isArray(l.jobs)?l.jobs:[]),C((null==l?void 0:l.note)?String(l.note):null)}catch(e){a([]),C(e instanceof Error?e.message:"Falha ao carregar")}finally{d(!1)}};(0,l.useEffect)(()=>{F()},[]);let L=e.filter(e=>{let a=e.title.toLowerCase().includes(S.toLowerCase())||e.department.toLowerCase().includes(S.toLowerCase()),r="all"===T||e.status===T;return a&&r}),V=(0,l.useMemo)(()=>({total:e.length,active:e.filter(e=>"active"===e.status).length,applications:e.reduce((e,a)=>e+(Number(a.applications||0)||0),0),views:e.reduce((e,a)=>e+(Number(a.views||0)||0),0)}),[e]),J=async e=>{try{let a=await O(),r="active"===e.status?"paused":"active",s=await fetch("/api/admin/rh/jobs",{method:"PATCH",headers:{"Content-Type":"application/json",...a},body:JSON.stringify({id:e.id,status:r})}),l=await s.json().catch(()=>null);if(!s.ok||!(null==l?void 0:l.success))throw Error((null==l?void 0:l.error)||"Falha ao atualizar");await F()}catch(e){C(e instanceof Error?e.message:"Falha ao atualizar")}},_=async e=>{try{let a=await O(),r=await fetch("/api/admin/rh/jobs?id=".concat(encodeURIComponent(e.id)),{method:"DELETE",headers:a}),s=await r.json().catch(()=>null);if(!r.ok||!(null==s?void 0:s.success))throw Error((null==s?void 0:s.error)||"Falha ao remover");await F()}catch(e){C(e instanceof Error?e.message:"Falha ao remover")}};return(0,s.jsx)("div",{className:"min-h-screen p-6",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--primary-100)"},children:(0,s.jsx)(m.Z,{className:"w-7 h-7",style:{color:"var(--primary-500)"}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Gest\xe3o de Vagas"}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Crie e gerencie vagas de emprego"})]})]}),(0,s.jsxs)(t.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium text-white",style:{backgroundColor:"var(--primary-500)"},children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),"Nova Vaga"]})]}),N?(0,s.jsx)("div",{className:"text-sm px-4 py-3 rounded-xl border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-secondary)"},children:N}):null,(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsx)(q,{label:"Total de Vagas",value:V.total,icon:(0,s.jsx)(m.Z,{className:"w-5 h-5"}),color:"var(--primary-500)"}),(0,s.jsx)(q,{label:"Vagas Ativas",value:V.active,icon:(0,s.jsx)(n.Z,{className:"w-5 h-5"}),color:"var(--success-500)"}),(0,s.jsx)(q,{label:"Candidaturas",value:V.applications,icon:(0,s.jsx)(u.Z,{className:"w-5 h-5"}),color:"var(--purple-500)"}),(0,s.jsx)(q,{label:"Visualiza\xe7\xf5es",value:V.views,icon:(0,s.jsx)(p.Z,{className:"w-5 h-5"}),color:"var(--warning-500)"})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("input",{type:"text",placeholder:"Buscar vaga...",value:S,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 pl-10 rounded-xl border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-primary)"}}),(0,s.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"var(--text-tertiary)"}})]}),(0,s.jsx)("div",{className:"flex gap-2",children:["all","active","paused","draft","closed"].map(e=>{var a;return(0,s.jsx)("button",{onClick:()=>D(e),className:"px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:T===e?"var(--primary-500)":"var(--bg-primary)",color:T===e?"white":"var(--text-secondary)",border:"1px solid ".concat(T===e?"var(--primary-500)":"var(--border-light)")},children:"all"===e?"Todas":null===(a=A[e])||void 0===a?void 0:a.label},e)})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[r?(0,s.jsx)("div",{className:"text-center py-12",style:{color:"var(--text-secondary)"},children:"Carregando…"}):L.map((e,a)=>{let r=A[e.status];return(0,s.jsx)(t.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"rounded-xl p-5 border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:r.bg,color:r.color},children:[r.icon,r.label]}),(0,s.jsx)("h3",{className:"font-semibold text-lg",style:{color:"var(--text-primary)"},children:e.title})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",style:{color:"var(--text-secondary)"},children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),e.department]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4"}),e.location]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),e.contractType]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4",style:{color:"var(--purple-500)"}}),(0,s.jsxs)("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[e.applications," candidaturas"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4",style:{color:"var(--primary-500)"}}),(0,s.jsxs)("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[e.views," visualiza\xe7\xf5es"]})]}),e.platforms.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.platforms.includes("linkedin")&&(0,s.jsx)(b.Z,{className:"w-4 h-4",style:{color:"#0A66C2"}}),e.platforms.includes("website")&&(0,s.jsx)(g.Z,{className:"w-4 h-4",style:{color:"var(--primary-500)"}})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>R(e),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsx)(p.Z,{className:"w-4 h-4",style:{color:"var(--text-secondary)"}})}),(0,s.jsx)("button",{className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-secondary)"},children:(0,s.jsx)(i.Z,{className:"w-4 h-4",style:{color:"var(--text-secondary)"}})}),"active"===e.status&&(0,s.jsx)("button",{onClick:()=>J(e),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--warning-100)"},children:(0,s.jsx)(c.Z,{className:"w-4 h-4",style:{color:"var(--warning-600)"}})}),"paused"===e.status&&(0,s.jsx)("button",{onClick:()=>J(e),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--success-100)"},children:(0,s.jsx)(j.Z,{className:"w-4 h-4",style:{color:"var(--success-700)"}})}),(0,s.jsx)("button",{onClick:()=>_(e),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--error-100)"},children:(0,s.jsx)(f.Z,{className:"w-4 h-4",style:{color:"var(--error-600)"}})})]})]})},e.id)}),!r&&0===L.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(m.Z,{className:"w-16 h-16 mx-auto mb-4 opacity-20",style:{color:"var(--text-tertiary)"}}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Nenhuma vaga encontrada"})]})]}),(0,s.jsx)(o.M,{children:w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>k(!1),className:"fixed inset-0 bg-black/50 z-50"}),(0,s.jsxs)(t.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl p-6 z-50",style:{backgroundColor:"var(--bg-primary)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Criar Nova Vaga"}),(0,s.jsx)("button",{onClick:()=>k(!1),className:"p-2 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"},children:"✕"})]}),(0,s.jsx)(Z,{onSave:e=>{(async()=>{try{let a=await O(),r={title:String((null==e?void 0:e.title)||"").trim(),department:String((null==e?void 0:e.department)||"").trim(),location:String((null==e?void 0:e.location)||"").trim(),locationType:(null==e?void 0:e.locationType)||"hybrid",contractType:String((null==e?void 0:e.contractType)||"").trim(),status:"draft",platforms:[],applications:0,views:0,jobPost:e},s=await fetch("/api/admin/rh/jobs",{method:"POST",headers:{"Content-Type":"application/json",...a},body:JSON.stringify({job:r})}),l=await s.json().catch(()=>null);if(!s.ok||!(null==l?void 0:l.success))throw Error((null==l?void 0:l.error)||"Falha ao salvar");k(!1),await F()}catch(e){C(e instanceof Error?e.message:"Falha ao salvar")}})()},onPublish:(e,a)=>{(async()=>{try{let r=await O(),s={title:String((null==e?void 0:e.title)||"").trim(),department:String((null==e?void 0:e.department)||"").trim(),location:String((null==e?void 0:e.location)||"").trim(),locationType:(null==e?void 0:e.locationType)||"hybrid",contractType:String((null==e?void 0:e.contractType)||"").trim(),status:"active",platforms:Array.isArray(a)?a:[],applications:0,views:0,jobPost:e},l=await fetch("/api/admin/rh/jobs",{method:"POST",headers:{"Content-Type":"application/json",...r},body:JSON.stringify({job:s})}),t=await l.json().catch(()=>null);if(!l.ok||!(null==t?void 0:t.success))throw Error((null==t?void 0:t.error)||"Falha ao publicar");k(!1),await F()}catch(e){C(e instanceof Error?e.message:"Falha ao publicar")}})()}})]})]})})]})})}function q(e){let{label:a,value:r,icon:l,color:t}=e;return(0,s.jsxs)("div",{className:"rounded-xl p-4 border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)"},children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3",style:{backgroundColor:"".concat(t,"20"),color:t},children:l}),(0,s.jsx)("p",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:r}),(0,s.jsx)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:a})]})}},5526:function(e,a,r){"use strict";r.r(a),r.d(a,{supabase:function(){return o}});var s=r(62724);let l="https://ikjgsqtykkhqimypacro.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";l&&t||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let o=(0,s.eI)(l||"https://setup-missing.supabase.co",t||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[2882,4609,2724,527,2971,2117,1744],function(){return e(e.s=72876)}),_N_E=e.O()}]);