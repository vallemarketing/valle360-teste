(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6466],{78990:function(e,t,n){Promise.resolve().then(n.bind(n,39089))},94766:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},49322:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},53417:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},86595:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},39089:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(57437),s=n(2265),r=n(5526),i=n(53417),l=n(86595),o=n(49322),c=n(94766),d=n(41671),u=n(57586),m=n(26892);function h(){let[e,t]=(0,s.useState)([]),[n,h]=(0,s.useState)("all"),[p,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{var e,n,a;let{data:{user:s}}=await r.supabase.auth.getUser();if(!s)return;let{data:c}=await r.supabase.from("employees").select("id").eq("user_id",s.id).single();if(!c)return;let d=await r.supabase.from("employee_motivation_messages").select("*").eq("employee_id",c.id).order("created_at",{ascending:!1}).limit(20),u=await r.supabase.from("employee_recognition_events").select("*, recognized_by:user_profiles!employee_recognition_events_recognized_by_fkey(full_name)").eq("employee_id",c.id).order("created_at",{ascending:!1}).limit(20),m=await r.supabase.from("employee_task_reminders").select("*").eq("employee_id",c.id).in("status",["pending","sent"]).order("created_at",{ascending:!1}).limit(20),h=[];null===(e=d.data)||void 0===e||e.forEach(e=>{h.push({id:e.id,type:"motivation",title:e.subject||"Mensagem da Val",message:e.message_content,read:"read"===e.status,created_at:new Date(e.created_at),icon:i.Z,color:"blue"})}),null===(n=u.data)||void 0===n||n.forEach(e=>{var t;h.push({id:e.id,type:"recognition",title:"Reconhecimento: ".concat(e.title),message:"".concat((null===(t=e.recognized_by)||void 0===t?void 0:t.full_name)||"Equipe",": ").concat(e.description),read:!1,created_at:new Date(e.created_at),icon:l.Z,color:"yellow"})}),null===(a=m.data)||void 0===a||a.forEach(e=>{h.push({id:e.id,type:"task",title:"Lembrete: ".concat(e.task_title),message:e.message,read:"acknowledged"===e.status,created_at:new Date(e.created_at),icon:o.Z,color:"red"})}),h.sort((e,t)=>t.created_at.getTime()-e.created_at.getTime()),t(h)}catch(e){console.error("Erro ao carregar notifica\xe7\xf5es:",e)}finally{f(!1)}},x=async e=>{t(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},y=e.filter(e=>"unread"===n?!e.read:"achievements"===n?"recognition"===e.type:"messages"!==n||"motivation"===e.type),b=e.filter(e=>!e.read).length;return p?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4370d1] mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando notifica\xe7\xf5es..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8 text-[#4370d1]"}),"Notifica\xe7\xf5es"]}),b>0&&(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["Voc\xea tem ",(0,a.jsx)("span",{className:"font-bold text-[#4370d1]",children:b})," n\xe3o lidas"]})]}),b>0&&(0,a.jsxs)("button",{onClick:()=>{t(e=>e.map(e=>({...e,read:!0})))},className:"px-4 py-2 bg-[#4370d1] text-white rounded-lg hover:bg-[#0f1b35] transition-all flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Marcar todas como lidas"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 border-b border-gray-200 pb-2",children:[(0,a.jsxs)("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("all"===n?"bg-[#4370d1] text-white":"text-gray-600 hover:bg-gray-100"),children:["Todas (",e.length,")"]}),(0,a.jsxs)("button",{onClick:()=>h("unread"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("unread"===n?"bg-[#4370d1] text-white":"text-gray-600 hover:bg-gray-100"),children:["N\xe3o lidas (",b,")"]}),(0,a.jsx)("button",{onClick:()=>h("achievements"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("achievements"===n?"bg-[#4370d1] text-white":"text-gray-600 hover:bg-gray-100"),children:"Reconhecimentos"}),(0,a.jsx)("button",{onClick:()=>h("messages"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("messages"===n?"bg-[#4370d1] text-white":"text-gray-600 hover:bg-gray-100"),children:"Mensagens"})]}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)(u.M,{children:y.length>0?y.map((e,t)=>{let n=e.icon;return(0,a.jsx)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},className:"p-5 rounded-xl border-2 transition-all cursor-pointer ".concat(e.read?"bg-white border-gray-200 opacity-70":"bg-gradient-to-r from-blue-50 to-purple-50 border-[#4370d1]"),onClick:()=>!e.read&&x(e.id),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat({blue:"bg-blue-50 border-blue-200 text-blue-700",yellow:"bg-yellow-50 border-yellow-200 text-yellow-700",red:"bg-red-50 border-red-200 text-red-700",green:"bg-green-50 border-green-200 text-green-700"}[e.color]),children:(0,a.jsx)(n,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900",children:e.title}),!e.read&&(0,a.jsx)("span",{className:"w-2 h-2 bg-[#4370d1] rounded-full"})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm mb-2",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.created_at.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),!e.read&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),x(e.id)},className:"text-[#4370d1] hover:text-[#0f1b35] transition-colors",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]})},e.id)}):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Nenhuma notifica\xe7\xe3o encontrada"}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm mt-2",children:["unread"===n&&"Todas as suas notifica\xe7\xf5es est\xe3o lidas!","achievements"===n&&"Voc\xea ainda n\xe3o tem reconhecimentos.","messages"===n&&"Nenhuma mensagem da Val ainda."]})]})})})]})})}},5526:function(e,t,n){"use strict";n.r(t),n.d(t,{supabase:function(){return i}});var a=n(62724);let s="https://ikjgsqtykkhqimypacro.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";s&&r||console.error("âŒ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let i=(0,a.eI)(s||"https://setup-missing.supabase.co",r||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},57586:function(e,t,n){"use strict";n.d(t,{M:function(){return b}});var a=n(57437),s=n(2265),r=n(58881),i=n(53576),l=n(11534),o=n(64252),c=n(13537),d=n(45750);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class m extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=(0,c.R)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=n-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:n,anchorX:r,root:i}=e,l=(0,s.useId)(),o=(0,s.useRef)(null),c=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,s.useContext)(d._),p=function(...e){return s.useCallback(function(...e){return t=>{let n=!1,a=e.map(e=>{let a=u(e,t);return n||"function"!=typeof a||(n=!0),a});if(n)return()=>{for(let t=0;t<a.length;t++){let n=a[t];"function"==typeof n?n():u(e[t],null)}}}}(...e),e)}(o,null==t?void 0:t.ref);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:s,right:d}=c.current;if(n||!o.current||!e||!t)return;o.current.dataset.motionPopId=l;let u=document.createElement("style");h&&(u.nonce=h);let m=null!=i?i:document.head;return m.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===r?"left: ".concat(s):"right: ".concat(d),"px !important;\n            top: ").concat(a,"px !important;\n          }\n        ")),()=>{m.contains(u)&&m.removeChild(u)}},[n]),(0,a.jsx)(m,{isPresent:n,childRef:o,sizeRef:c,children:s.cloneElement(t,{ref:p})})}let p=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:l,custom:c,presenceAffectsLayout:d,mode:u,anchorX:m,root:p}=e,g=(0,i.h)(f),x=(0,s.useId)(),y=!0,b=(0,s.useMemo)(()=>(y=!1,{id:x,initial:n,isPresent:r,custom:c,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;l&&l()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[r,g,l]);return d&&y&&(b={...b}),(0,s.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[r]),s.useEffect(()=>{r||g.size||!l||l()},[r]),"popLayout"===u&&(t=(0,a.jsx)(h,{isPresent:r,anchorX:m,root:p,children:t})),(0,a.jsx)(o.O.Provider,{value:b,children:t})};function f(){return new Map}var g=n(49637);let x=e=>e.key||"";function y(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let b=e=>{let{children:t,custom:n,initial:o=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:u="sync",propagate:m=!1,anchorX:h="left",root:f}=e,[b,v]=(0,g.oO)(m),j=(0,s.useMemo)(()=>y(t),[t]),N=m&&!b?[]:j.map(x),_=(0,s.useRef)(!0),w=(0,s.useRef)(j),k=(0,i.h)(()=>new Map),[C,E]=(0,s.useState)(j),[I,Z]=(0,s.useState)(j);(0,l.L)(()=>{_.current=!1,w.current=j;for(let e=0;e<I.length;e++){let t=x(I[e]);N.includes(t)?k.delete(t):!0!==k.get(t)&&k.set(t,!1)}},[I,N.length,N.join("-")]);let R=[];if(j!==C){let e=[...j];for(let t=0;t<I.length;t++){let n=I[t],a=x(n);N.includes(a)||(e.splice(t,0,n),R.push(n))}return"wait"===u&&R.length&&(e=R),Z(y(e)),E(j),null}let{forceRender:M}=(0,s.useContext)(r.p);return(0,a.jsx)(a.Fragment,{children:I.map(e=>{let t=x(e),s=(!m||!!b)&&(j===I||N.includes(t));return(0,a.jsx)(p,{isPresent:s,initial:(!_.current||!!o)&&void 0,custom:n,presenceAffectsLayout:d,mode:u,root:f,onExitComplete:s?void 0:()=>{if(!k.has(t))return;k.set(t,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(null==M||M(),Z(w.current),m&&(null==v||v()),c&&c())},anchorX:h,children:e},t)})})}}},function(e){e.O(0,[2882,4609,2724,2971,2117,1744],function(){return e(e.s=78990)}),_N_E=e.O()}]);