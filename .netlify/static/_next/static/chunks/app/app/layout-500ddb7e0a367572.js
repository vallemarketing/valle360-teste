(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3541],{90336:function(e,t,a){Promise.resolve().then(a.bind(a,86133))},79205:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var r=a(2265);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:h,...p}=e;return(0,r.createElement)("svg",{ref:t,...u,width:l,height:l,stroke:a,strokeWidth:i?24*Number(n)/Number(l):n,className:s("lucide",c),...!d&&!o(p)&&{"aria-hidden":"true"},...p},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:o,...u}=a;return(0,r.createElement)(c,{ref:n,iconNode:t,className:s("lucide-".concat(l(i(e))),"lucide-".concat(e),o),...u})});return a.displayName=i(e),a}},31047:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},96215:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},95252:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},48736:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},25466:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},53417:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},82023:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},3712:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("square-kanban",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 7v7",key:"1x2jlm"}],["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M16 7v9",key:"1hp2iy"}]])},17689:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},95805:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},27648:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var r=a(72972),l=a.n(r)},99376:function(e,t,a){"use strict";var r=a(35475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},86133:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var r=a(57437),l=a(27648),n=a(99376),i=a(33145),s=a(25466),o=a(3712),u=a(53417),c=a(95805),d=a(48736),h=a(31047),p=a(96215),f=a(95252),m=a(82023),v=a(17689),b=a(93448),x=a(2265),y=a(5526),g=a(64319);let k=[{href:"/app/dashboard",label:"Dashboard",icon:s.Z},{href:"/app/kanban",label:"Kanban",icon:o.Z},{href:"/app/mensagens",label:"Mensagens",icon:u.Z},{href:"/app/pessoas",label:"Pessoas",icon:c.Z},{href:"/app/solicitacoes",label:"Solicita\xe7\xf5es",icon:d.Z},{href:"/app/agenda",label:"Agenda",icon:h.Z},{href:"/app/relatorios",label:"Relat\xf3rios",icon:p.Z},{href:"/app/financeiro",label:"Financeiro",icon:f.Z},{href:"/app/val-ai",label:"Fale com a Val",icon:m.Z,isAi:!0}];function w(){let e=(0,n.usePathname)(),[t,a]=(0,x.useState)(null),[s,o]=(0,x.useState)([]),[u,c]=(0,x.useState)(null);(0,x.useEffect)(()=>{(async()=>{let{data:{user:e}}=await y.supabase.auth.getUser();if(e){let{data:t}=await y.supabase.from("user_profiles").select("role").eq("user_id",e.id).single();t&&a(t.role)}})()},[]),(0,x.useEffect)(()=>{let e=!0;return(async()=>{try{let{data:{user:t}}=await y.supabase.auth.getUser();if(!(null==t?void 0:t.id))return;let{data:a}=await y.supabase.from("employees").select("department, area_of_expertise, areas, is_active").eq("user_id",t.id).maybeSingle(),r=[];(null==a?void 0:a.department)&&r.push(String(a.department)),(null==a?void 0:a.area_of_expertise)&&r.push(String(a.area_of_expertise)),Array.isArray(null==a?void 0:a.areas)&&r.push(...a.areas.map(e=>String(e)));let l=Array.from(new Set(r.map(e=>(0,g.IY)(e)).filter(Boolean).map(e=>e))),n=l.includes("social_media")?"/app/social-media/upload":l.includes("head_marketing")?"/app/head-marketing/upload":null;if(!e)return;o(l),c(n)}catch(e){}})(),()=>{e=!1}},[]);let d=(()=>{if(!("admin"===t||"super_admin"===t||u))return k;let e=[...k],a=Math.max(0,e.findIndex(e=>"/app/solicitacoes"===e.href)+1);return e.splice(a,0,{href:u||"/app/social-media/upload",label:"Agendar Postagem",icon:v.Z}),e.splice(a+1,0,{href:"/app/social-media/gestao",label:"Gest\xe3o de Posts",icon:h.Z}),e})();return(0,r.jsxs)("aside",{className:"w-64 bg-gradient-to-b from-valle-navy-900 to-valle-navy-950 border-r border-valle-navy-800 min-h-screen flex flex-col",children:[(0,r.jsx)("div",{className:"p-6 border-b border-valle-navy-800",children:(0,r.jsxs)(l.default,{href:"/app/dashboard",className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg shadow-lg flex items-center justify-center p-1",children:(0,r.jsx)(i.default,{src:"/icons/ICON (1).png",alt:"Valle 360",width:32,height:32,className:"object-contain"})}),(0,r.jsx)("span",{className:"text-xl font-bold text-white",children:"Valle 360"})]})}),(0,r.jsx)("nav",{className:"p-4 space-y-2 flex-1",children:d.map(a=>{if("/app/financeiro"===a.href&&t&&!["admin","financeiro","super_admin"].includes(t))return null;let n=a.icon,i=e===a.href,s=a.isAi;return(0,r.jsxs)(l.default,{href:a.href,className:(0,b.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-all relative group",i?"bg-gradient-to-r from-valle-blue-600 to-valle-blue-700 text-white shadow-lg":"text-valle-silver-300 hover:text-white hover:bg-valle-navy-800",s&&!i&&"text-purple-300 hover:text-purple-100 hover:bg-purple-900/20"),children:[(0,r.jsx)(n,{className:(0,b.cn)("w-5 h-5",s&&"text-purple-400")}),(0,r.jsx)("span",{className:(0,b.cn)("font-medium",s&&"bg-gradient-to-r from-purple-200 to-pink-200 bg-clip-text text-transparent font-bold"),children:a.label}),s&&(0,r.jsxs)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex h-2 w-2",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-purple-500"})]})]},a.href)})}),(0,r.jsx)("div",{className:"p-4 border-t border-valle-navy-800",children:(0,r.jsx)("div",{className:"text-xs text-valle-silver-500 text-center",children:"v1.2.0 • Valle 360"})})]})}var j=a(53002);function N(e){let{children:t}=e;return(0,r.jsx)(j.i,{allowedRoles:["colaborador","super_admin"],children:(0,r.jsxs)("div",{className:"flex min-h-screen bg-white dark:bg-[#0a0f1a]",children:[(0,r.jsx)(w,{}),(0,r.jsxs)("main",{className:"flex-1",children:[(0,r.jsx)("div",{className:"sticky top-0 z-30 h-16 border-b border-[#001533]/10 dark:border-white/10 bg-white/95 dark:bg-[#0a0f1a]/95 backdrop-blur px-6 flex items-center",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-[#001533] dark:text-white",children:"\xc1rea Interna"})}),(0,r.jsx)("div",{className:"p-6",children:t})]})]})})}},53002:function(e,t,a){"use strict";a.d(t,{i:function(){return o}});var r=a(57437),l=a(2265),n=a(99376),i=a(68123),s=a(12381);function o(e){let{children:t,allowedRoles:a,redirectTo:o="/login"}=e,u=(0,n.useRouter)(),[c,d]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!0),f=async()=>{p(!0);try{let e=await (0,i.ts)();if(!e){u.push(o);return}if(!a.includes(e.role)){u.push("/login");return}d(!0)}catch(e){console.error("Auth error:",e),u.push(o)}finally{p(!1)}};return((0,l.useEffect)(()=>{f()},[a,o]),h)?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen gap-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Verificando permiss\xf5es..."})]}):c?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Negado"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina."}),(0,r.jsx)(s.z,{onClick:()=>u.push("/login"),className:"w-full",children:"Voltar para Login"})]})})}},12381:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var r=a(57437),l=a(2265),n=a(90535),i=a(93448);let s=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-valle-blue-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gradient-to-r from-valle-blue-600 to-valle-blue-700 text-white hover:from-valle-blue-700 hover:to-valle-blue-800 shadow-lg",secondary:"bg-valle-silver-200 text-valle-navy-800 hover:bg-valle-silver-300",outline:"border-2 border-valle-blue-600 text-valle-blue-600 hover:bg-valle-blue-50",ghost:"hover:bg-valle-blue-50 hover:text-valle-blue-600",danger:"bg-red-600 text-white hover:bg-red-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=l.forwardRef((e,t)=>{let{className:a,variant:l,size:n,...o}=e;return(0,r.jsx)("button",{className:(0,i.cn)(s({variant:l,size:n,className:a})),ref:t,...o})});o.displayName="Button"},68123:function(e,t,a){"use strict";a.d(t,{ts:function(){return n},w7:function(){return l}});var r=a(5526);async function l(){let{error:e}=await r.supabase.auth.signOut();if(e)throw e}async function n(){var e,t,a,l,n,i,s;let{data:{user:o}}=await r.supabase.auth.getUser();if(!o)return null;let{data:u,error:c}=await r.supabase.from("user_profiles").select("full_name, role, user_type").eq("user_id",o.id).single();if(u){let e=u.user_type||u.role;return"employee"===e&&(e="colaborador"),e||(e="cliente"),{id:o.id,email:o.email,name:u.full_name||(null===(l=o.user_metadata)||void 0===l?void 0:l.name)||(null===(n=o.email)||void 0===n?void 0:n.split("@")[0])||"",role:e}}let{data:d,error:h}=await r.supabase.from("users").select("full_name, role, user_type").eq("id",o.id).single();if(d){let e=d.user_type||d.role;return"employee"===e&&(e="colaborador"),e||(e="cliente"),{id:o.id,email:o.email,name:d.full_name||(null===(i=o.user_metadata)||void 0===i?void 0:i.name)||(null===(s=o.email)||void 0===s?void 0:s.split("@")[0])||"",role:e}}return{id:o.id,email:o.email,name:(null===(e=o.user_metadata)||void 0===e?void 0:e.name)||(null===(t=o.email)||void 0===t?void 0:t.split("@")[0])||"",role:(null===(a=o.user_metadata)||void 0===a?void 0:a.role)||"cliente"}}},5526:function(e,t,a){"use strict";a.r(t),a.d(t,{supabase:function(){return i}});var r=a(62724);let l="https://ikjgsqtykkhqimypacro.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";l&&n||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let i=(0,r.eI)(l||"https://setup-missing.supabase.co",n||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},93448:function(e,t,a){"use strict";a.d(t,{cn:function(){return n},x:function(){return i}});var r=a(61994),l=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.m6)((0,r.W)(t))}function i(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}},90535:function(e,t,a){"use strict";a.d(t,{j:function(){return i}});var r=a(61994);let l=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.W,i=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(e=>{let t=null==a?void 0:a[e],r=null==s?void 0:s[e];if(null===t)return null;let n=l(t)||l(r);return i[e][n]}),u=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return n(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:a,className:r,...l}=t;return Object.entries(l).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...s,...u}[t]):({...s,...u})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}}},function(e){e.O(0,[6137,4609,2724,2972,3145,2768,2971,2117,1744],function(){return e(e.s=90336)}),_N_E=e.O()}]);