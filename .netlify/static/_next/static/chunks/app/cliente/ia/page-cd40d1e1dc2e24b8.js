(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5954],{80085:function(e,r,t){Promise.resolve().then(t.bind(t,37977))},37977:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var a=t(57437),s=t(2265),l=t(5526),n=t(79820),o=t(12381),i=t(40279),c=t(69174),d=t(70525),u=t(58896),m=t(31047),x=t(95805),v=t(82023),f=t(51817),b=t(44743),p=t(93448);let h=[{text:"Quero uma an\xe1lise geral da evolu\xe7\xe3o da minha marca",icon:d.Z,color:"from-valle-blue-500 to-valle-blue-600"},{text:"Traga novidades do meu setor",icon:u.Z,color:"from-green-500 to-green-600"},{text:"Quero agendar uma reuni\xe3o com a equipe que cuida da minha conta",icon:m.Z,color:"from-purple-500 to-purple-600"},{text:"O que meus concorrentes est\xe3o fazendo?",icon:x.Z,color:"from-amber-500 to-amber-600"}];function g(){let[e,r]=(0,s.useState)(0),[t,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[x,g]=(0,s.useState)("Cliente"),[y,j]=(0,s.useState)([{id:"seed",role:"assistant",content:"Ol\xe1! Sou a Val, sua assistente de IA. Como posso ajudar hoje?"}]),N=(0,s.useRef)(null),w=()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{let e=setInterval(()=>r(e=>(e+1)%360),20);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{w()},[y,t]),(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{var r;let{data:{user:t}}=await l.supabase.auth.getUser();if(!t)return;let{data:a}=await l.supabase.from("user_profiles").select("full_name").eq("user_id",t.id).maybeSingle(),s=String((null==a?void 0:a.full_name)||(null===(r=t.email)||void 0===r?void 0:r.split("@")[0])||"Cliente").split(" ")[0]||"Cliente";e&&g(s)}catch(e){}})(),()=>{e=!1}},[]);let C=(0,s.useMemo)(()=>y.slice(-10).filter(e=>"seed"!==e.id).map(e=>({role:"user"===e.role?"user":"assistant",content:e.content})),[y]),I=async e=>{let r=e.trim();if(!r||t)return;let a={id:String(Date.now()),role:"user",content:r};j(e=>[...e,a]),m(""),d(!0);try{var s;let e=await fetch("/api/ai/val",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,context:{webSearch:!1},history:C})}),t=await e.json().catch(()=>null),a=(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.message)||(null==t?void 0:t.response)||(null==t?void 0:t.message);if(!e.ok||!a)throw Error((null==t?void 0:t.error)||"Falha ao consultar a Val");j(e=>[...e,{id:String(Date.now()+1),role:"assistant",content:String(a)}])}catch(e){j(e=>[...e,{id:String(Date.now()+1),role:"assistant",content:"Tive um problema para responder agora. Pode tentar de novo em alguns segundos?"}])}finally{d(!1)}};return(0,a.jsxs)("div",{className:"pb-24 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-valle-navy-900 dark:text-white",children:"Assistente IA Valle"}),(0,a.jsx)("p",{className:"text-valle-silver-600 dark:text-white/60 mt-2",children:"Seu consultor inteligente de marketing"})]}),(0,a.jsxs)(n.Zb,{className:"border-2 border-valle-blue-300 bg-gradient-to-br from-white via-valle-blue-50 to-valle-blue-100 overflow-hidden relative",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-valle-blue-300/40 to-transparent rounded-full blur-3xl animate-pulse"}),(0,a.jsxs)(n.aY,{className:"p-6 md:p-8 relative z-10 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsxs)("div",{className:"relative mb-5",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-valle-blue-400 to-valle-blue-600 rounded-full blur-2xl opacity-50 animate-pulse"}),(0,a.jsxs)("div",{className:"relative w-20 h-20 rounded-full flex items-center justify-center shadow-2xl border-4 border-white",style:{background:"linear-gradient(135deg, #1672d6 0%, #001533 100%)",transform:"rotate(".concat(e,"deg)"),transition:"transform 0.02s linear"},children:[(0,a.jsx)("div",{className:"absolute inset-1.5 rounded-full border-2 border-dashed border-white/40"}),(0,a.jsx)(v.Z,{className:"w-10 h-10 text-white drop-shadow-lg",style:{transform:"rotate(-".concat(e,"deg)")}})]})]}),(0,a.jsxs)("h2",{className:"text-2xl font-bold text-valle-navy-900 mb-2",children:["Ol\xe1, ",x,"!"]}),(0,a.jsxs)("p",{className:"text-valle-navy-700 max-w-2xl",children:["Sou a ",(0,a.jsx)("span",{className:"font-bold text-valle-blue-600",children:"Val"}),". Posso ajudar com an\xe1lises, insights do mercado, concorrentes e pr\xf3ximos passos."]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,a.jsxs)(c.C,{className:"bg-green-600 text-white border-0",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mr-2 animate-pulse"}),"Online"]}),(0,a.jsx)(c.C,{className:"bg-valle-blue-600 text-white border-0",children:"IA Ativa"})]})]}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:h.map((e,r)=>{let t=e.icon;return(0,a.jsx)("button",{onClick:()=>I(e.text),className:(0,p.cn)("p-4 rounded-xl text-left border border-valle-blue-200 bg-white/70 hover:bg-white transition-all","hover:shadow-xl hover:-translate-y-0.5"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:(0,p.cn)("w-10 h-10 rounded-lg bg-gradient-to-br flex items-center justify-center",e.color),children:(0,a.jsx)(t,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-valle-navy-900",children:e.text}),(0,a.jsx)("p",{className:"text-sm text-valle-silver-600 mt-1",children:"Clique para enviar"})]})]})},r)})}),(0,a.jsxs)("div",{className:"rounded-2xl border border-valle-blue-200 bg-white/80 overflow-hidden",children:[(0,a.jsxs)("div",{className:"max-h-[45vh] overflow-y-auto p-4 space-y-3",children:[y.map(e=>(0,a.jsx)("div",{className:(0,p.cn)("flex","user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:(0,p.cn)("max-w-[85%] rounded-2xl px-4 py-3 text-sm","user"===e.role?"bg-[#1672d6] text-white rounded-tr-none":"bg-[#001533]/5 text-[#001533] rounded-tl-none"),children:e.content})},e.id)),t&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsxs)("div",{className:"bg-[#001533]/5 text-[#001533] rounded-2xl rounded-tl-none px-4 py-3 text-sm flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 animate-spin"}),"Pensando…"]})}),(0,a.jsx)("div",{ref:N})]}),(0,a.jsx)("div",{className:"p-4 border-t border-valle-blue-200 bg-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.II,{value:u,onChange:e=>m(e.target.value),placeholder:"Digite sua mensagem…",onKeyDown:e=>{"Enter"===e.key&&I(u)},disabled:t}),(0,a.jsx)(o.z,{onClick:()=>I(u),disabled:t||!u.trim(),className:"bg-[#1672d6] hover:bg-[#1260b5]",children:t?(0,a.jsx)(f.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]})})]})]})]})]})}},69174:function(e,r,t){"use strict";t.d(r,{C:function(){return o}});var a=t(57437);t(2265);var s=t(90535),l=t(93448);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-valle-blue-600 text-white",secondary:"border-transparent bg-valle-silver-300 text-valle-navy-800",outline:"text-valle-navy-700 border-valle-silver-400",success:"border-transparent bg-green-600 text-white",warning:"border-transparent bg-yellow-600 text-white",danger:"border-transparent bg-red-600 text-white"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:t}),r),...s})}},12381:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var a=t(57437),s=t(2265),l=t(90535),n=t(93448);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-valle-blue-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gradient-to-r from-valle-blue-600 to-valle-blue-700 text-white hover:from-valle-blue-700 hover:to-valle-blue-800 shadow-lg",secondary:"bg-valle-silver-200 text-valle-navy-800 hover:bg-valle-silver-300",outline:"border-2 border-valle-blue-600 text-valle-blue-600 hover:bg-valle-blue-50",ghost:"hover:bg-valle-blue-50 hover:text-valle-blue-600",danger:"bg-red-600 text-white hover:bg-red-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,r)=>{let{className:t,variant:s,size:l,...i}=e;return(0,a.jsx)("button",{className:(0,n.cn)(o({variant:s,size:l,className:t})),ref:r,...i})});i.displayName="Button"},79820:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return i}});var a=t(57437),s=t(2265),l=t(93448);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-xl border-2 border-valle-silver-200 bg-white shadow-md",t),...s})});n.displayName="Card";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,l.cn)("font-semibold leading-none tracking-tight text-lg",t),...s})});i.displayName="CardTitle";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-foreground/70",t),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},40279:function(e,r,t){"use strict";t.d(r,{II:function(){return v}});var a=t(57437),s=t(2265),l=t(57586),n=t(26892),o=t(51817),i=t(32489),c=t(87769),d=t(42208),u=t(49322),m=t(41671);let x={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-4 py-3 text-base"},v=(0,s.forwardRef)((e,r)=>{let{label:t,error:v,success:f,hint:b,icon:p,iconPosition:h="left",size:g="md",variant:y="default",loading:j=!1,clearable:N=!1,onClear:w,className:C="",type:I="text",disabled:k,value:S,...Z}=e,[E,R]=(0,s.useState)(!1),[O,_]=(0,s.useState)(!1),z="password"===I,A=z&&E?"text":I,T="\n    w-full rounded-xl border transition-all duration-200\n    ".concat(x[g],"\n    ").concat(p&&"left"===h?"pl-10":"","\n    ").concat(p&&"right"===h?"pr-10":"","\n    ").concat(z||N||j?"pr-10":"","\n    ").concat(k?"opacity-50 cursor-not-allowed":"","\n  "),B=v?"border-red-500 focus:border-red-500 focus:ring-red-500/20":f?"border-green-500 focus:border-green-500 focus:ring-green-500/20":"";return(0,a.jsxs)("div",{className:"space-y-1 ".concat(C),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:t}),(0,a.jsxs)("div",{className:"relative",children:[p&&"left"===h&&(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:O?"var(--primary-500)":"var(--text-tertiary)"},children:p}),(0,a.jsx)("input",{ref:r,type:A,value:S,disabled:k||j,onFocus:e=>{var r;_(!0),null===(r=Z.onFocus)||void 0===r||r.call(Z,e)},onBlur:e=>{var r;_(!1),null===(r=Z.onBlur)||void 0===r||r.call(Z,e)},className:"".concat(T," ").concat({default:"\n      bg-white dark:bg-gray-900\n      border-gray-200 dark:border-gray-700\n      focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20\n    ",filled:"\n      bg-gray-100 dark:bg-gray-800\n      border-transparent\n      focus:bg-white dark:focus:bg-gray-900\n      focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20\n    ",outlined:"\n      bg-transparent\n      border-gray-300 dark:border-gray-600\n      focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20\n    "}[y]," ").concat(B),style:{color:"var(--text-primary)",backgroundColor:"filled"===y?"var(--bg-secondary)":"var(--bg-primary)"},...Z}),(0,a.jsxs)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[j&&(0,a.jsx)(o.Z,{className:"w-4 h-4 animate-spin",style:{color:"var(--text-tertiary)"}}),N&&void 0!==S&&""!==S&&!j&&(0,a.jsx)("button",{type:"button",onClick:w,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800",children:(0,a.jsx)(i.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}})}),z&&!j&&(0,a.jsx)("button",{type:"button",onClick:()=>R(!E),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800",children:E?(0,a.jsx)(c.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}}):(0,a.jsx)(d.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}})}),p&&"right"===h&&!z&&!N&&!j&&(0,a.jsx)("div",{style:{color:O?"var(--primary-500)":"var(--text-tertiary)"},children:p}),v&&!j&&(0,a.jsx)(u.Z,{className:"w-4 h-4",style:{color:"var(--error-500)"}}),f&&!v&&!j&&(0,a.jsx)(m.Z,{className:"w-4 h-4",style:{color:"var(--success-500)"}})]})]}),(0,a.jsxs)(l.M,{mode:"wait",children:[v&&(0,a.jsx)(n.E.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"text-xs",style:{color:"var(--error-500)"},children:v}),f&&!v&&(0,a.jsx)(n.E.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"text-xs",style:{color:"var(--success-500)"},children:f}),b&&!v&&!f&&(0,a.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:b})]})]})});v.displayName="Input",(0,s.forwardRef)((e,r)=>{let{label:t,error:s,hint:l,size:n="md",className:o="",disabled:i,...c}=e;return(0,a.jsxs)("div",{className:"space-y-1 ".concat(o),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:t}),(0,a.jsx)("textarea",{ref:r,disabled:i,className:"\n          w-full rounded-xl border transition-all duration-200 resize-none\n          ".concat({sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-sm",lg:"px-4 py-4 text-base"}[n],"\n          ").concat(s?"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20","\n          ").concat(i?"opacity-50 cursor-not-allowed":"","\n        "),style:{color:"var(--text-primary)",backgroundColor:"var(--bg-primary)"},...c}),s&&(0,a.jsx)("p",{className:"text-xs",style:{color:"var(--error-500)"},children:s}),l&&!s&&(0,a.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:l})]})}).displayName="Textarea"},5526:function(e,r,t){"use strict";t.r(r),t.d(r,{supabase:function(){return n}});var a=t(62724);let s="https://ikjgsqtykkhqimypacro.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";s&&l||console.error("❌ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let n=(0,a.eI)(s||"https://setup-missing.supabase.co",l||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},93448:function(e,r,t){"use strict";t.d(r,{cn:function(){return l},x:function(){return n}});var a=t(61994),s=t(53335);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[2882,6137,4609,2724,97,2971,2117,1744],function(){return e(e.s=80085)}),_N_E=e.O()}]);