"use strict";(()=>{var e={};e.id=85128,e.ids=[85128],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},55315:e=>{e.exports=require("path")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},6162:e=>{e.exports=require("worker_threads")},71568:e=>{e.exports=require("zlib")},87561:e=>{e.exports=require("node:fs")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},73238:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>h,requestAsyncStorage:()=>x,routeModule:()=>l,serverHooks:()=>S,staticGenerationAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{POST:()=>m,dynamic:()=>p,maxDuration:()=>d});var s=r(49303),n=r(88716),i=r(60670),o=r(87070),u=r(17478),c=r(83387);let p="force-dynamic",d=180;async function m(e){let t;let r=await (0,u.k)(e);if(!r.ok)return r.res;try{t=await e.json()}catch{return o.NextResponse.json({success:!1,error:"Invalid JSON body"},{status:400})}let{client_id:a,campaign_objective:s="leads",product:n,target_audience:i,budget:p,additional_context:d}=t;if(!a||!n||!i)return o.NextResponse.json({success:!1,error:"client_id, product, and target_audience are required"},{status:400});try{let e=await (0,c.J8)({clientId:a,campaignObjective:s,product:n,targetAudience:i,budget:p,platform:"meta",additionalContext:d});if(!e.success)throw Error(e.error||"Campaign generation failed");let t=function(e){let t=e.match(/(?:ESTRATÉGIA|STRATEGY)[:\s]*\n?([\s\S]*?)(?=\n\n---|$)/i),r=e.match(/(?:COPIES|ANÚNCIOS|ADS)[:\s]*\n?([\s\S]*?)(?=\n\n---|$)/i),a=e.match(/(?:PÚBLICOS|AUDIENCES)[:\s]*\n?([\s\S]*?)(?=\n\n---|$)/i),s=e.match(/(?:ESTRUTURA|STRUCTURE)[:\s]*\n?([\s\S]*?)(?=\n\n---|$)/i),n=e.match(/(?:CRIATIVOS|CREATIVES|VISUAL)[:\s]*\n?([\s\S]*?)(?=\n\n---|$)/i),i=e.match(/(?:VIDEO.HOOKS?|GANCHOS.VIDEO)[:\s]*\n?([\s\S]*?)(?=\n\n|$)/i);return{strategy:t?.[1]?.trim(),adCopies:r?.[1]?.trim(),audiences:a?.[1]?.trim(),campaignStructure:s?.[1]?.trim(),creativePrompts:n?.[1]?.trim(),videoHooks:i?.[1]?.trim(),fullOutput:e}}(e.finalOutput);return o.NextResponse.json({success:!0,result:{...t,executionTime:e.totalTime,tokenUsage:e.totalTokens}})}catch(e){return console.error("Meta Ads campaign generation error:",e),o.NextResponse.json({success:!1,error:e.message||"Generation failed"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/agency/meta-ads/campaign/route",pathname:"/api/admin/agency/meta-ads/campaign",filename:"route",bundlePath:"app/api/admin/agency/meta-ads/campaign/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\admin\\agency\\meta-ads\\campaign\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:S}=l,q="/api/admin/agency/meta-ads/campaign/route";function h(){return(0,i.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:g})}}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[89276,55972,54128,20958,54214,18871,53919],()=>r(73238));module.exports=a})();