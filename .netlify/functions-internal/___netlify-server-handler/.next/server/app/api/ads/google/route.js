"use strict";(()=>{var e={};e.id=99982,e.ids=[99982],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},42478:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>I,patchFetch:()=>h,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var t={};r.r(t),r.d(t,{POST:()=>d,dynamic:()=>c});var o=r(49303),a=r(88716),i=r(60670),n=r(87070),p=r(1926);let c="force-dynamic";async function d(e){try{let s=e.headers.get("authorization");if(!s||!s.startsWith("Bearer "))return n.NextResponse.json({error:"Unauthorized - Missing or invalid authorization header"},{status:401});let r=s.replace("Bearer ",""),t=process.env.ADS_INTEGRATION_API_KEY;if(!t||r!==t)return n.NextResponse.json({error:"Unauthorized - Invalid API key"},{status:401});let{client_id:o,period_start:a,period_end:i,roas:c,cpc:d,cpm:l,ctr:u,investment:g,conversions:m,leads:I,impressions:h,clicks:v,raw_data:f}=await e.json();if(!o||!a||!i)return n.NextResponse.json({error:"Missing required fields: client_id, period_start, period_end"},{status:400});let{data:x,error:_}=await p.O.from("traffic_metrics").insert({client_id:o,platform:"google_ads",period_start:a,period_end:i,roas:c||0,cpc:d||0,cpm:l||0,ctr:u||0,investment:g||0,conversions:m||0,leads:I||0,impressions:h||0,clicks:v||0,raw_data:f||{},import_source:"api"}).select().single();if(_)return console.error("Error inserting Google Ads data:",_),n.NextResponse.json({error:"Failed to insert metrics",details:_.message},{status:500});return n.NextResponse.json({success:!0,message:"Google Ads metrics imported successfully",data:x},{status:201})}catch(e){return console.error("Error processing Google Ads webhook:",e),n.NextResponse.json({error:"Internal server error",details:e.message},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/ads/google/route",pathname:"/api/ads/google",filename:"route",bundlePath:"app/api/ads/google/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\ads\\google\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:u,staticGenerationAsyncStorage:g,serverHooks:m}=l,I="/api/ads/google/route";function h(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},1926:(e,s,r)=>{r.d(s,{O:()=>i});var t=r(54128);let o="https://ikjgsqtykkhqimypacro.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";o&&a||console.error("âŒ ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let i=(0,t.eI)(o||"https://setup-missing.supabase.co",a||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[89276,55972,54128],()=>r(42478));module.exports=t})();