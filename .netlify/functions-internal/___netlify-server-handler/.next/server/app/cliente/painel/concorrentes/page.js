(()=>{var e={};e.id=81294,e.ids=[81294],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},89203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(23499),s(16193),s(49991),s(35866);var r=s(23191),a=s(88716),i=s(37922),l=s.n(i),n=s(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["cliente",{children:["painel",{children:["concorrentes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23499)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\painel\\concorrentes\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,16193)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,49991)),"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\cliente\\painel\\concorrentes\\page.tsx"],x="/cliente/painel/concorrentes/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/cliente/painel/concorrentes/page",pathname:"/cliente/painel/concorrentes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},79247:(e,t,s)=>{Promise.resolve().then(s.bind(s,11229))},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7027:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},77506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},11229:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(10326),a=s(28870),i=s(90434),l=s(17577),n=s(86333),d=s(53468),o=s(77506),c=s(50949),x=s(83855),m=s(98091),p=s(7027),h=s(51223);function u(){let[e,t]=(0,l.useState)(!0),[s,u]=(0,l.useState)(!1),[g,b]=(0,l.useState)(null),[f,j]=(0,l.useState)("Cliente"),[w,v]=(0,l.useState)(""),[y,k]=(0,l.useState)([]),[N,S]=(0,l.useState)(""),[Z,P]=(0,l.useState)(null),[M,_]=(0,l.useState)(!1),C=(0,l.useMemo)(()=>y.join("\n"),[y]),A=async e=>{let t=Array.from(new Set((e||[]).map(e=>String(e).trim()).filter(Boolean))).slice(0,25);u(!0);try{let e=await fetch("/api/client/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({segment:w||null,competitors:t,concorrentes:t.join("\n")})}),s=await e.json().catch(()=>null);if(!e.ok)throw Error(s?.error||"Falha ao salvar concorrentes");k(t)}finally{u(!1)}},E=async()=>{let e=String(N||"").trim();e&&(S(""),await A([...y,e]))},U=async e=>{await A(y.filter(t=>t!==e))},q=async()=>{_(!0);try{let e=await fetch("/api/ai/val/web-insights"),t=await e.json().catch(()=>null);if(!e.ok)throw Error(t?.error||"Falha ao gerar insights");if(t?.skip){P(null);return}P({message:String(t?.message||""),sources:Array.isArray(t?.sources)?t.sources.map(String):[],provider:t?.provider,generatedAt:t?.generatedAt})}catch(e){P({message:String(e?.message||"Erro ao gerar insights"),sources:[]})}finally{_(!1)}};return(0,r.jsxs)("div",{className:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto",children:[(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(i.default,{href:"/cliente/painel",className:"p-2 rounded-lg bg-[#001533]/5 hover:bg-[#001533]/10 transition-colors",children:r.jsx(n.Z,{className:"size-5 text-[#001533] dark:text-white"})}),r.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600",children:r.jsx(d.Z,{className:"size-5 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-[#001533] dark:text-white",children:"Concorrentes"})]}),(0,r.jsxs)("p",{className:"text-[#001533]/60 dark:text-white/60 ml-12",children:["Configure seus concorrentes para ",r.jsx("span",{className:"font-medium",children:f}),w?(0,r.jsxs)(r.Fragment,{children:[" ","• ",r.jsx("span",{className:"font-medium",children:w})]}):null]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:q,disabled:M||e,className:(0,h.cn)("px-4 py-2 rounded-xl font-medium transition-all border","bg-white dark:bg-[#001533]/50 text-[#001533] dark:text-white","border-[#001533]/10 dark:border-white/10 hover:border-[#1672d6]/30"),children:M?(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[r.jsx(o.Z,{className:"size-4 animate-spin"})," Gerando…"]}):"Gerar insights com fontes"})})]}),g&&(0,r.jsxs)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 flex items-start gap-2",children:[r.jsx(c.Z,{className:"size-4 mt-0.5"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:"N\xe3o foi poss\xedvel carregar seu perfil"}),r.jsx("p",{className:"mt-1 opacity-80",children:g})]})]}),(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:(0,h.cn)("rounded-2xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 p-6",e&&"opacity-70"),children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 md:items-end",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-[#001533] dark:text-white mb-1.5",children:"Adicionar concorrente"}),r.jsx("input",{value:N,onChange:e=>S(e.target.value),placeholder:"Ex: Empresa X, @perfil, dom\xednio.com.br",className:"w-full px-4 py-3 rounded-xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 text-[#001533] dark:text-white placeholder:text-[#001533]/40 dark:placeholder:text-white/40 focus:border-[#1672d6] focus:outline-none transition-colors",disabled:e||s,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),E())}})]}),r.jsx("button",{onClick:()=>void E(),disabled:e||s||!N.trim(),className:(0,h.cn)("px-4 py-3 rounded-xl font-medium transition-all","bg-[#1672d6] text-white hover:bg-[#1260b5]","disabled:opacity-50 disabled:cursor-not-allowed"),children:(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[s?r.jsx(o.Z,{className:"size-4 animate-spin"}):r.jsx(x.Z,{className:"size-4"}),"Adicionar"]})})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-[#001533] dark:text-white",children:"Seus concorrentes"}),(0,r.jsxs)("span",{className:"text-sm text-[#001533]/50 dark:text-white/50",children:[y.length," monitorados"]})]}),0===y.length?r.jsx("p",{className:"mt-3 text-sm text-[#001533]/60 dark:text-white/60",children:"Adicione pelo menos 1 concorrente para a Val conseguir comparar e sugerir a\xe7\xf5es."}):r.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:y.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-[#001533]/10 dark:border-white/10 bg-white/60 dark:bg-[#001533]/30 p-3",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-[#001533] dark:text-white truncate",children:e}),r.jsx("p",{className:"text-xs text-[#001533]/50 dark:text-white/50 truncate",children:"Salvo no seu perfil"})]}),r.jsx("button",{onClick:()=>void U(e),disabled:s,className:"p-2 rounded-lg hover:bg-red-500/10 text-red-600 disabled:opacity-50",title:"Remover",children:r.jsx(m.Z,{className:"size-4"})})]},e))}),(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-xs font-medium text-[#001533]/50 dark:text-white/50 mb-1",children:"(Opcional) Lista em texto"}),r.jsx("textarea",{value:C,readOnly:!0,rows:3,className:"w-full px-3 py-2 rounded-xl border border-[#001533]/10 dark:border-white/10 bg-[#001533]/5 dark:bg-white/5 text-[#001533] dark:text-white text-sm"})]})]})]}),Z&&Z.message&&(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-2xl border-2 border-[#001533]/10 dark:border-white/10 bg-white dark:bg-[#001533]/50 p-6",children:[r.jsx("div",{className:"flex items-start justify-between gap-4",children:(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-[#001533] dark:text-white",children:"Insights com fontes"}),(0,r.jsxs)("p",{className:"text-xs text-[#001533]/50 dark:text-white/50 mt-1",children:[Z.provider?`Fonte: ${Z.provider}`:"Fonte: web",Z.generatedAt?` • ${new Date(Z.generatedAt).toLocaleString("pt-BR")}`:""]})]})}),r.jsx("div",{className:"mt-3 whitespace-pre-wrap text-sm text-[#001533] dark:text-white",children:Z.message}),Z.sources?.length>0&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-[#001533]/10 dark:border-white/10",children:[r.jsx("p",{className:"text-sm font-medium text-[#001533] dark:text-white mb-2",children:"Fontes"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Z.sources.slice(0,10).map(e=>(0,r.jsxs)("a",{href:e,target:"_blank",rel:"noreferrer",className:"flex items-center justify-between gap-2 rounded-xl border border-[#001533]/10 dark:border-white/10 bg-white/60 dark:bg-[#001533]/30 px-3 py-2 hover:border-[#1672d6]/30 transition-colors",children:[r.jsx("span",{className:"text-xs text-[#1672d6] underline break-all",children:e}),r.jsx(p.Z,{className:"size-4 text-[#001533]/40 dark:text-white/40"})]},e))})]})]})]})}},23499:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`C:\Users\User\Downloads\valle-360-main\valle-360-main\src\app\cliente\painel\concorrentes\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[89276,54267,51789,78515,46226,28870,39215,16819,72418,62198,18832,14574,79925],()=>s(89203));module.exports=r})();