(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6400],{65486:function(e,r,t){Promise.resolve().then(t.bind(t,53521))},53521:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return T}});var a=t(57437),n=t(2265),s=t(99376),o=t(14438),l=t(79820),i=t(12381),c=t(69174),d=t(17168),u=t(74291),x=t(40279),m=t(82431),h=t(33276),p=t(76865),v=t(78867),f=t(65621),g=t(42208),b=t(3712),_=t(92934),y=t(99388),j=t(69076);function w(e){let r=(e||"").toLowerCase();return"pending"===r?(0,a.jsx)(c.C,{className:"bg-yellow-500/10 text-yellow-700 border-yellow-500/30",children:"Pendente"}):"completed"===r||"processed"===r?(0,a.jsx)(c.C,{className:"bg-emerald-500/10 text-emerald-700 border-emerald-500/30",children:"OK"}):"error"===r?(0,a.jsx)(c.C,{className:"bg-red-500/10 text-red-700 border-red-500/30",children:"Erro"}):(0,a.jsx)(c.C,{variant:"outline",children:e})}function N(e,r){let t=(r||"").toLowerCase();return"all"===t||"pending"===t||"error"===t?t:"events"===e?"completed"===t||"processed"===t?"processed":t:"processed"===t||"completed"===t?"completed":t}function k(e){let r=(null==e?void 0:e.data_payload)||{},t=r.kanban_board_id||r.board_id,a=r.kanban_task_id||r.task_id;return t&&a?"/admin/meu-kanban?boardId=".concat(encodeURIComponent(String(t)),"&taskId=").concat(encodeURIComponent(String(a))):null}function C(e){let r=e||{};return{client_id:r.client_id||r.clientId||null,proposal_id:r.proposal_id||null,contract_id:r.contract_id||null,invoice_id:r.invoice_id||null,correlation_id:r.correlation_id||null,executed_at:r.executed_at||null,executed_by:r.executed_by||null,completed_note:r.completed_note||null,completed_at:r.completed_at||null,completed_by:r.completed_by||null,reopened_note:r.reopened_note||null,reopened_at:r.reopened_at||null,reopened_by:r.reopened_by||null,error_resolved_note:r.error_resolved_note||null,error_resolved_at:r.error_resolved_at||null,error_resolved_by:r.error_resolved_by||null,marked_error_note:r.marked_error_note||null,marked_error_at:r.marked_error_at||null,marked_error_by:r.marked_error_by||null,rerouted_note:r.rerouted_note||null,rerouted_at:r.rerouted_at||null,rerouted_by:r.rerouted_by||null,rerouted_from_area:r.rerouted_from_area||null,rerouted_to_area:r.rerouted_to_area||null,previous_executions:Array.isArray(r.previous_executions)?r.previous_executions:null,reroute_history:Array.isArray(r.reroute_history)?r.reroute_history:null,source_event_id:r.source_event_id||null}}function S(e){if(!e)return null;let r=new Date(String(e));return Number.isNaN(r.getTime())?String(e):r.toLocaleString("pt-BR")}function E(){var e;let r=(0,s.useSearchParams)(),[t,E]=(0,n.useState)("transitions"),[T,A]=(0,n.useState)(!1),[L,z]=(0,n.useState)([]),[O,Z]=(0,n.useState)([]),[R,F]=(0,n.useState)("pending"),[P,I]=(0,n.useState)(""),[V,B]=(0,n.useState)(null),[K,D]=(0,n.useState)(null),[M,J]=(0,n.useState)(null),[H,q]=(0,n.useState)(null),[Y,$]=(0,n.useState)(null),[U,Q]=(0,n.useState)(null),[W,G]=(0,n.useState)(null),X=(0,n.useMemo)(()=>{let e=["Comercial","Jur\xeddico","Contratos","Financeiro","Operacao","Admin","RH","Social Media","Tr\xe1fego","Design","V\xeddeo"],r=Array.from(new Set([...e,...(L||[]).flatMap(e=>[e.from_area,e.to_area]).filter(Boolean).map(e=>String(e))])).filter(r=>!e.includes(r));return r.sort((e,r)=>e.localeCompare(r,"pt-BR")),[...e,...r]},[L]),ee=(0,n.useMemo)(()=>{let e=P.trim().toLowerCase();return(L||[]).filter(e=>"all"===R||String(e.status).toLowerCase()===R).filter(r=>{if(!e)return!0;let t=(()=>{try{return JSON.stringify(r.data_payload||{}).toLowerCase()}catch(e){return""}})();return String(r.from_area||"").toLowerCase().includes(e)||String(r.to_area||"").toLowerCase().includes(e)||String(r.trigger_event||"").toLowerCase().includes(e)||String(r.error_message||"").toLowerCase().includes(e)||t.includes(e)})},[L,R,P]),er=(0,n.useMemo)(()=>{let e=P.trim().toLowerCase();return(O||[]).filter(e=>"all"===R||String(e.status).toLowerCase()===R).filter(r=>{if(!e)return!0;let t=(()=>{try{return JSON.stringify(r.payload||{}).toLowerCase()}catch(e){return""}})();return String(r.event_type||"").toLowerCase().includes(e)||String(r.entity_type||"").toLowerCase().includes(e)||String(r.error_message||"").toLowerCase().includes(e)||t.includes(e)})},[O,R,P]),et=(0,n.useMemo)(()=>{let e,r,t,a,n,s;let o=L||[],l=O||[];return{transitions:{pending:(e="pending",o.filter(r=>String(r.status).toLowerCase()===e).length),error:(r="error",o.filter(e=>String(e.status).toLowerCase()===r).length),completed:(t="completed",o.filter(e=>String(e.status).toLowerCase()===t).length),total:o.length},events:{pending:(a="pending",l.filter(e=>String(e.status).toLowerCase()===a).length),error:(n="error",l.filter(e=>String(e.status).toLowerCase()===n).length),processed:(s="processed",l.filter(e=>String(e.status).toLowerCase()===s).length),total:l.length}}},[L,O]),ea=(0,n.useCallback)(async()=>{let e=await fetch("/api/admin/workflow-transitions?limit=200"),r=await e.json().catch(()=>null);if(!e.ok)throw Error((null==r?void 0:r.error)||"Erro ao carregar fluxos [".concat(e.status,"]"));z((null==r?void 0:r.transitions)||[])},[]),en=(0,n.useCallback)(async()=>{let e=await fetch("/api/admin/events?limit=200"),r=await e.json().catch(()=>null);if(!e.ok)throw Error((null==r?void 0:r.error)||"Erro ao carregar eventos [".concat(e.status,"]"));Z((null==r?void 0:r.events)||[])},[]),es=(0,n.useCallback)(async()=>{A(!0);try{await Promise.all([ea(),en()])}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao atualizar")}finally{A(!1)}},[ea,en]);(0,n.useEffect)(()=>{es()},[es]),(0,n.useEffect)(()=>{let e=(r.get("tab")||"").toLowerCase(),a=(r.get("status")||"").toLowerCase(),n=r.get("q")||"";("events"===e||"transitions"===e)&&E(e),a&&F(N("events"===e||"transitions"===e?e:t,a)),n&&I(n)},[r]),(0,n.useEffect)(()=>{F(e=>N(t,e))},[t]);let eo=async(e,r)=>{try{let t=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"completed",note:r})}),a=await t.json().catch(()=>null);if(!t.ok)throw Error((null==a?void 0:a.error)||"Falha ao concluir [".concat(t.status,"]"));o.Am.success("Transi\xe7\xe3o conclu\xedda"),await ea()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao concluir transi\xe7\xe3o")}},el=async(e,r)=>{try{let t=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"pending",action:"reopen",note:r})}),a=await t.json().catch(()=>null);if(!t.ok)throw Error((null==a?void 0:a.error)||"Falha ao reabrir [".concat(t.status,"]"));o.Am.success("Transi\xe7\xe3o reaberta"),await ea()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao reabrir transi\xe7\xe3o")}},ei=async(e,r)=>{try{let t=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"pending",action:"resolve_error",note:r})}),a=await t.json().catch(()=>null);if(!t.ok)throw Error((null==a?void 0:a.error)||"Falha ao resolver erro [".concat(t.status,"]"));o.Am.success("Erro resolvido (voltou para pendente)"),await ea()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao resolver erro")}},ec=async(e,r)=>{try{let t=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"error",action:"mark_error",note:r})}),a=await t.json().catch(()=>null);if(!t.ok)throw Error((null==a?void 0:a.error)||"Falha ao marcar erro [".concat(t.status,"]"));o.Am.success("Transi\xe7\xe3o marcada como erro"),await ea()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao marcar erro")}},ed=async(e,r,t)=>{try{let a=await fetch("/api/admin/workflow-transitions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:"pending",action:"reroute",to_area:r,note:t})}),n=await a.json().catch(()=>null);if(!a.ok)throw Error((null==n?void 0:n.error)||"Falha ao encaminhar [".concat(a.status,"]"));o.Am.success("Transi\xe7\xe3o encaminhada"),await ea()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao encaminhar")}},eu=async()=>{try{let e=await fetch("/api/admin/events/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({limit:50})}),r=await e.json().catch(()=>null);if(!e.ok)throw Error((null==r?void 0:r.error)||"Falha ao processar eventos [".concat(e.status,"]"));o.Am.success("Eventos processados: ".concat((null==r?void 0:r.processed)||0," (falhas: ").concat((null==r?void 0:r.failed)||0,")")),await es()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao processar eventos")}},ex=async e=>{try{let r=await fetch("/api/admin/events/reprocess",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),t=await r.json().catch(()=>null);if(!r.ok)throw Error((null==t?void 0:t.error)||"Falha ao reprocessar [".concat(r.status,"]"));o.Am.success("Evento reprocessado"),await es()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao reprocessar evento")}},em=async e=>{try{let r=await fetch("/api/admin/workflow-transitions/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),t=await r.json().catch(()=>null);if(!r.ok)throw Error((null==t?void 0:t.error)||"Falha ao enviar para Kanban [".concat(r.status,"]"));o.Am.success("Enviado para Kanban e marcado como conclu\xeddo"),await es()}catch(e){o.Am.error((null==e?void 0:e.message)||"Falha ao enviar para Kanban")}};return(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-[#0a0f1a] p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-[#001533] dark:text-white",children:"Central de Fluxos"}),(0,a.jsx)("p",{className:"text-[#001533]/60 dark:text-white/60",children:"Visualize a conversa entre \xe1reas (eventos → transi\xe7\xf5es → execu\xe7\xe3o)."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(i.z,{variant:"outline",onClick:es,disabled:T,children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 ".concat(T?"animate-spin":"")}),"Atualizar"]}),(0,a.jsxs)(i.z,{onClick:eu,disabled:T,children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Processar eventos pendentes"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsx)(l.ll,{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Transi\xe7\xf5es"})}),(0,a.jsxs)(l.aY,{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:et.transitions.total}),(0,a.jsxs)("div",{className:"flex gap-2",children:[w("pending"),(0,a.jsx)("span",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:et.transitions.pending})]})]})]}),(0,a.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsx)(l.ll,{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Eventos"})}),(0,a.jsxs)(l.aY,{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:et.events.total}),(0,a.jsxs)("div",{className:"flex gap-2",children:[w("pending"),(0,a.jsx)("span",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:et.events.pending})]})]})]}),(0,a.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsx)(l.ll,{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Erros"})}),(0,a.jsxs)(l.aY,{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-[#001533] dark:text-white",children:et.transitions.error+et.events.error}),(0,a.jsx)(p.Z,{className:"w-5 h-5 text-red-500"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-start md:items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{variant:"pending"===R?"default":"outline",onClick:()=>F("pending"),children:"Pendentes"}),(0,a.jsx)(i.z,{variant:"error"===R?"default":"outline",onClick:()=>F("error"),children:"Erros"}),(0,a.jsx)(i.z,{variant:"completed"===R||"processed"===R?"default":"outline",onClick:()=>F("transitions"===t?"completed":"processed"),children:"OK"}),(0,a.jsx)(i.z,{variant:"all"===R?"default":"outline",onClick:()=>F("all"),children:"Todos"})]}),(0,a.jsx)(x.II,{value:P,onChange:e=>I(e.target.value),placeholder:"Buscar (\xe1rea, evento, erro...)",className:"max-w-md"})]}),(0,a.jsxs)(d.mQ,{value:t,defaultValue:t,onValueChange:e=>E(e),children:[(0,a.jsxs)(d.dr,{children:[(0,a.jsx)(d.SP,{value:"transitions",children:"Transi\xe7\xf5es"}),(0,a.jsx)(d.SP,{value:"events",children:"Eventos"})]}),(0,a.jsx)(d.nU,{value:"transitions",className:"mt-4",children:(0,a.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Workflow Transitions"})}),(0,a.jsx)(l.aY,{className:"space-y-3",children:0===ee.length?(0,a.jsx)("div",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"Nenhuma transi\xe7\xe3o encontrada."}):(0,a.jsx)("div",{className:"space-y-2",children:ee.map(e=>(()=>{let r=k(e),t=C(e.data_payload),n=t.executed_at||t.executed_by?"Executado".concat(t.executed_at?" em ".concat(new Date(t.executed_at).toLocaleString("pt-BR")):"").concat(t.executed_by?" por ".concat(String(t.executed_by).slice(0,8),"…"):""):null,s=t.reopened_at||t.reopened_by?"Reaberto".concat(t.reopened_at?" em ".concat(new Date(t.reopened_at).toLocaleString("pt-BR")):"").concat(t.reopened_by?" por ".concat(String(t.reopened_by).slice(0,8),"…"):""):null,l=t.error_resolved_at||t.error_resolved_by?"Erro resolvido".concat(t.error_resolved_at?" em ".concat(new Date(t.error_resolved_at).toLocaleString("pt-BR")):"").concat(t.error_resolved_by?" por ".concat(String(t.error_resolved_by).slice(0,8),"…"):""):null,d=t.marked_error_at||t.marked_error_by?"Marcado erro".concat(t.marked_error_at?" em ".concat(new Date(t.marked_error_at).toLocaleString("pt-BR")):"").concat(t.marked_error_by?" por ".concat(String(t.marked_error_by).slice(0,8),"…"):""):null,u=t.rerouted_at||t.rerouted_by?"Encaminhado".concat(t.rerouted_at?" em ".concat(new Date(t.rerouted_at).toLocaleString("pt-BR")):"").concat(t.rerouted_by?" por ".concat(String(t.rerouted_by).slice(0,8),"…"):""):null;return(0,a.jsxs)("div",{className:"p-4 rounded-xl border border-[#001533]/10 dark:border-white/10 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsxs)("span",{className:"font-semibold text-[#001533] dark:text-white",children:[e.from_area," → ",e.to_area]}),w(String(e.status)),(0,a.jsx)(c.C,{variant:"outline",children:e.trigger_event}),t.client_id?(0,a.jsx)(c.C,{variant:"outline",children:"Cliente"}):null,t.proposal_id?(0,a.jsx)(c.C,{variant:"outline",children:"Proposta"}):null,t.contract_id?(0,a.jsx)(c.C,{variant:"outline",children:"Contrato"}):null,t.invoice_id?(0,a.jsx)(c.C,{variant:"outline",children:"Fatura"}):null]}),(0,a.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[new Date(e.created_at).toLocaleString("pt-BR"),e.error_message?" • ".concat(e.error_message):"",n?" • ".concat(n):"",t.completed_note?" • Nota: ".concat(String(t.completed_note).slice(0,120)):"",s?" • ".concat(s):"",t.reopened_note?" • Motivo: ".concat(String(t.reopened_note).slice(0,120)):"",l?" • ".concat(l):"",t.error_resolved_note?" • Motivo: ".concat(String(t.error_resolved_note).slice(0,120)):"",d?" • ".concat(d):"",t.marked_error_note?" • Motivo: ".concat(String(t.marked_error_note).slice(0,120)):"",u?" • ".concat(u):"",t.rerouted_to_area?" • Para: ".concat(String(t.rerouted_to_area)):"",t.rerouted_note?" • Motivo: ".concat(String(t.rerouted_note).slice(0,120)):""]}),t.client_id||t.proposal_id||t.contract_id||t.invoice_id||t.correlation_id?(0,a.jsxs)("div",{className:"text-[11px] text-[#001533]/50 dark:text-white/50 space-x-2",children:[t.client_id?(0,a.jsxs)("span",{children:["client_id: ",String(t.client_id).slice(0,10),"…"]}):null,t.proposal_id?(0,a.jsxs)("span",{children:["proposal_id: ",String(t.proposal_id).slice(0,10),"…"]}):null,t.contract_id?(0,a.jsxs)("span",{children:["contract_id: ",String(t.contract_id).slice(0,10),"…"]}):null,t.invoice_id?(0,a.jsxs)("span",{children:["invoice_id: ",String(t.invoice_id).slice(0,10),"…"]}):null,t.correlation_id?(0,a.jsxs)("span",{children:["corr: ",String(t.correlation_id).slice(0,10),"…"]}):null]}):null]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[(0,a.jsxs)(i.z,{variant:"outline",onClick:async()=>{try{let r=e.data_payload||{},a={transition_id:e.id,from_area:e.from_area,to_area:e.to_area,trigger_event:e.trigger_event,client_id:t.client_id,proposal_id:t.proposal_id,contract_id:t.contract_id,invoice_id:t.invoice_id,correlation_id:t.correlation_id,source_event_id:t.source_event_id,kanban_task_id:r.kanban_task_id||r.task_id||null,kanban_board_id:r.kanban_board_id||r.board_id||null};await navigator.clipboard.writeText(JSON.stringify(a,null,2)),o.Am.success("IDs copiados")}catch(e){o.Am.error("Falha ao copiar")}},children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Copiar IDs"]}),(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>D(e),children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Hist\xf3rico"]}),(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>B({title:"Payload • ".concat(e.trigger_event),json:e.data_payload}),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Payload"]}),r?(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>window.location.assign(r),children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Abrir no Kanban"]}):null,(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>em(e.id),disabled:"pending"!==String(e.status).toLowerCase(),children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Enviar para Kanban"]}),(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>J({id:e.id,note:String(t.completed_note||"")}),disabled:"completed"===String(e.status).toLowerCase(),children:[(0,a.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"Concluir"]}),(0,a.jsx)(i.z,{variant:"outline",onClick:()=>q({id:e.id,note:String(t.reopened_note||"")}),disabled:"completed"!==String(e.status).toLowerCase(),children:"Reabrir"}),(0,a.jsx)(i.z,{variant:"outline",onClick:()=>$({id:e.id,note:String(t.error_resolved_note||"")}),disabled:"error"!==String(e.status).toLowerCase(),children:"Resolver erro"}),(0,a.jsx)(i.z,{variant:"outline",onClick:()=>G({id:e.id,toArea:String(e.to_area||""),note:String(t.rerouted_note||"")}),disabled:"pending"!==String(e.status).toLowerCase(),children:"Encaminhar"}),(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>Q({id:e.id,note:String(t.marked_error_note||"")}),disabled:"error"===String(e.status).toLowerCase(),children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Erro"]})]})]},e.id)})())})})]})}),(0,a.jsx)(d.nU,{value:"events",className:"mt-4",children:(0,a.jsxs)(l.Zb,{className:"border-[#001533]/10 dark:border-white/10",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Event Log"})}),(0,a.jsx)(l.aY,{className:"space-y-3",children:0===er.length?(0,a.jsx)("div",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"Nenhum evento encontrado."}):(0,a.jsx)("div",{className:"space-y-2",children:er.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl border border-[#001533]/10 dark:border-white/10 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"font-semibold text-[#001533] dark:text-white",children:e.event_type}),w(String(e.status)),e.entity_type?(0,a.jsx)(c.C,{variant:"outline",children:e.entity_type}):null]}),(0,a.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[new Date(e.created_at).toLocaleString("pt-BR"),e.error_message?" • ".concat(e.error_message):""]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>B({title:"Payload • ".concat(e.event_type),json:e.payload}),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Payload"]}),(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>ex(e.id),disabled:"error"!==String(e.status).toLowerCase(),children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Reprocessar"]})]})]},e.id))})})]})})]}),(0,a.jsx)(u.Vq,{open:!!K,onOpenChange:e=>e?null:D(null),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[900px]",children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:"Hist\xf3rico da transi\xe7\xe3o"})}),K?(()=>{let{ids:e,items:r}=function(e){let r=(null==e?void 0:e.data_payload)||{},t=C(r),a=[];for(let n of(a.push({at:e.created_at,label:"Criado",by:e.created_by,extra:{from:e.from_area,to:e.to_area,trigger:e.trigger_event}}),(t.marked_error_at||t.marked_error_note)&&a.push({at:t.marked_error_at,label:"Marcado como erro",by:t.marked_error_by,note:t.marked_error_note}),(t.error_resolved_at||t.error_resolved_note)&&a.push({at:t.error_resolved_at,label:"Erro resolvido (volta p/ pendente)",by:t.error_resolved_by,note:t.error_resolved_note}),(t.reopened_at||t.reopened_note)&&a.push({at:t.reopened_at,label:"Reaberto",by:t.reopened_by,note:t.reopened_note}),(t.rerouted_at||t.rerouted_note)&&a.push({at:t.rerouted_at,label:"Encaminhado",by:t.rerouted_by,note:t.rerouted_note,extra:{from:t.rerouted_from_area,to:t.rerouted_to_area}}),(t.executed_at||r.kanban_task_id||r.kanban_board_id)&&a.push({at:t.executed_at,label:"Executado (Kanban)",by:t.executed_by,extra:{kanban_task_id:r.kanban_task_id,kanban_board_id:r.kanban_board_id}}),(t.completed_note||e.completed_at)&&a.push({at:t.completed_at||e.completed_at,label:"Conclu\xeddo (manual)",by:t.completed_by||r.completed_by,note:t.completed_note}),t.previous_executions||[]))n&&a.push({at:n.executed_at||n.at,label:"Execu\xe7\xe3o anterior (resetada)",by:n.executed_by||n.by,note:n.note,extra:{kanban_task_id:n.kanban_task_id,kanban_board_id:n.kanban_board_id,reason:n.reason,action:n.action}});for(let e of t.reroute_history||[])e&&a.push({at:e.rerouted_at||e.at,label:"Encaminhamento (hist\xf3rico)",by:e.rerouted_by||e.by,note:e.rerouted_note||e.note,extra:{from:e.from_area||e.from,to:e.to_area||e.to}});let n=a.map(e=>{let r=e.at?new Date(String(e.at)).getTime():NaN;return{...e,__ts:r}});return n.sort((e,r)=>(Number.isNaN(e.__ts)?Number.POSITIVE_INFINITY:e.__ts)-(Number.isNaN(r.__ts)?Number.POSITIVE_INFINITY:r.__ts)),{ids:t,items:n}}(K),t=k(K),n=K.data_payload||{};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[(0,a.jsxs)("span",{className:"font-semibold text-[#001533] dark:text-white",children:[K.from_area," → ",K.to_area]})," ","• ",K.trigger_event," • ",w(String(K.status))]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[t?(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>window.location.assign(t),children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Abrir no Kanban"]}):null,(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>B({title:"Payload • ".concat(K.trigger_event),json:n}),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Ver payload"]})]})]}),(0,a.jsxs)("div",{className:"text-[11px] text-[#001533]/50 dark:text-white/50 space-x-2",children:[(0,a.jsxs)("span",{children:["transition_id: ",K.id.slice(0,10),"…"]}),e.client_id?(0,a.jsxs)("span",{children:["client_id: ",String(e.client_id).slice(0,10),"…"]}):null,e.proposal_id?(0,a.jsxs)("span",{children:["proposal_id: ",String(e.proposal_id).slice(0,10),"…"]}):null,e.contract_id?(0,a.jsxs)("span",{children:["contract_id: ",String(e.contract_id).slice(0,10),"…"]}):null,e.invoice_id?(0,a.jsxs)("span",{children:["invoice_id: ",String(e.invoice_id).slice(0,10),"…"]}):null,e.correlation_id?(0,a.jsxs)("span",{children:["corr: ",String(e.correlation_id).slice(0,10),"…"]}):null,e.source_event_id?(0,a.jsxs)("span",{children:["source_event_id: ",String(e.source_event_id).slice(0,10),"…"]}):null]}),(0,a.jsx)("div",{className:"space-y-2 max-h-[60vh] overflow-auto pr-1",children:0===r.length?(0,a.jsx)("div",{className:"text-sm text-[#001533]/60 dark:text-white/60",children:"Sem hist\xf3rico."}):r.map((e,r)=>(0,a.jsxs)("div",{className:"rounded-lg border border-[#001533]/10 dark:border-white/10 p-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-[#001533] dark:text-white",children:e.label}),(0,a.jsxs)("div",{className:"text-xs text-[#001533]/60 dark:text-white/60",children:[S(e.at)?S(e.at):"—",e.by?" • ".concat(function(e){if(!e)return null;let r=String(e);return r.length>10?"".concat(r.slice(0,8),"…"):r}(e.by)):""]})]}),e.note?(0,a.jsx)("div",{className:"text-xs text-[#001533]/70 dark:text-white/70 mt-1 whitespace-pre-wrap",children:String(e.note)}):null,e.extra?(0,a.jsx)("pre",{className:"text-[11px] bg-black/5 dark:bg-white/5 rounded-lg p-2 mt-2 overflow-auto",children:JSON.stringify(e.extra,null,2)}):null]},r))})]})})():null]})}),(0,a.jsx)(u.Vq,{open:!!V,onOpenChange:e=>e?null:B(null),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[900px]",children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:(null==V?void 0:V.title)||"Payload"})}),(0,a.jsx)("pre",{className:"text-xs bg-black/5 dark:bg-white/5 rounded-lg p-4 overflow-auto max-h-[70vh]",children:JSON.stringify(null!==(e=null==V?void 0:V.json)&&void 0!==e?e:{},null,2)})]})}),(0,a.jsx)(u.Vq,{open:!!M,onOpenChange:e=>e?null:J(null),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:"Concluir transi\xe7\xe3o"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Escreva uma nota curta explicando a resolu\xe7\xe3o (fica salva no Hub)."}),(0,a.jsx)("textarea",{value:(null==M?void 0:M.note)||"",onChange:e=>J(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: revisado com cliente, cl\xe1usulas ajustadas e enviado para assinatura."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>J(null),children:"Cancelar"}),(0,a.jsx)(i.z,{onClick:async()=>{if(!M)return;let{id:e,note:r}=M;J(null),await eo(e,r||"")},children:"Concluir"})]})]})]})}),(0,a.jsx)(u.Vq,{open:!!H,onOpenChange:e=>e?null:q(null),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:"Reabrir transi\xe7\xe3o"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:"Descreva o motivo da reabertura (fica salvo no Hub)."}),(0,a.jsx)("textarea",{value:(null==H?void 0:H.note)||"",onChange:e=>q(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: pend\xeancia de assinatura, cliente pediu ajuste, dados inconsistentes."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>q(null),children:"Cancelar"}),(0,a.jsx)(i.z,{onClick:async()=>{if(!H)return;let{id:e,note:r}=H;q(null),await el(e,r||"")},children:"Reabrir"})]})]})]})}),(0,a.jsx)(u.Vq,{open:!!Y,onOpenChange:e=>e?null:$(null),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:"Resolver erro"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:["Descreva como o erro foi resolvido. A transi\xe7\xe3o volta para ",(0,a.jsx)("b",{children:"pendente"}),"."]}),(0,a.jsx)("textarea",{value:(null==Y?void 0:Y.note)||"",onChange:e=>$(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: corrigido payload, ajustado cliente_id, reprocessado com sucesso."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>$(null),children:"Cancelar"}),(0,a.jsx)(i.z,{onClick:async()=>{if(!Y)return;let{id:e,note:r}=Y;$(null),await ei(e,r||"")},children:"Voltar para pendente"})]})]})]})}),(0,a.jsx)(u.Vq,{open:!!U,onOpenChange:e=>e?null:Q(null),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:"Marcar como erro"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:["Informe o motivo do erro (fica salvo no Hub e vira o ",(0,a.jsx)("b",{children:"error_message"})," da transi\xe7\xe3o)."]}),(0,a.jsx)("textarea",{value:(null==U?void 0:U.note)||"",onChange:e=>Q(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: faltou client_id no payload, erro na cria\xe7\xe3o de contrato, dados inv\xe1lidos."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>Q(null),children:"Cancelar"}),(0,a.jsx)(i.z,{onClick:async()=>{if(!U)return;let{id:e,note:r}=U;Q(null),await ec(e,r||"")},children:"Marcar erro"})]})]})]})}),(0,a.jsx)(u.Vq,{open:!!W,onOpenChange:e=>e?null:G(null),children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[700px]",children:[(0,a.jsx)(u.fK,{children:(0,a.jsx)(u.$N,{children:"Encaminhar transi\xe7\xe3o"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-sm text-[#001533]/70 dark:text-white/70",children:["Selecione a \xe1rea destino e descreva o motivo. A transi\xe7\xe3o permanece ",(0,a.jsx)("b",{children:"pendente"}),"."]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-gray-500 block uppercase tracking-wider",children:"\xc1rea destino"}),(0,a.jsx)("select",{value:(null==W?void 0:W.toArea)||"",onChange:e=>G(r=>r?{...r,toArea:e.target.value}:r),className:"w-full px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",children:X.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsx)("textarea",{value:(null==W?void 0:W.note)||"",onChange:e=>G(r=>r?{...r,note:e.target.value}:r),className:"w-full min-h-[120px] px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-white/5 dark:border-white/10",placeholder:"Ex.: an\xe1lise indica que pertence ao Financeiro, precisa validar cobran\xe7a antes de seguir."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>G(null),children:"Cancelar"}),(0,a.jsx)(i.z,{onClick:async()=>{if(!W)return;let{id:e,toArea:r,note:t}=W;G(null),await ed(e,r,t||"")},children:"Encaminhar"})]})]})]})})]})})}function T(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"p-6 text-sm text-[#001533]/60 dark:text-white/60",children:"Carregando…"}),children:(0,a.jsx)(E,{})})}},69174:function(e,r,t){"use strict";t.d(r,{C:function(){return l}});var a=t(57437);t(2265);var n=t(90535),s=t(93448);let o=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-valle-blue-600 text-white",secondary:"border-transparent bg-valle-silver-300 text-valle-navy-800",outline:"text-valle-navy-700 border-valle-silver-400",success:"border-transparent bg-green-600 text-white",warning:"border-transparent bg-yellow-600 text-white",danger:"border-transparent bg-red-600 text-white"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(o({variant:t}),r),...n})}},12381:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var a=t(57437),n=t(2265),s=t(90535),o=t(93448);let l=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-valle-blue-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gradient-to-r from-valle-blue-600 to-valle-blue-700 text-white hover:from-valle-blue-700 hover:to-valle-blue-800 shadow-lg",secondary:"bg-valle-silver-200 text-valle-navy-800 hover:bg-valle-silver-300",outline:"border-2 border-valle-blue-600 text-valle-blue-600 hover:bg-valle-blue-50",ghost:"hover:bg-valle-blue-50 hover:text-valle-blue-600",danger:"bg-red-600 text-white hover:bg-red-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=n.forwardRef((e,r)=>{let{className:t,variant:n,size:s,...i}=e;return(0,a.jsx)("button",{className:(0,o.cn)(l({variant:n,size:s,className:t})),ref:r,...i})});i.displayName="Button"},79820:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return i}});var a=t(57437),n=t(2265),s=t(93448);let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border-2 border-valle-silver-200 bg-white shadow-md",t),...n})});o.displayName="Card";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight text-lg",t),...n})});i.displayName="CardTitle";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-foreground/70",t),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},74291:function(e,r,t){"use strict";t.d(r,{$N:function(){return c},Be:function(){return d},Vq:function(){return o},a7:function(){return u},cN:function(){return x},cZ:function(){return l},fK:function(){return i}});var a=t(57437),n=t(32489),s=t(2265);function o(e){let{open:r,onOpenChange:t,children:n}=e;return((0,s.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),r)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>t(!1)}),(0,a.jsx)("div",{className:"relative z-50 w-full max-w-4xl max-h-[90vh] overflow-y-auto mx-4",children:n})]}):null}function l(e){let{children:r,onClose:t,className:s}=e;return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-800 ".concat(s||""),children:[t&&(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})}),r]})}function i(e){let{children:r}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800",children:r})}function c(e){let{children:r}=e;return(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r})}function d(e){let{children:r}=e;return(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:r})}function u(e){let{children:r}=e;return(0,a.jsx)("div",{className:"px-6 py-4",children:r})}function x(e){let{children:r,className:t}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex items-center justify-end gap-3 ".concat(t||""),children:r})}},40279:function(e,r,t){"use strict";t.d(r,{II:function(){return h}});var a=t(57437),n=t(2265),s=t(57586),o=t(26892),l=t(51817),i=t(32489),c=t(87769),d=t(42208),u=t(49322),x=t(41671);let m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-4 py-3 text-base"},h=(0,n.forwardRef)((e,r)=>{let{label:t,error:h,success:p,hint:v,icon:f,iconPosition:g="left",size:b="md",variant:_="default",loading:y=!1,clearable:j=!1,onClear:w,className:N="",type:k="text",disabled:C,value:S,...E}=e,[T,A]=(0,n.useState)(!1),[L,z]=(0,n.useState)(!1),O="password"===k,Z=O&&T?"text":k,R="\n    w-full rounded-xl border transition-all duration-200\n    ".concat(m[b],"\n    ").concat(f&&"left"===g?"pl-10":"","\n    ").concat(f&&"right"===g?"pr-10":"","\n    ").concat(O||j||y?"pr-10":"","\n    ").concat(C?"opacity-50 cursor-not-allowed":"","\n  "),F=h?"border-red-500 focus:border-red-500 focus:ring-red-500/20":p?"border-green-500 focus:border-green-500 focus:ring-green-500/20":"";return(0,a.jsxs)("div",{className:"space-y-1 ".concat(N),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:t}),(0,a.jsxs)("div",{className:"relative",children:[f&&"left"===g&&(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:L?"var(--primary-500)":"var(--text-tertiary)"},children:f}),(0,a.jsx)("input",{ref:r,type:Z,value:S,disabled:C||y,onFocus:e=>{var r;z(!0),null===(r=E.onFocus)||void 0===r||r.call(E,e)},onBlur:e=>{var r;z(!1),null===(r=E.onBlur)||void 0===r||r.call(E,e)},className:"".concat(R," ").concat({default:"\n      bg-white dark:bg-gray-900\n      border-gray-200 dark:border-gray-700\n      focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20\n    ",filled:"\n      bg-gray-100 dark:bg-gray-800\n      border-transparent\n      focus:bg-white dark:focus:bg-gray-900\n      focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20\n    ",outlined:"\n      bg-transparent\n      border-gray-300 dark:border-gray-600\n      focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20\n    "}[_]," ").concat(F),style:{color:"var(--text-primary)",backgroundColor:"filled"===_?"var(--bg-secondary)":"var(--bg-primary)"},...E}),(0,a.jsxs)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[y&&(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin",style:{color:"var(--text-tertiary)"}}),j&&void 0!==S&&""!==S&&!y&&(0,a.jsx)("button",{type:"button",onClick:w,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800",children:(0,a.jsx)(i.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}})}),O&&!y&&(0,a.jsx)("button",{type:"button",onClick:()=>A(!T),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800",children:T?(0,a.jsx)(c.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}}):(0,a.jsx)(d.Z,{className:"w-4 h-4",style:{color:"var(--text-tertiary)"}})}),f&&"right"===g&&!O&&!j&&!y&&(0,a.jsx)("div",{style:{color:L?"var(--primary-500)":"var(--text-tertiary)"},children:f}),h&&!y&&(0,a.jsx)(u.Z,{className:"w-4 h-4",style:{color:"var(--error-500)"}}),p&&!h&&!y&&(0,a.jsx)(x.Z,{className:"w-4 h-4",style:{color:"var(--success-500)"}})]})]}),(0,a.jsxs)(s.M,{mode:"wait",children:[h&&(0,a.jsx)(o.E.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"text-xs",style:{color:"var(--error-500)"},children:h}),p&&!h&&(0,a.jsx)(o.E.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"text-xs",style:{color:"var(--success-500)"},children:p}),v&&!h&&!p&&(0,a.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:v})]})]})});h.displayName="Input",(0,n.forwardRef)((e,r)=>{let{label:t,error:n,hint:s,size:o="md",className:l="",disabled:i,...c}=e;return(0,a.jsxs)("div",{className:"space-y-1 ".concat(l),children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:t}),(0,a.jsx)("textarea",{ref:r,disabled:i,className:"\n          w-full rounded-xl border transition-all duration-200 resize-none\n          ".concat({sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-sm",lg:"px-4 py-4 text-base"}[o],"\n          ").concat(n?"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20","\n          ").concat(i?"opacity-50 cursor-not-allowed":"","\n        "),style:{color:"var(--text-primary)",backgroundColor:"var(--bg-primary)"},...c}),n&&(0,a.jsx)("p",{className:"text-xs",style:{color:"var(--error-500)"},children:n}),s&&!n&&(0,a.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:s})]})}).displayName="Textarea"},17168:function(e,r,t){"use strict";t.d(r,{SP:function(){return c},dr:function(){return i},mQ:function(){return l},nU:function(){return d}});var a=t(57437),n=t(2265),s=t(93448);let o=n.createContext(void 0);function l(e){var r;let{defaultValue:t,value:l,onValueChange:i,children:c,className:d}=e;if(void 0===l&&void 0===t)throw Error("Tabs requires either `value` (controlled) or `defaultValue` (uncontrolled).");let u=null!==(r=null!=l?l:t)&&void 0!==r?r:"",[x,m]=n.useState(u);return n.useEffect(()=>{void 0!==l&&m(l)},[l]),(0,a.jsx)(o.Provider,{value:{activeTab:x,setActiveTab:e=>{void 0===l&&m(e),null==i||i(e)}},children:(0,a.jsx)("div",{className:(0,s.cn)("",d),children:c})})}function i(e){let{children:r,className:t}=e;return(0,a.jsx)("div",{className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-800 p-1 text-gray-600 dark:text-gray-400",t),children:r})}function c(e){let{value:r,children:t,className:l}=e,i=n.useContext(o);if(!i)throw Error("TabsTrigger must be used within Tabs");let{activeTab:c,setActiveTab:d}=i,u=c===r;return(0,a.jsx)("button",{type:"button",onClick:()=>d(r),className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",u?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",l),children:t})}function d(e){let{value:r,children:t,className:l}=e,i=n.useContext(o);if(!i)throw Error("TabsContent must be used within Tabs");let{activeTab:c}=i;return c!==r?null:(0,a.jsx)("div",{className:(0,s.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2",l),children:t})}},93448:function(e,r,t){"use strict";t.d(r,{cn:function(){return s},x:function(){return o}});var a=t(61994),n=t(53335);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,a.W)(r))}function o(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}}},function(e){e.O(0,[2882,6137,4438,3761,2971,2117,1744],function(){return e(e.s=65486)}),_N_E=e.O()}]);