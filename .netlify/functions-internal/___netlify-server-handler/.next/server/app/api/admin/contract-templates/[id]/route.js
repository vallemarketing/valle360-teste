"use strict";(()=>{var e={};e.id=52962,e.ids=[52962],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},3666:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>I,requestAsyncStorage:()=>g,routeModule:()=>x,serverHooks:()=>E,staticGenerationAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{DELETE:()=>m,GET:()=>l,dynamic:()=>d});var a=r(49303),o=r(88716),n=r(60670),i=r(87070),c=r(54128),u=r(17478);let p=(0,c.eI)("https://ikjgsqtykkhqimypacro.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY),d="force-dynamic";async function l(e,{params:t}){let r=await (0,u.k)(e);if(!r.ok)return r.res;try{let{id:e}=t,{data:r,error:s}=await p.from("contract_templates").select("*").eq("id",e).single();if(s||!r)return i.NextResponse.json({success:!1,error:"Template n\xe3o encontrado"},{status:404});return i.NextResponse.json({success:!0,template:r})}catch(e){return console.error("Error in GET /api/admin/contract-templates/[id]:",e),i.NextResponse.json({success:!1,error:e.message||"Erro interno"},{status:500})}}async function m(e,{params:t}){let r=await (0,u.k)(e);if(!r.ok)return r.res;try{let{id:e}=t,{error:r}=await p.from("contract_templates").delete().eq("id",e);if(r)return console.error("Error deleting template:",r),i.NextResponse.json({success:!1,error:"Erro ao excluir template"},{status:500});return i.NextResponse.json({success:!0,message:"Template exclu\xeddo com sucesso"})}catch(e){return console.error("Error in DELETE /api/admin/contract-templates/[id]:",e),i.NextResponse.json({success:!1,error:e.message||"Erro interno"},{status:500})}}let x=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/contract-templates/[id]/route",pathname:"/api/admin/contract-templates/[id]",filename:"route",bundlePath:"app/api/admin/contract-templates/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Downloads\\valle-360-main\\valle-360-main\\src\\app\\api\\admin\\contract-templates\\[id]\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:E}=x,k="/api/admin/contract-templates/[id]/route";function I(){return(0,n.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:h})}},17478:(e,t,r)=>{r.d(t,{k:()=>i});var s=r(87070),a=r(20344),o=r(71615),n=r(54128);async function i(e){let t=(0,o.cookies)(),r=(0,a.createRouteHandlerClient)({cookies:()=>t}),i=e.headers.get("authorization")||"",c=i.toLowerCase().startsWith("bearer ")?i.slice(7).trim():null,u=c?(0,n.eI)("https://ikjgsqtykkhqimypacro.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI",{global:{headers:{Authorization:`Bearer ${c}`}},auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}):r,{data:p}=await u.auth.getUser();if(!p.user?.id)return{ok:!1,res:s.NextResponse.json({error:"N\xe3o autorizado"},{status:401})};let{data:d,error:l}=await u.rpc("is_admin");return l||!d?{ok:!1,res:s.NextResponse.json({error:"Acesso negado (admin)"},{status:403})}:{ok:!0,userId:p.user.id}}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[89276,55972,54128,20958],()=>r(3666));module.exports=s})();