(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9339],{35848:function(e,t,s){Promise.resolve().then(s.bind(s,78431))},33327:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},10407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},58896:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},70525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},78431:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(57437),r=s(2265),l=s(5526),i=s(58896),n=s(99397),c=s(33327),d=s(70525),o=s(10407),m=s(41671),u=s(91723),x=s(31047),h=s(26892);function p(){var e;let[t,s]=(0,r.useState)([]),[p,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(!0);(0,r.useEffect)(()=>{y()},[]);let y=async()=>{try{var e;let{data:{user:t}}=await l.supabase.auth.getUser();if(!t)return;let{data:a}=await l.supabase.from("employees").select("id").eq("user_id",t.id).single();if(!a)return;let{data:r}=await l.supabase.from("employee_career_path").select("*").eq("employee_id",a.id).single();g(r);let{data:i}=await l.supabase.auth.getSession(),n=null===(e=i.session)||void 0===e?void 0:e.access_token;if(!n){s([]);return}let c=await fetch("/api/goals?collaborator_id=".concat(encodeURIComponent(String(a.id)),"&status=active"),{headers:{Authorization:"Bearer ".concat(n)},cache:"no-store"}),d=await c.json().catch(()=>null);if(!c.ok||!(null==d?void 0:d.success)){s([]);return}let o=(d.data||[])[0],m=(null==o?void 0:o.goals)||{},u=(null==o?void 0:o.period_end)?new Date(String(o.period_end)):new Date,x=Object.entries(m).map((e,t)=>{let[s,a]=e,r=Number((null==a?void 0:a.target)||0),l=Number((null==a?void 0:a.current)||0);return{id:"".concat((null==o?void 0:o.id)||"goal",":").concat(s,":").concat(t),title:s,description:(null==o?void 0:o.ai_reasoning)?String(o.ai_reasoning):"Meta definida pelo sistema",type:"short_term",progress:r>0?Math.min(100,Math.round(l/r*100)):0,target:r,unit:String((null==a?void 0:a.unit)||""),deadline:u,status:"active",created_at:(null==o?void 0:o.created_at)?new Date(String(o.created_at)):new Date}});s(x)}catch(e){console.error("Erro ao carregar metas:",e)}finally{b(!1)}};if(f)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4370d1] mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando suas metas..."})]})});let j=e=>{let t={short_term:{label:"Curto Prazo",color:"bg-green-100 text-green-800"},medium_term:{label:"M\xe9dio Prazo",color:"bg-yellow-100 text-yellow-800"},long_term:{label:"Longo Prazo",color:"bg-blue-100 text-blue-800"}};return t[e]||t.short_term},v=e=>{let t=new Date;return Math.ceil((e.getTime()-t.getTime())/864e5)};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(i.Z,{className:"w-8 h-8 text-[#4370d1]"}),"Minhas Metas"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Acompanhe seu desenvolvimento profissional"})]}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-[#4370d1] text-white rounded-lg hover:bg-[#0f1b35] transition-all flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4"}),"Nova Meta"]})]}),p&&(0,a.jsxs)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-8 text-white",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-7 h-7"}),"Seu Plano de Carreira"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white/80 text-sm mb-1",children:"N\xedvel Atual"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:p.current_level})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white/80 text-sm mb-1",children:"Meta"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:p.target_position})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,a.jsx)("span",{children:"Progresso Geral"}),(0,a.jsxs)("span",{className:"font-bold",children:[Math.round(p.overall_progress||0),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-white/20 rounded-full h-3",children:(0,a.jsx)(h.E.div,{initial:{width:0},animate:{width:"".concat(p.overall_progress||0,"%")},transition:{duration:1},className:"bg-white h-3 rounded-full"})})]}),(null===(e=p.ai_suggested_next_steps)||void 0===e?void 0:e.length)>0&&(0,a.jsxs)("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Pr\xf3ximos Passos Sugeridos pela IA"]}),(0,a.jsx)("ul",{className:"space-y-2",children:p.ai_suggested_next_steps.slice(0,3).map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:e.action||e})]},t))})]})]}),["short_term","medium_term","long_term"].map(e=>{let s=t.filter(t=>t.type===e);if(0===s.length)return null;let r=j(e);return(0,a.jsxs)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(r.color),children:r.label})}),(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>{let t=v(e.deadline),s=t<0,r=t<=7&&t>0;return(0,a.jsxs)("div",{className:"p-5 bg-gray-50 rounded-xl border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 text-lg mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,a.jsx)("div",{className:"text-right",children:"completed"===e.status?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3"}),"Conclu\xedda"]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ".concat(s?"bg-red-100 text-red-800":r?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:[(0,a.jsx)(u.Z,{className:"w-3 h-3"}),s?"Atrasada":r?"Urgente":"".concat(t," dias")]})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsx)("span",{children:"Progresso"}),(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:[e.progress," / ",e.target," ",e.unit]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)(h.E.div,{initial:{width:0},animate:{width:"".concat(e.progress/e.target*100,"%")},transition:{duration:.5},className:"h-3 rounded-full ".concat(e.progress>=e.target?"bg-green-500":e.progress/e.target>=.75?"bg-blue-500":e.progress/e.target>=.5?"bg-yellow-500":"bg-red-500")})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3"}),"Prazo: ",e.deadline.toLocaleDateString("pt-BR")]}),(0,a.jsxs)("span",{children:[Math.round(e.progress/e.target*100),"% completo"]})]})]},e.id)})})]},e)})]})})}},5526:function(e,t,s){"use strict";s.r(t),s.d(t,{supabase:function(){return i}});var a=s(62724);let r="https://ikjgsqtykkhqimypacro.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlramdzcXR5a2tocWlteXBhY3JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTE4OTksImV4cCI6MjA3ODc4Nzg5OX0.vgVCpFIt-5ajFhcXg65dqrEw915pqW8fGZ8xgJxrnxI";r&&l||console.error("‚ùå ERRO CR\xcdTICO: Vari\xe1veis de ambiente NEXT_PUBLIC_SUPABASE_URL ou NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o encontradas!");let i=(0,a.eI)(r||"https://setup-missing.supabase.co",l||"setup-missing",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[2882,4609,2724,2971,2117,1744],function(){return e(e.s=35848)}),_N_E=e.O()}]);